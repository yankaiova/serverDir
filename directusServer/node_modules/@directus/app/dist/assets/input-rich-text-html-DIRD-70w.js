import{o as $F,p as xq,q as jq,t as BF,u as Gq,v as qq,w as tG,x as Kq,_ as Yq}from"./index.CkaPYycP.entry.js";import{w as My,e as Rq,bs as Mq,f as Tl,n as Tq,l as Xq,aZ as Jq,d as Qq,b as eK,h as Eq,c as q2,be as Wi,bf as tK,b5 as pf,aj as Ry,ah as VR,u as Bn,aW as kq,bo as ei,ai as zR,y as Pr,bH as rl,ao as UR,ak as Er,aO as C1,bJ as _q,J as nG}from"./runtime-core.esm-bundler-BIDPbtkS.js";import{useI18n as nK}from"./vue-i18n.CbdUlhRS.entry.js";import{c as ti}from"./index-DQ2f5FNW.js";import"./vue.runtime.esm-bundler-CQgeFuBy.js";import"./pinia.U-iWqNCJ.entry.js";import"./vue-router.C8ykGufy.entry.js";var oK=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCommentChange","onCompositionEnd","onCompositionStart","onCompositionUpdate","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onInput","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],sK=function(ht){return oK.map(function(_n){return _n.toLowerCase()}).indexOf(ht.toLowerCase())!==-1},rK=function(ht,_n,jt){Object.keys(_n).filter(sK).forEach(function(un){var Ct=_n[un];typeof Ct=="function"&&(un==="onInit"?Ct(ht,jt):jt.on(un.substring(2),function(Gt){return Ct(Gt,jt)}))})},cK=function(ht,_n,jt,un){var Ct=ht.modelEvents?ht.modelEvents:null,Gt=Array.isArray(Ct)?Ct.join(" "):Ct;My(un,function(Jn,Dt){jt&&typeof Jn=="string"&&Jn!==Dt&&Jn!==jt.getContent({format:ht.outputFormat})&&jt.setContent(Jn)}),jt.on(Gt||"change input undo redo",function(){_n.emit("update:modelValue",jt.getContent({format:ht.outputFormat}))})},aK=function(ht,_n,jt,un,Ct,Gt){un.setContent(Gt()),jt.attrs["onUpdate:modelValue"]&&cK(_n,jt,un,Ct),rK(ht,jt.attrs,un)},Aq=0,Nq=function(ht){var _n=Date.now(),jt=Math.floor(Math.random()*1e9);return Aq++,ht+"_"+jt+Aq+String(_n)},lK=function(ht){return ht!==null&&ht.tagName.toLowerCase()==="textarea"},Oq=function(ht){return typeof ht>"u"||ht===""?[]:Array.isArray(ht)?ht:ht.split(" ")},iK=function(ht,_n){return Oq(ht).concat(Oq(_n))},uK=function(ht){return ht==null},Dq=function(){return{listeners:[],scriptId:Nq("tiny-script"),scriptLoaded:!1}},dK=function(){var ht=Dq(),_n=function(Ct,Gt,Jn,Dt){var Yt=Gt.createElement("script");Yt.referrerPolicy="origin",Yt.type="application/javascript",Yt.id=Ct,Yt.src=Jn;var io=function(){Yt.removeEventListener("load",io),Dt()};Yt.addEventListener("load",io),Gt.head&&Gt.head.appendChild(Yt)},jt=function(Ct,Gt,Jn){ht.scriptLoaded?Jn():(ht.listeners.push(Jn),Ct.getElementById(ht.scriptId)||_n(ht.scriptId,Ct,Gt,function(){ht.listeners.forEach(function(Dt){return Dt()}),ht.scriptLoaded=!0}))},un=function(){ht=Dq()};return{load:jt,reinitialize:un}},mK=dK(),fK=function(){return typeof window<"u"?window:global},G2=function(){var ht=fK();return ht&&ht.tinymce?ht.tinymce:null},gK={apiKey:String,licenseKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(ht){return ht==="html"||ht==="text"}}},w1=function(){return w1=Object.assign||function(ht){for(var _n,jt=1,un=arguments.length;jt<un;jt++){_n=arguments[jt];for(var Ct in _n)Object.prototype.hasOwnProperty.call(_n,Ct)&&(ht[Ct]=_n[Ct])}return ht},w1.apply(this,arguments)},hK=function(ht,_n,jt,un){return ht(un||"div",{id:_n,ref:jt})},pK=function(ht,_n,jt){return ht("textarea",{id:_n,visibility:"hidden",ref:jt})},oG={selector:void 0,target:void 0},bK=Rq({props:gK,setup:function(ht,_n){var jt=ht.init?w1(w1({},ht.init),oG):w1({},oG),un=Mq(ht),Ct=un.disabled,Gt=un.modelValue,Jn=un.tagName,Dt=Tl(null),Yt=null,io=ht.id||Nq("tiny-vue"),xn=ht.init&&ht.init.inline||ht.inline,Xt=!!_n.attrs["onUpdate:modelValue"],Mn=!0,zt=ht.initialValue?ht.initialValue:"",ft="",et=function(Re){return Xt?function(){return Gt!=null&&Gt.value?Gt.value:""}:function(){return Re?zt:ft}},ct=function(){var Re=et(Mn),ee=w1(w1({},jt),{readonly:ht.disabled,target:Dt.value,plugins:iK(jt.plugins,ht.plugins),toolbar:ht.toolbar||jt.toolbar,inline:xn,setup:function(Xe){Yt=Xe,Xe.on("init",function(Zn){return aK(Zn,ht,_n,Xe,Gt,Re)}),typeof jt.setup=="function"&&jt.setup(Xe)}});lK(Dt.value)&&(Dt.value.style.visibility=""),G2().init(ee),Mn=!1};My(Ct,function(Re){var ee;Yt!==null&&(typeof((ee=Yt.mode)===null||ee===void 0?void 0:ee.set)=="function"?Yt.mode.set(Re?"readonly":"design"):Yt.setMode(Re?"readonly":"design"))}),My(Jn,function(Re){var ee;Xt||(ft=Yt.getContent()),(ee=G2())===null||ee===void 0||ee.remove(Yt),Tq(function(){return ct()})}),Xq(function(){if(G2()!==null)ct();else if(Dt.value&&Dt.value.ownerDocument){var Re=ht.cloudChannel?ht.cloudChannel:"7",ee=ht.apiKey?ht.apiKey:"no-api-key",Xe=uK(ht.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/".concat(ee,"/tinymce/").concat(Re,"/tinymce.min.js"):ht.tinymceScriptSrc;mK.load(Dt.value.ownerDocument,Xe,ct)}}),Jq(function(){G2()!==null&&G2().remove(Yt)}),xn||(Qq(function(){Mn||ct()}),eK(function(){var Re;Xt||(ft=Yt.getContent()),(Re=G2())===null||Re===void 0||Re.remove(Yt)}));var Qn=function(Re){var ee;ft=Yt.getContent(),(ee=G2())===null||ee===void 0||ee.remove(Yt),jt=w1(w1(w1({},jt),Re),oG),Tq(function(){return ct()})};return _n.expose({rerender:Qn,getEditor:function(){return Yt}}),function(){return xn?hK(Eq,io,Dt,ht.tagName):pK(Eq,io,Dt)}}});const vK=""+new URL("FiraMono-Medium-CE-6Frqh.woff2",import.meta.url).href,yK=""+new URL("merriweather-regular-D4NWdWaV.woff2",import.meta.url).href;function CK(ht){const _n=ti(`--theme--fonts--${ht}--font-family`);return`
@font-face {
	font-family: 'Fira Mono';
	font-style: normal;
	src: url(${vK}) format('woff2');
}

@font-face {
	font-family: 'Merriweather';
	font-style: normal;
	src: url(${yK}) format('woff2');
}

::selection {
	background: ${ti("--background-normal-alt")};
}
body {
	color: ${ti("--theme--form--field--input--foreground")};
	background-color: ${ti("--theme--form--field--input--background")};
	margin: 20px;
	font-family: ${ti("--theme--fonts--sans--font-family")};
	-webkit-font-smoothing: antialiased;
	text-rendering: optimizeLegibility;
	-moz-osx-font-smoothing: grayscale;
}
body.mce-content-readonly {
	color: ${ti("--foreground-subdued")};
	background-color: ${ti("--background-subdued")};
}
.mce-offscreen-selection {
	display: none;
}
h1, h2, h3, h4, h5, h6 {
	font-family: ${_n}, serif;
	color: ${ti("--theme--form--field--input--foreground-accent")};
	font-weight: 700;
	margin-bottom: 0;
}
h1 + p, h2 + p, h3 + p, h4 + p, h5 + p, h6 + p {
	margin-top: 0.5em;
}
h1 {
	font-size: 36px;
	line-height: 46px;
	margin-top: 1em;
}
h2 {
	font-size: 24px;
	line-height: 34px;
	margin-top: 1.25em;
}
h3 {
	font-size: 19px;
	line-height: 29px;
	margin-top: 1.25em;
}
h4 {
	font-size: 16px;
	line-height: 26px;
	margin-top: 1.5em;
}
h5 {
	font-size: 14px;
	line-height: 24px;
	margin-top: 2em;
}
h6 {
	font-size: 12px;
	line-height: 22px;
	margin-top: 2em;
}
p {
	font-family: ${_n}, serif;
	font-size: 15px;
	line-height: 24px;
	font-weight: 500;
	margin: 1.5em 0;
}
a {
	color: ${ti("--theme--primary-accent")};
	text-decoration: none;
}
ul, ol {
	font-family: ${_n}, serif;
	font-size: 15px;
	line-height: 24px;
	font-weight: 500;
	margin: 1.5em 0;
}
ul ul,
	ol ol,
		ul ol,
			ol ul {
	margin: 0;
}
b, strong {
	font-weight: 700;
}
code {
	font-size: 15px;
	line-height: 24px;
	font-weight: 500;
	padding: 2px 4px;
	font-family: ${ti("--theme--fonts--monospace--font-family")}, monospace;
	background-color: ${ti("--theme--background-accent")};
	border-radius: ${ti("--theme--border-radius")};
	overflow-wrap: break-word;
}
pre {
	font-size: 15px;
	line-height: 24px;
	font-weight: 500;
	padding: 1em;
	font-family: ${ti("--theme--fonts--monospace--font-family")}, monospace;
	background-color: ${ti("--theme--background-accent")};
	border-radius: ${ti("--theme--border-radius")};
	overflow: auto;
}
blockquote {
	font-family: ${_n}, serif;
	font-size: 15px;
	line-height: 24px;
	font-weight: 500;
	border-left: 2px solid ${ti("--theme--form--field--input--border-color")};
	padding-left: 1em;
	margin-left: 0px;
}
video,
img {
	max-width: 100%;
	border-radius: ${ti("--theme--border-radius")};
	height: auto;
}
iframe {
	max-width: 100%;
	border-radius: ${ti("--theme--border-radius")};
}
hr {
	background-color: ${ti("--theme--form--field--input--border-color")};
	height: 1px;
	border: none;
	margin-top: 2em;
	margin-bottom: 2em;
}
table {
	border-collapse: collapse;
	font-size: 15px;
	line-height: 24px;
	font-weight: 500;
}
table th,
table td {
	border: 1px solid ${ti("--theme--form--field--input--border-color")};
	padding: 0.4rem;
}
figure {
	display: table;
	margin: 1rem auto;
}
figure figcaption {
	color: #999;
	display: block;
	margin-top: 0.25rem;
	text-align: center;
}`}function wK(ht,_n,jt){const un=Tl(!1),Ct=Tl(null),Gt=Tl();My(()=>{var Xt;return(Xt=Ct.value)==null?void 0:Xt.transformationKey},Xt=>{Gt.value=jt.storageAssetPresets.value.find(Mn=>Mn.key===Xt),Gt.value&&(Ct.value.width=Gt.value.width??void 0,Ct.value.height=Gt.value.height??void 0)});const Jn={icon:"image",tooltip:$F.global.t("wysiwyg_options.image"),onAction:Xt=>{if(un.value=!0,Xt===!0||Xt.isActive()){const Mn=ht.value.selection.getNode(),zt=Mn.getAttribute("src"),ft=zt?new URL(zt).searchParams:void 0,et=Mn.getAttribute("alt"),ct=Mn.getAttribute("loading")==="lazy",Qn=Number((ft==null?void 0:ft.get("width"))||void 0)||void 0,Re=Number((ft==null?void 0:ft.get("height"))||void 0)||void 0,ee=(ft==null?void 0:ft.get("key"))||void 0;if(zt===null||et===null)return;ee&&(Gt.value=jt.storageAssetPresets.value.find(Xe=>Xe.key===ee)),Ct.value={imageUrl:zt,alt:et,lazy:ct,width:Gt.value?Gt.value.width??void 0:Qn,height:Gt.value?Gt.value.height??void 0:Re,transformationKey:ee,previewUrl:xn(zt,_n.value)}}else Ct.value=null},onSetup:Xt=>{const Mn=zt=>{Xt.setActive(zt.element.tagName==="IMG")};return ht.value.on("NodeChange",Mn),function(){ht.value.off("NodeChange",Mn)}}};return{imageDrawerOpen:un,imageSelection:Ct,closeImageDrawer:Dt,onImageSelect:Yt,saveImage:io,imageButton:Jn};function Dt(){Ct.value=null,un.value=!1}function Yt(Xt){const Mn=Xt.type?xq(Xt.type,!0):xq(jq.getType(Xt.filename_download),!0),zt=BF()+"assets/"+Xt.id+"."+Mn;Ct.value={imageUrl:xn(zt,_n.value),alt:Xt.title,lazy:!1,width:Xt.width,height:Xt.height,previewUrl:xn(zt,_n.value)}}function io(){ht.value.fire("focus");const Xt=Ct.value;if(Xt===null)return;const Mn={},zt=new URL(Xt.imageUrl,"file://");zt.searchParams.delete("width"),zt.searchParams.delete("height"),zt.searchParams.delete("key"),jt.storageAssetTransform.value==="all"?Xt.transformationKey?Mn.key=Xt.transformationKey:(Mn.width=Xt.width,Mn.height=Xt.height):jt.storageAssetTransform.value==="presets"&&Xt.transformationKey&&(Mn.key=Xt.transformationKey);const et=`<img src="${Gq(zt.toString().replace("file://",""),Mn)}" alt="${Xt.alt}" ${Xt.lazy?'loading="lazy" ':""}/>`;ht.value.selection.setContent(et),ht.value.undoManager.add(),Dt()}function xn(Xt,Mn){if(!Xt.includes(BF()+"assets/"))return Xt;try{const zt=new URL(Xt),ft=new URLSearchParams(zt.search);return Mn?ft.set("access_token",Mn):ft.delete("access_token"),Array.from(ft).length>0?`${zt.origin}${zt.pathname}?${ft.toString()}`:`${zt.origin}${zt.pathname}`}catch{return Xt}}}function SK(ht){const _n=Tl(!1),jt={url:null,displayText:null,title:null,newTab:!0},un=Tl(jt),Ct=Tl(null),Gt=Tl(null),Jn={icon:"link",tooltip:$F.global.t("wysiwyg_options.link"),onAction:()=>{if(ht.value.plugins.fullscreen.isFullscreen()&&ht.value.execCommand("mceFullScreen"),_n.value=!0,Ct.value){ht.value.selection.select(Gt.value);const xn=Ct.value.getAttribute("href"),Xt=Ct.value.getAttribute("title"),Mn=Ct.value.innerText,zt=Ct.value.getAttribute("target");if(xn===null||Mn===null)return;un.value={url:xn,displayText:Mn,title:Xt||null,newTab:zt==="_blank"}}else{const xn=ht.value.selection.getContent();try{const Xt=new URL(xn).toString();Dt({url:Xt})}catch{Dt({displayText:xn||null})}}},onSetup:xn=>{const Xt=Mn=>{let zt=Mn.element;for(Gt.value=Mn.element,Ct.value=null;zt&&zt.id!=="tinymce";){if(zt.tagName==="A"){Ct.value=zt;break}zt=zt.parentElement}xn.setActive(!!Ct.value)};return ht.value.on("NodeChange",Xt),function(){ht.value.off("NodeChange",Xt)}}};return{linkDrawerOpen:_n,linkSelection:un,linkNode:Ct,closeLinkDrawer:Yt,saveLink:io,linkButton:Jn};function Dt(xn={}){un.value=Object.assign({},jt,xn)}function Yt(){Dt(),_n.value=!1}function io(){ht.value.fire("focus");const xn=un.value;if(xn.url===null){Ct.value&&(ht.value.selection.setContent(Ct.value.innerText),Yt());return}const Xt=`<a href="${xn.url}" ${xn.title?`title="${xn.title}"`:""} ${xn.newTab?'target="_blank"':""} >${xn.displayText||xn.url}</a>`;!Ct.value||Gt.value===Ct.value?ht.value.selection.setContent(Xt):Gt.value&&(Gt.value.innerHTML=xn.displayText||xn.url,Ct.value.setAttribute("data-mce-href",xn.url),Ct.value.setAttribute("href",xn.url),xn.title&&Ct.value.setAttribute("title",xn.title),Ct.value.setAttribute("target",xn.newTab?"_blank":"_self"),ht.value.selection.select(Ct.value),ht.value.selection.setNode(Ct.value)),ht.value.undoManager.add(),Yt()}}function xK(ht,_n){const jt=Tl(!1),un=Tl(null),Ct=Tl(["video","audio"]),Gt=Tl(""),Jn=Tl(""),Dt={icon:"embed",tooltip:$F.global.t("wysiwyg_options.media"),onAction:et=>{if(jt.value=!0,et.isActive()){if(ht.value.selection.getContent()===null)return;Gt.value=ht.value.selection.getContent(),Jn.value=Gt.value}else un.value=null},onSetup:et=>{const ct=Qn=>{et.setActive(Qn.element.tagName==="SPAN"&&Qn.element.classList.contains("mce-preview-object"))};return ht.value.on("NodeChange",ct),function(){ht.value.off("NodeChange",ct)}}},Yt=q2({get(){var et;return(et=un.value)==null?void 0:et.sourceUrl},set(et){un.value={...un.value,sourceUrl:et},un.value.previewUrl=ft(et,_n.value)}}),io=q2({get(){var et;return(et=un.value)==null?void 0:et.width},set(et){un.value!==null&&(un.value={...un.value,width:et})}}),xn=q2({get(){var et;return(et=un.value)==null?void 0:et.height},set(et){un.value!==null&&(un.value={...un.value,height:et})}});return My(un,et=>{if(Gt.value===""){if(et===null)return;Gt.value=`<${et.tag} width="${et.width}" height="${et.height}" controls><source src="${et.sourceUrl}" type="${et.type}" /></${et.tag}>`}else Gt.value=Gt.value.replace(/src=".*?"/g,`src="${et==null?void 0:et.sourceUrl}"`).replace(/width=".*?"/g,`width="${et==null?void 0:et.width}"`).replace(/height=".*?"/g,`height="${et==null?void 0:et.height}"`).replace(/type=".*?"/g,`type="${et==null?void 0:et.type}"`).replaceAll(/<(video|audio|iframe)/g,`<${et==null?void 0:et.tag}`).replaceAll(/<\/(video|audio|iframe)/g,`</${et==null?void 0:et.tag}`)}),My(Gt,et=>{var ct,Qn,Re,ee,Xe;if(et==="")un.value=null;else{const Zn=(ct=/<(video|audio|iframe)/g.exec(et))==null?void 0:ct[1],Qe=((Qn=/src="(.*?)"/g.exec(et))==null?void 0:Qn[1])||void 0,W=Number((Re=/width="(.*?)"/g.exec(et))==null?void 0:Re[1])||void 0,xt=Number((ee=/height="(.*?)"/g.exec(et))==null?void 0:ee[1])||void 0,gn=((Xe=/type="(.*?)"/g.exec(et))==null?void 0:Xe[1])||void 0;if(Qe===void 0)return;const dn=ft(Qe,_n.value);un.value={tag:Zn,sourceUrl:Qe,width:W,height:xt,type:gn,previewUrl:dn}}}),{mediaDrawerOpen:jt,mediaSelection:un,closeMediaDrawer:Xt,openMediaTab:Ct,onMediaSelect:Mn,embed:Gt,saveMedia:zt,startEmbed:Jn,mediaHeight:xn,mediaWidth:io,mediaSource:Yt,mediaButton:Dt};function Xt(){Gt.value="",Jn.value="",un.value=null,jt.value=!1,Ct.value=["video"]}function Mn(et){const ct=BF()+"assets/"+et.id,Qn=et.type.startsWith("audio")?"audio":"video";un.value={sourceUrl:ft(ct,_n.value),width:et.width||300,height:et.height||150,tag:Qn,type:et.type,previewUrl:ft(ct,_n.value)}}function zt(){if(ht.value.fire("focus"),Gt.value!==""){if(Jn.value!==""){const et=ht.value.getContent().replace(Jn.value,Gt.value);ht.value.setContent(et)}else ht.value.selection.setContent(Gt.value);ht.value.undoManager.add(),Xt()}}function ft(et,ct){if(!et.includes(BF()+"assets/"))return et;try{const Qn=new URL(et),Re=new URLSearchParams(Qn.search);return ct?Re.set("access_token",ct):Re.delete("access_token"),Array.from(Re).length>0?`${Qn.origin}${Qn.pathname}?${Re.toString()}`:`${Qn.origin}${Qn.pathname}`}catch{return et}}}function TK(ht){const _n=Tl(!1),jt=Tl(),un={icon:"sourcecode",tooltip:$F.global.t("wysiwyg_options.source_code"),onAction:()=>{_n.value=!0,jt.value=ht.value.getContent()}};return{codeDrawerOpen:_n,code:jt,closeCodeDrawer:Ct,saveCode:Gt,sourceCodeButton:un};function Ct(){_n.value=!1}function Gt(){ht.value.fire("focus"),ht.value.setContent(jt.value),ht.value.undoManager.add(),Ct()}}var EK={exports:{}};(function(ht){(function(){var _n=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var n=typeof e;return n==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":n==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":n},jt=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},un=function(e,n){var o=Array.prototype.slice.call(e);return o.sort(n)},Ct=function(e,n){return Gt(function(o,r){return e.eq(n(o),n(r))})},Gt=function(e){return{eq:e}},Jn=Gt(function(e,n){return e===n}),Dt=Jn,Yt=function(e){return Gt(function(n,o){if(n.length!==o.length)return!1;for(var r=n.length,a=0;a<r;a++)if(!e.eq(n[a],o[a]))return!1;return!0})},io=function(e,n){return Ct(Yt(e),function(o){return un(o,n)})},xn=function(e){return Gt(function(n,o){var r=Object.keys(n),a=Object.keys(o);if(!io(Dt).eq(r,a))return!1;for(var u=r.length,f=0;f<u;f++){var b=r[f];if(!e.eq(n[b],o[b]))return!1}return!0})},Xt=Gt(function(e,n){if(e===n)return!0;var o=_n(e),r=_n(n);return o!==r?!1:jt(o)?e===n:o==="array"?Yt(Xt).eq(e,n):o==="object"?xn(Xt).eq(e,n):!1});const Mn=Object.getPrototypeOf,zt=(e,n,o)=>{var r;return o(e,n.prototype)?!0:((r=e.constructor)===null||r===void 0?void 0:r.name)===n.name},ft=e=>{const n=typeof e;return e===null?"null":n==="object"&&Array.isArray(e)?"array":n==="object"&&zt(e,String,(o,r)=>r.isPrototypeOf(o))?"string":n},et=e=>n=>ft(n)===e,ct=e=>n=>typeof n===e,Qn=e=>n=>e===n,Re=(e,n)=>Xe(e)&&zt(e,n,(o,r)=>Mn(o)===r),ee=et("string"),Xe=et("object"),Zn=e=>Re(e,Object),Qe=et("array"),W=Qn(null),xt=ct("boolean"),gn=Qn(void 0),dn=e=>e==null,Oe=e=>!dn(e),ue=ct("function"),ts=ct("number"),no=(e,n)=>{if(Qe(e)){for(let o=0,r=e.length;o<r;++o)if(!n(e[o]))return!1;return!0}return!1},Mt=()=>{},A=(e,n)=>(...o)=>e(n.apply(null,o)),Bo=(e,n)=>o=>e(n(o)),tt=e=>()=>e,Wo=e=>e,cn=(e,n)=>e===n;function Je(e,...n){return(...o)=>{const r=n.concat(o);return e.apply(null,r)}}const vo=e=>n=>!e(n),Ms=e=>()=>{throw new Error(e)},ho=e=>e(),Us=e=>{e()},je=tt(!1),gt=tt(!0);class F{constructor(n,o){this.tag=n,this.value=o}static some(n){return new F(!0,n)}static none(){return F.singletonNone}fold(n,o){return this.tag?o(this.value):n()}isSome(){return this.tag}isNone(){return!this.tag}map(n){return this.tag?F.some(n(this.value)):F.none()}bind(n){return this.tag?n(this.value):F.none()}exists(n){return this.tag&&n(this.value)}forall(n){return!this.tag||n(this.value)}filter(n){return!this.tag||n(this.value)?this:F.none()}getOr(n){return this.tag?this.value:n}or(n){return this.tag?this:n}getOrThunk(n){return this.tag?this.value:n()}orThunk(n){return this.tag?this:n()}getOrDie(n){if(this.tag)return this.value;throw new Error(n??"Called getOrDie on None")}static from(n){return Oe(n)?F.some(n):F.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(n){this.tag&&n(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}F.singletonNone=new F(!1);const dc=Array.prototype.slice,uo=Array.prototype.indexOf,ds=Array.prototype.push,Go=(e,n)=>uo.call(e,n),wa=(e,n)=>{const o=Go(e,n);return o===-1?F.none():F.some(o)},Cn=(e,n)=>Go(e,n)>-1,So=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const a=e[o];if(n(a,o))return!0}return!1},Rn=(e,n)=>{const o=e.length,r=new Array(o);for(let a=0;a<o;a++){const u=e[a];r[a]=n(u,a)}return r},xe=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const a=e[o];n(a,o)}},zn=(e,n)=>{for(let o=e.length-1;o>=0;o--){const r=e[o];n(r,o)}},Ht=(e,n)=>{const o=[],r=[];for(let a=0,u=e.length;a<u;a++){const f=e[a];(n(f,a)?o:r).push(f)}return{pass:o,fail:r}},Lt=(e,n)=>{const o=[];for(let r=0,a=e.length;r<a;r++){const u=e[r];n(u,r)&&o.push(u)}return o},Zo=(e,n,o)=>(zn(e,(r,a)=>{o=n(o,r,a)}),o),Ho=(e,n,o)=>(xe(e,(r,a)=>{o=n(o,r,a)}),o),pr=(e,n,o)=>{for(let r=0,a=e.length;r<a;r++){const u=e[r];if(n(u,r))return F.some(u);if(o(u,r))break}return F.none()},qo=(e,n)=>pr(e,n,je),qs=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const a=e[o];if(n(a,o))return F.some(o)}return F.none()},st=e=>{const n=[];for(let o=0,r=e.length;o<r;++o){if(!Qe(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);ds.apply(n,e[o])}return n},lt=(e,n)=>st(Rn(e,n)),tn=(e,n)=>{for(let o=0,r=e.length;o<r;++o){const a=e[o];if(n(a,o)!==!0)return!1}return!0},mn=e=>{const n=dc.call(e,0);return n.reverse(),n},Mo=(e,n)=>Lt(e,o=>!Cn(n,o)),Ao=(e,n)=>{const o={};for(let r=0,a=e.length;r<a;r++){const u=e[r];o[String(u)]=n(u,r)}return o},jn=(e,n)=>{const o=dc.call(e,0);return o.sort(n),o},jc=(e,n)=>n>=0&&n<e.length?F.some(e[n]):F.none(),ro=e=>jc(e,0),ns=e=>jc(e,e.length-1),cr=ue(Array.from)?Array.from:e=>dc.call(e),Br=(e,n)=>{for(let o=0;o<e.length;o++){const r=n(e[o],o);if(r.isSome())return r}return F.none()},ea=(e,n)=>{const o=[],r=ue(n)?a=>So(o,u=>n(u,a)):a=>Cn(o,a);for(let a=0,u=e.length;a<u;a++){const f=e[a];r(f)||o.push(f)}return o},Vt=Object.keys,cl=Object.hasOwnProperty,pt=(e,n)=>{const o=Vt(e);for(let r=0,a=o.length;r<a;r++){const u=o[r],f=e[u];n(f,u)}},yo=(e,n)=>Vr(e,(o,r)=>({k:r,v:n(o,r)})),Vr=(e,n)=>{const o={};return pt(e,(r,a)=>{const u=n(r,a);o[u.k]=u.v}),o},br=e=>(n,o)=>{e[o]=n},Oc=(e,n,o,r)=>{pt(e,(a,u)=>{(n(a,u)?o:r)(a,u)})},Gc=(e,n)=>{const o={},r={};return Oc(e,n,br(o),br(r)),{t:o,f:r}},os=(e,n)=>{const o={};return Oc(e,n,br(o),Mt),o},ta=(e,n)=>{const o=[];return pt(e,(r,a)=>{o.push(n(r,a))}),o},Sa=e=>ta(e,Wo),Xo=(e,n)=>yn(e,n)?F.from(e[n]):F.none(),yn=(e,n)=>cl.call(e,n),Ls=(e,n)=>yn(e,n)&&e[n]!==void 0&&e[n]!==null,bc=(e,n,o=Xt)=>xn(o).eq(e,n),Vl=e=>{const n={};return xe(e,o=>{n[o]={}}),Vt(n)},zl=e=>e.length!==void 0,hs=Array.isArray,kr=e=>{if(hs(e))return e;{const n=[];for(let o=0,r=e.length;o<r;o++)n[o]=e[o];return n}},Ns=(e,n,o)=>{if(!e)return!1;if(o=o||e,zl(e)){for(let r=0,a=e.length;r<a;r++)if(n.call(o,e[r],r,e)===!1)return!1}else for(const r in e)if(yn(e,r)&&n.call(o,e[r],r,e)===!1)return!1;return!0},mc=(e,n)=>{const o=[];return Ns(e,(r,a)=>{o.push(n(r,a,e))}),o},Fa=(e,n)=>{const o=[];return Ns(e,(r,a)=>{(!n||n(r,a,e))&&o.push(r)}),o},_r=(e,n)=>{if(e){for(let o=0,r=e.length;o<r;o++)if(e[o]===n)return o}return-1},le=(e,n,o,r)=>{let a=gn(o)?e[0]:o;for(let u=0;u<e.length;u++)a=n.call(r,a,e[u],u);return a},re=(e,n,o)=>{for(let r=0,a=e.length;r<a;r++)if(n.call(o,e[r],r,e))return r;return-1},De=e=>e[e.length-1],Fe=e=>{let n=!1,o;return(...r)=>(n||(n=!0,o=e.apply(null,r)),o)},fn=(e,n,o,r)=>{const a=e.isiOS()&&/ipad/i.test(o)===!0,u=e.isiOS()&&!a,f=e.isiOS()||e.isAndroid(),b=f||r("(pointer:coarse)"),C=a||!u&&f&&r("(min-device-width:768px)"),T=u||f&&!C,M=n.isSafari()&&e.isiOS()&&/safari/i.test(o)===!1,P=!T&&!C&&!M;return{isiPad:tt(a),isiPhone:tt(u),isTablet:tt(C),isPhone:tt(T),isTouch:tt(b),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:tt(M),isDesktop:tt(P)}},Pn=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o];if(r.test(n))return r}},Kn=(e,n)=>{const o=Pn(e,n);if(!o)return{major:0,minor:0};const r=a=>Number(n.replace(o,"$"+a));return Yn(r(1),r(2))},ar=(e,n)=>{const o=String(n).toLowerCase();return e.length===0?ge():Kn(e,o)},ge=()=>Yn(0,0),Yn=(e,n)=>({major:e,minor:n}),Ks={nu:Yn,detect:ar,unknown:ge},vr=(e,n)=>Br(n.brands,o=>{const r=o.brand.toLowerCase();return qo(e,a=>{var u;return r===((u=a.brand)===null||u===void 0?void 0:u.toLowerCase())}).map(a=>({current:a.name,version:Ks.nu(parseInt(o.version,10),0)}))}),vc=(e,n)=>{const o=String(n).toLowerCase();return qo(e,r=>r.search(o))},ss=(e,n)=>vc(e,n).map(o=>{const r=Ks.detect(o.versionRegexes,n);return{current:o.name,version:r}}),al=(e,n)=>vc(e,n).map(o=>{const r=Ks.detect(o.versionRegexes,n);return{current:o.name,version:r}}),$r=(e,n)=>e.substring(n),zr=(e,n,o)=>n===""||e.length>=n.length&&e.substr(o,o+n.length)===n,As=(e,n)=>ms(e,n)?$r(e,n.length):e,rs=(e,n,o=0,r)=>{const a=e.indexOf(n,o);return a!==-1?gn(r)?!0:a+n.length<=r:!1},ms=(e,n)=>zr(e,n,0),tc=(e,n)=>zr(e,n,e.length-n.length),Ur=e=>n=>n.replace(e,""),Ps=Ur(/^\s+|\s+$/g),Ga=Ur(/^\s+/g),xa=Ur(/\s+$/g),xo=e=>e.length>0,Kr=e=>!xo(e),Ir=(e,n)=>n<=0?"":new Array(n+1).join(e),Ha=(e,n=10)=>{const o=parseInt(e,n);return isNaN(o)?F.none():F.some(o)},Dc=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Ar=e=>n=>rs(n,e),Os=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>rs(e,"edge/")&&rs(e,"chrome")&&rs(e,"safari")&&rs(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Dc],search:e=>rs(e,"chrome")&&!rs(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>rs(e,"msie")||rs(e,"trident")},{name:"Opera",versionRegexes:[Dc,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Ar("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Ar("firefox")},{name:"Safari",versionRegexes:[Dc,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(rs(e,"safari")||rs(e,"mobile/"))&&rs(e,"applewebkit")}],ed=[{name:"Windows",search:Ar("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>rs(e,"iphone")||rs(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Ar("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Ar("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Ar("linux"),versionRegexes:[]},{name:"Solaris",search:Ar("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Ar("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Ar("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Ta={browsers:tt(Os),oses:tt(ed)},Ko="Edge",nc="Chromium",oc="IE",Or="Opera",Ul="Firefox",Rc="Safari",yc=()=>Ea({current:void 0,version:Ks.unknown()}),Ea=e=>{const n=e.current,o=e.version,r=a=>()=>n===a;return{current:n,version:o,isEdge:r(Ko),isChromium:r(nc),isIE:r(oc),isOpera:r(Or),isFirefox:r(Ul),isSafari:r(Rc)}},na={unknown:yc,nu:Ea,edge:tt(Ko),chromium:tt(nc),ie:tt(oc),opera:tt(Or),firefox:tt(Ul),safari:tt(Rc)},ni="Windows",oi="iOS",El="Android",oa="Linux",Yr="macOS",Wl="Solaris",Zl="FreeBSD",Ci="ChromeOS",ll=()=>Dr({current:void 0,version:Ks.unknown()}),Dr=e=>{const n=e.current,o=e.version,r=a=>()=>n===a;return{current:n,version:o,isWindows:r(ni),isiOS:r(oi),isAndroid:r(El),isMacOS:r(Yr),isLinux:r(oa),isSolaris:r(Wl),isFreeBSD:r(Zl),isChromeOS:r(Ci)}},sa={unknown:ll,nu:Dr,windows:tt(ni),ios:tt(oi),android:tt(El),linux:tt(oa),macos:tt(Yr),solaris:tt(Wl),freebsd:tt(Zl),chromeos:tt(Ci)},Cc={detect:(e,n,o)=>{const r=Ta.browsers(),a=Ta.oses(),u=n.bind(C=>vr(r,C)).orThunk(()=>ss(r,e)).fold(na.unknown,na.nu),f=al(a,e).fold(sa.unknown,sa.nu),b=fn(f,u,e,o);return{browser:u,os:f,deviceType:b}}},wi=e=>window.matchMedia(e).matches;let Si=Fe(()=>Cc.detect(window.navigator.userAgent,F.from(window.navigator.userAgentData),wi));const U=()=>Si(),se=window.navigator.userAgent,be=U(),ze=be.browser,bt=be.os,Ve=be.deviceType,Vo=se.indexOf("Windows Phone")!==-1,nn={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:ze.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!ze.isIE(),windowsPhone:Vo,browser:{current:ze.current,version:ze.version,isChromium:ze.isChromium,isEdge:ze.isEdge,isFirefox:ze.isFirefox,isIE:ze.isIE,isOpera:ze.isOpera,isSafari:ze.isSafari},os:{current:bt.current,version:bt.version,isAndroid:bt.isAndroid,isChromeOS:bt.isChromeOS,isFreeBSD:bt.isFreeBSD,isiOS:bt.isiOS,isLinux:bt.isLinux,isMacOS:bt.isMacOS,isSolaris:bt.isSolaris,isWindows:bt.isWindows},deviceType:{isDesktop:Ve.isDesktop,isiPad:Ve.isiPad,isiPhone:Ve.isiPhone,isPhone:Ve.isPhone,isTablet:Ve.isTablet,isTouch:Ve.isTouch,isWebView:Ve.isWebView}},Hn=/^\s*|\s*$/g,Fs=e=>dn(e)?"":(""+e).replace(Hn,""),B=(e,n)=>n?n==="array"&&hs(e)?!0:typeof e===n:e!==void 0,K=(e,n,o={})=>{const r=ee(e)?e.split(n||","):e||[];let a=r.length;for(;a--;)o[r[a]]={};return o},ie=yn,Ee=(e,...n)=>{for(let o=0;o<n.length;o++){const r=n[o];for(const a in r)if(yn(r,a)){const u=r[a];u!==void 0&&(e[a]=u)}}return e},qe=function(e,n,o,r){r=r||this,e&&(o&&(e=e[o]),Ns(e,(a,u)=>n.call(r,a,u,o)===!1?!1:(qe(a,n,o,r),!0)))},it={trim:Fs,isArray:hs,is:B,toArray:kr,makeMap:K,each:Ns,map:mc,grep:Fa,inArray:_r,hasOwn:ie,extend:Ee,walk:qe,resolve:(e,n=window)=>{const o=e.split(".");for(let r=0,a=o.length;r<a&&(n=n[o[r]],!!n);r++);return n},explode:(e,n)=>Qe(e)?e:e===""?[]:mc(e.split(n||","),Fs),_addCacheSuffix:e=>{const n=nn.cacheSuffix;return n&&(e+=(e.indexOf("?")===-1?"?":"&")+n),e}},bs=(e,n,o=cn)=>e.exists(r=>o(r,n)),rc=(e,n,o=cn)=>Gn(e,n,o).getOr(e.isNone()&&n.isNone()),kl=e=>{const n=[],o=r=>{n.push(r)};for(let r=0;r<e.length;r++)e[r].each(o);return n},Gn=(e,n,o)=>e.isSome()&&n.isSome()?F.some(o(e.getOrDie(),n.getOrDie())):F.none(),ka=(e,n,o,r)=>e.isSome()&&n.isSome()&&o.isSome()?F.some(r(e.getOrDie(),n.getOrDie(),o.getOrDie())):F.none(),qa=(e,n)=>e?F.some(n):F.none(),Wr=typeof window<"u"?window:Function("return this;")(),vs=(e,n)=>{let o=n??Wr;for(let r=0;r<e.length&&o!==void 0&&o!==null;++r)o=o[e[r]];return o},_l=(e,n)=>{const o=e.split(".");return vs(o,n)},bf=(e,n)=>_l(e,n),Hd=(e,n)=>{const o=bf(e,n);if(o==null)throw new Error(e+" not available on this browser");return o},Ys=Object.getPrototypeOf,td=e=>Hd("HTMLElement",e),il=e=>{const n=_l("ownerDocument.defaultView",e);return Xe(e)&&(td(n).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(Ys(e).constructor.name))},Ws=8,ul=9,ra=11,nd=1,G=3,Q=e=>e.dom.nodeName.toLowerCase(),ke=e=>e.dom.nodeType,Ue=e=>n=>ke(n)===e,wn=e=>ke(e)===Ws||Q(e)==="#comment",Oo=e=>mo(e)&&il(e.dom),mo=Ue(nd),ws=Ue(G),Rr=Ue(ul),ca=Ue(ra),Mc=e=>n=>mo(n)&&Q(n)===e,yr=(e,n,o)=>{if(ee(o)||xt(o)||ts(o))e.setAttribute(n,o+"");else throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",o,":: Element ",e),new Error("Attribute value was not simple")},Cr=(e,n,o)=>{yr(e.dom,n,o)},Xr=(e,n)=>{const o=e.dom;pt(n,(r,a)=>{yr(o,a,r)})},Nc=(e,n)=>{const o=e.dom.getAttribute(n);return o===null?void 0:o},Xs=(e,n)=>F.from(Nc(e,n)),wr=(e,n)=>{const o=e.dom;return o&&o.hasAttribute?o.hasAttribute(n):!1},Zs=(e,n)=>{e.dom.removeAttribute(n)},si=e=>{const n=e.dom.attributes;return n==null||n.length===0},Vd=e=>Ho(e.dom.attributes,(n,o)=>(n[o.name]=o.value,n),{}),Zi=(e,n)=>{const o=Nc(e,n);return o===void 0||o===""?[]:o.split(" ")},od=(e,n,o)=>{const a=Zi(e,n).concat([o]);return Cr(e,n,a.join(" ")),!0},sd=(e,n,o)=>{const r=Lt(Zi(e,n),a=>a!==o);return r.length>0?Cr(e,n,r.join(" ")):Zs(e,n),!1},vu=e=>e.dom.classList!==void 0,yu=e=>Zi(e,"class"),dl=(e,n)=>od(e,"class",n),_a=(e,n)=>sd(e,"class",n),pg=(e,n)=>Cn(yu(e),n)?_a(e,n):dl(e,n),xi=(e,n)=>{vu(e)?e.dom.classList.add(n):dl(e,n)},vf=e=>{(vu(e)?e.dom.classList:yu(e)).length===0&&Zs(e,"class")},rd=(e,n)=>{vu(e)?e.dom.classList.remove(n):_a(e,n),vf(e)},yf=(e,n)=>{const o=vu(e)?e.dom.classList.toggle(n):pg(e,n);return vf(e),o},Om=(e,n)=>vu(e)&&e.dom.classList.contains(n),cd=(e,n)=>{const r=(n||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){const a="HTML does not have a single root node";throw console.error(a,e),new Error(a)}return Cu(r.childNodes[0])},Dm=(e,n)=>{const r=(n||document).createElement(e);return Cu(r)},Cf=(e,n)=>{const r=(n||document).createTextNode(e);return Cu(r)},Cu=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},de={fromHtml:cd,fromTag:Dm,fromText:Cf,fromDom:Cu,fromPoint:(e,n,o)=>F.from(e.dom.elementFromPoint(n,o)).map(Cu)},ad=(e,n)=>{const o=[],r=u=>(o.push(u),n(u));let a=n(e);do a=a.bind(r);while(a.isSome());return o},ml=(e,n)=>{const o=e.dom;if(o.nodeType!==nd)return!1;{const r=o;if(r.matches!==void 0)return r.matches(n);if(r.msMatchesSelector!==void 0)return r.msMatchesSelector(n);if(r.webkitMatchesSelector!==void 0)return r.webkitMatchesSelector(n);if(r.mozMatchesSelector!==void 0)return r.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}},Ih=e=>e.nodeType!==nd&&e.nodeType!==ul&&e.nodeType!==ra||e.childElementCount===0,Lh=(e,n)=>{const o=n===void 0?document:n.dom;return Ih(o)?[]:Rn(o.querySelectorAll(e),de.fromDom)},wu=(e,n)=>{const o=n===void 0?document:n.dom;return Ih(o)?F.none():F.from(o.querySelector(e)).map(de.fromDom)},po=(e,n)=>e.dom===n.dom,aa=(e,n)=>{const o=e.dom,r=n.dom;return o===r?!1:o.contains(r)},Pc=e=>de.fromDom(e.dom.ownerDocument),Su=e=>Rr(e)?e:Pc(e),wf=e=>de.fromDom(Su(e).dom.documentElement),zd=e=>de.fromDom(Su(e).dom.defaultView),la=e=>F.from(e.dom.parentNode).map(de.fromDom),Rm=e=>F.from(e.dom.parentElement).map(de.fromDom),ji=(e,n)=>{const o=ue(n)?n:je;let r=e.dom;const a=[];for(;r.parentNode!==null&&r.parentNode!==void 0;){const u=r.parentNode,f=de.fromDom(u);if(a.push(f),o(f)===!0)break;r=u}return a},Mm=e=>{const n=o=>Lt(o,r=>!po(e,r));return la(e).map(wc).map(n).getOr([])},Gi=e=>F.from(e.dom.previousSibling).map(de.fromDom),Aa=e=>F.from(e.dom.nextSibling).map(de.fromDom),Fh=e=>mn(ad(e,Gi)),Ud=e=>ad(e,Aa),wc=e=>Rn(e.dom.childNodes,de.fromDom),Ka=(e,n)=>{const o=e.dom.childNodes;return F.from(o[n]).map(de.fromDom)},Oa=e=>Ka(e,0),ld=e=>Ka(e,e.dom.childNodes.length-1),Wd=e=>e.dom.childNodes.length,vg=e=>{const n=e.dom.head;if(n==null)throw new Error("Head is not available yet");return de.fromDom(n)},Zd=e=>ca(e)&&Oe(e.dom.host),ri=e=>de.fromDom(e.dom.getRootNode()),jd=e=>Zd(e)?e:vg(Su(e)),S1=e=>Zd(e)?e:de.fromDom(Su(e).dom.body),yg=e=>{const n=ri(e);return Zd(n)?F.some(n):F.none()},Hh=e=>de.fromDom(e.dom.host),Cg=e=>{if(Oe(e.target)){const n=de.fromDom(e.target);if(mo(n)&&Gd(n)&&e.composed&&e.composedPath){const o=e.composedPath();if(o)return ro(o)}}return F.from(e.target)},Gd=e=>Oe(e.dom.shadowRoot),id=e=>{const n=ws(e)?e.dom.parentNode:e.dom;if(n==null||n.ownerDocument===null)return!1;const o=n.ownerDocument;return yg(de.fromDom(n)).fold(()=>o.body.contains(n),Bo(id,Hh))};var Nm=(e,n,o,r,a)=>e(o,r)?F.some(o):ue(a)&&a(o)?F.none():n(o,r,a);const lr=(e,n,o)=>{let r=e.dom;const a=ue(o)?o:je;for(;r.parentNode;){r=r.parentNode;const u=de.fromDom(r);if(n(u))return F.some(u);if(a(u))break}return F.none()},ir=(e,n,o)=>Nm((a,u)=>u(a),lr,e,n,o),xu=(e,n)=>{const o=e.dom;return o.parentNode?jl(de.fromDom(o.parentNode),r=>!po(e,r)&&n(r)):F.none()},jl=(e,n)=>{const o=a=>n(de.fromDom(a));return qo(e.dom.childNodes,o).map(de.fromDom)},wg=(e,n)=>{const o=r=>{for(let a=0;a<r.childNodes.length;a++){const u=de.fromDom(r.childNodes[a]);if(n(u))return F.some(u);const f=o(r.childNodes[a]);if(f.isSome())return f}return F.none()};return o(e.dom)},cc=(e,n,o)=>lr(e,r=>ml(r,n),o),hn=(e,n)=>wu(n,e),qi=(e,n,o)=>Nm((a,u)=>ml(a,u),cc,e,n,o),Sg=e=>qi(e,"[contenteditable]"),Al=(e,n=!1)=>id(e)?e.dom.isContentEditable:Sg(e).fold(tt(n),o=>Yo(o)==="true"),Yo=e=>e.dom.contentEditable,Tu=e=>e.style!==void 0&&ue(e.style.getPropertyValue),Pm=(e,n,o)=>{if(!ee(o))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",o,":: Element ",e),new Error("CSS value must be a string: "+o);Tu(e)&&e.style.setProperty(n,o)},Sf=(e,n)=>{Tu(e)&&e.style.removeProperty(n)},xg=(e,n,o)=>{const r=e.dom;Pm(r,n,o)},ao=(e,n)=>{const o=e.dom;pt(n,(r,a)=>{Pm(o,a,r)})},Lr=(e,n)=>{const o=e.dom,a=window.getComputedStyle(o).getPropertyValue(n);return a===""&&!id(e)?Eu(o,n):a},Eu=(e,n)=>Tu(e)?e.style.getPropertyValue(n):"",ku=(e,n)=>{const o=e.dom,r=Eu(o,n);return F.from(r).filter(a=>a.length>0)},fl=e=>{const n={},o=e.dom;if(Tu(o))for(let r=0;r<o.style.length;r++){const a=o.style.item(r);n[a]=o.style[a]}return n},Ya=(e,n)=>{const o=e.dom;Sf(o,n),bs(Xs(e,"style").map(Ps),"")&&Zs(e,"style")},Ol=e=>e.dom.offsetWidth,Ds=(e,n)=>{la(e).each(r=>{r.dom.insertBefore(n.dom,e.dom)})},Gl=(e,n)=>{Aa(e).fold(()=>{la(e).each(a=>{fc(a,n)})},r=>{Ds(r,n)})},ud=(e,n)=>{Oa(e).fold(()=>{fc(e,n)},r=>{e.dom.insertBefore(n.dom,r.dom)})},fc=(e,n)=>{e.dom.appendChild(n.dom)},ci=(e,n)=>{Ds(e,n),fc(n,e)},Sr=(e,n)=>{xe(n,(o,r)=>{const a=r===0?e:n[r-1];Gl(a,o)})},_u=(e,n)=>{xe(n,o=>{fc(e,o)})},qd=e=>{e.dom.textContent="",xe(wc(e),n=>{Ss(n)})},Ss=e=>{const n=e.dom;n.parentNode!==null&&n.parentNode.removeChild(n)},ai=e=>{const n=wc(e);n.length>0&&Sr(e,n),Ss(e)},xf=(e,n)=>{const r=(n||document).createElement("div");return r.innerHTML=e,wc(de.fromDom(r))},Ki=e=>Rn(e,de.fromDom),Hs=e=>e.dom.innerHTML,Au=(e,n)=>{const r=Pc(e).dom,a=de.fromDom(r.createDocumentFragment()),u=xf(n,r);_u(a,u),qd(e),fc(e,a)},Xa=e=>{const n=de.fromTag("div"),o=de.fromDom(e.dom.cloneNode(!0));return fc(n,o),Hs(n)},Kd=(e,n,o,r,a,u,f)=>({target:e,x:n,y:o,stop:r,prevent:a,kill:u,raw:f}),To=e=>{const n=de.fromDom(Cg(e).getOr(e.target)),o=()=>e.stopPropagation(),r=()=>e.preventDefault(),a=A(r,o);return Kd(n,e.clientX,e.clientY,o,r,a,e)},Yd=(e,n)=>o=>{e(o)&&n(To(o))},Tf=(e,n,o,r,a)=>{const u=Yd(o,r);return e.dom.addEventListener(n,u,a),{unbind:Je(R,e,n,u,a)}},x=(e,n,o,r)=>Tf(e,n,o,r,!1),R=(e,n,o,r)=>{e.dom.removeEventListener(n,o,r)},H=(e,n)=>({left:e,top:n,translate:(r,a)=>H(e+r,n+a)}),ce=H,he=e=>{const n=e.getBoundingClientRect();return ce(n.left,n.top)},ot=(e,n)=>e!==void 0?e:n!==void 0?n:0,On=e=>{const n=e.dom.ownerDocument,o=n.body,r=n.defaultView,a=n.documentElement;if(o===e.dom)return ce(o.offsetLeft,o.offsetTop);const u=ot(r==null?void 0:r.pageYOffset,a.scrollTop),f=ot(r==null?void 0:r.pageXOffset,a.scrollLeft),b=ot(a.clientTop,o.clientTop),C=ot(a.clientLeft,o.clientLeft);return so(e).translate(f-C,u-b)},so=e=>{const n=e.dom,r=n.ownerDocument.body;return r===n?ce(r.offsetLeft,r.offsetTop):id(e)?he(n):ce(0,0)},qn=e=>{const n=e!==void 0?e.dom:document,o=n.body.scrollLeft||n.documentElement.scrollLeft,r=n.body.scrollTop||n.documentElement.scrollTop;return ce(o,r)},pn=(e,n,o)=>{const a=(o!==void 0?o.dom:document).defaultView;a&&a.scrollTo(e,n)},ur=(e,n)=>{U().browser.isSafari()&&ue(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(n)},Jr=e=>{const n=e===void 0?window:e;return U().browser.isFirefox()?F.none():F.from(n.visualViewport)},Da=(e,n,o,r)=>({x:e,y:n,width:o,height:r,right:e+o,bottom:n+r}),Ou=e=>{const n=e===void 0?window:e,o=n.document,r=qn(de.fromDom(o));return Jr(n).fold(()=>{const a=n.document.documentElement,u=a.clientWidth,f=a.clientHeight;return Da(r.left,r.top,u,f)},a=>Da(Math.max(a.pageLeft,r.left),Math.max(a.pageTop,r.top),a.width,a.height))},Bm=(e,n)=>Lt(wc(e),n),Tg=(e,n)=>{let o=[];return xe(wc(e),r=>{n(r)&&(o=o.concat([r])),o=o.concat(Tg(r,n))}),o},Ja=(e,n)=>Lh(n,e),Eg=(e,n,o)=>lr(e,n,o).isSome(),gv=(e,n)=>xu(e,n).isSome(),x1=(e,n)=>wg(e,n).isSome();class Bc{constructor(n,o){this.node=n,this.rootNode=o,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(n){return this.node=this.findSibling(this.node,"firstChild","nextSibling",n),this.node}prev(n){return this.node=this.findSibling(this.node,"lastChild","previousSibling",n),this.node}prev2(n){return this.node=this.findPreviousNode(this.node,n),this.node}findSibling(n,o,r,a){if(n){if(!a&&n[o])return n[o];if(n!==this.rootNode){let u=n[r];if(u)return u;for(let f=n.parentNode;f&&f!==this.rootNode;f=f.parentNode)if(u=f[r],u)return u}}}findPreviousNode(n,o){if(n){const r=n.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!o){for(let u=r.lastChild;u;u=u.lastChild)if(!u.lastChild)return u}return r}const a=n.parentNode;if(a&&a!==this.rootNode)return a}}}const Vh="\uFEFF",$c=" ",zh=e=>e===Vh,ql=e=>e.replace(/\uFEFF/g,""),An=/^[ \t\r\n]*$/,Kl=e=>An.test(e),T1=e=>{for(const n of e)if(!zh(n))return!1;return!0},Uh=e=>" \f	\v".indexOf(e)!==-1,$m=e=>e===`
`||e==="\r",E1=(e,n)=>n<e.length&&n>=0?$m(e[n]):!1,Ti=(e,n=4,o=!0,r=!0)=>{const a=Ir(" ",n),u=e.replace(/\t/g,a);return Ho(u,(b,C)=>Uh(C)||C===$c?b.pcIsSpace||b.str===""&&o||b.str.length===u.length-1&&r||E1(u,b.str.length+1)?{pcIsSpace:!1,str:b.str+$c}:{pcIsSpace:!0,str:b.str+" "}:{pcIsSpace:$m(C),str:b.str+C},{pcIsSpace:!1,str:""}).str},Du=e=>n=>!!n&&n.nodeType===e,Im=e=>!!e&&!Object.getPrototypeOf(e),$t=Du(1),Ei=e=>$t(e)&&Oo(de.fromDom(e)),Wh=e=>$t(e)&&e.namespaceURI==="http://www.w3.org/2000/svg",Ef=e=>{const n=e.toLowerCase();return o=>Oe(o)&&o.nodeName.toLowerCase()===n},ki=e=>{const n=e.map(o=>o.toLowerCase());return o=>{if(o&&o.nodeName){const r=o.nodeName.toLowerCase();return Cn(n,r)}return!1}},kg=(e,n)=>{const o=n.toLowerCase().split(" ");return r=>{if($t(r)){const a=r.ownerDocument.defaultView;if(a)for(let u=0;u<o.length;u++){const f=a.getComputedStyle(r,null);if((f?f.getPropertyValue(e):null)===o[u])return!0}}return!1}},Lm=e=>n=>$t(n)&&n.hasAttribute(e),dd=e=>$t(e)&&e.hasAttribute("data-mce-bogus"),_g=e=>$t(e)&&e.getAttribute("data-mce-bogus")==="all",Yi=e=>$t(e)&&e.tagName==="TABLE",hv=e=>n=>!!(Ei(n)&&(n.contentEditable===e||n.getAttribute("data-mce-contenteditable")===e)),xr=ki(["textarea","input"]),dt=Du(3),Qa=Du(4),Fm=Du(7),Zr=Du(8),kf=Du(9),Ic=Du(11),cs=Ef("br"),Ag=Ef("img"),Ke=hv("true"),as=hv("false"),Og=ki(["td","th"]),Sc=ki(["td","th","caption"]),Ra=ki(["video","audio","object","embed"]),li=Ef("li"),k1=Ef("details"),Xd=Ef("summary"),_1={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},Yl=(e,n,o)=>{const r=de.fromDom(n),a=de.fromDom(e),u=o.getWhitespaceElements();return Eg(a,b=>yn(u,Q(b)),Je(po,r))},Qo=e=>$t(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),Ru=(e,n)=>$t(e)&&yn(n.getNonEmptyElements(),e.nodeName),Dg=Lm("data-mce-bookmark"),xc=e=>Rm(de.fromDom(e)).exists(n=>!Al(n)),Zh=(e,n,o)=>Kl(e.data)&&!Yl(e,n,o),Xi=(e,n,o,r)=>dt(e)&&!Zh(e,n,o)&&(!r.includeZwsp||!T1(e.data)),Rg=(e,n,o,r)=>ue(r.isContent)&&r.isContent(n)||Ru(n,e)||Dg(n)||Qo(n)||Xi(n,o,e,r)||as(n)||Ke(n)&&xc(n),Lc=(e,n,o)=>{const r={..._1,...o};if(r.checkRootAsContent&&Rg(e,n,n,r))return!1;let a=n.firstChild,u=0;if(!a)return!0;const f=new Bc(a,n);do{if(r.skipBogus&&$t(a)){const b=a.getAttribute("data-mce-bogus");if(b){a=f.next(b==="all");continue}}if(Zr(a)){a=f.next(!0);continue}if(cs(a)){u++,a=f.next();continue}if(Rg(e,a,n,r))return!1;a=f.next()}while(a);return u<=1},Ma=(e,n,o)=>Lc(e,n.dom,{checkRootAsContent:!0,...o}),Te=(e,n,o)=>Rg(e,n,n,{includeZwsp:_1.includeZwsp,...o}),Rs=e=>{let n=e;return{get:()=>n,set:a=>{n=a}}},jh=e=>{const n=Rs(F.none()),o=()=>n.get().each(e);return{clear:()=>{o(),n.set(F.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:b=>{o(),n.set(F.some(b))}}},Qr=e=>{const n=Rs(F.none()),o=()=>n.get().each(b=>clearInterval(b));return{clear:()=>{o(),n.set(F.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:b=>{o(),n.set(F.some(setInterval(b,e)))}}},qc=()=>{const e=jh(Mt);return{...e,on:o=>e.get().each(o)}},Tc=e=>{const n=e.toLowerCase();return n==="svg"?"svg":n==="math"?"math":"html"},Js=e=>Tc(e)!=="html",Gh=e=>Js(e.nodeName),Jd=e=>Tc(e.nodeName),w=["svg","math"],_=()=>{const e=qc(),n=()=>e.get().map(Jd).getOr("html");return{track:a=>(Gh(a)?e.set(a):e.get().exists(u=>!u.contains(a))&&e.clear(),n()),current:n,reset:()=>{e.clear()}}},L="data-mce-block",Y=e=>Lt(Vt(e),n=>!/[A-Z]/.test(n)),pe=e=>Rn(Y(e),n=>{const o=CSS.escape(n);return`${o}:`+Rn(w,r=>`not(${r} ${o})`).join(":")}).join(","),Ge=(e,n)=>Oe(n.querySelector(e))?(n.setAttribute(L,"true"),n.getAttribute("data-mce-selected")==="inline-boundary"&&n.removeAttribute("data-mce-selected"),!0):(n.removeAttribute(L),!1),St=(e,n)=>{const o=pe(e.getTransparentElements()),r=pe(e.getBlockElements());return Lt(n.querySelectorAll(o),a=>Ge(r,a))},on=(e,n,o)=>{var r;const a=o?"lastChild":"firstChild";for(let u=n[a];u;u=u[a])if(Lc(e,u,{checkRootAsContent:!0})){(r=u.parentNode)===null||r===void 0||r.removeChild(u);return}},Fn=(e,n,o)=>{const r=document.createRange(),a=n.parentNode;if(a){r.setStartBefore(n),r.setEndBefore(o);const u=r.extractContents();on(e,u,!0),r.setStartAfter(o),r.setEndAfter(n);const f=r.extractContents();on(e,f,!1),Lc(e,u,{checkRootAsContent:!0})||a.insertBefore(u,n),Lc(e,o,{checkRootAsContent:!0})||a.insertBefore(o,n),Lc(e,f,{checkRootAsContent:!0})||a.insertBefore(f,n),a.removeChild(n)}},lo=(e,n,o)=>{const r=e.getBlockElements(),a=de.fromDom(n),u=b=>Q(b)in r,f=b=>po(b,a);xe(Ki(o),b=>{lr(b,u,f).each(C=>{const T=Bm(b,M=>u(M)&&!e.isValidChild(Q(C),Q(M)));if(T.length>0){const M=Rm(C);xe(T,P=>{lr(P,u,f).each($=>{Fn(e,$.dom,P.dom)})}),M.each(P=>St(e,P.dom))}})})},js=(e,n,o)=>{xe([...o,...md(e,n)?[n]:[]],r=>xe(Ja(de.fromDom(r),r.nodeName.toLowerCase()),a=>{fd(e,a.dom)&&ai(a)}))},gs=(e,n)=>{const o=St(e,n);lo(e,n,o),js(e,n,o)},dr=(e,n)=>{if(Mu(e,n)){const o=pe(e.getBlockElements());Ge(o,n)}},gl=(e,n,o)=>{const r=u=>po(u,de.fromDom(n)),a=ji(de.fromDom(o),r);jc(a,a.length-2).filter(mo).fold(()=>gs(e,n),u=>gs(e,u.dom))},ii=e=>e.hasAttribute(L),ia=(e,n)=>yn(e.getTransparentElements(),n),Mu=(e,n)=>$t(n)&&ia(e,n.nodeName),md=(e,n)=>Mu(e,n)&&ii(n),fd=(e,n)=>Mu(e,n)&&!ii(n),Qd=(e,n)=>n.type===1&&ia(e,n.name)&&ee(n.attr(L)),_f=U().browser,Mg=e=>qo(e,mo),qh=e=>_f.isFirefox()&&Q(e)==="table"?Mg(wc(e)).filter(n=>Q(n)==="caption").bind(n=>Mg(Ud(n)).map(o=>{const r=o.dom.offsetTop,a=n.dom.offsetTop,u=n.dom.offsetHeight;return r<=a?-u:0})).getOr(0):0,gc=(e,n)=>e.children&&Cn(e.children,n),Ji=(e,n,o)=>{let r=0,a=0;const u=e.ownerDocument;if(o=o||e,n){if(o===e&&n.getBoundingClientRect&&Lr(de.fromDom(e),"position")==="static"){const b=n.getBoundingClientRect();return r=b.left+(u.documentElement.scrollLeft||e.scrollLeft)-u.documentElement.clientLeft,a=b.top+(u.documentElement.scrollTop||e.scrollTop)-u.documentElement.clientTop,{x:r,y:a}}let f=n;for(;f&&f!==o&&f.nodeType&&!gc(f,o);){const b=f;r+=b.offsetLeft||0,a+=b.offsetTop||0,f=b.offsetParent}for(f=n.parentNode;f&&f!==o&&f.nodeType&&!gc(f,o);)r-=f.scrollLeft||0,a-=f.scrollTop||0,f=f.parentNode;a+=qh(de.fromDom(n))}return{x:r,y:a}},em=(e,n={})=>{let o=0;const r={},a=de.fromDom(e),u=Su(a),f=me=>{n.referrerPolicy=me},b=me=>{n.contentCssCors=me},C=me=>{fc(jd(a),me)},T=me=>{const we=jd(a);hn(we,"#"+me).each(Ss)},M=me=>Xo(r,me).getOrThunk(()=>({id:"mce-u"+o++,passed:[],failed:[],count:0})),P=me=>new Promise((we,Se)=>{let _e;const nt=it._addCacheSuffix(me),wt=M(nt);r[nt]=wt,wt.count++;const Zt=(qt,Sn)=>{xe(qt,Us),wt.status=Sn,wt.passed=[],wt.failed=[],_e&&(_e.onload=null,_e.onerror=null,_e=null)},We=()=>Zt(wt.passed,2),Pe=()=>Zt(wt.failed,3);if(we&&wt.passed.push(we),Se&&wt.failed.push(Se),wt.status===1)return;if(wt.status===2){We();return}if(wt.status===3){Pe();return}wt.status=1;const rt=de.fromTag("link",u.dom);Xr(rt,{rel:"stylesheet",type:"text/css",id:wt.id}),n.contentCssCors&&Cr(rt,"crossOrigin","anonymous"),n.referrerPolicy&&Cr(rt,"referrerpolicy",n.referrerPolicy),_e=rt.dom,_e.onload=We,_e.onerror=Pe,C(rt),Cr(rt,"href",nt)}),$=(me,we)=>{const Se=M(me);r[me]=Se,Se.count++;const _e=de.fromTag("style",u.dom);Xr(_e,{rel:"stylesheet",type:"text/css",id:Se.id}),_e.dom.innerHTML=we,C(_e)},j=me=>Promise.allSettled(Rn(me,Se=>P(Se).then(tt(Se)))).then(Se=>{const _e=Ht(Se,nt=>nt.status==="fulfilled");return _e.fail.length>0?Promise.reject(Rn(_e.fail,nt=>nt.reason)):Rn(_e.pass,nt=>nt.value)}),J=me=>{const we=it._addCacheSuffix(me);Xo(r,we).each(Se=>{--Se.count===0&&(delete r[we],T(Se.id))})};return{load:P,loadRawCss:$,loadAll:j,unload:J,unloadRawCss:me=>{Xo(r,me).each(we=>{--we.count===0&&(delete r[me],T(we.id))})},unloadAll:me=>{xe(me,we=>{J(we)})},_setReferrerPolicy:f,_setContentCssCors:b}},fr=(()=>{const e=new WeakMap;return{forElement:(o,r)=>{const u=ri(o).dom;return F.from(e.get(u)).getOrThunk(()=>{const f=em(u,r);return e.set(u,f),f})}}})(),Mr=e=>e.nodeName.toLowerCase()==="span",el=(e,n)=>Oe(e)&&(Te(n,e)||n.isInline(e.nodeName.toLowerCase())),Kh=(e,n,o)=>{const r=new Bc(e,n).prev(!1),a=new Bc(e,n).next(!1),u=gn(r)||el(r,o),f=gn(a)||el(a,o);return u&&f},Yh=e=>Mr(e)&&e.getAttribute("data-mce-type")==="bookmark",Dl=(e,n,o)=>dt(e)&&e.data.length>0&&Kh(e,n,o),Rl=e=>$t(e)?e.childNodes.length>0:!1,K2=e=>Ic(e)||kf(e),Qi=(e,n,o,r)=>{var a;const u=r||n;if($t(n)&&Yh(n))return n;const f=n.childNodes;for(let b=f.length-1;b>=0;b--)Qi(e,f[b],o,u);if($t(n)){const b=n.childNodes;b.length===1&&Yh(b[0])&&((a=n.parentNode)===null||a===void 0||a.insertBefore(b[0],n))}return!K2(n)&&!Te(o,n)&&!Rl(n)&&!Dl(n,u,o)&&e.remove(n),n},Ng=it.makeMap,gd=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,tm=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Pg=/[<>&\"\']/g,s_=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,A1={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},Af={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},r_={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},ac=e=>{const n=de.fromTag("div").dom;return n.innerHTML=e,n.textContent||n.innerText||e},pv=(e,n)=>{const o={};if(e){const r=e.split(",");n=n||10;for(let a=0;a<r.length;a+=2){const u=String.fromCharCode(parseInt(r[a],n));if(!Af[u]){const f="&"+r[a+1]+";";o[u]=f,o[f]=u}}return o}else return},hd=pv("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Bg=(e,n)=>e.replace(n?gd:tm,o=>Af[o]||o),O1=e=>(""+e).replace(Pg,n=>Af[n]||n),pd=(e,n)=>e.replace(n?gd:tm,o=>o.length>1?"&#"+((o.charCodeAt(0)-55296)*1024+(o.charCodeAt(1)-56320)+65536)+";":Af[o]||"&#"+o.charCodeAt(0)+";"),Na=(e,n,o)=>{const r=o||hd;return e.replace(n?gd:tm,a=>Af[a]||r[a]||a)},Df={encodeRaw:Bg,encodeAllRaw:O1,encodeNumeric:pd,encodeNamed:Na,getEncodeFunc:(e,n)=>{const o=pv(n)||hd,r=(f,b)=>f.replace(b?gd:tm,C=>Af[C]!==void 0?Af[C]:o[C]!==void 0?o[C]:C.length>1?"&#"+((C.charCodeAt(0)-55296)*1024+(C.charCodeAt(1)-56320)+65536)+";":"&#"+C.charCodeAt(0)+";"),a=(f,b)=>Na(f,b,o),u=Ng(e.replace(/\+/g,","));return u.named&&u.numeric?r:u.named?n?a:Na:u.numeric?pd:Bg},decode:e=>e.replace(s_,(n,o)=>o?(o.charAt(0).toLowerCase()==="x"?o=parseInt(o.substr(1),16):o=parseInt(o,10),o>65535?(o-=65536,String.fromCharCode(55296+(o>>10),56320+(o&1023))):A1[o]||String.fromCharCode(o)):r_[n]||hd[n]||ac(n))},ua=(e,n)=>(e=it.trim(e),e?e.split(n||" "):[]),vv=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),yv=e=>Xe(e)&&e.source&&Object.prototype.toString.call(e)==="[object RegExp]",c_=e=>{const n=o=>Qe(o)?Rn(o,n):yv(o)?new RegExp(o.source,o.flags):Xe(o)?yo(o,n):o;return n(e)},Y2=e=>{const n=/^(~)?(.+)$/;return lt(ua(e,","),o=>{const r=n.exec(o);if(r){const u=r[1]==="~"?"span":"div",f=r[2];return[{cloneName:u,name:f}]}else return[]})},Rf=e=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",...e!=="html4"?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],...e!=="html5-strict"?["xml:lang"]:[]]),$g=e=>{let n,o;n="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",o="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"&&(n+=" article aside details dialog figure main header footer hgroup section nav "+"a ins del canvas map",o+=" audio canvas command data datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),e!=="html5-strict"&&(o=[o,"acronym applet basefont big font strike tt"].join(" "),n=[n,"center dir isindex noframes"].join(" "));const r=[n,o].join(" ");return{blockContent:n,phrasingContent:o,flowContent:r}},Xl=e=>{const{blockContent:n,phrasingContent:o,flowContent:r}=$g(e),a=u=>Object.freeze(u.split(" "));return Object.freeze({blockContent:a(n),phrasingContent:a(o),flowContent:a(r)})},_i={html4:Fe(()=>Xl("html4")),html5:Fe(()=>Xl("html5")),"html5-strict":Fe(()=>Xl("html5-strict"))},Ai=(e,n)=>{const{blockContent:o,phrasingContent:r,flowContent:a}=_i[e]();return n==="blocks"?F.some(o):n==="phrasing"?F.some(r):n==="flow"?F.some(a):F.none()},D1=e=>{const n=Rf(e),{phrasingContent:o,flowContent:r}=$g(e),a={},u=(C,T,M)=>{a[C]={attributes:Ao(T,tt({})),attributesOrder:T,children:Ao(M,tt({}))}},f=(C,T="",M="")=>{const P=ua(M),$=ua(C);let j=$.length;const J=[...n,...ua(T)];for(;j--;)u($[j],J.slice(),P)},b=(C,T)=>{const M=ua(C),P=ua(T);let $=M.length;for(;$--;){const j=a[M[$]];for(let J=0,q=P.length;J<q;J++)j.attributes[P[J]]={},j.attributesOrder.push(P[J])}};return e!=="html5-strict"&&(xe(ua("acronym applet basefont big font strike tt"),M=>{f(M,"",o)}),xe(ua("center dir isindex noframes"),M=>{f(M,"",r)})),f("html","manifest","head body"),f("head","","base command link meta noscript script style title"),f("title hr noscript br"),f("base","href target"),f("link","href rel media hreflang type sizes hreflang"),f("meta","name http-equiv content charset"),f("style","media type scoped"),f("script","src async defer type charset"),f("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",r),f("dd div","",r),f("address dt caption","",e==="html4"?o:r),f("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",o),f("blockquote","cite",r),f("ol","reversed start type","li"),f("ul","","li"),f("li","value",r),f("dl","","dt dd"),f("a","href target rel media hreflang type",e==="html4"?o:r),f("q","cite",o),f("ins del","cite datetime",r),f("img","src sizes srcset alt usemap ismap width height"),f("iframe","src name width height",r),f("embed","src type width height"),f("object","data type typemustmatch name usemap form width height",[r,"param"].join(" ")),f("param","name value"),f("map","name",[r,"area"].join(" ")),f("area","alt coords shape href target rel media hreflang type"),f("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),f("colgroup","span","col"),f("col","span"),f("tbody thead tfoot","","tr"),f("tr","","td th"),f("td","colspan rowspan headers",r),f("th","colspan rowspan headers scope abbr",r),f("form","accept-charset action autocomplete enctype method name novalidate target",r),f("fieldset","disabled form name",[r,"legend"].join(" ")),f("label","form for",o),f("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),f("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?r:o),f("select","disabled form multiple name required size","option optgroup"),f("optgroup","disabled label","option"),f("option","disabled label selected value"),f("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),f("menu","type label",[r,"li"].join(" ")),f("noscript","",r),e!=="html4"&&(f("wbr"),f("ruby","",[o,"rt rp"].join(" ")),f("figcaption","",r),f("mark rt rp bdi","",o),f("summary","",[o,"h1 h2 h3 h4 h5 h6"].join(" ")),f("canvas","width height",r),f("data","value",o),f("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[r,"track source"].join(" ")),f("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[r,"track source"].join(" ")),f("picture","","img source"),f("source","src srcset type media sizes"),f("track","kind src srclang label default"),f("datalist","",[o,"option"].join(" ")),f("article section nav aside main header footer","",r),f("hgroup","","h1 h2 h3 h4 h5 h6"),f("figure","",[r,"figcaption"].join(" ")),f("time","datetime",o),f("dialog","open",r),f("command","type label icon disabled checked radiogroup command"),f("output","for form name",o),f("progress","value max",o),f("meter","value min max low high optimum",o),f("details","open",[r,"summary"].join(" ")),f("keygen","autofocus challenge disabled form keytype name"),u("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),e!=="html5-strict"&&(b("script","language xml:space"),b("style","xml:space"),b("object","declare classid code codebase codetype archive standby align border hspace vspace"),b("embed","align name hspace vspace"),b("param","valuetype type"),b("a","charset name rev shape coords"),b("br","clear"),b("applet","codebase archive code object alt name width height align hspace vspace"),b("img","name longdesc align border hspace vspace"),b("iframe","longdesc frameborder marginwidth marginheight scrolling align"),b("font basefont","size color face"),b("input","usemap align"),b("select"),b("textarea"),b("h1 h2 h3 h4 h5 h6 div p legend caption","align"),b("ul","type compact"),b("li","type"),b("ol dl menu dir","compact"),b("pre","width xml:space"),b("hr","align noshade size width"),b("isindex","prompt"),b("table","summary width frame rules cellspacing cellpadding align bgcolor"),b("col","width align char charoff valign"),b("colgroup","width align char charoff valign"),b("thead","align char charoff valign"),b("tr","align char charoff valign bgcolor"),b("th","axis align char charoff valign nowrap bgcolor width height"),b("form","accept"),b("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),b("tfoot","align char charoff valign"),b("tbody","align char charoff valign"),b("area","nohref"),b("body","background bgcolor text link vlink alink")),e!=="html4"&&(b("input button select textarea","autofocus"),b("input textarea","placeholder"),b("a","download"),b("link script img","crossorigin"),b("img","loading"),b("iframe","sandbox seamless allow allowfullscreen loading referrerpolicy")),e!=="html4"&&xe([a.video,a.audio],C=>{delete C.children.audio,delete C.children.video}),xe(ua("a form meter progress dfn"),C=>{a[C]&&delete a[C].children[C]}),delete a.caption.children.table,delete a.script,a},R1=e=>e==="-"?"remove":"add",Xh=e=>{const n=/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/;return F.from(n.exec(e)).map(o=>({preset:o[1]==="@",name:o[2]}))},Ny=e=>{const n=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return lt(ua(e,","),o=>{const r=n.exec(o);if(r){const a=r[1],u=a?R1(a):"replace",f=r[2],b=lt(ua(r[3],"|"),C=>Xh(C).toArray());return[{operation:u,name:f,validChildren:b}]}else return[]})},X2=(e,n)=>{const o=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,r=/[*?+]/,{attributes:a,attributesOrder:u}=n;return xe(ua(e,"|"),f=>{const b=o.exec(f);if(b){const C={},T=b[1],M=b[2].replace(/[\\:]:/g,":"),P=b[3],$=b[4];if(T==="!"&&(n.attributesRequired=n.attributesRequired||[],n.attributesRequired.push(M),C.required=!0),T==="-"){delete a[M],u.splice(it.inArray(u,M),1);return}if(P&&(P==="="?(n.attributesDefault=n.attributesDefault||[],n.attributesDefault.push({name:M,value:$}),C.defaultValue=$):P==="~"?(n.attributesForced=n.attributesForced||[],n.attributesForced.push({name:M,value:$}),C.forcedValue=$):P==="<"&&(C.validValues=it.makeMap($,"?"))),r.test(M)){const j=C;n.attributePatterns=n.attributePatterns||[],j.pattern=vv(M),n.attributePatterns.push(j)}else a[M]||u.push(M),a[M]=C}})},J2=(e,n)=>{pt(e.attributes,(o,r)=>{n.attributes[r]=o}),n.attributesOrder.push(...e.attributesOrder)},Py=(e,n)=>{const o=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return lt(ua(n,","),r=>{const a=o.exec(r);if(a){const u=a[1],f=a[2],b=a[3],C=a[4],T=a[5],M={attributes:{},attributesOrder:[]};if(e.each(P=>J2(P,M)),u==="#"?M.paddEmpty=!0:u==="-"&&(M.removeEmpty=!0),C==="!"&&(M.removeEmptyAttrs=!0),T&&X2(T,M),b&&(M.outputName=f),f==="@")if(e.isNone())e=F.some(M);else return[];return[b?{name:f,element:M,aliasName:b}:{name:f,element:M}]}else return[]})},Jh={},Eo=it.makeMap,ln=it.each,Mf=it.extend,Cv=it.explode,wv=(e,n={})=>{const o=Eo(e," ",Eo(e.toUpperCase()," "));return Mf(o,n)},By=e=>wv("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),Sv=(e,n)=>{if(e){const o={};return ee(e)&&(e={"*":e}),ln(e,(r,a)=>{o[a]=o[a.toUpperCase()]=n==="map"?Eo(r,/[, ]/):Cv(r,/[, ]/)}),o}else return},xs=(e={})=>{var n;const o={},r={};let a=[];const u={},f={},b=(bn,jo,jr)=>{const Qc=e[bn];if(Qc)return Eo(Qc,/[, ]/,Eo(Qc.toUpperCase(),/[, ]/));{let ya=Jh[bn];return ya||(ya=wv(jo,jr),Jh[bn]=ya),ya}},C=(n=e.schema)!==null&&n!==void 0?n:"html5",T=D1(C);e.verify_html===!1&&(e.valid_elements="*[*]");const M=Sv(e.valid_styles),P=Sv(e.invalid_styles,"map"),$=Sv(e.valid_classes,"map"),j=b("whitespace_elements","pre script noscript style textarea video audio iframe object code"),J=b("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),q=b("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),oe=b("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),me="td th iframe video audio object script code",we=b("non_empty_elements",me+" pre svg textarea summary",q),Se=b("move_caret_before_on_enter_elements",me+" table",q),_e="h1 h2 h3 h4 h5 h6",nt=b("text_block_elements",_e+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),wt=b("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",nt),Zt=b("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),We=b("transparent_elements","a ins del canvas map"),Pe=b("wrap_block_elements","pre "+_e);ln("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),bn=>{f[bn]=new RegExp("</"+bn+"[^>]*>","gi")});const rt=bn=>{const jo=F.from(o["@"]),jr=/[*?+]/;xe(Py(jo,bn??""),({name:Qc,element:ya,aliasName:Zc})=>{if(Zc&&(o[Zc]=ya),jr.test(Qc)){const Gr=ya;Gr.pattern=vv(Qc),a.push(Gr)}else o[Qc]=ya})},qt=bn=>{a=[],xe(Vt(o),jo=>{delete o[jo]}),rt(bn)},Sn=(bn,jo)=>{var jr,Qc;delete Jh.text_block_elements,delete Jh.block_elements;const ya=jo.extends?!pu(jo.extends):!1,Zc=jo.extends;if(r[bn]=Zc?r[Zc]:{},u[bn]=Zc??bn,we[bn.toUpperCase()]={},we[bn]={},ya||(wt[bn.toUpperCase()]={},wt[bn]={}),Zc&&!o[bn]&&o[Zc]){const Gr=c_(o[Zc]);delete Gr.removeEmptyAttrs,delete Gr.removeEmpty,o[bn]=Gr}else o[bn]={attributesOrder:[],attributes:{}};if(Qe(jo.attributes)){const Gr=Ql=>{qr.attributesOrder.push(Ql),qr.attributes[Ql]={}},qr=(jr=o[bn])!==null&&jr!==void 0?jr:{};delete qr.attributesDefault,delete qr.attributesForced,delete qr.attributePatterns,delete qr.attributesRequired,qr.attributesOrder=[],qr.attributes={},xe(jo.attributes,Ql=>{const Id=Rf(C);Xh(Ql).each(({preset:hf,name:Em})=>{hf?Em==="global"&&xe(Id,Gr):Gr(Em)})}),o[bn]=qr}if(xt(jo.padEmpty)){const Gr=(Qc=o[bn])!==null&&Qc!==void 0?Qc:{};Gr.paddEmpty=jo.padEmpty,o[bn]=Gr}if(Qe(jo.children)){const Gr={},qr=Id=>{Gr[Id]={}},Ql=Id=>{Ai(C,Id).each(hf=>{xe(hf,qr)})};xe(jo.children,Id=>{Xh(Id).each(({preset:hf,name:Em})=>{hf?Ql(Em):qr(Em)})}),r[bn]=Gr}Zc&&pt(r,(Gr,qr)=>{Gr[Zc]&&(r[qr]=Gr=Mf({},r[qr]),Gr[bn]=Gr[Zc])})},ko=bn=>{xe(Y2(bn??""),({name:jo,cloneName:jr})=>{Sn(jo,{extends:jr})})},_o=bn=>{Xe(bn)?pt(bn,(jo,jr)=>Sn(jr,jo)):ee(bn)&&ko(bn)},ps=bn=>{xe(Ny(bn??""),({operation:jo,name:jr,validChildren:Qc})=>{const ya=jo==="replace"?{"#comment":{}}:r[jr],Zc=qr=>{jo==="remove"?delete ya[qr]:ya[qr]={}},Gr=qr=>{Ai(C,qr).each(Ql=>{xe(Ql,Zc)})};xe(Qc,({preset:qr,name:Ql})=>{qr?Gr(Ql):Zc(Ql)}),r[jr]=ya})},_s=bn=>{const jo=o[bn];if(jo)return jo;let jr=a.length;for(;jr--;){const Qc=a[jr];if(Qc.pattern.test(bn))return Qc}},ic=()=>{e.valid_elements?(qt(e.valid_elements),ln(T,(bn,jo)=>{r[jo]=bn.children})):(ln(T,(bn,jo)=>{o[jo]={attributes:bn.attributes,attributesOrder:bn.attributesOrder},r[jo]=bn.children}),ln(ua("strong/b em/i"),bn=>{const jo=ua(bn,"/");o[jo[1]].outputName=jo[0]}),ln(Zt,(bn,jo)=>{o[jo]&&(e.padd_empty_block_inline_children&&(o[jo].paddInEmptyBlock=!0),o[jo].removeEmpty=!0)}),ln(ua("ol ul blockquote a table tbody"),bn=>{o[bn]&&(o[bn].removeEmpty=!0)}),ln(ua("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),bn=>{o[bn]&&(o[bn].paddEmpty=!0)}),ln(ua("span"),bn=>{o[bn].removeEmptyAttrs=!0})),delete o.svg,_o(e.custom_elements),ps(e.valid_children),rt(e.extended_valid_elements),ps("+ol[ul|ol],+ul[ul|ol]"),ln({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(bn,jo)=>{o[jo]&&(o[jo].parentsRequired=ua(bn))}),e.invalid_elements&&ln(Cv(e.invalid_elements),bn=>{o[bn]&&delete o[bn]}),_s("span")||rt("span[!data-mce-type|*]")},Wc=tt(M),La=tt(P),Ot=tt($),vn=tt(oe),ls=tt(wt),Ft=tt(nt),Nn=tt(Zt),In=tt(Object.seal(q)),It=tt(J),wo=tt(we),No=tt(Se),Jc=tt(j),$s=tt(We),wl=tt(Pe),Fi=tt(Object.seal(f)),gf=(bn,jo)=>{const jr=r[bn.toLowerCase()];return!!(jr&&jr[jo.toLowerCase()])},Fl=(bn,jo)=>{const jr=_s(bn);if(jr)if(jo){if(jr.attributes[jo])return!0;const Qc=jr.attributePatterns;if(Qc){let ya=Qc.length;for(;ya--;)if(Qc[ya].pattern.test(jo))return!0}}else return!0;return!1},pu=bn=>yn(ls(),bn),$d=bn=>!ms(bn,"#")&&Fl(bn)&&!pu(bn),Sl=bn=>yn(wl(),bn)||$d(bn),Hi=tt(u);return ic(),{type:C,children:r,elements:o,getValidStyles:Wc,getValidClasses:Ot,getBlockElements:ls,getInvalidStyles:La,getVoidElements:In,getTextBlockElements:Ft,getTextInlineElements:Nn,getBoolAttrs:vn,getElementRule:_s,getSelfClosingElements:It,getNonEmptyElements:wo,getMoveCaretBeforeOnEnterElements:No,getWhitespaceElements:Jc,getTransparentElements:$s,getSpecialElements:Fi,isValidChild:gf,isValid:Fl,isBlock:pu,isInline:$d,isWrapper:Sl,getCustomElements:Hi,addValidElements:rt,setValidElements:qt,addCustomElements:_o,addValidChildren:ps}},$y=e=>({value:Q2(e)}),Q2=e=>As(e,"#").toUpperCase(),Iy=e=>{const n=e.toString(16);return(n.length===1?"0"+n:n).toUpperCase()},Ye=e=>{const n=Iy(e.red)+Iy(e.green)+Iy(e.blue);return $y(n)},Qh=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,eS=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,Ig=(e,n,o,r)=>({red:e,green:n,blue:o,alpha:r}),tS=(e,n,o,r)=>{const a=parseInt(e,10),u=parseInt(n,10),f=parseInt(o,10),b=parseFloat(r);return Ig(a,u,f,b)},Hm=e=>Qh.test(e)?"rgb":eS.test(e)?"rgba":"other",xv=e=>{const n=Qh.exec(e);if(n!==null)return F.some(tS(n[1],n[2],n[3],"1"));const o=eS.exec(e);return o!==null?F.some(tS(o[1],o[2],o[3],o[4])):F.none()},Lg=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,M1=e=>xv(e).map(Ye).map(n=>"#"+n.value).getOr(e),Nf=(e={},n)=>{const o=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,a=/\s+$/,u={};let f,b;const C=Vh;n&&(f=n.getValidStyles(),b=n.getInvalidStyles());const T=(`\\" \\' \\; \\: ; : `+C).split(" ");for(let P=0;P<T.length;P++)u[T[P]]=C+P,u[C+P]=T[P];const M={parse:P=>{const $={};let j=!1;const J=e.url_converter,q=e.url_converter_scope||M,oe=(We,Pe,rt)=>{const qt=$[We+"-top"+Pe];if(!qt)return;const Sn=$[We+"-right"+Pe];if(!Sn)return;const ko=$[We+"-bottom"+Pe];if(!ko)return;const _o=$[We+"-left"+Pe];if(!_o)return;const ps=[qt,Sn,ko,_o];let _s=ps.length-1;for(;_s--&&ps[_s]===ps[_s+1];);_s>-1&&rt||($[We+Pe]=_s===-1?ps[0]:ps.join(" "),delete $[We+"-top"+Pe],delete $[We+"-right"+Pe],delete $[We+"-bottom"+Pe],delete $[We+"-left"+Pe])},me=We=>{const Pe=$[We];if(!Pe)return;const rt=Pe.indexOf(",")>-1?[Pe]:Pe.split(" ");let qt=rt.length;for(;qt--;)if(rt[qt]!==rt[0])return!1;return $[We]=rt[0],!0},we=(We,Pe,rt,qt)=>{me(Pe)&&me(rt)&&me(qt)&&($[We]=$[Pe]+" "+$[rt]+" "+$[qt],delete $[Pe],delete $[rt],delete $[qt])},Se=We=>(j=!0,u[We]),_e=(We,Pe)=>(j&&(We=We.replace(/\uFEFF[0-9]/g,rt=>u[rt])),Pe||(We=We.replace(/\\([\'\";:])/g,"$1")),We),nt=We=>String.fromCharCode(parseInt(We.slice(1),16)),wt=We=>We.replace(/\\[0-9a-f]+/gi,nt),Zt=(We,Pe,rt,qt,Sn,ko)=>{if(Sn=Sn||ko,Sn)return Sn=_e(Sn),"'"+Sn.replace(/\'/g,"\\'")+"'";if(Pe=_e(Pe||rt||qt||""),!e.allow_script_urls){const _o=Pe.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(_o)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(_o))return""}return J&&(Pe=J.call(q,Pe,"style")),"url('"+Pe.replace(/\'/g,"\\'")+"')"};if(P){P=P.replace(/[\u0000-\u001F]/g,""),P=P.replace(/\\[\"\';:\uFEFF]/g,Se).replace(/\"[^\"]+\"|\'[^\']+\'/g,Pe=>Pe.replace(/[;:]/g,Se));let We;for(;We=r.exec(P);){r.lastIndex=We.index+We[0].length;let Pe=We[1].replace(a,"").toLowerCase(),rt=We[2].replace(a,"");if(Pe&&rt){if(Pe=wt(Pe),rt=wt(rt),Pe.indexOf(C)!==-1||Pe.indexOf('"')!==-1||!e.allow_script_urls&&(Pe==="behavior"||/expression\s*\(|\/\*|\*\//.test(rt)))continue;Pe==="font-weight"&&rt==="700"?rt="bold":(Pe==="color"||Pe==="background-color")&&(rt=rt.toLowerCase()),Hm(rt)==="rgb"&&xv(rt).each(qt=>{rt=M1(Lg(qt)).toLowerCase()}),rt=rt.replace(o,Zt),$[Pe]=j?_e(rt,!0):rt}}oe("border","",!0),oe("border","-width"),oe("border","-color"),oe("border","-style"),oe("padding",""),oe("margin",""),we("border","border-width","border-style","border-color"),$.border==="medium none"&&delete $.border,$["border-image"]==="none"&&delete $["border-image"]}return $},serialize:(P,$)=>{let j="";const J=(oe,me)=>{const we=me[oe];if(we)for(let Se=0,_e=we.length;Se<_e;Se++){const nt=we[Se],wt=P[nt];wt&&(j+=(j.length>0?" ":"")+nt+": "+wt+";")}},q=(oe,me)=>{if(!b||!me)return!0;let we=b["*"];return we&&we[oe]?!1:(we=b[me],!(we&&we[oe]))};return $&&f?(J("*",f),J($,f)):pt(P,(oe,me)=>{oe&&q(me,$)&&(j+=(j.length>0?" ":"")+me+": "+oe+";")}),j}};return M},mr={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},nm=e=>e instanceof Event||ue(e.initEvent),nS=e=>e.isDefaultPrevented===gt||e.isDefaultPrevented===je,Vm=e=>dn(e.preventDefault)||nm(e),Ly=(e,n)=>{const o=n??{};for(const r in e)yn(mr,r)||(o[r]=e[r]);return Oe(e.composedPath)&&(o.composedPath=()=>e.composedPath()),Oe(e.getModifierState)&&(o.getModifierState=r=>e.getModifierState(r)),Oe(e.getTargetRanges)&&(o.getTargetRanges=()=>e.getTargetRanges()),o},Fg=(e,n,o,r)=>{var a;const u=Ly(n,r);return u.type=e,dn(u.target)&&(u.target=(a=u.srcElement)!==null&&a!==void 0?a:o),Vm(n)&&(u.preventDefault=()=>{u.defaultPrevented=!0,u.isDefaultPrevented=gt,ue(n.preventDefault)&&n.preventDefault()},u.stopPropagation=()=>{u.cancelBubble=!0,u.isPropagationStopped=gt,ue(n.stopPropagation)&&n.stopPropagation()},u.stopImmediatePropagation=()=>{u.isImmediatePropagationStopped=gt,u.stopPropagation()},nS(u)||(u.isDefaultPrevented=u.defaultPrevented===!0?gt:je,u.isPropagationStopped=u.cancelBubble===!0?gt:je,u.isImmediatePropagationStopped=je)),u},Fy="mce-data-",Hy=/^(?:mouse|contextmenu)|click/,Ml=(e,n,o,r)=>{e.addEventListener(n,o,r||!1)},ep=(e,n,o,r)=>{e.removeEventListener(n,o,r||!1)},a_=e=>Oe(e)&&Hy.test(e.type),Pf=(e,n)=>{const o=Fg(e.type,e,document,n);if(a_(e)&&gn(e.pageX)&&!gn(e.clientX)){const r=o.target.ownerDocument||document,a=r.documentElement,u=r.body,f=o;f.pageX=e.clientX+(a&&a.scrollLeft||u&&u.scrollLeft||0)-(a&&a.clientLeft||u&&u.clientLeft||0),f.pageY=e.clientY+(a&&a.scrollTop||u&&u.scrollTop||0)-(a&&a.clientTop||u&&u.clientTop||0)}return o},l_=(e,n,o)=>{const r=e.document,a={type:"ready"};if(o.domLoaded){n(a);return}const u=()=>r.readyState==="complete"||r.readyState==="interactive"&&r.body,f=()=>{ep(e,"DOMContentLoaded",f),ep(e,"load",f),o.domLoaded||(o.domLoaded=!0,n(a)),e=null};u()?f():Ml(e,"DOMContentLoaded",f),o.domLoaded||Ml(e,"load",f)};class Hg{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=Fy+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(n,o,r,a){const u=this;let f;const b=window,C=$=>{u.executeHandlers(Pf($||b.event),T)};if(!n||dt(n)||Zr(n))return r;let T;n[u.expando]?T=n[u.expando]:(T=u.count++,n[u.expando]=T,u.events[T]={}),a=a||n;const M=o.split(" ");let P=M.length;for(;P--;){let $=M[P],j=C,J=!1,q=!1;if($==="DOMContentLoaded"&&($="ready"),u.domLoaded&&$==="ready"&&n.readyState==="complete"){r.call(a,Pf({type:$}));continue}!u.hasFocusIn&&($==="focusin"||$==="focusout")&&(J=!0,q=$==="focusin"?"focus":"blur",j=oe=>{const me=Pf(oe||b.event);me.type=me.type==="focus"?"focusin":"focusout",u.executeHandlers(me,T)}),f=u.events[T][$],f?$==="ready"&&u.domLoaded?r(Pf({type:$})):f.push({func:r,scope:a}):(u.events[T][$]=f=[{func:r,scope:a}],f.fakeName=q,f.capture=J,f.nativeHandler=j,$==="ready"?l_(n,j,u):Ml(n,q||$,j,J))}return n=f=null,r}unbind(n,o,r){if(!n||dt(n)||Zr(n))return this;const a=n[this.expando];if(a){let u=this.events[a];if(o){const f=o.split(" ");let b=f.length;for(;b--;){const C=f[b],T=u[C];if(T){if(r){let M=T.length;for(;M--;)if(T[M].func===r){const P=T.nativeHandler,$=T.fakeName,j=T.capture,J=T.slice(0,M).concat(T.slice(M+1));J.nativeHandler=P,J.fakeName=$,J.capture=j,u[C]=J}}(!r||T.length===0)&&(delete u[C],ep(n,T.fakeName||C,T.nativeHandler,T.capture))}}}else pt(u,(f,b)=>{ep(n,f.fakeName||b,f.nativeHandler,f.capture)}),u={};for(const f in u)if(yn(u,f))return this;delete this.events[a];try{delete n[this.expando]}catch{n[this.expando]=null}}return this}fire(n,o,r){return this.dispatch(n,o,r)}dispatch(n,o,r){if(!n||dt(n)||Zr(n))return this;const a=Pf({type:o,target:n},r);do{const u=n[this.expando];u&&this.executeHandlers(a,u),n=n.parentNode||n.ownerDocument||n.defaultView||n.parentWindow}while(n&&!a.isPropagationStopped());return this}clean(n){if(!n||dt(n)||Zr(n))return this;if(n[this.expando]&&this.unbind(n),n.getElementsByTagName||(n=n.document),n&&n.getElementsByTagName){this.unbind(n);const o=n.getElementsByTagName("*");let r=o.length;for(;r--;)n=o[r],n[this.expando]&&this.unbind(n)}return this}destroy(){this.events={}}cancel(n){return n&&(n.preventDefault(),n.stopImmediatePropagation()),!1}executeHandlers(n,o){const r=this.events[o],a=r&&r[n.type];if(a)for(let u=0,f=a.length;u<f;u++){const b=a[u];if(b&&b.func.call(b.scope,n)===!1&&n.preventDefault(),n.isImmediatePropagationStopped())return}}}Hg.Event=new Hg;const Tv=it.each,i_=it.grep,N1="data-mce-style",bd=it.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),hl=(e,n,o)=>{dn(o)||o===""?Zs(e,n):Cr(e,n,o)},vt=e=>e.replace(/[A-Z]/g,n=>"-"+n.toLowerCase()),tp=(e,n)=>{let o=0;if(e)for(let r=e.nodeType,a=e.previousSibling;a;a=a.previousSibling){const u=a.nodeType;n&&dt(a)&&(u===r||!a.data.length)||(o++,r=u)}return o},da=(e,n)=>{const o=Nc(n,"style"),r=e.serialize(e.parse(o),Q(n));hl(n,N1,r)},Vy=(e,n)=>ts(e)?yn(bd,n)?e+"":e+"px":e,zy=(e,n,o)=>{const r=vt(n);dn(o)||o===""?Ya(e,r):xg(e,r,Vy(o,r))},Uy=(e,n,o)=>{const r=n.keep_values,a={set:(f,b,C)=>{const T=de.fromDom(f);ue(n.url_converter)&&Oe(b)&&(b=n.url_converter.call(n.url_converter_scope||o(),String(b),C,f));const M="data-mce-"+C;hl(T,M,b),hl(T,C,b)},get:(f,b)=>{const C=de.fromDom(f);return Nc(C,"data-mce-"+b)||Nc(C,b)}},u={style:{set:(f,b)=>{const C=de.fromDom(f);r&&hl(C,N1,b),Zs(C,"style"),ee(b)&&ao(C,e.parse(b))},get:f=>{const b=de.fromDom(f),C=Nc(b,N1)||Nc(b,"style");return e.serialize(e.parse(C),Q(b))}}};return r&&(u.href=u.src=a),u},Gs=(e,n={})=>{const o={},r=window,a={};let u=0;const f=!0,b=!0,C=fr.forElement(de.fromDom(e),{contentCssCors:n.contentCssCors,referrerPolicy:n.referrerPolicy}),T=[],M=n.schema?n.schema:xs({}),P=Nf({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema),$=n.ownEvents?new Hg:Hg.Event,j=M.getBlockElements(),J=Me=>ee(Me)?yn(j,Me):$t(Me)&&(yn(j,Me.nodeName)||md(M,Me)),q=Me=>Me&&e&&ee(Me)?e.getElementById(Me):Me,oe=Me=>{const Ne=q(Me);return Oe(Ne)?de.fromDom(Ne):null},me=(Me,Ne,At="")=>{let yt;const Ln=oe(Me);if(Oe(Ln)&&mo(Ln)){const es=Jk[Ne];es&&es.get?yt=es.get(Ln.dom,Ne):yt=Nc(Ln,Ne)}return Oe(yt)?yt:At},we=Me=>{const Ne=q(Me);return dn(Ne)?[]:Ne.attributes},Se=(Me,Ne,At)=>{vn(Me,yt=>{if($t(yt)){const Ln=de.fromDom(yt),es=At===""?null:At,uc=Nc(Ln,Ne),km=Jk[Ne];km&&km.set?km.set(Ln.dom,es,Ne):hl(Ln,Ne,es),uc!==es&&n.onSetAttrib&&n.onSetAttrib({attrElm:Ln.dom,attrName:Ne,attrValue:es})}})},_e=(Me,Ne)=>Me.cloneNode(Ne),nt=()=>n.root_element||e.body,wt=Me=>{const Ne=Ou(Me);return{x:Ne.x,y:Ne.y,w:Ne.width,h:Ne.height}},Zt=(Me,Ne)=>Ji(e.body,q(Me),Ne),We=(Me,Ne,At)=>{vn(Me,yt=>{const Ln=de.fromDom(yt);zy(Ln,Ne,At),n.update_styles&&da(P,Ln)})},Pe=(Me,Ne)=>{vn(Me,At=>{const yt=de.fromDom(At);pt(Ne,(Ln,es)=>{zy(yt,es,Ln)}),n.update_styles&&da(P,yt)})},rt=(Me,Ne,At)=>{const yt=q(Me);if(!(dn(yt)||!Ei(yt)&&!Wh(yt)))return At?Lr(de.fromDom(yt),vt(Ne)):(Ne=Ne.replace(/-(\D)/g,(Ln,es)=>es.toUpperCase()),Ne==="float"&&(Ne="cssFloat"),yt.style?yt.style[Ne]:void 0)},qt=Me=>{const Ne=q(Me);if(!Ne)return{w:0,h:0};let At=rt(Ne,"width"),yt=rt(Ne,"height");return(!At||At.indexOf("px")===-1)&&(At="0"),(!yt||yt.indexOf("px")===-1)&&(yt="0"),{w:parseInt(At,10)||Ne.offsetWidth||Ne.clientWidth,h:parseInt(yt,10)||Ne.offsetHeight||Ne.clientHeight}},Sn=Me=>{const Ne=q(Me),At=Zt(Ne),yt=qt(Ne);return{x:At.x,y:At.y,w:yt.w,h:yt.h}},ko=(Me,Ne)=>{if(!Me)return!1;const At=Qe(Me)?Me:[Me];return So(At,yt=>ml(de.fromDom(yt),Ne))},_o=(Me,Ne,At,yt)=>{const Ln=[];let es=q(Me);yt=yt===void 0;const uc=At||(nt().nodeName!=="BODY"?nt().parentNode:null);if(ee(Ne))if(Ne==="*")Ne=$t;else{const km=Ne;Ne=Ku=>ko(Ku,km)}for(;es&&!(es===uc||dn(es.nodeType)||kf(es)||Ic(es));){if(!Ne||Ne(es))if(yt)Ln.push(es);else return[es];es=es.parentNode}return yt?Ln:null},ps=(Me,Ne,At)=>{const yt=_o(Me,Ne,At,!1);return yt&&yt.length>0?yt[0]:null},_s=(Me,Ne,At)=>{let yt=Ne;if(Me){ee(Ne)&&(yt=Ln=>ko(Ln,Ne));for(let Ln=Me[At];Ln;Ln=Ln[At])if(ue(yt)&&yt(Ln))return Ln}return null},ic=(Me,Ne)=>_s(Me,Ne,"nextSibling"),Wc=(Me,Ne)=>_s(Me,Ne,"previousSibling"),La=Me=>ue(Me.querySelectorAll),Ot=(Me,Ne)=>{var At,yt;const Ln=(yt=(At=q(Ne))!==null&&At!==void 0?At:n.root_element)!==null&&yt!==void 0?yt:e;return La(Ln)?cr(Ln.querySelectorAll(Me)):[]},vn=function(Me,Ne,At){const yt=At??this;if(Qe(Me)){const Ln=[];return Tv(Me,(es,uc)=>{const km=q(es);km&&Ln.push(Ne.call(yt,km,uc))}),Ln}else{const Ln=q(Me);return Ln?Ne.call(yt,Ln):!1}},ls=(Me,Ne)=>{vn(Me,At=>{pt(Ne,(yt,Ln)=>{Se(At,Ln,yt)})})},Ft=(Me,Ne)=>{vn(Me,At=>{const yt=de.fromDom(At);Au(yt,Ne)})},Nn=(Me,Ne,At,yt,Ln)=>vn(Me,es=>{const uc=ee(Ne)?e.createElement(Ne):Ne;return Oe(At)&&ls(uc,At),yt&&(!ee(yt)&&yt.nodeType?uc.appendChild(yt):ee(yt)&&Ft(uc,yt)),Ln?uc:es.appendChild(uc)}),In=(Me,Ne,At)=>Nn(e.createElement(Me),Me,Ne,At,!0),It=Df.decode,wo=Df.encodeAllRaw,No=(Me,Ne,At="")=>{let yt="<"+Me;for(const Ln in Ne)Ls(Ne,Ln)&&(yt+=" "+Ln+'="'+wo(Ne[Ln])+'"');return Kr(At)&&yn(M.getVoidElements(),Me)?yt+" />":yt+">"+At+"</"+Me+">"},Jc=Me=>{const Ne=e.createElement("div"),At=e.createDocumentFragment();At.appendChild(Ne),Me&&(Ne.innerHTML=Me);let yt;for(;yt=Ne.firstChild;)At.appendChild(yt);return At.removeChild(Ne),At},$s=(Me,Ne)=>vn(Me,At=>{const yt=de.fromDom(At);return Ne&&xe(wc(yt),Ln=>{ws(Ln)&&Ln.dom.length===0?Ss(Ln):Ds(yt,Ln)}),Ss(yt),yt.dom}),wl=Me=>vn(Me,Ne=>{const At=Ne.attributes;for(let yt=At.length-1;yt>=0;yt--)Ne.removeAttributeNode(At.item(yt))}),Fi=Me=>P.parse(Me),gf=(Me,Ne)=>P.serialize(Me,Ne),Fl=Me=>{if(Fd!==Gs.DOM&&e===document){if(o[Me])return;o[Me]=!0}let Ne=e.getElementById("mceDefaultStyles");if(!Ne){Ne=e.createElement("style"),Ne.id="mceDefaultStyles",Ne.type="text/css";const At=e.head;At.firstChild?At.insertBefore(Ne,At.firstChild):At.appendChild(Ne)}Ne.styleSheet?Ne.styleSheet.cssText+=Me:Ne.appendChild(e.createTextNode(Me))},pu=Me=>{Me||(Me=""),xe(Me.split(","),Ne=>{a[Ne]=!0,C.load(Ne).catch(Mt)})},$d=(Me,Ne,At)=>{vn(Me,yt=>{if($t(yt)){const Ln=de.fromDom(yt),es=Ne.split(" ");xe(es,uc=>{Oe(At)?(At?xi:rd)(Ln,uc):yf(Ln,uc)})}})},Sl=(Me,Ne)=>{$d(Me,Ne,!0)},Hi=(Me,Ne)=>{$d(Me,Ne,!1)},bn=(Me,Ne)=>{const At=oe(Me),yt=Ne.split(" ");return Oe(At)&&tn(yt,Ln=>Om(At,Ln))},jo=Me=>{vn(Me,Ne=>Ya(de.fromDom(Ne),"display"))},jr=Me=>{vn(Me,Ne=>xg(de.fromDom(Ne),"display","none"))},Qc=Me=>{const Ne=oe(Me);return Oe(Ne)&&bs(ku(Ne,"display"),"none")},ya=Me=>(Me||"mce_")+u++,Zc=Me=>{const Ne=oe(Me);return Oe(Ne)?$t(Ne.dom)?Ne.dom.outerHTML:Xa(Ne):""},Gr=(Me,Ne)=>{vn(Me,At=>{$t(At)&&(At.outerHTML=Ne)})},qr=(Me,Ne)=>{const At=q(Ne);return vn(Me,yt=>{const Ln=At==null?void 0:At.parentNode,es=At==null?void 0:At.nextSibling;return Ln&&(es?Ln.insertBefore(yt,es):Ln.appendChild(yt)),yt})},Ql=(Me,Ne,At)=>vn(Ne,yt=>{var Ln;const es=Qe(Ne)?Me.cloneNode(!0):Me;return At&&Tv(i_(yt.childNodes),uc=>{es.appendChild(uc)}),(Ln=yt.parentNode)===null||Ln===void 0||Ln.replaceChild(es,yt),yt}),Id=(Me,Ne)=>{if(Me.nodeName!==Ne.toUpperCase()){const At=In(Ne);return Tv(we(Me),yt=>{Se(At,yt.nodeName,me(Me,yt.nodeName))}),Ql(At,Me,!0),At}else return Me},hf=(Me,Ne)=>{let At=Me;for(;At;){let yt=Ne;for(;yt&&At!==yt;)yt=yt.parentNode;if(At===yt)break;At=At.parentNode}return!At&&Me.ownerDocument?Me.ownerDocument.documentElement:At},Em=(Me,Ne,At)=>Zn(Ne)?Lc(M,Me,{...At,isContent:Ln=>{const es=Ln.nodeName.toLowerCase();return!!Ne[es]}}):Lc(M,Me,At),h1=()=>e.createRange(),p1=(Me,Ne,At)=>{let yt=h1(),Ln,es;if(Me&&Ne&&Me.parentNode&&Ne.parentNode){const uc=Me.parentNode;return yt.setStart(uc,tp(Me)),yt.setEnd(Ne.parentNode,tp(Ne)),Ln=yt.extractContents(),yt=h1(),yt.setStart(Ne.parentNode,tp(Ne)+1),yt.setEnd(uc,tp(Me)+1),es=yt.extractContents(),uc.insertBefore(Qi(Fd,Ln,M),Me),At?uc.insertBefore(At,Me):uc.insertBefore(Ne,Me),uc.insertBefore(Qi(Fd,es,M),Me),$s(Me),At||Ne}else return},gg=(Me,Ne,At,yt)=>{if(Qe(Me)){let Ln=Me.length;const es=[];for(;Ln--;)es[Ln]=gg(Me[Ln],Ne,At,yt);return es}else return n.collect&&(Me===e||Me===r)&&T.push([Me,Ne,At,yt]),$.bind(Me,Ne,At,yt||Fd)},Ld=(Me,Ne,At)=>{if(Qe(Me)){let yt=Me.length;const Ln=[];for(;yt--;)Ln[yt]=Ld(Me[yt],Ne,At);return Ln}else{if(T.length>0&&(Me===e||Me===r)){let yt=T.length;for(;yt--;){const[Ln,es,uc]=T[yt];Me===Ln&&(!Ne||Ne===es)&&(!At||At===uc)&&$.unbind(Ln,es,uc)}}return $.unbind(Me,Ne,At)}},Bh=(Me,Ne,At)=>$.dispatch(Me,Ne,At),Dy=(Me,Ne,At)=>$.dispatch(Me,Ne,At),b1=Me=>{if(Me&&Ei(Me)){const Ne=Me.getAttribute("data-mce-contenteditable");return Ne&&Ne!=="inherit"?Ne:Me.contentEditable!=="inherit"?Me.contentEditable:null}else return null},Fd={doc:e,settings:n,win:r,files:a,stdMode:f,boxModel:b,styleSheetLoader:C,boundEvents:T,styles:P,schema:M,events:$,isBlock:J,root:null,clone:_e,getRoot:nt,getViewPort:wt,getRect:Sn,getSize:qt,getParent:ps,getParents:_o,get:q,getNext:ic,getPrev:Wc,select:Ot,is:ko,add:Nn,create:In,createHTML:No,createFragment:Jc,remove:$s,setStyle:We,getStyle:rt,setStyles:Pe,removeAllAttribs:wl,setAttrib:Se,setAttribs:ls,getAttrib:me,getPos:Zt,parseStyle:Fi,serializeStyle:gf,addStyle:Fl,loadCSS:pu,addClass:Sl,removeClass:Hi,hasClass:bn,toggleClass:$d,show:jo,hide:jr,isHidden:Qc,uniqueId:ya,setHTML:Ft,getOuterHTML:Zc,setOuterHTML:Gr,decode:It,encode:wo,insertAfter:qr,replace:Ql,rename:Id,findCommonAncestor:hf,run:vn,getAttribs:we,isEmpty:Em,createRng:h1,nodeIndex:tp,split:p1,bind:gg,unbind:Ld,fire:Dy,dispatch:Bh,getContentEditable:b1,getContentEditableParent:Me=>{const Ne=nt();let At=null;for(let yt=Me;yt&&yt!==Ne&&(At=b1(yt),At===null);yt=yt.parentNode);return At},isEditable:Me=>{if(Oe(Me)){const Ne=$t(Me)?Me:Me.parentElement;return Oe(Ne)&&Ei(Ne)&&Al(de.fromDom(Ne))}else return!1},destroy:()=>{if(T.length>0){let Me=T.length;for(;Me--;){const[Ne,At,yt]=T[Me];$.unbind(Ne,At,yt)}}pt(a,(Me,Ne)=>{C.unload(Ne),delete a[Ne]})},isChildOf:(Me,Ne)=>Me===Ne||Ne.contains(Me),dumpRng:Me=>"startContainer: "+Me.startContainer.nodeName+", startOffset: "+Me.startOffset+", endContainer: "+Me.endContainer.nodeName+", endOffset: "+Me.endOffset},Jk=Uy(P,n,tt(Fd));return Fd};Gs.DOM=Gs(document),Gs.nodeIndex=tp;const u_=Gs.DOM,Vg=0,zm=1,np=2,Wy=3;class om{constructor(n={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=n}_setReferrerPolicy(n){this.settings.referrerPolicy=n}loadScript(n){return new Promise((o,r)=>{const a=u_;let u;const f=()=>{a.remove(T),u&&(u.onerror=u.onload=u=null)},b=()=>{f(),o()},C=()=>{f(),r("Failed to load script: "+n)},T=a.uniqueId();u=document.createElement("script"),u.id=T,u.type="text/javascript",u.src=it._addCacheSuffix(n),this.settings.referrerPolicy&&a.setAttrib(u,"referrerpolicy",this.settings.referrerPolicy),u.onload=b,u.onerror=C,(document.getElementsByTagName("head")[0]||document.body).appendChild(u)})}isDone(n){return this.states[n]===np}markDone(n){this.states[n]=np}add(n){const o=this;return o.queue.push(n),o.states[n]===void 0&&(o.states[n]=Vg),new Promise((a,u)=>{o.scriptLoadedCallbacks[n]||(o.scriptLoadedCallbacks[n]=[]),o.scriptLoadedCallbacks[n].push({resolve:a,reject:u})})}load(n){return this.add(n)}remove(n){delete this.states[n],delete this.scriptLoadedCallbacks[n]}loadQueue(){const n=this.queue;return this.queue=[],this.loadScripts(n)}loadScripts(n){const o=this,r=(C,T)=>{Xo(o.scriptLoadedCallbacks,T).each(M=>{xe(M,P=>P[C](T))}),delete o.scriptLoadedCallbacks[T]},a=C=>{const T=Lt(C,M=>M.status==="rejected");return T.length>0?Promise.reject(lt(T,({reason:M})=>Qe(M)?M:[M])):Promise.resolve()},u=C=>Promise.allSettled(Rn(C,T=>o.states[T]===np?(r("resolve",T),Promise.resolve()):o.states[T]===Wy?(r("reject",T),Promise.reject(T)):(o.states[T]=zm,o.loadScript(T).then(()=>{o.states[T]=np,r("resolve",T);const M=o.queue;return M.length>0?(o.queue=[],u(M).then(a)):Promise.resolve()},()=>(o.states[T]=Wy,r("reject",T),Promise.reject(T)))))),f=C=>(o.loading=!0,u(C).then(T=>{o.loading=!1;const M=o.queueLoadedCallbacks.shift();return F.from(M).each(Us),a(T)})),b=Vl(n);return o.loading?new Promise((C,T)=>{o.queueLoadedCallbacks.push(()=>{f(b).then(C,T)})}):f(b)}}om.ScriptLoader=new om;const oS=(e,n)=>{const o=e.indexOf(n);return o!==-1&&e.indexOf(n,o+1)>o},hc=e=>Xe(e)&&yn(e,"raw"),Ev=e=>Qe(e)&&e.length>1,Ts={},Zy=Rs("en"),Nl=()=>Xo(Ts,Zy.get()),yd={getData:()=>yo(Ts,e=>({...e})),setCode:e=>{e&&Zy.set(e)},getCode:()=>Zy.get(),add:(e,n)=>{let o=Ts[e];o||(Ts[e]=o={});const r=Rn(Vt(n),a=>a.toLowerCase());pt(n,(a,u)=>{const f=u.toLowerCase();f!==u&&oS(r,f)?(yn(n,f)||(o[f]=a),o[u]=a):o[f]=a})},translate:e=>{const n=Nl().getOr({}),o=f=>ue(f)?Object.prototype.toString.call(f):r(f)?"":""+f,r=f=>f===""||f===null||f===void 0,a=f=>{const b=o(f);return yn(n,b)?o(n[b]):Xo(n,b.toLowerCase()).map(o).getOr(b)},u=f=>f.replace(/{context:\w+}$/,"");if(r(e))return"";if(hc(e))return o(e.raw);if(Ev(e)){const f=e.slice(1),b=a(e[0]).replace(/\{([0-9]+)\}/g,(C,T)=>yn(f,T)?o(f[T]):C);return u(b)}return u(a(e))},isRtl:()=>Nl().bind(e=>Xo(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>yn(Ts,e)},pl=()=>{const e=[],n={},o={},r=[],a=(q,oe)=>{const me=Lt(r,we=>we.name===q&&we.state===oe);xe(me,we=>we.resolve())},u=q=>yn(n,q),f=q=>yn(o,q),b=q=>{if(o[q])return o[q].instance},C=(q,oe)=>{const me=yd.getCode(),we=","+(oe||"")+",";!me||oe&&we.indexOf(","+me+",")===-1||om.ScriptLoader.add(n[q]+"/langs/"+me+".js")},T=(q,oe)=>{pl.languageLoad!==!1&&(u(q)?C(q,oe):J(q,"loaded").then(()=>C(q,oe)))},M=(q,oe)=>(e.push(oe),o[q]={instance:oe},a(q,"added"),oe),P=q=>{delete n[q],delete o[q]},$=(q,oe)=>ee(oe)?ee(q)?{prefix:"",resource:oe,suffix:""}:{prefix:q.prefix,resource:oe,suffix:q.suffix}:oe,j=(q,oe)=>{if(n[q])return Promise.resolve();let me=ee(oe)?oe:oe.prefix+oe.resource+oe.suffix;me.indexOf("/")!==0&&me.indexOf("://")===-1&&(me=pl.baseURL+"/"+me),n[q]=me.substring(0,me.lastIndexOf("/"));const we=()=>(a(q,"loaded"),Promise.resolve());return o[q]?we():om.ScriptLoader.add(me).then(we)},J=(q,oe="added")=>oe==="added"&&f(q)||oe==="loaded"&&u(q)?Promise.resolve():new Promise(me=>{r.push({name:q,state:oe,resolve:me})});return{items:e,urls:n,lookup:o,get:b,requireLangPack:T,add:M,remove:P,createUrl:$,load:j,waitFor:J}};pl.languageLoad=!0,pl.baseURL="",pl.PluginManager=pl(),pl.ThemeManager=pl(),pl.ModelManager=pl();const sp=(e,n)=>{let o=null;return{cancel:()=>{W(o)||(clearTimeout(o),o=null)},throttle:(...u)=>{W(o)&&(o=setTimeout(()=>{o=null,e.apply(null,u)},n))}}},_v=(e,n)=>{let o=null;const r=()=>{W(o)||(clearTimeout(o),o=null)};return{cancel:r,throttle:(...u)=>{r(),o=setTimeout(()=>{o=null,e.apply(null,u)},n)}}},Av=(e,n,o)=>cc(e,n,o).isSome(),rp=tt("mce-annotation"),Bf=tt("data-mce-annotation"),sm=tt("data-mce-annotation-uid"),cp=tt("data-mce-annotation-active"),$f=tt("data-mce-annotation-classes"),Um=tt("data-mce-annotation-attrs"),zg=e=>n=>po(n,e),P1=(e,n)=>{const o=e.selection.getRng(),r=de.fromDom(o.startContainer),a=de.fromDom(e.getBody()),u=n.fold(()=>"."+rp(),C=>`[${Bf()}="${C}"]`),f=Ka(r,o.startOffset).getOr(r);return qi(f,u,zg(a)).bind(C=>Xs(C,`${sm()}`).bind(T=>Xs(C,`${Bf()}`).map(M=>{const P=jy(e,T);return{uid:T,name:M,elements:P}})))},Ov=e=>mo(e)&&Om(e,rp()),rS=(e,n)=>wr(e,"data-mce-bogus")||Av(e,'[data-mce-bogus="all"]',zg(n)),jy=(e,n)=>{const o=de.fromDom(e.getBody()),r=Ja(o,`[${sm()}="${n}"]`);return Lt(r,a=>!rS(a,o))},ap=(e,n)=>{const o=de.fromDom(e.getBody()),r=Ja(o,`[${Bf()}="${n}"]`),a={};return xe(r,u=>{if(!rS(u,o)){const f=Nc(u,sm()),b=Xo(a,f).getOr([]);a[f]=b.concat([u])}}),a},cS=(e,n)=>{const o=Rs({}),r=()=>({listeners:[],previous:qc()}),a=(P,$)=>{u(P,j=>($(j),j))},u=(P,$)=>{const j=o.get(),J=Xo(j,P).getOrThunk(r),q=$(J);j[P]=q,o.set(j)},f=(P,$,j)=>{a(P,J=>{xe(J.listeners,q=>q(!0,P,{uid:$,nodes:Rn(j,oe=>oe.dom)}))})},b=P=>{a(P,$=>{xe($.listeners,j=>j(!1,P))})},C=(P,$)=>{xe(jy(e,P),j=>{$?Cr(j,cp(),"true"):Zs(j,cp())})},T=_v(()=>{const P=jn(n.getNames());xe(P,$=>{u($,j=>{const J=j.previous.get();return P1(e,F.some($)).fold(()=>{J.each(q=>{b($),j.previous.clear(),C(q,!1)})},({uid:q,name:oe,elements:me})=>{bs(J,q)||(J.each(we=>C(we,!1)),f(oe,q,me),j.previous.set(q),C(q,!0))}),{previous:j.previous,listeners:j.listeners}})})},30);return e.on("remove",()=>{T.cancel()}),e.on("NodeChange",()=>{T.throttle()}),{addListener:(P,$)=>{u(P,j=>({previous:j.previous,listeners:j.listeners.concat([$])}))}}},m_=(e,n)=>{const o=Bf(),r=u=>F.from(u.attr(o)).bind(n.lookup),a=u=>{var f,b;u.attr(sm(),null),u.attr(Bf(),null),u.attr(cp(),null);const C=F.from(u.attr(Um())).map($=>$.split(",")).getOr([]),T=F.from(u.attr($f())).map($=>$.split(",")).getOr([]);xe(C,$=>u.attr($,null));const M=(b=(f=u.attr("class"))===null||f===void 0?void 0:f.split(" "))!==null&&b!==void 0?b:[],P=Mo(M,[rp()].concat(T));u.attr("class",P.length>0?P.join(" "):null),u.attr($f(),null),u.attr(Um(),null)};e.serializer.addTempAttr(cp()),e.serializer.addAttributeFilter(o,u=>{for(const f of u)r(f).each(b=>{b.persistent===!1&&(f.name==="span"?f.unwrap():a(f))})})},Dv=()=>{const e={};return{register:(a,u)=>{e[a]={name:a,settings:u}},lookup:a=>Xo(e,a).map(u=>u.settings),getNames:()=>Vt(e)}},Gy=(e,n,o)=>Math.min(Math.max(e,n),o),B1=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let qy=0;const lp=e=>{const o=new Date().getTime(),r=Math.floor(B1()*1e9);return qy++,e+"_"+r+qy+String(o)},ZR=(e,n)=>{xe(n,o=>{xi(e,o)})},jR=(e,n)=>{xe(n,o=>{rd(e,o)})},ip=(e,n)=>de.fromDom(e.dom.cloneNode(n)),Pu=e=>ip(e,!1),$1=e=>ip(e,!0),aS=(e,n)=>{const o=de.fromTag(n),r=Vd(e);return Xr(o,r),o},lS=(e,n)=>{const o=aS(e,n);Gl(e,o);const r=wc(e);return _u(o,r),Ss(e),o},iS=(e,n,o=je)=>{const r=new Bc(e,n),a=u=>{let f;do f=r[u]();while(f&&!dt(f)&&!o(f));return F.from(f).filter(dt)};return{current:()=>F.from(r.current()).filter(dt),next:()=>a("next"),prev:()=>a("prev"),prev2:()=>a("prev2")}},Ug=(e,n)=>{const o=n||(f=>e.isBlock(f)||cs(f)||as(f)),r=(f,b,C,T)=>{if(dt(f)){const M=T(f,b,f.data);if(M!==-1)return F.some({container:f,offset:M})}return C().bind(M=>r(M.container,M.offset,C,T))};return{backwards:(f,b,C,T)=>{const M=iS(f,T??e.getRoot(),o);return r(f,b,()=>M.prev().map(P=>({container:P,offset:P.length})),C).getOrNull()},forwards:(f,b,C,T)=>{const M=iS(f,T??e.getRoot(),o);return r(f,b,()=>M.next().map(P=>({container:P,offset:0})),C).getOrNull()}}},Wg=((e,n)=>{const o=u=>{if(!e(u))throw new Error("Can only get "+n+" value of a "+n+" node");return r(u).getOr("")},r=u=>e(u)?F.from(u.dom.nodeValue):F.none();return{get:o,getOption:r,set:(u,f)=>{if(!e(u))throw new Error("Can only set raw "+n+" value of a "+n+" node");u.dom.nodeValue=f}}})(ws,"text"),up=e=>Wg.get(e),uS=e=>Wg.getOption(e),dp=(e,n)=>Wg.set(e,n),f_=["td","th"],Ky=["thead","tbody","tfoot"],dS=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],mS=["li","dd","dt"],Va=["ul","ol","dl"],qR=["pre","script","textarea","style"],If=e=>{let n;return o=>(n=n||Ao(e,gt),yn(n,Q(o)))},g_=e=>Q(e)==="table",Wm=e=>mo(e)&&Q(e)==="br",ui=If(dS),Cd=If(Va),Zg=If(mS),fS=If(Ky),I1=If(f_),Rv=If(qR),Lf=e=>{const n=[];let o=e.dom;for(;o;)n.push(de.fromDom(o)),o=o.lastChild;return n},Yy=e=>{const n=Ja(e,"br"),o=Lt(Lf(e).slice(-1),Wm);n.length===o.length&&xe(o,Ss)},wd=()=>{const e=de.fromTag("br");return Cr(e,"data-mce-bogus","1"),e},rm=e=>{qd(e),fc(e,wd())},h_=(e,n)=>{ld(e).each(o=>{Gi(o).each(r=>{n.isBlock(Q(e))&&Wm(o)&&n.isBlock(Q(r))&&Ss(o)})})},Kc=Vh,L1=zh,eu=ql,Mv=e=>e.insertContent(Kc,{preserve_zwsp:!0}),Xy=$t,jg=dt,Ff=e=>(jg(e)&&(e=e.parentNode),Xy(e)&&e.hasAttribute("data-mce-caret")),Bu=e=>jg(e)&&L1(e.data),tu=e=>Ff(e)||Bu(e),gS=e=>e.firstChild!==e.lastChild||!cs(e.firstChild),p_=(e,n)=>{var o;const a=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(Kc),u=e.parentNode;if(n){const f=e.previousSibling;if(jg(f)){if(tu(f))return f;if(tl(f))return f.splitText(f.data.length-1)}u==null||u.insertBefore(a,e)}else{const f=e.nextSibling;if(jg(f)){if(tu(f))return f;if(Lo(f))return f.splitText(1),f}e.nextSibling?u==null||u.insertBefore(a,e.nextSibling):u==null||u.appendChild(a)}return a},cm=e=>{const n=e.container();return dt(n)?n.data.charAt(e.offset())===Kc||e.isAtStart()&&Bu(n.previousSibling):!1},Zm=e=>{const n=e.container();return dt(n)?n.data.charAt(e.offset()-1)===Kc||e.isAtEnd()&&Bu(n.nextSibling):!1},Nv=(e,n,o)=>{var r;const u=((r=n.ownerDocument)!==null&&r!==void 0?r:document).createElement(e);u.setAttribute("data-mce-caret",o?"before":"after"),u.setAttribute("data-mce-bogus","all"),u.appendChild(wd().dom);const f=n.parentNode;return o?f==null||f.insertBefore(u,n):n.nextSibling?f==null||f.insertBefore(u,n.nextSibling):f==null||f.appendChild(u),u},Lo=e=>jg(e)&&e.data[0]===Kc,tl=e=>jg(e)&&e.data[e.data.length-1]===Kc,Gg=e=>{var n;const o=e.getElementsByTagName("br"),r=o[o.length-1];dd(r)&&((n=r.parentNode)===null||n===void 0||n.removeChild(r))},mp=e=>e&&e.hasAttribute("data-mce-caret")?(Gg(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,Qs=e=>Ff(e.startContainer),qg=Math.round,jm=e=>e?{left:qg(e.left),top:qg(e.top),bottom:qg(e.bottom),right:qg(e.right),width:qg(e.width),height:qg(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},hS=(e,n)=>(e=jm(e),n||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),b_=(e,n)=>e.left===n.left&&e.top===n.top&&e.bottom===n.bottom&&e.right===n.right,pS=(e,n,o)=>e>=0&&e<=Math.min(n.height,o.height)/2,er=(e,n)=>{const o=Math.min(n.height/2,e.height/2);return e.bottom-o<n.top?!0:e.top>n.bottom?!1:pS(n.top-e.bottom,e,n)},F1=(e,n)=>e.top>n.bottom?!0:e.bottom<n.top?!1:pS(n.bottom-e.top,e,n),v_=(e,n,o)=>n>=e.left&&n<=e.right&&o>=e.top&&o<=e.bottom,bS=e=>Ho(e,(n,o)=>n.fold(()=>F.some(o),r=>{const a=Math.min(o.left,r.left),u=Math.min(o.top,r.top),f=Math.max(o.right,r.right),b=Math.max(o.bottom,r.bottom);return F.some({top:u,right:f,bottom:b,left:a,width:f-a,height:b-u})}),F.none()),Kg=(e,n,o)=>{const r=Math.max(Math.min(n,e.left+e.width),e.left),a=Math.max(Math.min(o,e.top+e.height),e.top);return Math.sqrt((n-r)*(n-r)+(o-a)*(o-a))},$u=(e,n)=>Math.max(0,Math.min(e.bottom,n.bottom)-Math.max(e.top,n.top)),H1=e=>{const n=e.startContainer,o=e.startOffset;return n===e.endContainer&&n.hasChildNodes()&&e.endOffset===o+1?n.childNodes[o]:null},Gm=(e,n)=>{if($t(e)&&e.hasChildNodes()){const o=e.childNodes,r=Gy(n,0,o.length-1);return o[r]}else return e},Qt=(e,n)=>{if(!(n<0&&$t(e)&&e.hasChildNodes()))return Gm(e,n)},vS=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),Pv=e=>ee(e)&&e.charCodeAt(0)>=768&&vS.test(e),yS=(...e)=>n=>{for(let o=0;o<e.length;o++)if(e[o](n))return!0;return!1},CS=(...e)=>n=>{for(let o=0;o<e.length;o++)if(!e[o](n))return!1;return!0},Jy=Ke,Qy=as,fp=cs,V1=dt,Yg=ki(["script","style","textarea"]),Bv=ki(["img","input","textarea","hr","iframe","video","audio","object","embed"]),gp=ki(["table"]),$v=tu,Iu=e=>$v(e)?!1:V1(e)?!Yg(e.parentNode):Bv(e)||fp(e)||gp(e)||Iv(e),y_=e=>$t(e)&&e.getAttribute("unselectable")==="true",Iv=e=>!y_(e)&&Qy(e),Lv=(e,n)=>{for(let o=e.parentNode;o&&o!==n;o=o.parentNode){if(Iv(o))return!1;if(Jy(o))return!0}return!0},C_=e=>Iv(e)?!Ho(cr(e.getElementsByTagName("*")),(n,o)=>n||Jy(o),!1):!1,w_=e=>Bv(e)||C_(e),wS=(e,n)=>Iu(e)&&Lv(e,n),z1=$t,SS=Iu,eC=kg("display","block table"),S_=kg("float","left right"),U1=CS(z1,SS,vo(S_)),hp=vo(kg("white-space","pre pre-line pre-wrap")),Hf=dt,Fv=cs,tC=Gs.nodeIndex,Hv=Qt,nC=e=>e?e.createRange():Gs.DOM.createRng(),oC=e=>ee(e)&&/[\r\n\t ]/.test(e),sC=e=>!!e.setStart&&!!e.setEnd,xS=e=>{const n=e.startContainer,o=e.startOffset;if(oC(e.toString())&&hp(n.parentNode)&&dt(n)){const r=n.data;if(oC(r[o-1])||oC(r[o+1]))return!0}return!1},di=e=>{const n=e.ownerDocument,o=nC(n),r=n.createTextNode($c),a=e.parentNode;a.insertBefore(r,e),o.setStart(r,0),o.setEnd(r,1);const u=jm(o.getBoundingClientRect());return a.removeChild(r),u},Xg=e=>{const n=e.startContainer,o=e.endContainer,r=e.startOffset,a=e.endOffset;if(n===o&&dt(o)&&r===0&&a===1){const u=e.cloneRange();return u.setEndAfter(o),Vf(u)}else return null},TS=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,Vf=e=>{var n;let o;const r=e.getClientRects();return r.length>0?o=jm(r[0]):o=jm(e.getBoundingClientRect()),!sC(e)&&Fv(e)&&TS(o)?di(e):TS(o)&&sC(e)&&(n=Xg(e))!==null&&n!==void 0?n:o},Jg=(e,n)=>{const o=hS(e,n);return o.width=1,o.right=o.left+1,o},rC=e=>{const n=[],o=f=>{f.height!==0&&(n.length>0&&b_(f,n[n.length-1])||n.push(f))},r=(f,b)=>{const C=nC(f.ownerDocument);if(b<f.data.length){if(Pv(f.data[b]))return;if(Pv(f.data[b-1])&&(C.setStart(f,b),C.setEnd(f,b+1),!xS(C))){o(Jg(Vf(C),!1));return}}b>0&&(C.setStart(f,b-1),C.setEnd(f,b),xS(C)||o(Jg(Vf(C),!1))),b<f.data.length&&(C.setStart(f,b),C.setEnd(f,b+1),xS(C)||o(Jg(Vf(C),!0)))},a=e.container(),u=e.offset();if(Hf(a))return r(a,u),n;if(z1(a))if(e.isAtEnd()){const f=Hv(a,u);Hf(f)&&r(f,f.data.length),U1(f)&&!Fv(f)&&o(Jg(Vf(f),!1))}else{const f=Hv(a,u);if(Hf(f)&&r(f,0),U1(f)&&e.isAtEnd())return o(Jg(Vf(f),!1)),n;const b=Hv(e.container(),e.offset()-1);U1(b)&&!Fv(b)&&(eC(b)||eC(f)||!U1(f))&&o(Jg(Vf(b),!1)),U1(f)&&o(Jg(Vf(f),!0))}return n},He=(e,n,o)=>{const r=()=>(Hf(e),n===0),a=()=>Hf(e)?n>=e.data.length:n>=e.childNodes.length,u=()=>{const M=nC(e.ownerDocument);return M.setStart(e,n),M.setEnd(e,n),M},f=()=>(o||(o=rC(He(e,n))),o),b=()=>f().length>0,C=M=>M&&e===M.container()&&n===M.offset(),T=M=>Hv(e,M?n-1:n);return{container:tt(e),offset:tt(n),toRange:u,getClientRects:f,isVisible:b,isAtStart:r,isAtEnd:a,isEqual:C,getNode:T}};He.fromRangeStart=e=>He(e.startContainer,e.startOffset),He.fromRangeEnd=e=>He(e.endContainer,e.endOffset),He.after=e=>He(e.parentNode,tC(e)+1),He.before=e=>He(e.parentNode,tC(e)),He.isAbove=(e,n)=>Gn(ro(n.getClientRects()),ns(e.getClientRects()),er).getOr(!1),He.isBelow=(e,n)=>Gn(ns(n.getClientRects()),ro(e.getClientRects()),F1).getOr(!1),He.isAtStart=e=>e?e.isAtStart():!1,He.isAtEnd=e=>e?e.isAtEnd():!1,He.isTextPosition=e=>e?dt(e.container()):!1,He.isElementPosition=e=>!He.isTextPosition(e);const Lu=(e,n)=>{dt(n)&&n.data.length===0&&e.remove(n)},Qg=(e,n,o)=>{n.insertNode(o),Lu(e,o.previousSibling),Lu(e,o.nextSibling)},x_=(e,n,o)=>{const r=F.from(o.firstChild),a=F.from(o.lastChild);n.insertNode(o),r.each(u=>Lu(e,u.previousSibling)),a.each(u=>Lu(e,u.nextSibling))},W1=(e,n,o)=>{Ic(o)?x_(e,n,o):Qg(e,n,o)},nu=dt,pp=dd,ES=Gs.nodeIndex,kS=e=>{const n=e.parentNode;return pp(n)?kS(n):n},nl=e=>e?le(e.childNodes,(n,o)=>(pp(o)&&o.nodeName!=="BR"?n=n.concat(nl(o)):n.push(o),n),[]):[],Vv=(e,n)=>{let o=e;for(;(o=o.previousSibling)&&nu(o);)n+=o.data.length;return n},_S=e=>n=>e===n,T_=e=>{let n,o;n=nl(kS(e)),o=re(n,_S(e),e),n=n.slice(0,o+1);const r=le(n,(a,u,f)=>(nu(u)&&nu(n[f-1])&&a++,a),0);return n=Fa(n,ki([e.nodeName])),o=re(n,_S(e),e),o-r},AS=e=>(nu(e)?"text()":e.nodeName.toLowerCase())+"["+T_(e)+"]",E_=(e,n,o)=>{const r=[];for(let a=n.parentNode;a&&a!==e;a=a.parentNode)r.push(a);return r},OS=(e,n)=>{let o=[],r=n.container(),a=n.offset(),u;if(nu(r))u=Vv(r,a);else{const b=r.childNodes;a>=b.length?(u="after",a=b.length-1):u="before",r=b[a]}o.push(AS(r));let f=E_(e,r);return f=Fa(f,vo(dd)),o=o.concat(mc(f,b=>AS(b))),o.reverse().join("/")+","+u},k_=(e,n,o)=>{let r=nl(e);return r=Fa(r,(a,u)=>!nu(a)||!nu(r[u-1])),r=Fa(r,ki([n])),r[o]},__=(e,n)=>{let o=e,r=0;for(;nu(o);){const a=o.data.length;if(n>=r&&n<=r+a){e=o,n=n-r;break}if(!nu(o.nextSibling)){e=o,n=a;break}r+=a,o=o.nextSibling}return nu(e)&&n>e.data.length&&(n=e.data.length),He(e,n)},DS=(e,n)=>{if(!n)return null;const o=n.split(","),r=o[0].split("/"),a=o.length>1?o[1]:"before",u=le(r,(f,b)=>{const C=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(b);return C?(C[1]==="text()"&&(C[1]="#text"),k_(f,C[1],parseInt(C[2],10))):null},e);if(!u)return null;if(!nu(u)&&u.parentNode){let f;return a==="after"?f=ES(u)+1:f=ES(u),He(u.parentNode,f)}return __(u,parseInt(a,10))},bp=as,A_=(e,n,o)=>{let r=e(n.data.slice(0,o)).length;for(let a=n.previousSibling;a&&dt(a);a=a.previousSibling)r+=e(a.data).length;return r},RS=(e,n,o,r,a)=>{const u=a?r.startContainer:r.endContainer;let f=a?r.startOffset:r.endOffset;const b=[],C=e.getRoot();if(dt(u))b.push(o?A_(n,u,f):f);else{let T=0;const M=u.childNodes;f>=M.length&&M.length&&(T=1,f=Math.max(0,M.length-1)),b.push(e.nodeIndex(M[f],o)+T)}for(let T=u;T&&T!==C;T=T.parentNode)b.push(e.nodeIndex(T,o));return b},O_=(e,n,o,r)=>{const a=n.dom,u=RS(a,e,o,r,!0),f=n.isForward(),b=Qs(r)?{isFakeCaret:!0}:{};if(n.isCollapsed())return{start:u,forward:f,...b};{const C=RS(a,e,o,r,!1);return{start:u,end:C,forward:f,...b}}},Nr=(e,n,o)=>{let r=0;return it.each(e.select(n),a=>{if(a.getAttribute("data-mce-bogus")!=="all"){if(a===o)return!1;r++;return}}),r},cC=(e,n)=>{let o=n?e.startContainer:e.endContainer,r=n?e.startOffset:e.endOffset;if($t(o)&&o.nodeName==="TR"){const a=o.childNodes;o=a[Math.min(n?r:r-1,a.length-1)],o&&(r=n?0:o.childNodes.length,n?e.setStart(o,r):e.setEnd(o,r))}},MS=e=>(cC(e,!0),cC(e,!1),e),NS=(e,n)=>{if($t(e)&&(e=Gm(e,n),bp(e)))return e;if(tu(e)){dt(e)&&Ff(e)&&(e=e.parentNode);let o=e.previousSibling;if(bp(o)||(o=e.nextSibling,bp(o)))return o}},aC=e=>NS(e.startContainer,e.startOffset)||NS(e.endContainer,e.endOffset),Yc=(e,n,o)=>{const r=o.getNode(),a=o.getRng();if(r.nodeName==="IMG"||bp(r)){const f=r.nodeName;return{name:f,index:Nr(o.dom,f,r)}}const u=aC(a);if(u){const f=u.tagName;return{name:f,index:Nr(o.dom,f,u)}}return O_(e,o,n,a)},Oi=e=>{const n=e.getRng();return{start:OS(e.dom.getRoot(),He.fromRangeStart(n)),end:OS(e.dom.getRoot(),He.fromRangeEnd(n)),forward:e.isForward()}},PS=e=>({rng:e.getRng(),forward:e.isForward()}),lC=(e,n,o)=>{const r={"data-mce-type":"bookmark",id:n,style:"overflow:hidden;line-height:0px"};return o?e.create("span",r,"&#xFEFF;"):e.create("span",r)},iC=(e,n)=>{const o=e.dom;let r=e.getRng();const a=o.uniqueId(),u=e.isCollapsed(),f=e.getNode(),b=f.nodeName,C=e.isForward();if(b==="IMG")return{name:b,index:Nr(o,b,f)};const T=MS(r.cloneRange());if(!u){T.collapse(!1);const P=lC(o,a+"_end",n);W1(o,T,P)}r=MS(r),r.collapse(!0);const M=lC(o,a+"_start",n);return W1(o,r,M),e.moveToBookmark({id:a,keep:!0,forward:C}),{id:a,forward:C}},D_=(e,n,o=!1)=>n===2?Yc(eu,o,e):n===3?Oi(e):n?PS(e):iC(e,!1),zv=Je(Yc,Wo,!0),BS=e=>{const n=u=>u(e),o=tt(e),r=()=>a,a={tag:!0,inner:e,fold:(u,f)=>f(e),isValue:gt,isError:je,map:u=>Fc.value(u(e)),mapError:r,bind:n,exists:n,forall:n,getOr:o,or:r,getOrThunk:o,orThunk:r,getOrDie:o,each:u=>{u(e)},toOptional:()=>F.some(e)};return a},Z1=e=>{const n=()=>o,o={tag:!1,inner:e,fold:(r,a)=>r(e),isValue:je,isError:gt,map:n,mapError:r=>Fc.error(r(e)),bind:n,exists:je,forall:gt,getOr:Wo,or:Wo,getOrThunk:ho,orThunk:ho,getOrDie:Ms(String(e)),each:Mt,toOptional:F.none};return o},Fc={value:BS,error:Z1,fromOption:(e,n)=>e.fold(()=>Z1(n),BS)},ou={generate:e=>{if(!Qe(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const n=[],o={};return xe(e,(r,a)=>{const u=Vt(r);if(u.length!==1)throw new Error("one and only one name per case");const f=u[0],b=r[f];if(o[f]!==void 0)throw new Error("duplicate key detected:"+f);if(f==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Qe(b))throw new Error("case arguments must be an array");n.push(f),o[f]=(...C)=>{const T=C.length;if(T!==b.length)throw new Error("Wrong number of arguments to case "+f+". Expected "+b.length+" ("+b+"), got "+T);return{fold:(...P)=>{if(P.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+P.length);return P[a].apply(null,C)},match:P=>{const $=Vt(P);if(n.length!==$.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+`
Actual: `+$.join(","));if(!tn(n,J=>Cn($,J)))throw new Error("Not all branches were specified when using match. Specified: "+$.join(", ")+`
Required: `+n.join(", "));return P[f].apply(null,C)},log:P=>{console.log(P,{constructors:n,constructor:f,params:C})}}}}),o}};ou.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const gr=e=>{const n=[],o=[];return xe(e,r=>{r.fold(a=>{n.push(a)},a=>{o.push(a)})}),{errors:n,values:o}},am=e=>e.type==="inline-command"||e.type==="inline-format",vp=e=>e.type==="block-command"||e.type==="block-format",uC=(e,n)=>(e.type==="block-command"||e.type==="block-format")&&e.trigger===n,j1=e=>{var n;const o=a=>Fc.error({message:a,pattern:e}),r=(a,u,f)=>{if(e.format!==void 0){let b;if(Qe(e.format)){if(!tn(e.format,ee))return o(a+" pattern has non-string items in the `format` array");b=e.format}else if(ee(e.format))b=[e.format];else return o(a+" pattern has non-string `format` parameter");return Fc.value(u(b))}else return e.cmd!==void 0?ee(e.cmd)?Fc.value(f(e.cmd,e.value)):o(a+" pattern has non-string `cmd` parameter"):o(a+" pattern is missing both `format` and `cmd` parameters")};if(!Xe(e))return o("Raw pattern is not an object");if(!ee(e.start))return o("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!ee(e.end))return o("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return o("Inline pattern has empty `start` and `end` parameters");let a=e.start,u=e.end;return u.length===0&&(u=a,a=""),r("Inline",f=>({type:"inline-format",start:a,end:u,format:f}),(f,b)=>({type:"inline-command",start:a,end:u,cmd:f,value:b}))}else{if(e.replacement!==void 0)return ee(e.replacement)?e.start.length===0?o("Replacement pattern has empty `start` parameter"):Fc.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):o("Replacement pattern has non-string `replacement` parameter");{const a=(n=e.trigger)!==null&&n!==void 0?n:"space";return e.start.length===0?o("Block pattern has empty `start` parameter"):r("Block",u=>({type:"block-format",start:e.start,format:u[0],trigger:a}),(u,f)=>({type:"block-command",start:e.start,cmd:u,value:f,trigger:a}))}}},IS=e=>Lt(e,vp),zf=e=>Lt(e,am),za=(e,n)=>({inlinePatterns:zf(e),blockPatterns:IS(e),dynamicPatternsLookup:n}),lm=(e,n)=>({...e,blockPatterns:Lt(e.blockPatterns,o=>uC(o,n))}),LS=e=>{const n=gr(Rn(e,j1));return xe(n.errors,o=>console.error(o.message,o.pattern)),n.values},M_=e=>n=>{const o=e(n);return LS(o)},dC=U().deviceType,Uv=dC.isTouch(),mC=Gs.DOM,fC=e=>{const n=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return Ho(n,(o,r)=>{const a=r.split("="),u=a[0],f=a.length>1?a[1]:u;return o[Ps(u)]=Ps(f),o},{})},Wv=e=>Re(e,RegExp),en=e=>n=>n.options.get(e),G1=e=>ee(e)||Xe(e),gC=(e,n="")=>o=>{const r=ee(o);if(r)if(o.indexOf("=")!==-1){const a=fC(o);return{value:Xo(a,e.id).getOr(n),valid:r}}else return{value:o,valid:r};else return{valid:!1,message:"Must be a string."}},FS=e=>{const n=e.options.register;n("id",{processor:"string",default:e.id}),n("selector",{processor:"string"}),n("target",{processor:"object"}),n("suffix",{processor:"string"}),n("cache_suffix",{processor:"string"}),n("base_url",{processor:"string"}),n("referrer_policy",{processor:"string",default:""}),n("language_load",{processor:"boolean",default:!0}),n("inline",{processor:"boolean",default:!1}),n("iframe_attrs",{processor:"object",default:{}}),n("doctype",{processor:"string",default:"<!DOCTYPE html>"}),n("document_base_url",{processor:"string",default:e.documentBaseUrl}),n("body_id",{processor:gC(e,"tinymce"),default:"tinymce"}),n("body_class",{processor:gC(e),default:""}),n("content_security_policy",{processor:"string",default:""}),n("br_in_pre",{processor:"boolean",default:!0}),n("forced_root_block",{processor:o=>{const r=ee(o)&&xo(o);return r?{value:o,valid:r}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),n("forced_root_block_attrs",{processor:"object",default:{}}),n("newline_behavior",{processor:o=>{const r=Cn(["block","linebreak","invert","default"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),n("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),n("no_newline_selector",{processor:"string",default:""}),n("keep_styles",{processor:"boolean",default:!0}),n("end_container_on_empty_block",{processor:o=>xt(o)?{valid:!0,value:o}:ee(o)?{valid:!0,value:o}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),n("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),n("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),n("font_size_classes",{processor:"string",default:""}),n("automatic_uploads",{processor:"boolean",default:!0}),n("images_reuse_filename",{processor:"boolean",default:!1}),n("images_replace_blob_uris",{processor:"boolean",default:!0}),n("icons",{processor:"string",default:""}),n("icons_url",{processor:"string",default:""}),n("images_upload_url",{processor:"string",default:""}),n("images_upload_base_path",{processor:"string",default:""}),n("images_upload_credentials",{processor:"boolean",default:!1}),n("images_upload_handler",{processor:"function"}),n("language",{processor:"string",default:"en"}),n("language_url",{processor:"string",default:""}),n("entity_encoding",{processor:"string",default:"named"}),n("indent",{processor:"boolean",default:!0}),n("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_use_margin",{processor:"boolean",default:!1}),n("indentation",{processor:"string",default:"40px"}),n("content_css",{processor:o=>{const r=o===!1||ee(o)||no(o,ee);return r?ee(o)?{value:Rn(o.split(","),Ps),valid:r}:Qe(o)?{value:o,valid:r}:o===!1?{value:[],valid:r}:{value:o,valid:r}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:nh(e)?[]:["default"]}),n("content_style",{processor:"string"}),n("content_css_cors",{processor:"boolean",default:!1}),n("font_css",{processor:o=>{const r=ee(o)||no(o,ee);return r?{value:Qe(o)?o:Rn(o.split(","),Ps),valid:r}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),n("inline_boundaries",{processor:"boolean",default:!0}),n("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),n("object_resizing",{processor:o=>{const r=xt(o)||ee(o);return r?o===!1||dC.isiPhone()||dC.isiPad()?{value:"",valid:r}:{value:o===!0?"table,img,figure.image,div,video,iframe":o,valid:r}:{valid:!1,message:"Must be boolean or a string"}},default:!Uv}),n("resize_img_proportional",{processor:"boolean",default:!0}),n("event_root",{processor:"string"}),n("service_message",{processor:"string"}),n("theme",{processor:o=>o===!1||ee(o)||ue(o),default:"silver"}),n("theme_url",{processor:"string"}),n("formats",{processor:"object"}),n("format_empty_lines",{processor:"boolean",default:!1}),n("format_noneditable_selector",{processor:"string",default:""}),n("preview_styles",{processor:o=>{const r=o===!1||ee(o);return r?{value:o===!1?"":o,valid:r}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),n("custom_ui_selector",{processor:"string",default:""}),n("hidden_input",{processor:"boolean",default:!0}),n("submit_patch",{processor:"boolean",default:!0}),n("encoding",{processor:"string"}),n("add_form_submit_trigger",{processor:"boolean",default:!0}),n("add_unload_trigger",{processor:"boolean",default:!0}),n("custom_undo_redo_levels",{processor:"number",default:0}),n("disable_nodechange",{processor:"boolean",default:!1}),n("readonly",{processor:"boolean",default:!1}),n("editable_root",{processor:"boolean",default:!0}),n("plugins",{processor:"string[]",default:[]}),n("external_plugins",{processor:"object"}),n("forced_plugins",{processor:"string[]"}),n("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),n("model_url",{processor:"string"}),n("block_unsupported_drop",{processor:"boolean",default:!0}),n("visual",{processor:"boolean",default:!0}),n("visual_table_class",{processor:"string",default:"mce-item-table"}),n("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),n("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),n("setup",{processor:"function"}),n("init_instance_callback",{processor:"function"}),n("url_converter",{processor:"function",default:e.convertURL}),n("url_converter_scope",{processor:"object",default:e}),n("urlconverter_callback",{processor:"function"}),n("allow_conditional_comments",{processor:"boolean",default:!1}),n("allow_html_data_urls",{processor:"boolean",default:!1}),n("allow_svg_data_urls",{processor:"boolean"}),n("allow_html_in_named_anchor",{processor:"boolean",default:!1}),n("allow_script_urls",{processor:"boolean",default:!1}),n("allow_unsafe_link_target",{processor:"boolean",default:!1}),n("allow_mathml_annotation_encodings",{processor:o=>{const r=no(o,ee);return r?{value:o,valid:r}:{valid:!1,message:"Must be an array of strings."}},default:[]}),n("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),n("fix_list_elements",{processor:"boolean",default:!1}),n("preserve_cdata",{processor:"boolean",default:!1}),n("remove_trailing_brs",{processor:"boolean",default:!0}),n("pad_empty_with_br",{processor:"boolean",default:!1}),n("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),n("element_format",{processor:"string",default:"html"}),n("entities",{processor:"string"}),n("schema",{processor:"string",default:"html5"}),n("convert_urls",{processor:"boolean",default:!0}),n("relative_urls",{processor:"boolean",default:!0}),n("remove_script_host",{processor:"boolean",default:!0}),n("custom_elements",{processor:G1}),n("extended_valid_elements",{processor:"string"}),n("invalid_elements",{processor:"string"}),n("invalid_styles",{processor:G1}),n("valid_children",{processor:"string"}),n("valid_classes",{processor:G1}),n("valid_elements",{processor:"string"}),n("valid_styles",{processor:G1}),n("verify_html",{processor:"boolean",default:!0}),n("auto_focus",{processor:o=>ee(o)||o===!0}),n("browser_spellcheck",{processor:"boolean",default:!1}),n("protect",{processor:"array"}),n("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),n("deprecation_warnings",{processor:"boolean",default:!0}),n("a11y_advanced_options",{processor:"boolean",default:!1}),n("api_key",{processor:"string"}),n("license_key",{processor:"string"}),n("paste_block_drop",{processor:"boolean",default:!1}),n("paste_data_images",{processor:"boolean",default:!0}),n("paste_preprocess",{processor:"function"}),n("paste_postprocess",{processor:"function"}),n("paste_webkit_styles",{processor:"string",default:"none"}),n("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),n("paste_merge_formats",{processor:"boolean",default:!0}),n("smart_paste",{processor:"boolean",default:!0}),n("paste_as_text",{processor:"boolean",default:!1}),n("paste_tab_spaces",{processor:"number",default:4}),n("text_patterns",{processor:o=>no(o,Xe)||o===!1?{value:LS(o===!1?[]:o),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),n("text_patterns_lookup",{processor:o=>ue(o)?{value:M_(o),valid:!0}:{valid:!1,message:"Must be a single function"},default:o=>[]}),n("noneditable_class",{processor:"string",default:"mceNonEditable"}),n("editable_class",{processor:"string",default:"mceEditable"}),n("noneditable_regexp",{processor:o=>no(o,Wv)?{value:o,valid:!0}:Wv(o)?{value:[o],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),n("table_tab_navigation",{processor:"boolean",default:!0}),n("highlight_on_focus",{processor:"boolean",default:!0}),n("xss_sanitization",{processor:"boolean",default:!0}),n("details_initial_state",{processor:o=>{const r=Cn(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("details_serialized_state",{processor:o=>{const r=Cn(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("init_content_sync",{processor:"boolean",default:!1}),n("newdocument_content",{processor:"string",default:""}),n("sandbox_iframes",{processor:"boolean",default:!0}),n("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),n("convert_unsafe_embeds",{processor:"boolean",default:!0}),e.on("ScriptsLoaded",()=>{n("directionality",{processor:"string",default:yd.isRtl()?"rtl":void 0}),n("placeholder",{processor:"string",default:mC.getAttrib(e.getElement(),"placeholder")})})},N_=en("iframe_attrs"),Ua=en("doctype"),HS=en("document_base_url"),Uf=en("body_id"),VS=en("body_class"),hC=en("content_security_policy"),zS=en("br_in_pre"),Wa=en("forced_root_block"),Wf=en("forced_root_block_attrs"),pC=en("newline_behavior"),eh=en("br_newline_selector"),P_=en("no_newline_selector"),Hc=en("keep_styles"),Vc=en("end_container_on_empty_block"),Pa=en("automatic_uploads"),zc=en("images_reuse_filename"),ys=en("images_replace_blob_uris"),Ec=en("icons"),Zv=en("icons_url"),bC=en("images_upload_url"),vC=en("images_upload_base_path"),yC=en("images_upload_credentials"),US=en("images_upload_handler"),WS=en("content_css_cors"),q1=en("referrer_policy"),jv=en("language"),K1=en("language_url"),ZS=en("indent_use_margin"),KR=en("indentation"),th=en("content_css"),mi=en("content_style"),B_=en("font_css"),$_=en("directionality"),su=en("inline_boundaries_selector"),yp=en("object_resizing"),Cp=en("resize_img_proportional"),im=en("placeholder"),bl=en("event_root"),CC=en("service_message"),Zf=en("theme"),jS=en("theme_url"),Gv=en("model"),wC=en("model_url"),Y1=en("inline_boundaries"),qv=en("formats"),GS=en("preview_styles"),qS=en("format_empty_lines"),KS=en("format_noneditable_selector"),X1=en("custom_ui_selector"),nh=en("inline"),J1=en("hidden_input"),I_=en("submit_patch"),SC=en("add_form_submit_trigger"),L_=en("add_unload_trigger"),Kv=en("custom_undo_redo_levels"),F_=en("disable_nodechange"),YS=en("readonly"),H_=en("editable_root"),XS=en("content_css_cors"),Q1=en("plugins"),JS=en("external_plugins"),Pl=en("block_unsupported_drop"),xC=en("visual"),QS=en("visual_table_class"),TC=en("visual_anchor_class"),eb=en("iframe_aria_text"),V_=en("setup"),z_=en("init_instance_callback"),U_=en("urlconverter_callback"),Yv=en("auto_focus"),ex=en("browser_spellcheck"),EC=en("protect"),kC=en("paste_block_drop"),tb=en("paste_data_images"),_C=en("paste_preprocess"),tx=en("paste_postprocess"),nx=en("newdocument_content"),ox=en("paste_webkit_styles"),W_=en("paste_remove_styles_if_webkit"),sx=en("paste_merge_formats"),AC=en("smart_paste"),rx=en("paste_as_text"),jf=en("paste_tab_spaces"),cx=en("allow_html_data_urls"),Z_=en("text_patterns"),j_=en("text_patterns_lookup"),Xv=en("noneditable_class"),Fu=en("editable_class"),Jv=en("noneditable_regexp"),Qv=en("preserve_cdata"),OC=en("highlight_on_focus"),ax=en("xss_sanitization"),kc=en("init_content_sync"),lx=e=>e.options.isSet("text_patterns_lookup"),wp=e=>it.explode(e.options.get("font_size_style_values")),Gf=e=>it.explode(e.options.get("font_size_classes")),e0=e=>e.options.get("encoding")==="xml",ix=e=>it.explode(e.options.get("images_file_types")),G_=en("table_tab_navigation"),q_=en("details_initial_state"),ux=en("details_serialized_state"),nb=en("sandbox_iframes"),DC=e=>e.options.get("sandbox_iframes_exclusions"),K_=en("convert_unsafe_embeds"),Sp=en("license_key"),dx=en("api_key"),mx=$t,fx=dt,RC=e=>{const n=e.parentNode;n&&n.removeChild(e)},t0=e=>{const n=eu(e);return{count:e.length-n.length,text:n}},gx=e=>{let n;for(;(n=e.data.lastIndexOf(Kc))!==-1;)e.deleteData(n,1)},qf=(e,n)=>(oh(e),n),Y_=(e,n)=>{const o=t0(e.data.substr(0,n.offset())),r=t0(e.data.substr(n.offset()));return(o.text+r.text).length>0?(gx(e),He(e,n.offset()-o.count)):n},hx=(e,n)=>{const o=n.container(),r=wa(cr(o.childNodes),e).map(a=>a<n.offset()?He(o,n.offset()-1):n).getOr(n);return oh(e),r},px=(e,n)=>fx(e)&&n.container()===e?Y_(e,n):qf(e,n),n0=(e,n)=>n.container()===e.parentNode?hx(e,n):qf(e,n),X_=(e,n)=>He.isTextPosition(n)?px(e,n):n0(e,n),oh=e=>{mx(e)&&tu(e)&&(gS(e)?e.removeAttribute("data-mce-caret"):RC(e)),fx(e)&&(gx(e),e.data.length===0&&RC(e))},o0=as,ob=Ra,bx=Og,xp="*[contentEditable=false],video,audio,embed,object",Tp=(e,n,o)=>{const r=hS(n.getBoundingClientRect(),o);let a,u;if(e.tagName==="BODY"){const b=e.ownerDocument.documentElement;a=e.scrollLeft||b.scrollLeft,u=e.scrollTop||b.scrollTop}else{const b=e.getBoundingClientRect();a=e.scrollLeft-b.left,u=e.scrollTop-b.top}r.left+=a,r.right+=a,r.top+=u,r.bottom+=u,r.width=1;let f=n.offsetWidth-n.clientWidth;return f>0&&(o&&(f*=-1),r.left+=f,r.right+=f),r},J_=e=>{var n,o;const r=Ja(de.fromDom(e),xp);for(let a=0;a<r.length;a++){const u=r[a].dom;let f=u.previousSibling;if(tl(f)){const b=f.data;b.length===1?(n=f.parentNode)===null||n===void 0||n.removeChild(f):f.deleteData(b.length-1,1)}f=u.nextSibling,Lo(f)&&(f.data.length===1?(o=f.parentNode)===null||o===void 0||o.removeChild(f):f.deleteData(0,1))}},vx=(e,n,o,r)=>{const a=qc();let u,f;const b=Wa(e),C=e.dom,T=(q,oe)=>{let me;if(M(),bx(oe))return null;if(o(oe)){const we=Nv(b,oe,q),Se=Tp(n,oe,q);C.setStyle(we,"top",Se.top),C.setStyle(we,"caret-color","transparent"),f=we;const _e=C.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});C.setStyles(_e,{...Se}),C.add(n,_e),a.set({caret:_e,element:oe,before:q}),q&&C.addClass(_e,"mce-visual-caret-before"),P(),me=oe.ownerDocument.createRange(),me.setStart(we,0),me.setEnd(we,0)}else return f=p_(oe,q),me=oe.ownerDocument.createRange(),sh(f.nextSibling)?(me.setStart(f,0),me.setEnd(f,0)):(me.setStart(f,1),me.setEnd(f,1)),me;return me},M=()=>{J_(n),f&&(oh(f),f=null),a.on(q=>{C.remove(q.caret),a.clear()}),u&&(clearInterval(u),u=void 0)},P=()=>{u=setInterval(()=>{a.on(q=>{r()?C.toggleClass(q.caret,"mce-visual-caret-hidden"):C.addClass(q.caret,"mce-visual-caret-hidden")})},500)};return{show:T,hide:M,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{a.on(q=>{const oe=Tp(n,q.element,q.before);C.setStyles(q.caret,{...oe})})},destroy:()=>clearInterval(u)}},Q_=()=>nn.browser.isFirefox(),sh=e=>o0(e)||ob(e),Ep=e=>(sh(e)||Yi(e)&&Q_())&&Rm(de.fromDom(e)).exists(Al),MC=Ke,NC=as,eA=Ra,PC=kg("display","block table table-cell table-row table-caption list-item"),yx=tu,Cx=Ff,kp=$t,wx=dt,s0=Iu,Kf=e=>e>0,qm=e=>e<0,sb=(e,n)=>{let o;for(;o=e(n);)if(!Cx(o))return o;return null},rb=(e,n,o,r,a)=>{const u=new Bc(e,r),f=NC(e)||Cx(e);let b;if(qm(n)){if(f&&(b=sb(u.prev.bind(u),!0),o(b)))return b;for(;b=sb(u.prev.bind(u),a);)if(o(b))return b}if(Kf(n)){if(f&&(b=sb(u.next.bind(u),!0),o(b)))return b;for(;b=sb(u.next.bind(u),a);)if(o(b))return b}return null},tA=(e,n)=>{const o=a=>MC(a.dom),r=a=>a.dom===n;return lr(de.fromDom(e),o,r).map(a=>a.dom).getOr(n)},fi=(e,n)=>{for(;e&&e!==n;){if(PC(e))return e;e=e.parentNode}return null},Sd=(e,n,o)=>fi(e.container(),o)===fi(n.container(),o),BC=(e,n)=>{if(!n)return F.none();const o=n.container(),r=n.offset();return kp(o)?F.from(o.childNodes[r+e]):F.none()},nA=(e,n)=>{var o;const a=((o=n.ownerDocument)!==null&&o!==void 0?o:document).createRange();return e?(a.setStartBefore(n),a.setEndBefore(n)):(a.setStartAfter(n),a.setEndAfter(n)),a},YR=(e,n,o)=>fi(n,e)===fi(o,e),Yf=(e,n,o)=>{const r=e?"previousSibling":"nextSibling";let a=o;for(;a&&a!==n;){let u=a[r];if(u&&yx(u)&&(u=u[r]),NC(u)||eA(u)){if(YR(n,u,a))return u;break}if(s0(u))break;a=a.parentNode}return null},_p=Je(nA,!0),Ba=Je(nA,!1),$C=(e,n,o)=>{let r;const a=Je(Yf,!0,n),u=Je(Yf,!1,n),f=o.startContainer,b=o.startOffset;if(Ff(f)){const C=wx(f)?f.parentNode:f,T=C.getAttribute("data-mce-caret");if(T==="before"&&(r=C.nextSibling,Ep(r)))return _p(r);if(T==="after"&&(r=C.previousSibling,Ep(r)))return Ba(r)}if(!o.collapsed)return o;if(dt(f)){if(yx(f)){if(e===1){if(r=u(f),r)return _p(r);if(r=a(f),r)return Ba(r)}if(e===-1){if(r=a(f),r)return Ba(r);if(r=u(f),r)return _p(r)}return o}if(tl(f)&&b>=f.data.length-1)return e===1&&(r=u(f),r)?_p(r):o;if(Lo(f)&&b<=1)return e===-1&&(r=a(f),r)?Ba(r):o;if(b===f.data.length)return r=u(f),r?_p(r):o;if(b===0)return r=a(f),r?Ba(r):o}return o},r0=(e,n)=>BC(e?0:-1,n).filter(NC),rh=(e,n,o)=>{const r=$C(e,n,o);return e===-1?He.fromRangeStart(r):He.fromRangeEnd(r)},cb=e=>F.from(e.getNode()).map(de.fromDom),oA=e=>F.from(e.getNode(!0)).map(de.fromDom),IC=(e,n)=>{let o=n;for(;o=e(o);)if(o.isVisible())return o;return o},ab=(e,n)=>{const o=Sd(e,n);return!o&&cs(e.getNode())?!0:o};var $a;(function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"})($a||($a={}));const LC=as,ru=dt,FC=$t,Ap=cs,Op=Iu,HC=w_,Km=wS,VC=(e,n)=>{const o=[];let r=e;for(;r&&r!==n;)o.push(r),r=r.parentNode;return o},zC=(e,n)=>e.hasChildNodes()&&n<e.childNodes.length?e.childNodes[n]:null,UC=(e,n)=>{if(Kf(e)){if(Op(n.previousSibling)&&!ru(n.previousSibling))return He.before(n);if(ru(n))return He(n,0)}if(qm(e)){if(Op(n.nextSibling)&&!ru(n.nextSibling))return He.after(n);if(ru(n))return He(n,n.data.length)}return qm(e)?Ap(n)?He.before(n):He.after(n):He.before(n)},um=(e,n)=>{const o=n.nextSibling;return o&&Op(o)?ru(o)?He(o,0):He.before(o):c0($a.Forwards,He.after(n),e)},c0=(e,n,o)=>{let r,a,u,f;if(!FC(o)||!n)return null;if(n.isEqual(He.after(o))&&o.lastChild){if(f=He.after(o.lastChild),qm(e)&&Op(o.lastChild)&&FC(o.lastChild))return Ap(o.lastChild)?He.before(o.lastChild):f}else f=n;const b=f.container();let C=f.offset();if(ru(b)){if(qm(e)&&C>0)return He(b,--C);if(Kf(e)&&C<b.length)return He(b,++C);r=b}else{if(qm(e)&&C>0&&(a=zC(b,C-1),Op(a)))return!HC(a)&&(u=rb(a,e,Km,a),u)?ru(u)?He(u,u.data.length):He.after(u):ru(a)?He(a,a.data.length):He.before(a);if(Kf(e)&&C<b.childNodes.length&&(a=zC(b,C),Op(a)))return Ap(a)?um(o,a):!HC(a)&&(u=rb(a,e,Km,a),u)?ru(u)?He(u,0):He.before(u):ru(a)?He(a,0):He.after(a);r=a||f.getNode()}if(r&&(Kf(e)&&f.isAtEnd()||qm(e)&&f.isAtStart())&&(r=rb(r,e,gt,o,!0),Km(r,o)))return UC(e,r);a=r&&rb(r,e,Km,o);const T=De(Lt(VC(b,o),LC));return T&&(!a||!T.contains(a))?(Kf(e)?f=He.after(T):f=He.before(T),f):a?UC(e,a):null},Za=e=>({next:n=>c0($a.Forwards,n,e),prev:n=>c0($a.Backwards,n,e)}),Sx=(e,n,o)=>{const r=e?He.before(o):He.after(o);return Di(e,n,r)},WC=e=>cs(e)?He.before(e):He.after(e),ZC=e=>He.isTextPosition(e)?e.offset()===0:Iu(e.getNode()),xx=e=>{if(He.isTextPosition(e)){const n=e.container();return e.offset()===n.data.length}else return Iu(e.getNode(!0))},jC=(e,n)=>!He.isTextPosition(e)&&!He.isTextPosition(n)&&e.getNode()===n.getNode(!0),Tx=e=>!He.isTextPosition(e)&&cs(e.getNode()),Ex=(e,n,o)=>e?!jC(n,o)&&!Tx(n)&&xx(n)&&ZC(o):!jC(o,n)&&ZC(n)&&xx(o),Di=(e,n,o)=>{const r=Za(n);return F.from(e?r.next(o):r.prev(o))},Xf=(e,n,o)=>Di(e,n,o).bind(r=>Sd(o,r,n)&&Ex(e,o,r)?Di(e,n,r):F.some(r)),kx=(e,n,o,r)=>Xf(e,n,o).bind(a=>r(a)?kx(e,n,a,r):F.some(a)),ch=(e,n)=>{const o=e?n.firstChild:n.lastChild;return dt(o)?F.some(He(o,e?0:o.data.length)):o?Iu(o)?F.some(e?He.before(o):WC(o)):Sx(e,n,o):F.none()},vl=Je(Di,!0),gi=Je(Di,!1),yl=Je(ch,!0),Ri=Je(ch,!1),a0="_mce_caret",Mi=e=>$t(e)&&e.id===a0,ah=(e,n)=>{let o=n;for(;o&&o!==e;){if(Mi(o))return o;o=o.parentNode}return null},_x=e=>ee(e.start),XR=e=>yn(e,"rng"),sA=e=>yn(e,"id"),GC=e=>yn(e,"name"),rA=e=>it.isArray(e.start),l0=e=>!GC(e)&&xt(e.forward)?e.forward:!0,Ia=(e,n)=>($t(n)&&e.isBlock(n)&&!n.innerHTML&&(n.innerHTML='<br data-mce-bogus="1" />'),n),lb=(e,n)=>{const o=F.from(DS(e.getRoot(),n.start)),r=F.from(DS(e.getRoot(),n.end));return Gn(o,r,(a,u)=>{const f=e.createRng();return f.setStart(a.container(),a.offset()),f.setEnd(u.container(),u.offset()),{range:f,forward:l0(n)}})},ib=(e,n)=>{var o;const a=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(Kc);e.appendChild(a),n.setStart(a,0),n.setEnd(a,0)},Jf=e=>!e.hasChildNodes(),qC=(e,n)=>Ri(e).fold(je,o=>(n.setStart(o.container(),o.offset()),n.setEnd(o.container(),o.offset()),!0)),i0=(e,n,o)=>Jf(n)&&ah(e,n)?(ib(n,o),!0):!1,KC=(e,n,o,r)=>{const a=o[n?"start":"end"],u=e.getRoot();if(a){let f=u,b=a[0];for(let C=a.length-1;f&&C>=1;C--){const T=f.childNodes;if(i0(u,f,r))return!0;if(a[C]>T.length-1)return i0(u,f,r)?!0:qC(f,r);f=T[a[C]]}dt(f)&&(b=Math.min(a[0],f.data.length)),$t(f)&&(b=Math.min(a[0],f.childNodes.length)),n?r.setStart(f,b):r.setEnd(f,b)}return!0},u0=e=>dt(e)&&e.data.length>0,YC=(e,n,o)=>{const r=e.get(o.id+"_"+n),a=r==null?void 0:r.parentNode,u=o.keep;if(r&&a){let f,b;if(n==="start"?u?r.hasChildNodes()?(f=r.firstChild,b=1):u0(r.nextSibling)?(f=r.nextSibling,b=0):u0(r.previousSibling)?(f=r.previousSibling,b=r.previousSibling.data.length):(f=a,b=e.nodeIndex(r)+1):(f=a,b=e.nodeIndex(r)):u?r.hasChildNodes()?(f=r.firstChild,b=1):u0(r.previousSibling)?(f=r.previousSibling,b=r.previousSibling.data.length):(f=a,b=e.nodeIndex(r)):(f=a,b=e.nodeIndex(r)),!u){const C=r.previousSibling,T=r.nextSibling;it.each(it.grep(r.childNodes),P=>{dt(P)&&(P.data=P.data.replace(/\uFEFF/g,""))});let M;for(;M=e.get(o.id+"_"+n);)e.remove(M,!0);if(dt(T)&&dt(C)&&!nn.browser.isOpera()){const P=C.data.length;C.appendData(T.data),e.remove(T),f=C,b=P}}return F.some(He(f,b))}else return F.none()},Dp=(e,n)=>{const o=e.createRng();return KC(e,!0,n,o)&&KC(e,!1,n,o)?F.some({range:o,forward:l0(n)}):F.none()},Ym=(e,n)=>{const o=YC(e,"start",n),r=YC(e,"end",n);return Gn(o,r.or(o),(a,u)=>{const f=e.createRng();return f.setStart(Ia(e,a.container()),a.offset()),f.setEnd(Ia(e,u.container()),u.offset()),{range:f,forward:l0(n)}})},ub=(e,n)=>F.from(e.select(n.name)[n.index]).map(o=>{const r=e.createRng();return r.selectNode(o),{range:r,forward:!0}}),lh=(e,n)=>{const o=e.dom;if(n){if(rA(n))return Dp(o,n);if(_x(n))return lb(o,n);if(sA(n))return Ym(o,n);if(GC(n))return ub(o,n);if(XR(n))return F.some({range:n.rng,forward:l0(n)})}return F.none()},Xm=(e,n,o)=>D_(e,n,o),Ax=(e,n)=>{lh(e,n).each(({range:o,forward:r})=>{e.setRng(o,r)})},hi=e=>$t(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",Qf=(e=>n=>e===n)($c),ih=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,d0=e=>!ih(e)&&!Qf(e)&&!zh(e),m0=e=>{const n=[];if(e)for(let o=0;o<e.rangeCount;o++)n.push(e.getRangeAt(o));return n},cA=e=>lt(e,n=>{const o=H1(n);return o?[de.fromDom(o)]:[]}),aA=e=>m0(e).length>1,Ox=e=>Lt(cA(e),I1),Dx=e=>Ja(e,"td[data-mce-selected],th[data-mce-selected]"),uh=(e,n)=>{const o=Dx(n);return o.length>0?o:Ox(e)},Rp=e=>uh(m0(e.selection.getSel()),de.fromDom(e.getBody())),db=(e,n)=>cc(e,"table",n),lA=e=>{const n=e.startContainer,o=e.startOffset;return dt(n)?o===0?F.some(de.fromDom(n)):F.none():F.from(n.childNodes[o]).map(de.fromDom)},Rx=e=>{const n=e.endContainer,o=e.endOffset;return dt(n)?o===n.data.length?F.some(de.fromDom(n)):F.none():F.from(n.childNodes[o-1]).map(de.fromDom)},mb=e=>Oa(e).fold(tt([e]),n=>[e].concat(mb(n))),f0=e=>ld(e).fold(tt([e]),n=>Q(n)==="br"?Gi(n).map(o=>[e].concat(f0(o))).getOr([]):[e].concat(f0(n))),JC=(e,n)=>Gn(lA(n),Rx(n),(o,r)=>{const a=qo(mb(e),Je(po,o)),u=qo(f0(e),Je(po,r));return a.isSome()&&u.isSome()}).getOr(!1),Mx=(e,n,o,r)=>{const a=o,u=new Bc(o,a),f=os(e.schema.getMoveCaretBeforeOnEnterElements(),(C,T)=>!Cn(["td","th","table"],T.toLowerCase()));let b=o;do{if(dt(b)&&it.trim(b.data).length!==0){r?n.setStart(b,0):n.setEnd(b,b.data.length);return}if(f[b.nodeName]){r?n.setStartBefore(b):b.nodeName==="BR"?n.setEndBefore(b):n.setEndAfter(b);return}}while(b=r?u.next():u.prev());a.nodeName==="BODY"&&(r?n.setStart(a,0):n.setEnd(a,a.childNodes.length))},g0=e=>{const n=e.selection.getSel();return Oe(n)&&n.rangeCount>0},Mp=(e,n)=>{const o=Rp(e);o.length>0?xe(o,r=>{const a=r.dom,u=e.dom.createRng();u.setStartBefore(a),u.setEndAfter(a),n(u,!0)}):n(e.selection.getRng(),!1)},Nx=(e,n,o)=>{const r=iC(e,n);o(r),e.moveToBookmark(r)},dh=e=>ts(e==null?void 0:e.nodeType),Uo=e=>$t(e)&&!hi(e)&&!Mi(e)&&!dd(e),Jm=(e,n)=>{if(Uo(n)&&!/^(TD|TH)$/.test(n.nodeName)){const o=e.getAttrib(n,"data-mce-selected"),r=parseInt(o,10);return!isNaN(r)&&r>0}else return!1},eg=(e,n,o)=>{const{selection:r,dom:a}=e,u=r.getNode(),f=as(u);Nx(r,!0,()=>{n()}),f&&as(u)&&a.isChildOf(u,e.getBody())?e.selection.select(u):o(r.getStart())&&h0(a,r)},h0=(e,n)=>{var o,r;const a=n.getRng(),{startContainer:u,startOffset:f}=a,b=n.getNode();if(!Jm(e,b)&&$t(u)){const C=u.childNodes,T=e.getRoot();let M;if(f<C.length){const P=C[f];M=new Bc(P,(o=e.getParent(P,e.isBlock))!==null&&o!==void 0?o:T)}else{const P=C[C.length-1];M=new Bc(P,(r=e.getParent(P,e.isBlock))!==null&&r!==void 0?r:T),M.next(!0)}for(let P=M.current();P;P=M.next()){if(e.getContentEditable(P)==="false")return;if(dt(P)&&!gb(P)){a.setStart(P,0),n.setRng(a);return}}}},QC=(e,n,o)=>{if(e){const r=n?"nextSibling":"previousSibling";for(e=e[r];e;e=e[r])if($t(e)||!gb(e))return e}},fb=(e,n)=>!!e.getTextBlockElements()[n.nodeName.toLowerCase()]||md(e,n),mh=(e,n,o)=>e.schema.isValidChild(n,o),gb=(e,n=!1)=>{if(Oe(e)&&dt(e)){const o=n?e.data.replace(/ /g," "):e.data;return Kl(o)}else return!1},p0=e=>Oe(e)&&dt(e)&&e.length===0,Px=(e,n)=>{const o="[data-mce-cef-wrappable]",r=KS(e),a=Kr(r)?o:`${o},${r}`;return ml(de.fromDom(n),a)},iA=(e,n)=>{const o=e.dom;return Uo(n)&&o.getContentEditable(n)==="false"&&Px(e,n)&&o.select('[contenteditable="true"]',n).length===0},fh=(e,n)=>ue(e)?e(n):(Oe(n)&&(e=e.replace(/%(\w+)/g,(o,r)=>n[r]||o)),e),b0=(e,n)=>(e=e||"",n=n||"",e=""+(e.nodeName||e),n=""+(n.nodeName||n),e.toLowerCase()===n.toLowerCase()),tg=(e,n)=>{if(dn(e))return null;{let o=String(e);return(n==="color"||n==="backgroundColor")&&(o=M1(o)),n==="fontWeight"&&e===700&&(o="bold"),n==="fontFamily"&&(o=o.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),o}},ew=(e,n,o)=>{const r=e.getStyle(n,o);return tg(r,o)},tw=(e,n)=>{let o;return e.getParent(n,r=>$t(r)?(o=e.getStyle(r,"text-decoration"),!!o&&o!=="none"):!1),o},gh=(e,n,o)=>e.getParents(n,o,e.getRoot()),nw=(e,n,o)=>{const r=e.formatter.get(n);return Oe(r)&&So(r,o)},Bx=(e,n)=>nw(e,n,r=>{const a=u=>ue(u)||u.length>1&&u.charAt(0)==="%";return So(["styles","attributes"],u=>Xo(r,u).exists(f=>{const b=Qe(f)?f:Sa(f);return So(b,a)}))}),$x=(e,n,o)=>{const r=["inline","block","selector","attributes","styles","classes"],a=u=>os(u,(f,b)=>So(r,C=>C===b));return nw(e,n,u=>{const f=a(u);return nw(e,o,b=>{const C=a(b);return bc(f,C)})})},dm=e=>Ls(e,"block"),Ix=e=>dm(e)&&e.wrapper===!0,v0=e=>dm(e)&&e.wrapper!==!0,cu=e=>Ls(e,"selector"),ma=e=>Ls(e,"inline"),uA=e=>cu(e)&&ma(e)&&bs(Xo(e,"mixed"),!0),xd=e=>cu(e)&&e.expand!==!1&&!ma(e),dA=e=>{const n=[];let o=e;for(;o;){if(dt(o)&&o.data!==Kc||o.childNodes.length>1)return[];$t(o)&&n.push(o),o=o.firstChild}return n},Lx=e=>dA(e).length>0,hb=e=>Mi(e.dom)&&Lx(e.dom),Np=hi,Fx=gh,Hx=gb,JR=fb,QR=e=>cs(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,Vx=(e,n)=>{let o=n;for(;o;){if($t(o)&&e.getContentEditable(o))return e.getContentEditable(o)==="false"?o:n;o=o.parentNode}return n},Ut=(e,n,o,r)=>{const a=n.data;if(e){for(let u=o;u>0;u--)if(r(a.charAt(u-1)))return u}else for(let u=o;u<a.length;u++)if(r(a.charAt(u)))return u;return-1},fa=(e,n,o)=>Ut(e,n,o,r=>Qf(r)||ih(r)),y0=(e,n,o)=>Ut(e,n,o,d0),ga=(e,n,o,r,a,u)=>{let f;const b=e.getParent(o,e.isBlock)||n,C=(M,P,$)=>{const j=Ug(e),J=a?j.backwards:j.forwards;return F.from(J(M,P,(q,oe)=>Np(q.parentNode)?-1:(f=q,$(a,q,oe)),b))};return C(o,r,fa).bind(M=>u?C(M.container,M.offset+(a?-1:0),y0):F.some(M)).orThunk(()=>f?F.some({container:f,offset:a?0:f.length}):F.none())},au=(e,n,o,r,a)=>{const u=r[a];dt(r)&&Kr(r.data)&&u&&(r=u);const f=Fx(e,r);for(let b=0;b<f.length;b++)for(let C=0;C<n.length;C++){const T=n[C];if(!(Oe(T.collapsed)&&T.collapsed!==o.collapsed)&&cu(T)&&e.is(f[b],T.selector))return f[b]}return r},ow=(e,n,o,r)=>{var a;let u=o;const f=e.getRoot(),b=n[0];if(dm(b)&&(u=b.wrapper?null:e.getParent(o,b.block,f)),!u){const C=(a=e.getParent(o,"LI,TD,TH,SUMMARY"))!==null&&a!==void 0?a:f;u=e.getParent(dt(o)?o.parentNode:o,T=>T!==f&&JR(e.schema,T),C)}if(u&&dm(b)&&b.wrapper&&(u=Fx(e,u,"ul,ol").reverse()[0]||u),!u)for(u=o;u&&u[r]&&!e.isBlock(u[r])&&(u=u[r],!b0(u,"br")););return u||o},pb=(e,n,o,r)=>{const a=o.parentNode;return Oe(o[r])?!1:a===n||dn(a)||e.isBlock(a)?!0:pb(e,n,a,r)},Pp=(e,n,o,r,a)=>{let u=o;const f=a?"previousSibling":"nextSibling",b=e.getRoot();if(dt(o)&&!Hx(o)&&(a?r>0:r<o.data.length))return o;for(;u;){if(!n[0].block_expand&&e.isBlock(u))return u;for(let C=u[f];C;C=C[f]){const T=dt(C)&&!pb(e,b,C,f);if(!Np(C)&&!QR(C)&&!Hx(C,T))return u}if(u===b||u.parentNode===b){o=u;break}u=u.parentNode}return o},zx=e=>Np(e.parentNode)||Np(e),ng=(e,n,o,r=!1)=>{let{startContainer:a,startOffset:u,endContainer:f,endOffset:b}=n;const C=o[0];return $t(a)&&a.hasChildNodes()&&(a=Gm(a,u),dt(a)&&(u=0)),$t(f)&&f.hasChildNodes()&&(f=Gm(f,n.collapsed?b:b-1),dt(f)&&(b=f.data.length)),a=Vx(e,a),f=Vx(e,f),zx(a)&&(a=Np(a)?a:a.parentNode,n.collapsed?a=a.previousSibling||a:a=a.nextSibling||a,dt(a)&&(u=n.collapsed?a.length:0)),zx(f)&&(f=Np(f)?f:f.parentNode,n.collapsed?f=f.nextSibling||f:f=f.previousSibling||f,dt(f)&&(b=n.collapsed?0:f.length)),n.collapsed&&(ga(e,e.getRoot(),a,u,!0,r).each(({container:P,offset:$})=>{a=P,u=$}),ga(e,e.getRoot(),f,b,!1,r).each(({container:P,offset:$})=>{f=P,b=$})),(ma(C)||C.block_expand)&&((!ma(C)||!dt(a)||u===0)&&(a=Pp(e,o,a,u,!0)),(!ma(C)||!dt(f)||b===f.data.length)&&(f=Pp(e,o,f,b,!1))),xd(C)&&(a=au(e,o,n,a,"previousSibling"),f=au(e,o,n,f,"nextSibling")),(dm(C)||cu(C))&&(a=ow(e,o,a,"previousSibling"),f=ow(e,o,f,"nextSibling"),dm(C)&&(e.isBlock(a)||(a=Pp(e,o,a,u,!0),dt(a)&&(u=0)),e.isBlock(f)||(f=Pp(e,o,f,b,!1),dt(f)&&(b=f.data.length)))),$t(a)&&a.parentNode&&(u=e.nodeIndex(a),a=a.parentNode),$t(f)&&f.parentNode&&(b=e.nodeIndex(f)+1,f=f.parentNode),{startContainer:a,startOffset:u,endContainer:f,endOffset:b}},Bp=(e,n,o)=>{var r;const a=n.startOffset,u=Gm(n.startContainer,a),f=n.endOffset,b=Gm(n.endContainer,f-1),C=oe=>{const me=oe[0];dt(me)&&me===u&&a>=me.data.length&&oe.splice(0,1);const we=oe[oe.length-1];return f===0&&oe.length>0&&we===b&&dt(we)&&oe.splice(oe.length-1,1),oe},T=(oe,me,we)=>{const Se=[];for(;oe&&oe!==we;oe=oe[me])Se.push(oe);return Se},M=(oe,me)=>e.getParent(oe,we=>we.parentNode===me,me),P=(oe,me,we)=>{const Se=we?"nextSibling":"previousSibling";for(let _e=oe,nt=_e.parentNode;_e&&_e!==me;_e=nt){nt=_e.parentNode;const wt=T(_e===oe?_e:_e[Se],Se);wt.length&&(we||wt.reverse(),o(C(wt)))}};if(u===b)return o(C([u]));const $=(r=e.findCommonAncestor(u,b))!==null&&r!==void 0?r:e.getRoot();if(e.isChildOf(u,b))return P(u,$,!0);if(e.isChildOf(b,u))return P(b,$);const j=M(u,$)||u,J=M(b,$)||b;P(u,j,!0);const q=T(j===u?j:j.nextSibling,"nextSibling",J===b?J.nextSibling:J);q.length&&o(C(q)),P(b,J)},mA=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],fA=e=>ws(e)&&up(e)===Kc,gA=(e,n,o,r)=>la(n).fold(()=>"skipping",a=>r==="br"||fA(n)?"valid":Ov(n)?"existing":Mi(n.dom)?"caret":So(mA,u=>ml(n,u))?"valid-block":!mh(e,o,r)||!mh(e,Q(a),o)?"invalid-child":"valid"),Ux=(e,n)=>{const o=ng(e.dom,n,[{inline:"span"}]);n.setStart(o.startContainer,o.startOffset),n.setEnd(o.endContainer,o.endOffset),e.selection.setRng(n)},hh=(e,n,o,r,a,u)=>{const{uid:f=n,...b}=o;xi(e,rp()),Cr(e,`${sm()}`,f),Cr(e,`${Bf()}`,r);const{attributes:C={},classes:T=[]}=a(f,b);if(Xr(e,C),ZR(e,T),u){T.length>0&&Cr(e,`${$f()}`,T.join(","));const M=Vt(C);M.length>0&&Cr(e,`${Um()}`,M.join(","))}},$p=e=>{rd(e,rp()),Zs(e,`${sm()}`),Zs(e,`${Bf()}`),Zs(e,`${cp()}`);const n=Xs(e,`${Um()}`).map(r=>r.split(",")).getOr([]),o=Xs(e,`${$f()}`).map(r=>r.split(",")).getOr([]);xe(n,r=>Zs(e,r)),jR(e,o),Zs(e,`${$f()}`),Zs(e,`${Um()}`)},ph=(e,n,o,r,a)=>{const u=de.fromTag("span",e);return hh(u,n,o,r,a,!1),u},C0=(e,n,o,r,a,u)=>{const f=[],b=ph(e.getDoc(),o,u,r,a),C=qc(),T=()=>{C.clear()},M=()=>C.get().getOrThunk(()=>{const J=Pu(b);return f.push(J),C.set(J),J}),P=J=>{xe(J,$)},$=J=>{switch(gA(e,J,"span",Q(J))){case"invalid-child":{T();const oe=wc(J);P(oe),T();break}case"valid-block":{T(),hh(J,o,u,r,a,!0);break}case"valid":{const oe=M();ci(J,oe);break}}},j=J=>{const q=Rn(J,de.fromDom);P(q)};return Bp(e.dom,n,J=>{T(),j(J)}),f},Ni=(e,n,o,r)=>{e.undoManager.transact(()=>{const a=e.selection,u=a.getRng(),f=Rp(e).length>0,b=lp("mce-annotation");if(u.collapsed&&!f&&Ux(e,u),a.getRng().collapsed&&!f){const C=ph(e.getDoc(),b,r,n,o.decorate);Au(C,$c),a.getRng().insertNode(C.dom),a.select(C.dom)}else Nx(a,!1,()=>{Mp(e,C=>{C0(e,C,b,n,o.decorate,r)})})})},Td=e=>{const n=Dv();m_(e,n);const o=cS(e,n),r=Mc("span"),a=u=>{xe(u,f=>{r(f)?ai(f):$p(f)})};return{register:(u,f)=>{n.register(u,f)},annotate:(u,f)=>{n.lookup(u).each(b=>{Ni(e,u,b,f)})},annotationChanged:(u,f)=>{o.addListener(u,f)},remove:u=>{P1(e,F.some(u)).each(({elements:f})=>{const b=e.selection.getBookmark();a(f),e.selection.moveToBookmark(b)})},removeAll:u=>{const f=e.selection.getBookmark();pt(ap(e,u),(b,C)=>{a(b)}),e.selection.moveToBookmark(f)},getAll:u=>{const f=ap(e,u);return yo(f,b=>Rn(b,C=>C.dom))}}},bh=e=>({getBookmark:Je(Xm,e),moveToBookmark:Je(Ax,e)});bh.isBookmarkNode=hi;const Ip=(e,n,o)=>o.collapsed?!1:So(o.getClientRects(),r=>v_(r,e,n)),w0=(e,n)=>e.dispatch("PreProcess",n),S0=(e,n)=>e.dispatch("PostProcess",n),hA=e=>{e.dispatch("remove")},pA=e=>{e.dispatch("detach")},bA=(e,n)=>{e.dispatch("SwitchMode",{mode:n})},vA=(e,n,o,r,a)=>{e.dispatch("ObjectResizeStart",{target:n,width:o,height:r,origin:a})},Wx=(e,n,o,r,a)=>{e.dispatch("ObjectResized",{target:n,width:o,height:r,origin:a})},Zx=e=>{e.dispatch("PreInit")},sw=e=>{e.dispatch("PostRender")},x0=e=>{e.dispatch("Init")},ol=(e,n)=>{e.dispatch("PlaceholderToggle",{state:n})},lu=(e,n,o)=>{e.dispatch(n,o)},Pi=(e,n,o,r)=>{e.dispatch("FormatApply",{format:n,node:o,vars:r})},bb=(e,n,o,r)=>{e.dispatch("FormatRemove",{format:n,node:o,vars:r})},rw=(e,n)=>e.dispatch("BeforeSetContent",n),jx=(e,n)=>e.dispatch("SetContent",n),T0=(e,n)=>e.dispatch("BeforeGetContent",n),yA=(e,n)=>e.dispatch("GetContent",n),E0=(e,n)=>{e.dispatch("AutocompleterStart",n)},CA=(e,n)=>{e.dispatch("AutocompleterUpdate",n)},k0=(e,n)=>{e.dispatch("AutocompleterUpdateActiveRange",n)},wA=e=>{e.dispatch("AutocompleterEnd")},SA=(e,n,o)=>e.dispatch("PastePreProcess",{content:n,internal:o}),Gx=(e,n,o)=>e.dispatch("PastePostProcess",{node:n,internal:o}),_0=(e,n)=>e.dispatch("PastePlainTextToggle",{state:n}),Vs=(e,n)=>e.dispatch("EditableRootStateChange",{state:n}),Wt={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||Wt.metaKeyPressed(e),metaKeyPressed:e=>nn.os.isMacOS()||nn.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},Ed="data-mce-selected",qx="table,img,figure.image,hr,video,span.mce-preview-object,details",cw=Math.abs,Lp=Math.round,A0={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},vb=e=>e.type==="longpress"||e.type.indexOf("touch")===0,aw=(e,n)=>{const o=n.dom,r=n.getDoc(),a=document,u=n.getBody();let f,b,C,T,M,P,$,j,J,q,oe,me,we,Se,_e,nt,wt;const Zt=It=>Oe(It)&&(Ag(It)||o.is(It,"figure.image")),We=It=>Ra(It)||o.hasClass(It,"mce-preview-object"),Pe=(It,wo)=>{if(vb(It)){const No=It.touches[0];return Zt(It.target)&&!Ip(No.clientX,No.clientY,wo)}else return Zt(It.target)&&!Ip(It.clientX,It.clientY,wo)},rt=It=>{const wo=It.target;Pe(It,n.selection.getRng())&&!It.isDefaultPrevented()&&n.selection.select(wo)},qt=It=>o.hasClass(It,"mce-preview-object")&&Oe(It.firstElementChild)?[It,It.firstElementChild]:o.is(It,"figure.image")?[It.querySelector("img")]:[It],Sn=It=>{const wo=yp(n);return!wo||n.mode.isReadOnly()||It.getAttribute("data-mce-resize")==="false"||It===n.getBody()?!1:o.hasClass(It,"mce-preview-object")&&Oe(It.firstElementChild)?ml(de.fromDom(It.firstElementChild),wo):ml(de.fromDom(It),wo)},ko=(It,wo)=>{if(We(wo))return It.create("img",{src:nn.transparentSrc});if(Yi(wo)){const Jc=ms(T.name,"n")?ro:ns,$s=wo.cloneNode(!0);return Jc(It.select("tr",$s)).each(wl=>{const Fi=It.select("td,th",wl);It.setStyle(wl,"height",null),xe(Fi,gf=>It.setStyle(gf,"height",null))}),$s}else return wo.cloneNode(!0)},_o=(It,wo,No)=>{if(Oe(No)){const Jc=qt(It);xe(Jc,$s=>{$s.style[wo]||!n.schema.isValid($s.nodeName.toLowerCase(),wo)?o.setStyle($s,wo,No):o.setAttrib($s,wo,""+No)})}},ps=(It,wo,No)=>{_o(It,"width",wo),_o(It,"height",No)},_s=It=>{let wo,No,Jc,$s,wl;wo=It.screenX-P,No=It.screenY-$,Se=wo*T[2]+q,_e=No*T[3]+oe,Se=Se<5?5:Se,_e=_e<5?5:_e,(Zt(f)||We(f))&&Cp(n)!==!1?Jc=!Wt.modifierPressed(It):Jc=Wt.modifierPressed(It),Jc&&(cw(wo)>cw(No)?(_e=Lp(Se*me),Se=Lp(_e/me)):(Se=Lp(_e/me),_e=Lp(Se*me))),ps(b,Se,_e),$s=T.startPos.x+wo,wl=T.startPos.y+No,$s=$s>0?$s:0,wl=wl>0?wl:0,o.setStyles(C,{left:$s,top:wl,display:"block"}),C.innerHTML=Se+" &times; "+_e,T[2]<0&&b.clientWidth<=Se&&o.setStyle(b,"left",j+(q-Se)),T[3]<0&&b.clientHeight<=_e&&o.setStyle(b,"top",J+(oe-_e)),wo=u.scrollWidth-nt,No=u.scrollHeight-wt,wo+No!==0&&o.setStyles(C,{left:$s-wo,top:wl-No}),we||(vA(n,f,q,oe,"corner-"+T.name),we=!0)},ic=()=>{const It=we;we=!1,It&&(_o(f,"width",Se),_o(f,"height",_e)),o.unbind(r,"mousemove",_s),o.unbind(r,"mouseup",ic),a!==r&&(o.unbind(a,"mousemove",_s),o.unbind(a,"mouseup",ic)),o.remove(b),o.remove(C),o.remove(M),Wc(f),It&&(Wx(n,f,Se,_e,"corner-"+T.name),o.setAttrib(f,"style",o.getAttrib(f,"style"))),n.nodeChanged()},Wc=It=>{Ft();const wo=o.getPos(It,u),No=wo.x,Jc=wo.y,$s=It.getBoundingClientRect(),wl=$s.width||$s.right-$s.left,Fi=$s.height||$s.bottom-$s.top;f!==It&&(Ot(),f=It,Se=_e=0);const gf=n.dispatch("ObjectSelected",{target:It});Sn(It)&&!gf.isDefaultPrevented()?pt(A0,(Fl,pu)=>{const $d=Hi=>{const bn=qt(f)[0];P=Hi.screenX,$=Hi.screenY,q=bn.clientWidth,oe=bn.clientHeight,me=oe/q,T=Fl,T.name=pu,T.startPos={x:wl*Fl[0]+No,y:Fi*Fl[1]+Jc},nt=u.scrollWidth,wt=u.scrollHeight,M=o.add(u,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),o.setStyles(M,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),b=ko(o,f),o.addClass(b,"mce-clonedresizable"),o.setAttrib(b,"data-mce-bogus","all"),b.contentEditable="false",o.setStyles(b,{left:No,top:Jc,margin:0}),ps(b,wl,Fi),b.removeAttribute(Ed),u.appendChild(b),o.bind(r,"mousemove",_s),o.bind(r,"mouseup",ic),a!==r&&(o.bind(a,"mousemove",_s),o.bind(a,"mouseup",ic)),C=o.add(u,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},q+" &times; "+oe)};let Sl=o.get("mceResizeHandle"+pu);Sl&&o.remove(Sl),Sl=o.add(u,"div",{id:"mceResizeHandle"+pu,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+pu+"-resize; margin:0; padding:0"}),o.bind(Sl,"mousedown",Hi=>{Hi.stopImmediatePropagation(),Hi.preventDefault(),$d(Hi)}),Fl.elm=Sl,o.setStyles(Sl,{left:wl*Fl[0]+No-Sl.offsetWidth/2,top:Fi*Fl[1]+Jc-Sl.offsetHeight/2})}):Ot(!1)},La=sp(Wc,0),Ot=(It=!0)=>{La.cancel(),Ft(),f&&It&&f.removeAttribute(Ed),pt(A0,(wo,No)=>{const Jc=o.get("mceResizeHandle"+No);Jc&&(o.unbind(Jc),o.remove(Jc))})},vn=(It,wo)=>o.isChildOf(It,wo),ls=It=>{if(we||n.removed||n.composing)return;const wo=It.type==="mousedown"?It.target:e.getNode(),No=qi(de.fromDom(wo),qx).map($s=>$s.dom).filter($s=>o.isEditable($s.parentElement)||$s.nodeName==="IMG"&&o.isEditable($s)).getOrUndefined(),Jc=Oe(No)?o.getAttrib(No,Ed,"1"):"1";if(xe(o.select(`img[${Ed}],hr[${Ed}]`),$s=>{$s.removeAttribute(Ed)}),Oe(No)&&vn(No,u)&&n.hasFocus()){Nn();const $s=e.getStart(!0);if(vn($s,No)&&vn(e.getEnd(!0),No)){o.setAttrib(No,Ed,Jc),La.throttle(No);return}}Ot()},Ft=()=>{pt(A0,It=>{It.elm&&(o.unbind(It.elm),delete It.elm)})},Nn=()=>{try{n.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return n.on("init",()=>{Nn(),n.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",ls),n.on("keyup compositionend",It=>{f&&f.nodeName==="TABLE"&&ls(It)}),n.on("hide blur",Ot),n.on("contextmenu longpress",rt,!0)}),n.on("remove",Ft),{isResizable:Sn,showResizeRect:Wc,hideResizeRect:Ot,updateResizeRect:ls,destroy:()=>{La.cancel(),f=b=M=null}}},Kx=(e,n)=>{n.fold(o=>{e.setStartBefore(o.dom)},(o,r)=>{e.setStart(o.dom,r)},o=>{e.setStartAfter(o.dom)})},lw=(e,n)=>{n.fold(o=>{e.setEndBefore(o.dom)},(o,r)=>{e.setEnd(o.dom,r)},o=>{e.setEndAfter(o.dom)})},Yx=(e,n,o)=>{const r=e.document.createRange();return Kx(r,n),lw(r,o),r},yb=(e,n,o,r,a)=>{const u=e.document.createRange();return u.setStart(n.dom,o),u.setEnd(r.dom,a),u},vh=ou.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),O0=(e,n,o)=>n(de.fromDom(o.startContainer),o.startOffset,de.fromDom(o.endContainer),o.endOffset),xA=(e,n)=>n.match({domRange:o=>({ltr:tt(o),rtl:F.none}),relative:(o,r)=>({ltr:Fe(()=>Yx(e,o,r)),rtl:Fe(()=>F.some(Yx(e,r,o)))}),exact:(o,r,a,u)=>({ltr:Fe(()=>yb(e,o,r,a,u)),rtl:Fe(()=>F.some(yb(e,a,u,o,r)))})}),TA=(e,n)=>{const o=n.ltr();return o.collapsed?n.rtl().filter(a=>a.collapsed===!1).map(a=>vh.rtl(de.fromDom(a.endContainer),a.endOffset,de.fromDom(a.startContainer),a.startOffset)).getOrThunk(()=>O0(e,vh.ltr,o)):O0(e,vh.ltr,o)},EA=(e,n)=>{const o=xA(e,n);return TA(e,o)};vh.ltr,vh.rtl;const ja={create:(e,n,o,r)=>({start:e,soffset:n,finish:o,foffset:r})},Fp=(e,n,o)=>{var r;return F.from((r=e.caretPositionFromPoint)===null||r===void 0?void 0:r.call(e,n,o)).bind(a=>{if(a.offsetNode===null)return F.none();const u=e.createRange();return u.setStart(a.offsetNode,a.offset),u.collapse(),F.some(u)})},eM=(e,n,o)=>{var r;return F.from((r=e.caretRangeFromPoint)===null||r===void 0?void 0:r.call(e,n,o))},kA=(e,n,o)=>e.caretPositionFromPoint?Fp(e,n,o):e.caretRangeFromPoint?eM(e,n,o):F.none(),_A=(e,n,o)=>{const r=e.document;return kA(r,n,o).map(a=>ja.create(de.fromDom(a.startContainer),a.startOffset,de.fromDom(a.endContainer),a.endOffset))},$o=ou.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),AA=(e,n,o,r)=>e.fold(n,o,r),OA=e=>e.fold(Wo,Wo,Wo),iw=$o.before,tM=$o.on,nM=$o.after,og={before:iw,on:tM,after:nM,cata:AA,getStart:OA},Cb=ou.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),DA=e=>Cb.exact(e.start,e.soffset,e.finish,e.foffset),RA=e=>e.match({domRange:n=>de.fromDom(n.startContainer),relative:(n,o)=>og.getStart(n),exact:(n,o,r,a)=>n}),uw=Cb.domRange,D0=Cb.relative,R0=Cb.exact,oM=e=>{const n=RA(e);return zd(n)},MA=ja.create,wb={domRange:uw,relative:D0,exact:R0,exactFromRange:DA,getWin:oM,range:MA},dw=(e,n)=>{const o=Q(e);return o==="input"?og.after(e):Cn(["br","img"],o)?n===0?og.before(e):og.after(e):og.on(e,n)},NA=(e,n)=>{const o=e.fold(og.before,dw,og.after),r=n.fold(og.before,dw,og.after);return wb.relative(o,r)},Xx=(e,n,o,r)=>{const a=dw(e,n),u=dw(o,r);return wb.relative(a,u)},$n=e=>e.match({domRange:n=>{const o=de.fromDom(n.startContainer),r=de.fromDom(n.endContainer);return Xx(o,n.startOffset,r,n.endOffset)},relative:NA,exact:Xx}),M0=(e,n)=>{const r=document.createDocumentFragment();return xe(e,a=>{r.appendChild(a.dom)}),de.fromDom(r)},i=e=>{const n=wb.getWin(e).dom,o=(a,u,f,b)=>yb(n,a,u,f,b),r=$n(e);return EA(n,r).match({ltr:o,rtl:o})},m=(e,n,o)=>_A(e,n,o),p=(e,n,o)=>{const r=zd(de.fromDom(o));return m(r.dom,e,n).map(a=>{const u=o.createRange();return u.setStart(a.start.dom,a.soffset),u.setEnd(a.finish.dom,a.foffset),u}).getOrUndefined()},v=(e,n)=>Oe(e)&&Oe(n)&&e.startContainer===n.startContainer&&e.startOffset===n.startOffset&&e.endContainer===n.endContainer&&e.endOffset===n.endOffset,E=(e,n,o)=>{let r=e;for(;r&&r!==n;){if(o(r))return r;r=r.parentNode}return null},D=(e,n,o)=>E(e,n,o)!==null,I=(e,n,o)=>D(e,n,r=>r.nodeName===o),Z=(e,n)=>tu(e)&&!D(e,n,Mi),te=(e,n,o)=>{const r=n.parentNode;if(r){const a=new Bc(n,e.getParent(r,e.isBlock)||e.getRoot());let u;for(;u=a[o?"prev":"next"]();)if(cs(u))return!0}return!1},fe=(e,n)=>{var o;return((o=e.previousSibling)===null||o===void 0?void 0:o.nodeName)===n},Ae=(e,n)=>{let o=n;for(;o&&o!==e;){if(as(o))return!0;o=o.parentNode}return!1},mt=(e,n,o,r,a)=>{const u=e.getRoot(),f=e.schema.getNonEmptyElements(),b=a.parentNode;let C,T;if(!b)return F.none();const M=e.getParent(b,e.isBlock)||u;if(r&&cs(a)&&n&&e.isEmpty(M))return F.some(He(b,e.nodeIndex(a)));const P=new Bc(a,M);for(;T=P[r?"prev":"next"]();){if(e.getContentEditableParent(T)==="false"||Z(T,u))return F.none();if(dt(T)&&T.data.length>0)return I(T,u,"A")?F.none():F.some(He(T,r?T.data.length:0));if(e.isBlock(T)||f[T.nodeName.toLowerCase()])return F.none();C=T}return Zr(C)?F.none():o&&C?F.some(He(C,0)):F.none()},Pt=(e,n,o,r)=>{const a=e.getRoot();let u,f=!1,b=o?r.startContainer:r.endContainer,C=o?r.startOffset:r.endOffset;const T=$t(b)&&C===b.childNodes.length,M=e.schema.getNonEmptyElements();let P=o;if(tu(b))return F.none();if($t(b)&&C>b.childNodes.length-1&&(P=!1),kf(b)&&(b=a,C=0),b===a){if(P&&(u=b.childNodes[C>0?C-1:0],u&&(tu(u)||M[u.nodeName]||Yi(u))))return F.none();if(b.hasChildNodes()){if(C=Math.min(!P&&C>0?C-1:C,b.childNodes.length-1),b=b.childNodes[C],C=dt(b)&&T?b.data.length:0,!n&&b===a.lastChild&&Yi(b)||Ae(a,b)||tu(b)||k1(b))return F.none();if(b.hasChildNodes()&&!Yi(b)){u=b;const $=new Bc(b,a);do{if(as(u)||tu(u)){f=!1;break}if(dt(u)&&u.data.length>0){C=P?0:u.data.length,b=u,f=!0;break}if(M[u.nodeName.toLowerCase()]&&!Sc(u)){C=e.nodeIndex(u),b=u.parentNode,P||C++,f=!0;break}}while(u=P?$.next():$.prev())}}}return n&&(dt(b)&&C===0&&mt(e,T,n,!0,b).each($=>{b=$.container(),C=$.offset(),f=!0}),$t(b)&&(u=b.childNodes[C],u||(u=b.childNodes[C-1]),u&&cs(u)&&!fe(u,"A")&&!te(e,u,!1)&&!te(e,u,!0)&&mt(e,T,n,!0,u).each($=>{b=$.container(),C=$.offset(),f=!0}))),P&&!n&&dt(b)&&C===b.data.length&&mt(e,T,n,!1,b).each($=>{b=$.container(),C=$.offset(),f=!0}),f&&b?F.some(He(b,C)):F.none()},Rt=(e,n)=>{const o=n.collapsed,r=n.cloneRange(),a=He.fromRangeStart(n);return Pt(e,o,!0,r).each(u=>{(!o||!He.isAbove(a,u))&&r.setStart(u.container(),u.offset())}),o||Pt(e,o,!1,r).each(u=>{r.setEnd(u.container(),u.offset())}),o&&r.collapse(!0),v(n,r)?F.none():F.some(r)},Tt=(e,n)=>e.splitText(n),rn=e=>{let n=e.startContainer,o=e.startOffset,r=e.endContainer,a=e.endOffset;if(n===r&&dt(n)){if(o>0&&o<n.data.length)if(r=Tt(n,o),n=r.previousSibling,a>o){a=a-o;const u=Tt(r,a).previousSibling;n=r=u,a=u.data.length,o=0}else a=0}else if(dt(n)&&o>0&&o<n.data.length&&(n=Tt(n,o),o=0),dt(r)&&a>0&&a<r.data.length){const u=Tt(r,a).previousSibling;r=u,a=u.data.length}return{startContainer:n,startOffset:o,endContainer:r,endOffset:a}},at=e=>({walk:(u,f)=>Bp(e,u,f),split:rn,expand:(u,f={type:"word"})=>{if(f.type==="word"){const b=ng(e,u,[{inline:"span"}]),C=e.createRng();return C.setStart(b.startContainer,b.startOffset),C.setEnd(b.endContainer,b.endOffset),C}return u},normalize:u=>Rt(e,u).fold(je,f=>(u.setStart(f.startContainer,f.startOffset),u.setEnd(f.endContainer,f.endOffset),!0))});at.compareRanges=v,at.getCaretRangeFromPoint=p,at.getSelectedNode=H1,at.getNode=Gm;const _t=((e,n)=>{const o=(b,C)=>{if(!ts(C)&&!C.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+C);const T=b.dom;Tu(T)&&(T.style[e]=C+"px")},r=b=>{const C=n(b);if(C<=0||C===null){const T=Lr(b,e);return parseFloat(T)||0}return C},a=r,u=(b,C)=>Ho(C,(T,M)=>{const P=Lr(b,M),$=P===void 0?0:parseInt(P,10);return isNaN($)?T:T+$},0);return{set:o,get:r,getOuter:a,aggregate:u,max:(b,C,T)=>{const M=u(b,T);return C>M?C-M:0}}})("height",e=>{const n=e.dom;return id(e)?n.getBoundingClientRect().height:n.offsetHeight}),Un=e=>_t.get(e),Io=()=>de.fromDom(document),Es=(e,n)=>e.view(n).fold(tt([]),r=>{const a=e.owner(r),u=Es(e,a);return[r].concat(u)}),tr=(e,n)=>{const o=n.owner(e);return Es(n,o)};var kd=Object.freeze({__proto__:null,view:e=>{var n;return(e.dom===document?F.none():F.from((n=e.dom.defaultView)===null||n===void 0?void 0:n.frameElement)).map(de.fromDom)},owner:e=>Su(e)});const yh=e=>{const n=Io(),o=qn(n),r=tr(e,kd),a=so(e),u=Zo(r,(f,b)=>{const C=so(b);return{left:f.left+C.left,top:f.top+C.top}},{left:0,top:0});return ce(u.left+a.left+o.left,u.top+a.top+o.top)},mm=e=>Q(e)==="textarea",zs=(e,n)=>e.dispatch("ScrollIntoView",n).isDefaultPrevented(),Bl=(e,n)=>{e.dispatch("AfterScrollIntoView",n)},$l=(e,n)=>{const o=wc(e);if(o.length===0||mm(e))return{element:e,offset:n};if(n<o.length&&!mm(o[n]))return{element:o[n],offset:0};{const r=o[o.length-1];return mm(r)?{element:e,offset:n}:Q(r)==="img"?{element:r,offset:1}:ws(r)?{element:r,offset:up(r).length}:{element:r,offset:wc(r).length}}},iu=(e,n)=>{const o=On(e),r=Un(e);return{element:e,bottom:o.top+r,height:r,pos:o,cleanup:n}},fo=(e,n)=>{const o=$l(e,n),r=de.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+Kc+"</span>");return Ds(o.element,r),iu(r,()=>Ss(r))},Jl=e=>iu(de.fromDom(e),Mt),Uc=(e,n,o,r)=>{sl(e,(a,u)=>Qm(e,n,o,r),o)},N0=(e,n,o,r,a)=>{const u={elm:r.element.dom,alignToTop:a};if(zs(e,u))return;const f=qn(n).top;o(e,n,f,r,a),Bl(e,u)},Qm=(e,n,o,r)=>{const a=de.fromDom(e.getBody()),u=de.fromDom(e.getDoc());Ol(a);const f=fo(de.fromDom(o.startContainer),o.startOffset);N0(e,u,n,f,r),f.cleanup()},Co=(e,n,o,r)=>{const a=de.fromDom(e.getDoc());N0(e,a,o,Jl(n),r)},sl=(e,n,o)=>{const r=o.startContainer,a=o.startOffset,u=o.endContainer,f=o.endOffset;n(de.fromDom(r),de.fromDom(u));const b=e.dom.createRng();b.setStart(r,a),b.setEnd(u,f),e.selection.setRng(o)},P0=(e,n,o,r,a)=>{const u=n.pos;if(r)pn(u.left,u.top,a);else{const f=u.top-o+n.height;pn(-e.getBody().getBoundingClientRect().left,f,a)}},B0=(e,n,o,r,a,u)=>{const f=r+o,b=a.pos.top,C=a.bottom,T=C-b>=r;b<o?P0(e,a,r,u!==!1,n):b>f?P0(e,a,r,T?u!==!1:u===!0,n):C>f&&!T&&P0(e,a,r,u===!0,n)},Jx=(e,n,o,r,a)=>{const u=zd(n).dom.innerHeight;B0(e,n,o,u,r,a)},sg=(e,n,o,r,a)=>{const u=zd(n).dom.innerHeight;B0(e,n,o,u,r,a);const f=yh(r.element),b=Ou(window);f.top<b.y?ur(r.element,a!==!1):f.top>b.bottom&&ur(r.element,a===!0)},Ch=(e,n,o)=>Uc(e,Jx,n,o),$0=(e,n,o)=>Co(e,n,Jx,o),PA=(e,n,o)=>Uc(e,sg,n,o),Sb=(e,n,o)=>Co(e,n,sg,o),IF=(e,n,o)=>{(e.inline?$0:Sb)(e,n,o)},wh=(e,n,o)=>{(e.inline?Ch:PA)(e,n,o)},xb=(e,n=!1)=>e.dom.focus({preventScroll:n}),sM=e=>{const n=ri(e).dom;return e.dom===n.activeElement},Qx=(e=Io())=>F.from(e.dom.activeElement).map(de.fromDom),LF=e=>Qx(ri(e)).filter(n=>e.dom.contains(n.dom)),rM=(e,n)=>{const o=ws(n)?up(n).length:wc(n).length+1;return e>o?o:e<0?0:e},FF=e=>wb.range(e.start,rM(e.soffset,e.start),e.finish,rM(e.foffset,e.finish)),BA=(e,n)=>!Im(n.dom)&&(aa(e,n)||po(e,n)),HF=e=>n=>BA(e,n.start)&&BA(e,n.finish),VF=e=>e.inline||nn.browser.isFirefox(),cM=e=>wb.range(de.fromDom(e.startContainer),e.startOffset,de.fromDom(e.endContainer),e.endOffset),$A=e=>{const n=e.getSelection();return(!n||n.rangeCount===0?F.none():F.from(n.getRangeAt(0))).map(cM)},IA=e=>{const n=zd(e);return $A(n.dom).filter(HF(e))},LA=(e,n)=>F.from(n).filter(HF(e)).map(FF),aM=e=>{const n=document.createRange();try{return n.setStart(e.start.dom,e.soffset),n.setEnd(e.finish.dom,e.foffset),F.some(n)}catch{return F.none()}},mw=e=>{const n=VF(e)?IA(de.fromDom(e.getBody())):F.none();e.bookmark=n.isSome()?n:e.bookmark},eT=e=>(e.bookmark?e.bookmark:F.none()).bind(o=>LA(de.fromDom(e.getBody()),o)).bind(aM),tT=e=>{eT(e).each(n=>e.selection.setRng(n))},FA={isEditorUIElement:e=>{const n=e.className.toString();return n.indexOf("tox-")!==-1||n.indexOf("mce-")!==-1}},zF=(e,n)=>(ts(n)||(n=0),setTimeout(e,n)),lM=(e,n)=>(ts(n)||(n=0),setInterval(e,n)),Hu={setEditorTimeout:(e,n,o)=>zF(()=>{e.removed||n()},o),setEditorInterval:(e,n,o)=>{const r=lM(()=>{e.removed?clearInterval(r):n()},o);return r}},iM=e=>e.type==="nodechange"&&e.selectionChange,uM=(e,n)=>{const o=()=>{n.throttle()};Gs.DOM.bind(document,"mouseup",o),e.on("remove",()=>{Gs.DOM.unbind(document,"mouseup",o)})},dM=(e,n)=>{e.on("mouseup touchend",o=>{n.throttle()})},UF=(e,n)=>{dM(e,n),e.on("keyup NodeChange AfterSetSelectionRange",o=>{iM(o)||mw(e)})},WF=e=>{const n=sp(()=>{mw(e)},0);e.on("init",()=>{e.inline&&uM(e,n),UF(e,n)}),e.on("remove",()=>{n.cancel()})};let I0;const HA=Gs.DOM,ZF=e=>$t(e)&&FA.isEditorUIElement(e),VA=e=>{const n=e.classList;return n!==void 0?n.contains("tox-edit-area")||n.contains("tox-edit-area__iframe")||n.contains("mce-content-body"):!1},nT=(e,n)=>{const o=X1(e);return HA.getParent(n,a=>ZF(a)||(o?e.dom.is(a,o):!1))!==null},zA=e=>{try{const n=ri(de.fromDom(e.getElement()));return Qx(n).fold(()=>document.body,o=>o.dom)}catch{return document.body}},oT=(e,n)=>{const o=n.editor;WF(o);const r=(a,u)=>{if(OC(a)&&a.inline!==!0){const f=de.fromDom(a.getContainer());u(f,"tox-edit-focus")}};o.on("focusin",()=>{const a=e.focusedEditor;VA(zA(o))&&r(o,xi),a!==o&&(a&&a.dispatch("blur",{focusedEditor:o}),e.setActive(o),e.focusedEditor=o,o.dispatch("focus",{blurredEditor:a}),o.focus(!0))}),o.on("focusout",()=>{Hu.setEditorTimeout(o,()=>{const a=e.focusedEditor;(!VA(zA(o))||a!==o)&&r(o,rd),!nT(o,zA(o))&&a===o&&(o.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),I0||(I0=a=>{const u=e.activeEditor;u&&Cg(a).each(f=>{const b=f;b.ownerDocument===document&&b!==document.body&&!nT(u,b)&&e.focusedEditor===u&&(u.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},HA.bind(document,"focusin",I0))},mM=(e,n)=>{e.focusedEditor===n.editor&&(e.focusedEditor=null),!e.activeEditor&&I0&&(HA.unbind(document,"focusin",I0),I0=null)},jF=e=>{e.on("AddEditor",Je(oT,e)),e.on("RemoveEditor",Je(mM,e))},fM=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="true"),gM=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="false")!==null,GF=e=>e.collapsed?F.from(Gm(e.startContainer,e.startOffset)).map(de.fromDom):F.none(),qF=(e,n)=>GF(n).bind(o=>fS(o)?F.some(o):aa(e,o)?F.none():F.some(e)),hM=(e,n)=>{qF(de.fromDom(e.getBody()),n).bind(o=>yl(o.dom)).fold(()=>{e.selection.normalize()},o=>e.selection.setRng(o.toRange()))},sT=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},KF=e=>sM(e)||LF(e).isSome(),pM=e=>Oe(e.iframeElement)&&sM(de.fromDom(e.iframeElement)),bM=e=>{const n=e.getBody();return n&&KF(de.fromDom(n))},rT=e=>{const n=ri(de.fromDom(e.getElement()));return Qx(n).filter(o=>!VA(o.dom)&&nT(e,o.dom)).isSome()},L0=e=>e.inline?bM(e):pM(e),vM=e=>L0(e)||rT(e),UA=e=>{const n=e.selection,o=e.getBody();let r=n.getRng();e.quirks.refreshContentEditable();const a=f=>{eT(f).each(b=>{f.selection.setRng(b),r=b})};!L0(e)&&e.hasEditableRoot()&&a(e);const u=fM(e,n.getNode());if(u&&e.dom.isChildOf(u,o)){gM(e,u)||sT(o),sT(u),e.hasEditableRoot()||a(e),hM(e,r),WA(e);return}e.inline||(nn.browser.isOpera()||sT(o),e.getWin().focus()),(nn.browser.isFirefox()||e.inline)&&(sT(o),hM(e,r)),WA(e)},WA=e=>e.editorManager.setActive(e),yM=(e,n)=>{e.removed||(n?WA(e):UA(e))},ZA=(e,n)=>n.collapsed?e.isEditable(n.startContainer):e.isEditable(n.startContainer)&&e.isEditable(n.endContainer),jA=(e,n,o,r,a)=>{const u=o?n.startContainer:n.endContainer,f=o?n.startOffset:n.endOffset;return F.from(u).map(de.fromDom).map(b=>!r||!n.collapsed?Ka(b,a(b,f)).getOr(b):b).bind(b=>mo(b)?F.some(b):la(b).filter(mo)).map(b=>b.dom).getOr(e)},CM=(e,n,o=!1)=>jA(e,n,!0,o,(r,a)=>Math.min(Wd(r),a)),wM=(e,n,o=!1)=>jA(e,n,!1,o,(r,a)=>a>0?a-1:a),SM=(e,n)=>{const o=e;for(;e&&dt(e)&&e.length===0;)e=n?e.nextSibling:e.previousSibling;return e||o},YF=(e,n)=>{if(!n)return e;let o=n.startContainer,r=n.endContainer;const a=n.startOffset,u=n.endOffset;let f=n.commonAncestorContainer;n.collapsed||(o===r&&u-a<2&&o.hasChildNodes()&&(f=o.childNodes[a]),dt(o)&&dt(r)&&(o.length===a?o=SM(o.nextSibling,!0):o=o.parentNode,u===0?r=SM(r.previousSibling,!1):r=r.parentNode,o&&o===r&&(f=o)));const b=dt(f)?f.parentNode:f;return Ei(b)?b:e},cT=(e,n,o,r)=>{const a=[],u=e.getRoot(),f=e.getParent(o||CM(u,n,n.collapsed),e.isBlock),b=e.getParent(r||wM(u,n,n.collapsed),e.isBlock);if(f&&f!==u&&a.push(f),f&&b&&f!==b){let C;const T=new Bc(f,u);for(;(C=T.next())&&C!==b;)e.isBlock(C)&&a.push(C)}return b&&f!==b&&b!==u&&a.push(b),a},xM=(e,n,o)=>F.from(n).bind(r=>F.from(r.parentNode).map(a=>{const u=e.nodeIndex(r),f=e.createRng();return f.setStart(a,u),f.setEnd(a,u+1),o&&(Mx(e,f,r,!0),Mx(e,f,r,!1)),f})),aT=(e,n)=>Rn(n,o=>{const r=e.dispatch("GetSelectionRange",{range:o});return r.range!==o?r.range:o}),TM={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},fw=(e,n,o)=>{const r=o?"lastChild":"firstChild",a=o?"prev":"next";if(e[r])return e[r];if(e!==n){let u=e[a];if(u)return u;for(let f=e.parent;f&&f!==n;f=f.parent)if(u=f[a],u)return u}},XF=e=>{var n;const o=(n=e.value)!==null&&n!==void 0?n:"";if(!Kl(o))return!1;const r=e.parent;return!(r&&(r.name!=="span"||r.attr("style"))&&/^[ ]+$/.test(o))},EM=e=>{const n=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||n};class bi{static create(n,o){const r=new bi(n,TM[n]||1);return o&&pt(o,(a,u)=>{r.attr(u,a)}),r}constructor(n,o){this.name=n,this.type=o,o===1&&(this.attributes=[],this.attributes.map={})}replace(n){const o=this;return n.parent&&n.remove(),o.insert(n,o),o.remove(),o}attr(n,o){const r=this;if(!ee(n))return Oe(n)&&pt(n,(u,f)=>{r.attr(f,u)}),r;const a=r.attributes;if(a){if(o!==void 0){if(o===null){if(n in a.map){delete a.map[n];let u=a.length;for(;u--;)if(a[u].name===n)return a.splice(u,1),r}return r}if(n in a.map){let u=a.length;for(;u--;)if(a[u].name===n){a[u].value=o;break}}else a.push({name:n,value:o});return a.map[n]=o,r}return a.map[n]}}clone(){const n=this,o=new bi(n.name,n.type),r=n.attributes;if(r){const a=[];a.map={};for(let u=0,f=r.length;u<f;u++){const b=r[u];b.name!=="id"&&(a[a.length]={name:b.name,value:b.value},a.map[b.name]=b.value)}o.attributes=a}return o.value=n.value,o}wrap(n){const o=this;return o.parent&&(o.parent.insert(n,o),n.append(o)),o}unwrap(){const n=this;for(let o=n.firstChild;o;){const r=o.next;n.insert(o,n,!0),o=r}n.remove()}remove(){const n=this,o=n.parent,r=n.next,a=n.prev;return o&&(o.firstChild===n?(o.firstChild=r,r&&(r.prev=null)):a&&(a.next=r),o.lastChild===n?(o.lastChild=a,a&&(a.next=null)):r&&(r.prev=a),n.parent=n.next=n.prev=null),n}append(n){const o=this;n.parent&&n.remove();const r=o.lastChild;return r?(r.next=n,n.prev=r,o.lastChild=n):o.lastChild=o.firstChild=n,n.parent=o,n}insert(n,o,r){n.parent&&n.remove();const a=o.parent||this;return r?(o===a.firstChild?a.firstChild=n:o.prev&&(o.prev.next=n),n.prev=o.prev,n.next=o,o.prev=n):(o===a.lastChild?a.lastChild=n:o.next&&(o.next.prev=n),n.next=o.next,n.prev=o,o.next=n),n.parent=a,n}getAll(n){const o=this,r=[];for(let a=o.firstChild;a;a=fw(a,o))a.name===n&&r.push(a);return r}children(){const n=this,o=[];for(let r=n.firstChild;r;r=r.next)o.push(r);return o}empty(){const n=this;if(n.firstChild){const o=[];for(let a=n.firstChild;a;a=fw(a,n))o.push(a);let r=o.length;for(;r--;){const a=o[r];a.parent=a.firstChild=a.lastChild=a.next=a.prev=null}}return n.firstChild=n.lastChild=null,n}isEmpty(n,o={},r){var a;const u=this;let f=u.firstChild;if(EM(u))return!1;if(f)do{if(f.type===1){if(f.attr("data-mce-bogus"))continue;if(n[f.name]||EM(f))return!1}if(f.type===8||f.type===3&&!XF(f)||f.type===3&&f.parent&&o[f.parent.name]&&Kl((a=f.value)!==null&&a!==void 0?a:"")||r&&r(f))return!1}while(f=fw(f,u));return!0}walk(n){return fw(this,null,n)}}const JF=it.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),kM=e=>ee(e.nodeValue)&&e.nodeValue.includes(Kc),_M=e=>`${e.length===0?"":`${Rn(e,n=>`[${n}]`).join(",")},`}[data-mce-bogus="all"]`,QF=(e,n)=>n.querySelectorAll(_M(e)),AM=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,n=>kM(n)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),OM=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,n=>{if(kM(n)){const o=n.parentNode;return o&&yn(JF,o.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}else return NodeFilter.FILTER_SKIP}),e6=e=>AM(e).nextNode()!==null,t6=e=>OM(e).nextNode()!==null,n6=(e,n)=>n.querySelector(_M(e))!==null,lT=(e,n)=>{xe(QF(e,n),o=>{const r=de.fromDom(o);Nc(r,"data-mce-bogus")==="all"?Ss(r):xe(e,a=>{wr(r,a)&&Zs(r,a)})})},GA=e=>{let n=e.nextNode();for(;n!==null;)n.nodeValue=null,n=e.nextNode()},DM=A(GA,AM),o6=A(GA,OM),RM=(e,n)=>{const o=[{condition:Je(n6,n),action:Je(lT,n)},{condition:e6,action:DM},{condition:t6,action:o6}];let r=e,a=!1;return xe(o,({condition:u,action:f})=>{u(r)&&(a||(r=e.cloneNode(!0),a=!0),f(r))}),r},MM=e=>{const n=Ja(e,"[data-mce-bogus]");xe(n,o=>{Nc(o,"data-mce-bogus")==="all"?Ss(o):Wm(o)?(Ds(o,de.fromText(Vh)),Ss(o)):ai(o)})},NM=e=>{const n=Ja(e,"input");xe(n,o=>{Zs(o,"name")})},s6=(e,n)=>{const o=Wa(e),r=new RegExp(`^(<${o}[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/${o}>[\r
]*|<br \\/>[\r
]*)$`);return n.replace(r,"")},r6=(e,n)=>{const o=e.getDoc(),r=ri(de.fromDom(e.getBody())),a=de.fromTag("div",o);Cr(a,"data-mce-bogus","all"),ao(a,{position:"fixed",left:"-9999999px",top:"0"}),Au(a,n.innerHTML),MM(a),NM(a);const u=S1(r);fc(u,a);const f=eu(a.dom.innerText);return Ss(a),f},PM=(e,n,o)=>{let r;return n.format==="raw"?r=it.trim(eu(RM(o,e.serializer.getTempAttrs()).innerHTML)):n.format==="text"?r=r6(e,o):n.format==="tree"?r=e.serializer.serialize(o,n):r=s6(e,e.serializer.serialize(o,n)),n.format!=="text"&&!Rv(de.fromDom(o))&&ee(r)?it.trim(r):r},c6=(e,n)=>F.from(e.getBody()).fold(tt(n.format==="tree"?new bi("body",11):""),o=>PM(e,n,o)),qA=it.makeMap,KA=e=>{const n=[];e=e||{};const o=e.indent,r=qA(e.indent_before||""),a=qA(e.indent_after||""),u=Df.getEncodeFunc(e.entity_encoding||"raw",e.entities),f=e.element_format!=="xhtml";return{start:(b,C,T)=>{if(o&&r[b]&&n.length>0){const M=n[n.length-1];M.length>0&&M!==`
`&&n.push(`
`)}if(n.push("<",b),C)for(let M=0,P=C.length;M<P;M++){const $=C[M];n.push(" ",$.name,'="',u($.value,!0),'"')}if(!T||f?n[n.length]=">":n[n.length]=" />",T&&o&&a[b]&&n.length>0){const M=n[n.length-1];M.length>0&&M!==`
`&&n.push(`
`)}},end:b=>{let C;n.push("</",b,">"),o&&a[b]&&n.length>0&&(C=n[n.length-1],C.length>0&&C!==`
`&&n.push(`
`))},text:(b,C)=>{b.length>0&&(n[n.length]=C?b:u(b))},cdata:b=>{n.push("<![CDATA[",b,"]]>")},comment:b=>{n.push("<!--",b,"-->")},pi:(b,C)=>{C?n.push("<?",b," ",u(C),"?>"):n.push("<?",b,"?>"),o&&n.push(`
`)},doctype:b=>{n.push("<!DOCTYPE",b,">",o?`
`:"")},reset:()=>{n.length=0},getContent:()=>n.join("").replace(/\n$/,"")}},Hp=(e={},n=xs())=>{const o=KA(e);return e.validate="validate"in e?e.validate:!0,{serialize:a=>{const u=e.validate,f={3:C=>{var T;o.text((T=C.value)!==null&&T!==void 0?T:"",C.raw)},8:C=>{var T;o.comment((T=C.value)!==null&&T!==void 0?T:"")},7:C=>{o.pi(C.name,C.value)},10:C=>{var T;o.doctype((T=C.value)!==null&&T!==void 0?T:"")},4:C=>{var T;o.cdata((T=C.value)!==null&&T!==void 0?T:"")},11:C=>{let T=C;if(T=T.firstChild)do b(T);while(T=T.next)}};o.reset();const b=C=>{var T;const M=f[C.type];if(M)M(C);else{const P=C.name,$=P in n.getVoidElements();let j=C.attributes;if(u&&j&&j.length>1){const J=[];J.map={};const q=n.getElementRule(C.name);if(q){for(let oe=0,me=q.attributesOrder.length;oe<me;oe++){const we=q.attributesOrder[oe];if(we in j.map){const Se=j.map[we];J.map[we]=Se,J.push({name:we,value:Se})}}for(let oe=0,me=j.length;oe<me;oe++){const we=j[oe].name;if(!(we in J.map)){const Se=j.map[we];J.map[we]=Se,J.push({name:we,value:Se})}}j=J}}if(o.start(P,j,$),Js(P))ee(C.value)&&o.text(C.value,!0),o.end(P);else if(!$){let J=C.firstChild;if(J){(P==="pre"||P==="textarea")&&J.type===3&&((T=J.value)===null||T===void 0?void 0:T[0])===`
`&&o.text(`
`,!0);do b(J);while(J=J.next)}o.end(P)}}};return a.type===1&&!e.inner?b(a):a.type===3?f[3](a):f[11](a),o.getContent()}}},BM=new Set;xe(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],n=>{BM.add(n)});const $M=new Set;xe(["background-color"],n=>{$M.add(n)});const IM=["font","text-decoration","text-emphasis"],a6=(e,n)=>e.parseStyle(e.getAttrib(n,"style")),F0=(e,n)=>Vt(a6(e,n)),l6=e=>BM.has(e),i6=e=>$M.has(e),LM=(e,n)=>So(F0(e,n),o=>l6(o)),u6=(e,n)=>LM(e,n)&&So(F0(e,n),o=>i6(o)),d6=e=>Lt(e,n=>So(IM,o=>ms(n,o))),m6=(e,n,o)=>{const r=F0(e,n),a=F0(e,o),u=f=>{var b,C;const T=(b=e.getStyle(n,f))!==null&&b!==void 0?b:"",M=(C=e.getStyle(o,f))!==null&&C!==void 0?C:"";return xo(T)&&xo(M)&&T!==M};return So(r,f=>{const b=C=>So(C,T=>T===f);if(!b(a)&&b(IM)){const C=d6(a);return So(C,u)}else return u(f)})},FM=(e,n,o)=>F.from(o.container()).filter(dt).exists(r=>{const a=e?0:-1;return n(r.data.charAt(o.offset()+a))}),YA=Je(FM,!0,ih),XA=Je(FM,!1,ih),f6=e=>{const n=e.container();return dt(n)&&(n.data.length===0||L1(n.data)&&bh.isBookmarkNode(n.parentNode))},Vp=(e,n)=>o=>BC(e?0:-1,o).filter(n).isSome(),HM=e=>Ag(e)&&Lr(de.fromDom(e),"display")==="block",VM=e=>as(e)&&!_g(e),En=Vp(!0,HM),zM=Vp(!1,HM),H0=Vp(!0,Ra),gw=Vp(!1,Ra),iT=Vp(!0,Yi),JA=Vp(!1,Yi),zp=Vp(!0,VM),Up=Vp(!1,VM),g6=e=>e.slice(0,-1),h6=(e,n,o)=>aa(n,e)?g6(ji(e,r=>o(r)||po(r,n))):[],hw=(e,n)=>h6(e,n,je),rg=(e,n)=>[e].concat(hw(e,n)),UM=(e,n,o)=>kx(e,n,o,f6),p6=e=>n=>e.isBlock(Q(n)),eo=(e,n,o)=>qo(rg(de.fromDom(n.container()),e),p6(o)),WM=(e,n,o,r)=>UM(e,n.dom,o).forall(a=>eo(n,o,r).fold(()=>!Sd(a,o,n.dom),u=>!Sd(a,o,n.dom)&&aa(u,de.fromDom(a.container())))),oo=(e,n,o,r)=>eo(n,o,r).fold(()=>UM(e,n.dom,o).forall(a=>!Sd(a,o,n.dom)),a=>UM(e,a.dom,o).isNone()),uT=Je(oo,!1),b6=Je(oo,!0),rG=Je(WM,!1),v6=Je(WM,!0),cG=e=>cb(e).exists(Wm),QA=(e,n,o,r)=>{const a=Lt(rg(de.fromDom(o.container()),n),f=>r.isBlock(Q(f))),u=ro(a).getOr(n);return Di(e,u.dom,o).filter(cG)},e4=(e,n,o)=>cb(n).exists(Wm)||QA(!0,e,n,o).isSome(),dT=(e,n,o)=>oA(n).exists(Wm)||QA(!1,e,n,o).isSome(),Vn=Je(QA,!1),y6=Je(QA,!0),ZM=e=>He.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),jM=(e,n,o)=>{const r=Lt(rg(de.fromDom(n.container()),e),a=>o.isBlock(Q(a)));return ro(r).getOr(e)},V0=(e,n,o)=>ZM(n)?XA(n):XA(n)||gi(jM(e,n,o).dom,n).exists(XA),t4=(e,n,o)=>ZM(n)?YA(n):YA(n)||vl(jM(e,n,o).dom,n).exists(YA),C6=e=>Cn(["pre","pre-wrap"],e),n4=e=>cb(e).bind(n=>ir(n,mo)).exists(n=>C6(Lr(n,"white-space"))),w6=(e,n)=>gi(e.dom,n).isNone(),GM=(e,n)=>vl(e.dom,n).isNone(),S6=(e,n,o)=>w6(e,n)||GM(e,n)||uT(e,n,o)||b6(e,n,o)||dT(e,n,o)||e4(e,n,o),aG=e=>Oe(e)&&as(e)&&PC(e),x6=(e,n)=>o=>aG(new Bc(o,e)[n]()),T6=(e,n)=>{const o=vl(e.dom,n).getOr(n),r=x6(e.dom,"next");return n.isAtEnd()&&(r(n.container())||r(o.container()))},E6=(e,n)=>{const o=gi(e.dom,n).getOr(n),r=x6(e.dom,"prev");return n.isAtStart()&&(r(n.container())||r(o.container()))},qM=(e,n,o)=>n4(n)?!1:S6(e,n,o)||V0(e,n,o)||t4(e,n,o),pw=(e,n,o)=>n4(n)?!1:uT(e,n,o)||rG(e,n,o)||dT(e,n,o)||V0(e,n,o)||E6(e,n),KM=e=>{const n=e.container(),o=e.offset();return dt(n)&&o<n.data.length?He(n,o+1):e},bw=(e,n,o)=>n4(n)?!1:b6(e,n,o)||v6(e,n,o)||e4(e,n,o)||t4(e,n,o)||T6(e,n),bo=(e,n,o)=>pw(e,n,o)||bw(e,KM(n),o),o4=(e,n)=>Qf(e.charAt(n)),vw=(e,n)=>ih(e.charAt(n)),YM=e=>{const n=e.container();return dt(n)&&rs(n.data,$c)},XM=e=>{const n=e.split("");return Rn(n,(o,r)=>Qf(o)&&r>0&&r<n.length-1&&d0(n[r-1])&&d0(n[r+1])?" ":o).join("")},s4=(e,n,o,r)=>{const a=n.data,u=He(n,0);return!o&&o4(a,0)&&!bo(e,u,r)?(n.data=" "+a.slice(1),!0):o&&vw(a,0)&&pw(e,u,r)?(n.data=$c+a.slice(1),!0):!1},JM=e=>{const n=e.data,o=XM(n);return o!==n?(e.data=o,!0):!1},r4=(e,n,o,r)=>{const a=n.data,u=He(n,a.length-1);return!o&&o4(a,a.length-1)&&!bo(e,u,r)?(n.data=a.slice(0,-1)+" ",!0):o&&vw(a,a.length-1)&&bw(e,u,r)?(n.data=a.slice(0,-1)+$c,!0):!1},k6=(e,n,o)=>{const r=n.container();if(!dt(r))return F.none();if(YM(n)){const a=s4(e,r,!1,o)||JM(r)||r4(e,r,!1,o);return qa(a,n)}else if(bo(e,n,o)){const a=s4(e,r,!0,o)||r4(e,r,!0,o);return qa(a,n)}else return F.none()},QM=e=>{const n=de.fromDom(e.getBody());e.selection.isCollapsed()&&k6(n,He.fromRangeStart(e.selection.getRng()),e.schema).each(o=>{e.selection.setRng(o.toRange())})},eN=(e,n,o,r)=>{if(o===0)return;const a=de.fromDom(e),u=lr(a,T=>r.isBlock(Q(T))).getOr(a),f=e.data.slice(n,n+o),b=n+o>=e.data.length&&bw(u,He(e,e.data.length),r),C=n===0&&pw(u,He(e,0),r);e.replaceData(n,o,Ti(f,4,C,b))},mT=(e,n,o)=>{const r=e.data.slice(n),a=r.length-Ga(r).length;eN(e,n,a,o)},c4=(e,n,o)=>{const r=e.data.slice(0,n),a=r.length-xa(r).length;eN(e,n-a,a,o)},a4=(e,n,o,r,a=!0)=>{const u=xa(e.data).length,f=a?e:n,b=a?n:e;return a?f.appendData(b.data):f.insertData(0,b.data),Ss(de.fromDom(b)),r&&mT(f,u,o),f},_6=(e,n)=>{const o=e.container(),r=e.offset();return!He.isTextPosition(e)&&o===n.parentNode&&r>He.before(n).offset()},A6=(e,n)=>_6(n,e)?He(n.container(),n.offset()-1):n,O6=e=>dt(e)?He(e,0):He.before(e),D6=e=>dt(e)?He(e,e.data.length):He.after(e),fT=e=>Iu(e.previousSibling)?F.some(D6(e.previousSibling)):e.previousSibling?Ri(e.previousSibling):F.none(),gT=e=>Iu(e.nextSibling)?F.some(O6(e.nextSibling)):e.nextSibling?yl(e.nextSibling):F.none(),R6=(e,n)=>F.from(n.previousSibling?n.previousSibling:n.parentNode).bind(o=>gi(e,He.before(o))).orThunk(()=>vl(e,He.after(n))),M6=(e,n)=>vl(e,He.after(n)).orThunk(()=>gi(e,He.before(n))),N6=(e,n)=>fT(n).orThunk(()=>gT(n)).orThunk(()=>R6(e,n)),P6=(e,n)=>gT(n).orThunk(()=>fT(n)).orThunk(()=>M6(e,n)),B6=(e,n,o)=>e?P6(n,o):N6(n,o),$6=(e,n,o)=>B6(e,n,o).map(Je(A6,o)),tN=(e,n,o)=>{o.fold(()=>{e.focus()},r=>{e.selection.setRng(r.toRange(),n)})},I6=e=>n=>n.dom===e,nN=(e,n)=>n&&yn(e.schema.getBlockElements(),Q(n)),L6=(e,n,o)=>{if(Ma(e,n)){const r=de.fromHtml('<br data-mce-bogus="1">');return o?xe(wc(n),a=>{hb(a)||Ss(a)}):qd(n),fc(n,r),F.some(He.before(r.dom))}else return F.none()},F6=(e,n,o,r)=>{const a=Gi(e).filter(ws),u=Aa(e).filter(ws);return Ss(e),ka(a,u,n,(f,b,C)=>{const T=f.dom,M=b.dom,P=T.data.length;return a4(T,M,o,r),C.container()===M?He(T,P):C}).orThunk(()=>(r&&(a.each(f=>c4(f.dom,f.dom.length,o)),u.each(f=>mT(f.dom,0,o))),n))},Tb=(e,n)=>yn(e.schema.getTextInlineElements(),Q(n)),Eb=(e,n,o,r=!0,a=!1)=>{const u=$6(n,e.getBody(),o.dom),f=lr(o,Je(nN,e),I6(e.getBody())),b=F6(o,u,e.schema,Tb(e,o));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):f.bind(C=>L6(e.schema,C,a)).fold(()=>{r&&tN(e,n,b)},C=>{r&&tN(e,n,F.some(C))})},oN=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,H6=e=>oN.test(e),kb=(e,n)=>ml(de.fromDom(n),su(e))&&!md(e.schema,n)&&e.dom.isEditable(n),l4=e=>{var n;return Gs.DOM.getStyle(e,"direction",!0)==="rtl"||H6((n=e.textContent)!==null&&n!==void 0?n:"")},sN=(e,n,o)=>Lt(Gs.DOM.getParents(o.container(),"*",n),e),Sh=(e,n,o)=>{const r=sN(e,n,o);return F.from(r[r.length-1])},rN=(e,n,o)=>{const r=fi(n,e),a=fi(o,e);return Oe(r)&&r===a},vi=e=>cm(e)||Zm(e),_d=(e,n)=>{const o=n.container(),r=n.offset();return e?Bu(o)?dt(o.nextSibling)?He(o.nextSibling,0):He.after(o):cm(n)?He(o,r+1):n:Bu(o)?dt(o.previousSibling)?He(o.previousSibling,o.previousSibling.data.length):He.before(o):Zm(n)?He(o,r-1):n},cN=Je(_d,!0),aN=Je(_d,!1),lN=(e,n)=>{const o=r=>r.stopImmediatePropagation();e.on("beforeinput input",o,!0),e.getDoc().execCommand(n),e.off("beforeinput input",o)},V6=e=>{e.execCommand("delete")},cg=e=>lN(e,"Delete"),iN=e=>lN(e,"ForwardDelete"),z6=e=>n=>bs(la(n),e,po),Fr=e=>ui(e)||Zg(e),_b=(e,n)=>aa(e,n)?ir(n,Fr,z6(e)):F.none(),Wp=(e,n=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!n})},uN=(e,n,o)=>Gn(yl(o),Ri(o),(r,a)=>{const u=_d(!0,r),f=_d(!1,a),b=_d(!1,n);return e?vl(o,b).exists(C=>C.isEqual(f)&&n.isEqual(u)):gi(o,b).exists(C=>C.isEqual(u)&&n.isEqual(f))}).getOr(!0),Ab=e=>(wn(e)?Gi(e):ld(e)).bind(Ab).orThunk(()=>F.some(e)),Vu=(e,n,o,r=!0)=>{var a;n.deleteContents();const u=Ab(o).getOr(o),f=de.fromDom((a=e.dom.getParent(u.dom,e.dom.isBlock))!==null&&a!==void 0?a:o.dom);if(f.dom===e.getBody()?Wp(e,r):Ma(e.schema,f,{checkRootAsContent:!1})&&(rm(f),r&&e.selection.setCursorLocation(f.dom,0)),!po(o,f)){const b=bs(la(f),o)?[]:Mm(f);xe(b.concat(wc(o)),C=>{!po(C,f)&&!aa(C,f)&&Ma(e.schema,C)&&Ss(C)})}},yw=e=>n=>po(e,n),Bs=e=>Ja(e,"td,th"),z0=(e,n)=>db(de.fromDom(e),n),dN=e=>Gn(e.startTable,e.endTable,(n,o)=>{const r=x1(n,u=>po(u,o)),a=x1(o,u=>po(u,n));return!r&&!a?e:{...e,startTable:r?F.none():e.startTable,endTable:a?F.none():e.endTable,isSameTable:!1,isMultiTable:!1}}).getOr(e),mN=e=>dN(e),i4=(e,n)=>{const o=z0(e.startContainer,n),r=z0(e.endContainer,n),a=o.isSome(),u=r.isSome(),f=Gn(o,r,po).getOr(!1);return mN({startTable:o,endTable:r,isStartInTable:a,isEndInTable:u,isSameTable:f,isMultiTable:!f&&a&&u})},Cw=(e,n)=>({start:e,end:n}),u4=(e,n,o)=>({rng:e,table:n,cells:o}),Ob=ou.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),Db=(e,n)=>qi(de.fromDom(e),"td,th",n),hT=e=>!po(e.start,e.end),d4=(e,n)=>db(e.start,n).bind(o=>db(e.end,n).bind(r=>qa(po(o,r),o))),fN=(e,n)=>!hT(e)&&d4(e,n).exists(o=>{const r=o.dom.rows;return r.length===1&&r[0].cells.length===1}),gN=(e,n)=>{const o=Db(e.startContainer,n),r=Db(e.endContainer,n);return Gn(o,r,Cw)},hN=e=>n=>db(n,e).bind(o=>ns(Bs(o)).map(r=>Cw(n,r))),pN=e=>n=>db(n,e).bind(o=>ro(Bs(o)).map(r=>Cw(r,n))),Zp=e=>n=>d4(n,e).map(o=>u4(n,o,Bs(o))),m4=(e,n,o,r)=>{if(o.collapsed||!e.forall(hT))return F.none();if(n.isSameTable){const a=e.bind(Zp(r));return F.some({start:a,end:a})}else{const a=Db(o.startContainer,r),u=Db(o.endContainer,r),f=a.bind(hN(r)).bind(Zp(r)),b=u.bind(pN(r)).bind(Zp(r));return F.some({start:f,end:b})}},pT=(e,n)=>qs(e,o=>po(o,n)),f4=e=>Gn(pT(e.cells,e.rng.start),pT(e.cells,e.rng.end),(n,o)=>e.cells.slice(n,o+1)),U6=(e,n,o)=>e.exists(r=>fN(r,o)&&JC(r.start,n)),g4=(e,n)=>{const{startTable:o,endTable:r}=n,a=e.cloneRange();return o.each(u=>a.setStartAfter(u.dom)),r.each(u=>a.setEndBefore(u.dom)),a},bN=(e,n,o,r)=>m4(e,n,o,r).bind(({start:a,end:u})=>a.or(u)).bind(a=>{const{isSameTable:u}=n,f=f4(a).getOr([]);if(u&&a.cells.length===f.length)return F.some(Ob.fullTable(a.table));if(f.length>0){if(u)return F.some(Ob.partialTable(f,F.none()));{const b=g4(o,n);return F.some(Ob.partialTable(f,F.some({...n,rng:b})))}}else return F.none()}),vN=(e,n,o,r)=>m4(e,n,o,r).bind(({start:a,end:u})=>{const f=a.bind(f4).getOr([]),b=u.bind(f4).getOr([]);if(f.length>0&&b.length>0){const C=g4(o,n);return F.some(Ob.multiTable(f,b,C))}else return F.none()}),bT=(e,n)=>{const o=yw(e),r=gN(n,o),a=i4(n,o);return U6(r,n,o)?r.map(u=>Ob.singleCellTable(n,u.start)):a.isMultiTable?vN(r,a,n,o):bN(r,a,n,o)},h4=e=>xe(e,n=>{Zs(n,"contenteditable"),rm(n)}),yN=(e,n)=>F.from(e.dom.getParent(n,e.dom.isBlock)).map(de.fromDom),CN=(e,n,o)=>{o.each(r=>{n?Ss(r):(rm(r),e.selection.setCursorLocation(r.dom,0))})},vT=(e,n,o,r)=>{const a=o.cloneRange();r?(a.setStart(o.startContainer,o.startOffset),a.setEndAfter(n.dom.lastChild)):(a.setStartBefore(n.dom.firstChild),a.setEnd(o.endContainer,o.endOffset)),yT(e,a,n,!1).each(u=>u())},p4=e=>{const n=Rp(e),o=de.fromDom(e.selection.getNode());Og(o.dom)&&Ma(e.schema,o)?e.selection.setCursorLocation(o.dom,0):e.selection.collapse(!0),n.length>1&&So(n,r=>po(r,o))&&Cr(o,"data-mce-selected","1")},b4=(e,n,o)=>F.some(()=>{const r=e.selection.getRng(),a=o.bind(({rng:u,isStartInTable:f})=>{const b=yN(e,f?u.endContainer:u.startContainer);u.deleteContents(),CN(e,f,b.filter(Je(Ma,e.schema)));const C=f?n[0]:n[n.length-1];return vT(e,C,r,f),Ma(e.schema,C)?F.none():F.some(f?n.slice(1):n.slice(0,-1))}).getOr(n);h4(a),p4(e)}),wN=(e,n,o,r)=>F.some(()=>{const a=e.selection.getRng(),u=n[0],f=o[o.length-1];vT(e,u,a,!0),vT(e,f,a,!1);const b=Ma(e.schema,u)?n:n.slice(1),C=Ma(e.schema,f)?o:o.slice(0,-1);h4(b.concat(C)),r.deleteContents(),p4(e)}),yT=(e,n,o,r=!0)=>F.some(()=>{Vu(e,n,o,r)}),SN=(e,n)=>F.some(()=>Eb(e,!1,n)),xN=(e,n,o)=>bT(n,o).bind(r=>r.fold(Je(yT,e),Je(SN,e),Je(b4,e),Je(wN,e))),v4=(e,n)=>ww(e,n),TN=(e,n,o,r)=>CT(n,r).fold(()=>xN(e,n,o),a=>v4(e,a)),EN=(e,n,o)=>{const r=de.fromDom(e.getBody()),a=e.selection.getRng();return o.length!==0?b4(e,o,F.none()):TN(e,r,a,n)},y4=(e,n)=>qo(rg(n,e),I1),CT=(e,n)=>qo(rg(n,e),Mc("caption")),kN=(e,n,o,r,a)=>Xf(o,e.getBody(),a).bind(u=>y4(n,de.fromDom(u.getNode())).bind(f=>po(f,r)?F.none():F.some(Mt))),ww=(e,n)=>F.some(()=>{rm(n),e.selection.setCursorLocation(n.dom,0)}),C4=(e,n,o,r)=>yl(e.dom).bind(a=>Ri(e.dom).map(u=>n?o.isEqual(a)&&r.isEqual(u):o.isEqual(u)&&r.isEqual(a))).getOr(!0),wT=(e,n)=>ww(e,n),w4=(e,n,o)=>CT(e,de.fromDom(o.getNode())).fold(()=>F.some(Mt),r=>qa(!po(r,n),Mt)),ST=(e,n,o,r,a)=>Xf(o,e.getBody(),a).fold(()=>F.some(Mt),u=>C4(r,o,a,u)?wT(e,r):w4(n,r,u)),_N=(e,n,o,r)=>{const a=He.fromRangeStart(e.selection.getRng());return y4(o,r).bind(u=>Ma(e.schema,u,{checkRootAsContent:!1})?ww(e,u):kN(e,o,n,u,a))},xT=(e,n,o,r)=>{const a=He.fromRangeStart(e.selection.getRng());return Ma(e.schema,r)?ww(e,r):ST(e,o,n,r,a)},TT=(e,n)=>e?iT(n):JA(n),Sw=(e,n)=>{const o=He.fromRangeStart(e.selection.getRng());return TT(n,o)||Di(n,e.getBody(),o).exists(r=>TT(n,r))},S4=(e,n,o)=>{const r=de.fromDom(e.getBody());return CT(r,o).fold(()=>_N(e,n,r,o).orThunk(()=>qa(Sw(e,n),Mt)),a=>xT(e,n,r,a))},ET=(e,n)=>{const o=de.fromDom(e.selection.getStart(!0)),r=Rp(e);return e.selection.isCollapsed()&&r.length===0?S4(e,n,o):EN(e,o,r)},fm=(e,n)=>{let o=n;for(;o&&o!==e;){if(Ke(o)||as(o))return o;o=o.parentNode}return null},x4=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],T4=it.each,jp=e=>{const n=e.dom,o=new Set(e.serializer.getTempAttrs()),r=(u,f)=>{if(u.nodeName!==f.nodeName||u.nodeType!==f.nodeType)return!1;const b=T=>{const M={};return T4(n.getAttribs(T),P=>{const $=P.nodeName.toLowerCase();$!=="style"&&!a($)&&(M[$]=n.getAttrib(T,$))}),M},C=(T,M)=>{for(const P in T)if(yn(T,P)){const $=M[P];if(gn($)||T[P]!==$)return!1;delete M[P]}for(const P in M)if(yn(M,P))return!1;return!0};return $t(u)&&$t(f)&&(!C(b(u),b(f))||!C(n.parseStyle(n.getAttrib(u,"style")),n.parseStyle(n.getAttrib(f,"style"))))?!1:!hi(u)&&!hi(f)},a=u=>So(x4,f=>ms(u,f))||o.has(u);return{compare:r,isAttributeInternal:a}},xh=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),AN=e=>e.name==="summary",W6=(e,n)=>{let o=e;for(;o=o.walk();)n(o)},ON=(e,n,o,r)=>{const a=o.name;for(let u=0,f=e.length;u<f;u++){const b=e[u];if(b.name===a){const C=r.nodes[a];C?C.nodes.push(o):r.nodes[a]={filter:b,nodes:[o]}}}if(o.attributes)for(let u=0,f=n.length;u<f;u++){const b=n[u],C=b.name;if(C in o.attributes.map){const T=r.attributes[C];T?T.nodes.push(o):r.attributes[C]={filter:b,nodes:[o]}}}},DN=(e,n,o)=>{const r={nodes:{},attributes:{}};return o.firstChild&&W6(o,a=>{ON(e,n,a,r)}),r},E4=(e,n)=>{const o=(r,a)=>{pt(r,u=>{const f=cr(u.nodes);xe(u.filter.callbacks,b=>{for(let C=f.length-1;C>=0;C--){const T=f[C];(!(a?T.attr(u.filter.name)!==void 0:T.name===u.filter.name)||dn(T.parent))&&f.splice(C,1)}f.length>0&&b(f,u.filter.name,n)})})};o(e.nodes,!1),o(e.attributes,!0)},RN=(e,n,o,r={})=>{const a=DN(e,n,o);E4(a,r)},k4=(e,n,o,r)=>{if((e.pad_empty_with_br||n.insert)&&o(r)){const u=new bi("br",1);n.insert&&u.attr("data-mce-bogus","1"),r.empty().append(u)}else r.empty().append(new bi("#text",3)).value=$c},Gp=e=>{var n;return qp(e,"#text")&&((n=e==null?void 0:e.firstChild)===null||n===void 0?void 0:n.value)===$c},qp=(e,n)=>{const o=e==null?void 0:e.firstChild;return Oe(o)&&o===e.lastChild&&o.name===n},lG=(e,n)=>{const o=e.getElementRule(n.name);return(o==null?void 0:o.paddEmpty)===!0},Xc=(e,n,o,r)=>r.isEmpty(n,o,a=>lG(e,a)),Z6=(e,n)=>Oe(e)&&(n(e)||e.name==="br"),j6=e=>{let n;for(let o=e;o;o=o.parent){const r=o.attr("contenteditable");if(r==="false")break;r==="true"&&(n=o)}return F.from(n)},ef=(e,n,o=e.parent)=>{if(n.getSpecialElements()[e.name])e.empty().remove();else{const r=e.children();for(const a of r)o&&!n.isValidChild(o.name,a.name)&&ef(a,n,o);e.unwrap()}},us=(e,n,o,r=Mt)=>{const a=n.getTextBlockElements(),u=n.getNonEmptyElements(),f=n.getWhitespaceElements(),b=it.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),C=new Set,T=M=>M!==o&&!b[M.name];for(let M=0;M<e.length;M++){const P=e[M];let $,j,J;if(!P.parent||C.has(P))continue;if(a[P.name]&&P.parent.name==="li"){let oe=P.next;for(;oe&&a[oe.name];){oe.name="li",C.add(oe),P.parent.insert(oe,P.parent);oe=oe.next}P.unwrap();continue}const q=[P];for($=P.parent;$&&!n.isValidChild($.name,P.name)&&T($);$=$.parent)q.push($);if($&&q.length>1)if(_4(n,P,$))ef(P,n);else{q.reverse(),j=q[0].clone(),r(j);let oe=j;for(let me=0;me<q.length-1;me++){n.isValidChild(oe.name,q[me].name)&&me>0?(J=q[me].clone(),r(J),oe.append(J)):J=oe;for(let we=q[me].firstChild;we&&we!==q[me+1];){const Se=we.next;J.append(we),we=Se}oe=J}Xc(n,u,f,j)?$.insert(P,q[0],!0):($.insert(j,q[0],!0),$.insert(P,j)),$=q[0],(Xc(n,u,f,$)||qp($,"br"))&&$.empty().remove()}else if(P.parent){if(P.name==="li"){let oe=P.prev;if(oe&&(oe.name==="ul"||oe.name==="ol")){oe.append(P);continue}if(oe=P.next,oe&&(oe.name==="ul"||oe.name==="ol")&&oe.firstChild){oe.insert(P,oe.firstChild,!0);continue}const me=new bi("ul",1);r(me),P.wrap(me);continue}if(n.isValidChild(P.parent.name,"div")&&n.isValidChild("div",P.name)){const oe=new bi("div",1);r(oe),P.wrap(oe)}else ef(P,n)}}},iG=(e,n)=>{let o=e;for(;o;){if(o.name===n)return!0;o=o.parent}return!1},_4=(e,n,o=n.parent)=>o?e.children[n.name]&&!e.isValidChild(o.name,n.name)||n.name==="a"&&iG(o,"a")?!0:AN(o)&&xh(n)?!((o==null?void 0:o.firstChild)===n&&(o==null?void 0:o.lastChild)===n):!1:!1,G6=(e,n,o,r)=>{const a=document.createRange();return a.setStart(e,n),a.setEnd(o,r),a},hr=e=>{const n=He.fromRangeStart(e),o=He.fromRangeEnd(e),r=e.commonAncestorContainer;return Di(!1,r,o).map(a=>!Sd(n,o,r)&&Sd(n,a,r)?G6(n.container(),n.offset(),a.container(),a.offset()):e).getOr(e)},kT=e=>e.collapsed?e:hr(e),xw=e=>Oe(e.firstChild)&&e.firstChild===e.lastChild,Tw=e=>e.name==="br"||e.value===$c,Ew=(e,n)=>e.getBlockElements()[n.name]&&xw(n)&&Tw(n.firstChild),kw=(e,n)=>{const o=e.getNonEmptyElements();return Oe(n)&&(n.isEmpty(o)||Ew(e,n))},MN=(e,n)=>{let o=n.firstChild,r=n.lastChild;return o&&o.name==="meta"&&(o=o.next),r&&r.attr("id")==="mce_marker"&&(r=r.prev),kw(e,r)&&(r=r==null?void 0:r.prev),!o||o!==r?!1:o.name==="ul"||o.name==="ol"},uG=e=>{var n,o;const r=e.firstChild,a=e.lastChild;return r&&r.nodeName==="META"&&((n=r.parentNode)===null||n===void 0||n.removeChild(r)),a&&a.id==="mce_marker"&&((o=a.parentNode)===null||o===void 0||o.removeChild(a)),e},dG=(e,n,o)=>{const r=n.serialize(o),a=e.createFragment(r);return uG(a)},mG=e=>{var n;return Lt((n=e==null?void 0:e.childNodes)!==null&&n!==void 0?n:[],o=>o.nodeName==="LI")},fG=e=>e.data===$c||cs(e),q6=e=>Oe(e==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&fG(e.firstChild),gG=e=>!e.firstChild||q6(e),K6=e=>e.length>0&&gG(e[e.length-1])?e.slice(0,-1):e,A4=(e,n)=>{const o=e.getParent(n,e.isBlock);return o&&o.nodeName==="LI"?o:null},hG=(e,n)=>!!A4(e,n),Y6=(e,n)=>{const o=n.cloneRange(),r=n.cloneRange();return o.setStartBefore(e),r.setEndAfter(e),[o.cloneContents(),r.cloneContents()]},ec=(e,n)=>{const o=He.before(e),a=Za(n).next(o);return a?a.toRange():null},O4=(e,n)=>{const o=He.after(e),a=Za(n).prev(o);return a?a.toRange():null},NN=(e,n,o,r)=>{const a=Y6(e,r),u=e.parentNode;return u&&(u.insertBefore(a[0],e),it.each(n,f=>{u.insertBefore(f,e)}),u.insertBefore(a[1],e),u.removeChild(e)),O4(n[n.length-1],o)},X6=(e,n,o)=>{const r=e.parentNode;return r&&it.each(n,a=>{r.insertBefore(a,e)}),ec(e,o)},J6=(e,n,o,r)=>(r.insertAfter(n.reverse(),e),O4(n[0],o)),Q6=(e,n,o,r)=>{const a=dG(n,e,r),u=A4(n,o.startContainer),f=K6(mG(a.firstChild)),b=1,C=2,T=n.getRoot(),M=P=>{const $=He.fromRangeStart(o),j=Za(n.getRoot()),J=P===b?j.prev($):j.next($),q=J==null?void 0:J.getNode();return q?A4(n,q)!==u:!0};return u?M(b)?X6(u,f,T):M(C)?J6(u,f,T,n):NN(u,f,T,o):null},uu=["pre"],gm=(e,n,o,r)=>{var a;const u=n.firstChild,f=n.lastChild,b=f.attr("data-mce-type")==="bookmark"?f.prev:f,C=u===b,T=Cn(uu,u.name);if(C&&T){const M=u.attr("contenteditable")!=="false",P=((a=e.getParent(o,e.isBlock))===null||a===void 0?void 0:a.nodeName.toLowerCase())===u.name,$=F.from(fm(r,o)).forall(Ke);return M&&P&&$}else return!1},_T=Og,D4=(e,n,o)=>{if(Oe(o)){const r=e.getParent(n.endContainer,_T);return o===r&&JC(de.fromDom(o),n)}else return!1},R4=(e,n,o)=>{var r;if(o.getAttribute("data-mce-bogus")==="all")(r=o.parentNode)===null||r===void 0||r.insertBefore(e.dom.createFragment(n),o);else{const a=o.firstChild,u=o.lastChild;!a||a===u&&a.nodeName==="BR"?e.dom.setHTML(o,n):e.selection.setContent(n,{no_events:!0})}},AT=(e,n,o)=>{F.from(e.getParent(n,"td,th")).map(de.fromDom).each(r=>h_(r,o))},PN=(e,n)=>{const o=e.schema.getTextInlineElements(),r=e.dom;if(n){const a=e.getBody(),u=jp(e),f="*[data-mce-fragment]",b=r.select(f);it.each(b,C=>{const T=$=>Oe(o[$.nodeName.toLowerCase()]),M=$=>$.childNodes.length===1;if(($=>!(LM(r,$)||u6(r,$)))(C)&&T(C)&&M(C)){const $=F0(r,C),j=(me,we)=>tn(me,Se=>Cn(we,Se)),J=me=>M(C)&&r.is(me,f)&&T(me)&&(me.nodeName===C.nodeName&&j($,F0(r,me))||J(me.children[0])),q=me=>Oe(me)&&me!==a&&(u.compare(C,me)||q(me.parentElement)),oe=me=>Oe(me)&&me!==a&&r.is(me,f)&&(m6(r,C,me)||oe(me.parentElement));(J(C.children[0])||q(C.parentElement)&&!oe(C.parentElement))&&r.remove(C,!0)}})}},_w=e=>{let n=e;for(;n=n.walk();)n.type===1&&n.attr("data-mce-fragment","1")},OT=e=>{it.each(e.getElementsByTagName("*"),n=>{n.removeAttribute("data-mce-fragment")})},M4=e=>!!e.getAttribute("data-mce-fragment"),BN=(e,n)=>Oe(n)&&!e.schema.getVoidElements()[n.nodeName],Aw=(e,n)=>{var o,r,a;let u;const f=e.dom,b=e.selection;if(!n)return;b.scrollIntoView(n);const C=fm(e.getBody(),n);if(C&&f.getContentEditable(C)==="false"){f.remove(n),b.select(C);return}let T=f.createRng();const M=n.previousSibling;if(dt(M)){T.setStart(M,(r=(o=M.nodeValue)===null||o===void 0?void 0:o.length)!==null&&r!==void 0?r:0);const j=n.nextSibling;dt(j)&&(M.appendData(j.data),(a=j.parentNode)===null||a===void 0||a.removeChild(j))}else T.setStartBefore(n),T.setEndBefore(n);const P=j=>{let J=He.fromRangeStart(j);return J=Za(e.getBody()).next(J),J==null?void 0:J.toRange()},$=f.getParent(n,f.isBlock);if(f.remove(n),$&&f.isEmpty($)){const j=_T($);qd(de.fromDom($)),T.setStart($,0),T.setEnd($,0),!j&&!M4($)&&(u=P(T))?(T=u,f.remove($)):f.add($,f.create("br",j?{}:{"data-mce-bogus":"1"}))}b.setRng(T)},e8=e=>{const n=e.dom,o=kT(e.selection.getRng());e.selection.setRng(o);const r=n.getParent(o.startContainer,_T);D4(n,o,r)?yT(e,o,de.fromDom(r)):o.startContainer===o.endContainer&&o.endOffset-o.startOffset===1&&dt(o.startContainer.childNodes[o.startOffset])?o.deleteContents():e.getDoc().execCommand("Delete",!1)},t8=e=>{for(let n=e;n;n=n.walk())if(n.attr("id")==="mce_marker")return F.some(n);return F.none()},tf=(e,n,o)=>{var r;return So(o.children(),xh)&&((r=e.getParent(n,e.isBlock))===null||r===void 0?void 0:r.nodeName)==="SUMMARY"},du=(e,n,o)=>{var r,a;const u=e.selection,f=e.dom,b=e.parser,C=o.merge,T=Hp({validate:!0},e.schema),M='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';o.preserve_zwsp||(n=eu(n)),n.indexOf("{$caret}")===-1&&(n+="{$caret}"),n=n.replace(/\{\$caret\}/,M);let P=u.getRng();const $=P.startContainer,j=e.getBody();$===j&&u.isCollapsed()&&f.isBlock(j.firstChild)&&BN(e,j.firstChild)&&f.isEmpty(j.firstChild)&&(P=f.createRng(),P.setStart(j.firstChild,0),P.setEnd(j.firstChild,0),u.setRng(P)),u.isCollapsed()||e8(e);const J=u.getNode(),q={context:J.nodeName.toLowerCase(),data:o.data,insert:!0},oe=b.parse(n,q);if(o.paste===!0&&MN(e.schema,oe)&&hG(f,J))return P=Q6(T,f,u.getRng(),oe),P&&u.setRng(P),n;o.paste===!0&&gm(f,oe,J,e.getBody())&&((r=oe.firstChild)===null||r===void 0||r.unwrap()),_w(oe);let me=oe.lastChild;if(me&&me.attr("id")==="mce_marker"){const we=me;for(me=me.prev;me&&me.name!=="table";me=me.walk(!0))if(me.type===3||!f.isBlock(me.name)){me.parent&&e.schema.isValidChild(me.parent.name,"span")&&me.parent.insert(we,me,me.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(J),!q.invalid&&!tf(f,J,oe))n=T.serialize(oe),R4(e,n,J);else{e.selection.setContent(M);let we=u.getNode(),Se;const _e=e.getBody();for(kf(we)?we=Se=_e:Se=we;Se&&Se!==_e;)we=Se,Se=Se.parentNode;n=we===_e?_e.innerHTML:f.getOuterHTML(we);const nt=b.parse(n),wt=t8(nt),Zt=wt.bind(j6).getOr(nt);wt.each(qt=>qt.replace(oe));const We=oe.children(),Pe=(a=oe.parent)!==null&&a!==void 0?a:nt;oe.unwrap();const rt=Lt(We,qt=>_4(e.schema,qt,Pe));us(rt,e.schema,Zt),RN(b.getNodeFilters(),b.getAttributeFilters(),nt),n=T.serialize(nt),we===_e?f.setHTML(_e,n):f.setOuterHTML(we,n)}return PN(e,C),Aw(e,f.get("mce_marker")),OT(e.getBody()),AT(f,u.getStart(),e.schema),gl(e.schema,e.getBody(),u.getStart()),n},Kp=e=>e instanceof bi,Ad=e=>{L0(e)&&yl(e.getBody()).each(n=>{const o=n.getNode(),r=Yi(o)?yl(o).getOr(n):n;e.selection.setRng(r.toRange())})},N4=(e,n,o)=>{e.dom.setHTML(e.getBody(),n),o!==!0&&Ad(e)},nr=(e,n,o,r)=>{if(o=eu(o),o.length===0||/^\s+$/.test(o)){const a='<br data-mce-bogus="1">';n.nodeName==="TABLE"?o="<tr><td>"+a+"</td></tr>":/^(UL|OL)$/.test(n.nodeName)&&(o="<li>"+a+"</li>");const u=Wa(e);return e.schema.isValidChild(n.nodeName.toLowerCase(),u.toLowerCase())?(o=a,o=e.dom.createHTML(u,Wf(e),o)):o||(o=a),N4(e,o,r.no_selection),{content:o,html:o}}else{r.format!=="raw"&&(o=Hp({validate:!1},e.schema).serialize(e.parser.parse(o,{isRootContent:!0,insert:!0})));const a=Rv(de.fromDom(n))?o:it.trim(o);return N4(e,a,r.no_selection),{content:a,html:a}}},n8=(e,n,o,r)=>{RN(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),o);const a=Hp({validate:!1},e.schema).serialize(o),u=eu(Rv(de.fromDom(n))?a:it.trim(a));return N4(e,u,r.no_selection),{content:o,html:u}},Rb=(e,n,o)=>F.from(e.getBody()).map(r=>Kp(n)?n8(e,r,n,o):nr(e,r,n,o)).getOr({content:n,html:Kp(o.content)?"":o.content}),U0=e=>ue(e)?e:je,$N=(e,n,o)=>{let r=e.dom;const a=U0(o);for(;r.parentNode;){r=r.parentNode;const u=de.fromDom(r),f=n(u);if(f.isSome())return f;if(a(u))break}return F.none()},Ow=(e,n,o)=>{const r=n(e),a=U0(o);return r.orThunk(()=>a(e)?F.none():$N(e,n,a))},Dw=b0,IN=(e,n,o)=>{const r=e.formatter.get(o);if(r)for(let a=0;a<r.length;a++){const u=r[a];if(cu(u)&&u.inherit===!1&&e.dom.is(n,u.selector))return!0}return!1},Rw=(e,n,o,r,a)=>{const u=e.dom.getRoot();if(n===u)return!1;const f=e.dom.getParent(n,b=>IN(e,b,o)?!0:b.parentNode===u||!!nf(e,b,o,r,!0));return!!nf(e,f,o,r,a)},DT=(e,n,o)=>ma(o)&&Dw(n,o.inline)||dm(o)&&Dw(n,o.block)?!0:cu(o)?$t(n)&&e.is(n,o.selector):!1,P4=(e,n,o,r,a,u)=>{const f=o[r],b=r==="attributes";if(ue(o.onmatch))return o.onmatch(n,o,r);if(f){if(zl(f)){for(let C=0;C<f.length;C++)if(b?e.getAttrib(n,f[C]):ew(e,n,f[C]))return!0}else for(const C in f)if(yn(f,C)){const T=b?e.getAttrib(n,C):ew(e,n,C),M=fh(f[C],u),P=dn(T)||Kr(T);if(P&&dn(M))continue;if(a&&P&&!o.exact||(!a||o.exact)&&!Dw(T,tg(M,C)))return!1}}return!0},nf=(e,n,o,r,a)=>{const u=e.formatter.get(o),f=e.dom;if(u&&$t(n))for(let b=0;b<u.length;b++){const C=u[b];if(DT(e.dom,n,C)&&P4(f,n,C,"attributes",a,r)&&P4(f,n,C,"styles",a,r)){const T=C.classes;if(T){for(let M=0;M<T.length;M++)if(!e.dom.hasClass(n,fh(T[M],r)))return}return C}}},Mw=(e,n,o,r,a)=>{if(r)return Rw(e,r,n,o,a);if(r=e.selection.getNode(),Rw(e,r,n,o,a))return!0;const u=e.selection.getStart();return!!(u!==r&&Rw(e,u,n,o,a))},LN=(e,n,o)=>{const r=[],a={},u=e.selection.getStart();return e.dom.getParent(u,f=>{for(let b=0;b<n.length;b++){const C=n[b];!a[C]&&nf(e,f,C,o)&&(a[C]=!0,r.push(C))}},e.dom.getRoot()),r},RT=(e,n)=>{const o=a=>po(a,de.fromDom(e.getBody())),r=(a,u)=>nf(e,a.dom,u)?F.some(u):F.none();return F.from(e.selection.getStart(!0)).bind(a=>Ow(de.fromDom(a),u=>Br(n,f=>r(u,f)),o)).getOrNull()},o8=(e,n)=>{const o=e.formatter.get(n),r=e.dom;if(o&&e.selection.isEditable()){const a=e.selection.getStart(),u=gh(r,a);for(let f=o.length-1;f>=0;f--){const b=o[f];if(!cu(b))return!0;for(let C=u.length-1;C>=0;C--)if(r.is(u[C],b.selector))return!0}}return!1},s8=(e,n,o)=>Ho(o,(r,a)=>{const u=Bx(e,a);return e.formatter.matchNode(n,a,{},u)?r.concat([a]):r},[]),Nw=Kc,r8=(e,n)=>e.importNode(n,!0),FN=e=>{if(e){const n=new Bc(e,e);for(let o=n.current();o;o=n.next())if(dt(o))return o}return null},MT=e=>{const n=de.fromTag("span");return Xr(n,{id:a0,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&fc(n,de.fromText(Nw)),n},c8=e=>{const n=FN(e);return n&&n.data.charAt(0)===Nw&&n.deleteData(0,1),n},B4=(e,n,o)=>{const r=e.dom,a=e.selection;if(Lx(n))Eb(e,!1,de.fromDom(n),o,!0);else{const u=a.getRng(),f=r.getParent(n,r.isBlock),b=u.startContainer,C=u.startOffset,T=u.endContainer,M=u.endOffset,P=c8(n);r.remove(n,!0),b===P&&C>0&&u.setStart(P,C-1),T===P&&M>0&&u.setEnd(P,M-1),f&&r.isEmpty(f)&&rm(de.fromDom(f)),a.setRng(u)}},NT=(e,n,o)=>{const r=e.dom,a=e.selection;if(n)B4(e,n,o);else if(n=ah(e.getBody(),a.getStart()),!n)for(;n=r.get(a0);)B4(e,n,o)},a8=(e,n,o)=>{var r,a;const u=e.dom,f=u.getParent(o,Je(fb,e.schema));f&&u.isEmpty(f)?(r=o.parentNode)===null||r===void 0||r.replaceChild(n,o):(Yy(de.fromDom(o)),u.isEmpty(o)?(a=o.parentNode)===null||a===void 0||a.replaceChild(n,o):u.insertAfter(n,o))},$4=(e,n)=>(e.appendChild(n),n),W0=(e,n)=>{var o;const r=Zo(e,(u,f)=>$4(u,f.cloneNode(!1)),n),a=(o=r.ownerDocument)!==null&&o!==void 0?o:document;return $4(r,a.createTextNode(Nw))},l8=(e,n,o,r,a,u)=>{const f=e.formatter,b=e.dom,C=Lt(Vt(f.get()),P=>P!==r&&!rs(P,"removeformat")),T=s8(e,o,C);if(Lt(T,P=>!$x(e,P,r)).length>0){const P=o.cloneNode(!1);return b.add(n,P),f.remove(r,a,P,u),b.remove(P),F.some(P)}else return F.none()},HN=e=>dp(e,up(e).replace(new RegExp(`${$c}$`)," ")),I4=(e,n)=>{const o=()=>{n!==null&&!e.dom.isEmpty(n)&&Gi(de.fromDom(n)).each(r=>{ws(r)?HN(r):wg(r,a=>ws(a)).each(a=>{ws(a)&&HN(a)})})};e.once("input",r=>{r.data&&!ih(r.data)&&(r.isComposing?e.once("compositionend",()=>{o()}):o())})},i8=(e,n,o)=>{let r;const a=e.selection,u=e.formatter.get(n);if(!u)return;const f=a.getRng();let b=f.startOffset;const T=f.startContainer.nodeValue;r=ah(e.getBody(),a.getStart());const M=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(T&&b>0&&b<T.length&&M.test(T.charAt(b))&&M.test(T.charAt(b-1))){const P=a.getBookmark();f.collapse(!0);let $=ng(e.dom,f,u);$=rn($),e.formatter.apply(n,o,$),a.moveToBookmark(P)}else{let P=r?FN(r):null;(!r||(P==null?void 0:P.data)!==Nw)&&(r=r8(e.getDoc(),MT(!0).dom),P=r.firstChild,f.insertNode(r),b=1,I4(e,r)),e.formatter.apply(n,o,r),a.setCursorLocation(P,b)}},VN=(e,n,o,r)=>{const a=e.dom,u=e.selection;let f=!1;const b=e.formatter.get(n);if(!b)return;const C=u.getRng(),T=C.startContainer,M=C.startOffset;let P=T;dt(T)&&(M!==T.data.length&&(f=!0),P=P.parentNode);const $=[];let j;for(;P;){if(nf(e,P,n,o,r)){j=P;break}P.nextSibling&&(f=!0),$.push(P),P=P.parentNode}if(j)if(f){const J=u.getBookmark();C.collapse(!0);let q=ng(a,C,b,!0);q=rn(q),e.formatter.remove(n,o,q,r),u.moveToBookmark(J)}else{const J=ah(e.getBody(),j),q=Oe(J)?a.getParents(j.parentNode,gt,J):[],oe=MT(!1).dom;a8(e,oe,J??j);const me=l8(e,oe,j,n,o,r),we=W0([...$,...me.toArray(),...q],oe);J&&B4(e,J,Oe(J)),u.setCursorLocation(we,1),I4(e,oe),a.isEmpty(j)&&a.remove(j)}},Od=(e,n,o)=>{const r=e.selection,a=e.getBody();NT(e,null,o),(n===8||n===46)&&r.isCollapsed()&&r.getStart().innerHTML===Nw&&NT(e,ah(a,r.getStart()),!0),(n===37||n===39)&&NT(e,ah(a,r.getStart()),!0)},u8=e=>dt(e)&&tc(e.data,$c),zN=e=>{e.on("mouseup keydown",n=>{Od(e,n.keyCode,u8(e.selection.getRng().endContainer))})},PT=e=>{const n=MT(!1),o=W0(e,n.dom);return{caretContainer:n,caretPosition:He(o,0)}},BT=(e,n)=>{const{caretContainer:o,caretPosition:r}=PT(n);return Ds(de.fromDom(e),o),Ss(de.fromDom(e)),r},UN=(e,n)=>{const{caretContainer:o,caretPosition:r}=PT(n);return e.insertNode(o.dom),r},L4=(e,n)=>{if(Mi(n.dom))return!1;const o=e.schema.getTextInlineElements();return yn(o,Q(n))&&!Mi(n.dom)&&!dd(n.dom)},Pw={},WN=ki(["pre"]),ZN=(e,n)=>{Pw[e]||(Pw[e]=[]),Pw[e].push(n)},jN=(e,n)=>{yn(Pw,e)&&xe(Pw[e],o=>{o(n)})};ZN("pre",e=>{const n=e.selection.getRng(),o=a=>u=>{const f=u.previousSibling;return WN(f)&&Cn(a,f)},r=(a,u)=>{const f=de.fromDom(u),b=Su(f).dom;Ss(f),_u(de.fromDom(a),[de.fromTag("br",b),de.fromTag("br",b),...wc(f)])};if(!n.collapsed){const a=e.selection.getSelectedBlocks(),u=Lt(Lt(a,WN),o(a));xe(u,f=>{r(f.previousSibling,f)})}});const zu=["fontWeight","fontStyle","color","fontSize","fontFamily"],d8=e=>Xe(e.styles)&&So(Vt(e.styles),n=>Cn(zu,n)),m8=e=>qo(e,n=>ma(n)&&n.inline==="span"&&d8(n)),f8=(e,n)=>{const o=e.get(n);return Qe(o)?m8(o):F.none()},$T=(e,n)=>gi(n,He.fromRangeStart(e)).isNone(),GN=(e,n)=>vl(n,He.fromRangeEnd(e)).exists(o=>!cs(o.getNode())||vl(n,o).isSome())===!1,g8=e=>n=>li(n)&&e.isEditable(n),h8=e=>{const n=e.getSelectedBlocks(),o=e.getRng();if(e.isCollapsed())return[];if(n.length===1)return $T(o,n[0])&&GN(o,n[0])?n:[];{const r=ro(n).filter(f=>$T(o,f)).toArray(),a=ns(n).filter(f=>GN(o,f)).toArray(),u=n.slice(1,-1);return r.concat(u).concat(a)}},F4=e=>Lt(h8(e),g8(e.dom)),hm=e=>Lt(e.getSelectedBlocks(),g8(e.dom)),Bw=it.each,Z0=e=>$t(e)&&!hi(e)&&!Mi(e)&&!dd(e),IT=(e,n)=>{for(let o=e;o;o=o[n]){if(dt(o)&&xo(o.data))return e;if($t(o)&&!hi(o))return o}return e},qN=(e,n,o)=>{const r=jp(e),a=Ei(n)&&e.dom.isEditable(n),u=Ei(o)&&e.dom.isEditable(o);if(a&&u){const f=IT(n,"previousSibling"),b=IT(o,"nextSibling");if(r.compare(f,b)){for(let C=f.nextSibling;C&&C!==b;){const T=C;C=C.nextSibling,f.appendChild(T)}return e.dom.remove(b),it.each(it.grep(b.childNodes),C=>{f.appendChild(C)}),f}}return o},H4=(e,n,o,r)=>{var a;if(r&&n.merge_siblings!==!1){const u=(a=qN(e,QC(r),r))!==null&&a!==void 0?a:r;qN(e,u,QC(u,!0))}},p8=(e,n,o)=>{if(n.clear_child_styles){const r=n.links?"*:not(a)":"*";Bw(e.select(r,o),a=>{Z0(a)&&e.isEditable(a)&&Bw(n.styles,(u,f)=>{e.setStyle(a,f,"")})})}},LT=(e,n,o)=>{Bw(e.childNodes,r=>{Z0(r)&&(n(r)&&o(r),r.hasChildNodes()&&LT(r,n,o))})},V4=(e,n)=>{n.nodeName==="SPAN"&&e.getAttribs(n).length===0&&e.remove(n,!0)},KN=(e,n)=>o=>!!(o&&ew(e,o,n)),z4=(e,n,o)=>r=>{e.setStyle(r,n,o),r.getAttribute("style")===""&&r.removeAttribute("style"),V4(e,r)},Mb=ou.generate([{keep:[]},{rename:["name"]},{removed:[]}]),Nb=/^(src|href|style)$/,FT=it.each,HT=b0,YN=e=>/^(TR|TH|TD)$/.test(e.nodeName),XN=(e,n,o)=>e.isChildOf(n,o)&&n!==o&&!e.isBlock(o),JN=(e,n,o)=>{let r=n[o?"startContainer":"endContainer"],a=n[o?"startOffset":"endOffset"];if($t(r)){const u=r.childNodes.length-1;!o&&a&&a--,r=r.childNodes[a>u?u:a]}return dt(r)&&o&&a>=r.data.length&&(r=new Bc(r,e.getBody()).next()||r),dt(r)&&!o&&a===0&&(r=new Bc(r,e.getBody()).prev()||r),r},QN=(e,n)=>{const o=n?"firstChild":"lastChild",r=e[o];return YN(e)&&r?e.nodeName==="TR"&&r[o]||r:e},U4=(e,n,o,r)=>{var a;const u=e.create(o,r);return(a=n.parentNode)===null||a===void 0||a.insertBefore(u,n),u.appendChild(n),u},eP=(e,n,o,r,a)=>{const u=de.fromDom(n),f=de.fromDom(e.create(r,a)),b=o?Ud(u):Fh(u);return _u(f,b),o?(Ds(u,f),ud(f,u)):(Gl(u,f),fc(f,u)),f.dom},tP=(e,n)=>n.links&&e.nodeName==="A",nP=(e,n,o)=>{const r=n.parentNode;let a;const u=e.dom,f=Wa(e);dm(o)&&r===u.getRoot()&&(!o.list_block||!HT(n,o.list_block))&&xe(cr(n.childNodes),b=>{mh(e,f,b.nodeName.toLowerCase())?a?a.appendChild(b):(a=U4(u,b,f),u.setAttribs(a,Wf(e))):a=null}),!(uA(o)&&!HT(o.inline,n))&&u.remove(n,!0)},VT=(e,n,o)=>ts(e)?{name:n,value:null}:{name:e,value:fh(n,o)},Yp=(e,n)=>{e.getAttrib(n,"style")===""&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style"))},oP=(e,n,o,r,a)=>{let u=!1;FT(o.styles,(f,b)=>{const{name:C,value:T}=VT(b,f,r),M=tg(T,C);(o.remove_similar||W(T)||!$t(a)||HT(ew(e,a,C),M))&&e.setStyle(n,C,""),u=!0}),u&&Yp(e,n)},b8=(e,n,o)=>{n==="removeformat"?xe(hm(e.selection),r=>{xe(zu,a=>e.dom.setStyle(r,a,"")),Yp(e.dom,r)}):f8(e.formatter,n).each(r=>{xe(hm(e.selection),a=>oP(e.dom,a,r,o,null))})},$w=(e,n,o,r,a)=>{const u=e.dom,f=jp(e),b=e.schema;if(ma(n)&&ia(b,n.inline)&&md(b,r)&&r.parentElement===e.getBody())return nP(e,r,n),Mb.removed();if(!n.ceFalseOverride&&r&&u.getContentEditableParent(r)==="false"||r&&!DT(u,r,n)&&!tP(r,n))return Mb.keep();const C=r,T=n.preserve_attributes;if(ma(n)&&n.remove==="all"&&Qe(T)){const M=Lt(u.getAttribs(C),P=>Cn(T,P.name.toLowerCase()));if(u.removeAllAttribs(C),xe(M,P=>u.setAttrib(C,P.name,P.value)),M.length>0)return Mb.rename("span")}if(n.remove!=="all"){oP(u,C,n,o,a),FT(n.attributes,(P,$)=>{const{name:j,value:J}=VT($,P,o);if(n.remove_similar||W(J)||!$t(a)||HT(u.getAttrib(a,j),J)){if(j==="class"){const q=u.getAttrib(C,j);if(q){let oe="";if(xe(q.split(/\s+/),me=>{/mce\-\w+/.test(me)&&(oe+=(oe?" ":"")+me)}),oe){u.setAttrib(C,j,oe);return}}}if(Nb.test(j)&&C.removeAttribute("data-mce-"+j),j==="style"&&ki(["li"])(C)&&u.getStyle(C,"list-style-type")==="none"){C.removeAttribute(j),u.setStyle(C,"list-style-type","none");return}j==="class"&&C.removeAttribute("className"),C.removeAttribute(j)}}),FT(n.classes,P=>{P=fh(P,o),(!$t(a)||u.hasClass(a,P))&&u.removeClass(C,P)});const M=u.getAttribs(C);for(let P=0;P<M.length;P++){const $=M[P].nodeName;if(!f.isAttributeInternal($))return Mb.keep()}}return n.remove!=="none"?(nP(e,C,n),Mb.removed()):Mb.keep()},sP=(e,n,o,r,a)=>{let u;return n.parentNode&&xe(gh(e.dom,n.parentNode).reverse(),f=>{if(!u&&$t(f)&&f.id!=="_start"&&f.id!=="_end"){const b=nf(e,f,o,r,a);b&&b.split!==!1&&(u=f)}}),u},rP=(e,n,o,r)=>$w(e,n,o,r,r).fold(tt(r),a=>(e.dom.createFragment().appendChild(r),e.dom.rename(r,a)),tt(null)),v8=(e,n,o,r,a,u,f,b)=>{var C,T;let M,P;const $=e.dom;if(o){const j=o.parentNode;for(let J=r.parentNode;J&&J!==j;J=J.parentNode){let q=$.clone(J,!1);for(let oe=0;oe<n.length&&(q=rP(e,n[oe],b,q),q!==null);oe++);q&&(M&&q.appendChild(M),P||(P=q),M=q)}(!f.mixed||!$.isBlock(o))&&(r=(C=$.split(o,r))!==null&&C!==void 0?C:r),M&&P&&((T=a.parentNode)===null||T===void 0||T.insertBefore(M,a),P.appendChild(a),ma(f)&&H4(e,f,b,M))}return r},cP=(e,n,o,r,a)=>{const u=e.formatter.get(n),f=u[0],b=e.dom,C=e.selection,T=q=>{const oe=sP(e,q,n,o,a);return v8(e,u,oe,q,q,!0,f,o)},M=q=>hi(q)&&$t(q)&&(q.id==="_start"||q.id==="_end"),P=q=>So(u,oe=>of(e,oe,o,q,q)),$=q=>{const oe=cr(q.childNodes),we=P(q)||So(u,nt=>DT(b,q,nt)),Se=q.parentNode;if(!we&&Oe(Se)&&xd(f)&&P(Se),f.deep&&oe.length)for(let nt=0;nt<oe.length;nt++)$(oe[nt]);xe(["underline","line-through","overline"],nt=>{$t(q)&&e.dom.getStyle(q,"text-decoration")===nt&&q.parentNode&&tw(b,q.parentNode)===nt&&of(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:nt}},void 0,q)})},j=q=>{const oe=b.get(q?"_start":"_end");if(oe){let me=oe[q?"firstChild":"lastChild"];return M(me)&&(me=me[q?"firstChild":"lastChild"]),dt(me)&&me.data.length===0&&(me=q?oe.previousSibling||oe.nextSibling:oe.nextSibling||oe.previousSibling),b.remove(oe,!0),me}else return null},J=q=>{let oe,me,we=ng(b,q,u,q.collapsed);if(f.split){if(we=rn(we),oe=JN(e,we,!0),me=JN(e,we),oe!==me){if(oe=QN(oe,!0),me=QN(me,!1),XN(b,oe,me)){const _e=F.from(oe.firstChild).getOr(oe);T(eP(b,_e,!0,"span",{id:"_start","data-mce-type":"bookmark"})),j(!0);return}if(XN(b,me,oe)){const _e=F.from(me.lastChild).getOr(me);T(eP(b,_e,!1,"span",{id:"_end","data-mce-type":"bookmark"})),j(!1);return}oe=U4(b,oe,"span",{id:"_start","data-mce-type":"bookmark"}),me=U4(b,me,"span",{id:"_end","data-mce-type":"bookmark"});const Se=b.createRng();Se.setStartAfter(oe),Se.setEndBefore(me),Bp(b,Se,_e=>{xe(_e,nt=>{!hi(nt)&&!hi(nt.parentNode)&&T(nt)})}),T(oe),T(me),oe=j(!0),me=j()}else oe=me=T(oe);we.startContainer=oe.parentNode?oe.parentNode:oe,we.startOffset=b.nodeIndex(oe),we.endContainer=me.parentNode?me.parentNode:me,we.endOffset=b.nodeIndex(me)+1}Bp(b,we,Se=>{xe(Se,$)})};if(r){if(dh(r)){const q=b.createRng();q.setStartBefore(r),q.setEndAfter(r),J(q)}else J(r);bb(e,n,r,o);return}!C.isCollapsed()||!ma(f)||Rp(e).length?(eg(e,()=>Mp(e,J),q=>ma(f)&&Mw(e,n,o,q)),e.nodeChanged()):VN(e,n,o,a),b8(e,n,o),bb(e,n,r,o)},aP=(e,n,o,r,a)=>{(r||e.selection.isEditable())&&cP(e,n,o,r,a)},of=(e,n,o,r,a)=>$w(e,n,o,r,a).fold(je,u=>(e.dom.rename(r,u),!0),gt),W4=it.each,lP=(e,n,o,r)=>{const a=u=>{if(Ei(u)&&$t(u.parentNode)&&e.isEditable(u)){const f=tw(e,u.parentNode);e.getStyle(u,"color")&&f?e.setStyle(u,"text-decoration",f):e.getStyle(u,"text-decoration")===f&&e.setStyle(u,"text-decoration",null)}};n.styles&&(n.styles.color||n.styles.textDecoration)&&(it.walk(r,a,"childNodes"),a(r))},iP=(e,n,o,r)=>{if(n.styles&&n.styles.backgroundColor){const a=KN(e,"fontSize");LT(r,u=>a(u)&&e.isEditable(u),z4(e,"backgroundColor",fh(n.styles.backgroundColor,o)))}},zT=(e,n,o,r)=>{if(ma(n)&&(n.inline==="sub"||n.inline==="sup")){const a=KN(e,"fontSize");LT(r,f=>a(f)&&e.isEditable(f),z4(e,"fontSize",""));const u=Lt(e.select(n.inline==="sup"?"sub":"sup",r),e.isEditable);e.remove(u,!0)}},uP=(e,n,o,r)=>{W4(n,a=>{ma(a)&&W4(e.dom.select(a.inline,r),u=>{Z0(u)&&of(e,a,o,u,a.exact?u:null)}),p8(e.dom,a,r)})},y8=(e,n,o,r,a)=>{const u=a.parentNode;nf(e,u,o,r)&&of(e,n,r,a)||n.merge_with_parents&&u&&e.dom.getParent(u,f=>nf(e,f,o,r)?(of(e,n,r,a),!0):!1)},Iw=it.each,C8=(e,n,o,r)=>{if(qS(e)&&ma(n)&&o.parentNode){const a=By(e.schema),u=gv(de.fromDom(o),f=>Mi(f.dom));return Ls(a,r)&&Lc(e.schema,o.parentNode,{skipBogus:!1,includeZwsp:!0})&&!u}else return!1},dP=(e,n,o,r)=>{if(Iw(o.styles,(a,u)=>{e.setStyle(n,u,fh(a,r))}),o.styles){const a=e.getAttrib(n,"style");a&&e.setAttrib(n,"data-mce-style",a)}},UT=(e,n,o,r)=>{const a=e.formatter.get(n),u=a[0],f=!r&&e.selection.isCollapsed(),b=e.dom,C=e.selection,T=(J,q=u)=>{ue(q.onformat)&&q.onformat(J,q,o,r),dP(b,J,q,o),Iw(q.attributes,(oe,me)=>{b.setAttrib(J,me,fh(oe,o))}),Iw(q.classes,oe=>{const me=fh(oe,o);b.hasClass(J,me)||b.addClass(J,me)})},M=(J,q)=>{let oe=!1;return Iw(J,me=>cu(me)?b.getContentEditable(q)==="false"&&!me.ceFalseOverride||Oe(me.collapsed)&&me.collapsed!==f?!0:b.is(q,me.selector)&&!Mi(q)?(T(q,me),oe=!0,!1):!0:!1),oe},P=J=>{if(ee(J)){const q=b.create(J);return T(q),q}else return null},$=(J,q,oe)=>{const me=[];let we=!0;const Se=u.inline||u.block,_e=P(Se),nt=We=>Ix(u)&&nf(e,We,n,o),wt=(We,Pe,rt)=>{const qt=v0(u)&&fb(e.schema,We)&&mh(e,Pe,Se);return rt&&qt},Zt=(We,Pe,rt,qt)=>{const Sn=We.nodeName.toLowerCase(),ko=mh(e,Se,Sn)&&mh(e,Pe,Se),_o=!oe&&dt(We)&&L1(We.data),ps=Mi(We),_s=!ma(u)||!J.isBlock(We);return(rt||qt)&&ko&&!_o&&!ps&&_s};Bp(J,q,We=>{let Pe;const rt=qt=>{let Sn=!1,ko=we,_o=!1;const ps=qt.parentNode,_s=ps.nodeName.toLowerCase(),ic=J.getContentEditable(qt);Oe(ic)&&(ko=we,we=ic==="true",Sn=!0,_o=iA(e,qt));const Wc=we&&!Sn;if(cs(qt)&&!C8(e,u,qt,_s)){Pe=null,dm(u)&&J.remove(qt);return}if(nt(qt)){Pe=null;return}if(wt(qt,_s,Wc)){const La=J.rename(qt,Se);T(La),me.push(La),Pe=null;return}if(cu(u)){let La=M(a,qt);if(!La&&Oe(ps)&&xd(u)&&(La=M(a,ps)),!ma(u)||La){Pe=null;return}}Oe(_e)&&Zt(qt,_s,Wc,_o)?(Pe||(Pe=J.clone(_e,!1),ps.insertBefore(Pe,qt),me.push(Pe)),_o&&Sn&&(we=ko),Pe.appendChild(qt)):(Pe=null,xe(cr(qt.childNodes),rt),Sn&&(we=ko),Pe=null)};xe(We,rt)}),u.links===!0&&xe(me,We=>{const Pe=rt=>{rt.nodeName==="A"&&T(rt,u),xe(cr(rt.childNodes),Pe)};Pe(We)}),xe(me,We=>{const Pe=Sn=>{let ko=0;return xe(Sn.childNodes,_o=>{!p0(_o)&&!hi(_o)&&ko++}),ko},rt=Sn=>qo(Sn.childNodes,Uo).filter(_o=>J.getContentEditable(_o)!=="false"&&DT(J,_o,u)).map(_o=>{const ps=J.clone(_o,!1);return T(ps),J.replace(ps,Sn,!0),J.remove(_o,!0),ps}).getOr(Sn),qt=Pe(We);if((me.length>1||!J.isBlock(We))&&qt===0){J.remove(We,!0);return}(ma(u)||dm(u)&&u.wrapper)&&(!u.exact&&qt===1&&(We=rt(We)),uP(e,a,o,We),y8(e,u,n,o,We),iP(J,u,o,We),lP(J,u,o,We),zT(J,u,o,We),H4(e,u,o,We))})},j=dh(r)?r:C.getNode();if(b.getContentEditable(j)==="false"&&!iA(e,j)){r=j,M(a,r),Pi(e,n,r,o);return}if(u){if(r)if(dh(r)){if(!M(a,r)){const J=b.createRng();J.setStartBefore(r),J.setEndAfter(r),$(b,ng(b,J,a),!0)}}else $(b,r,!0);else!f||!ma(u)||Rp(e).length?(C.setRng(kT(C.getRng())),eg(e,()=>{Mp(e,(J,q)=>{const oe=q?J:ng(b,J,a);$(b,oe,!1)})},gt),e.nodeChanged()):i8(e,n,o),f8(e.formatter,n).each(J=>{xe(F4(e.selection),q=>dP(b,q,J,o))});jN(n,e)}Pi(e,n,r,o)},Z4=(e,n,o,r)=>{(r||e.selection.isEditable())&&UT(e,n,o,r)},WT=e=>yn(e,"vars"),w8=(e,n)=>{e.set({}),n.on("NodeChange",o=>{G4(n,o.element,e.get())}),n.on("FormatApply FormatRemove",o=>{const r=F.from(o.node).map(a=>dh(a)?a:a.startContainer).bind(a=>$t(a)?F.some(a):F.from(a.parentElement)).getOrThunk(()=>mP(n));G4(n,r,e.get())})},mP=e=>e.selection.getStart(),j4=(e,n,o,r,a)=>pr(n,b=>{const C=e.formatter.matchNode(b,o,a??{},r);return!gn(C)},b=>IN(e,b,o)?!0:r?!1:Oe(e.formatter.matchNode(b,o,a,!0))),ZT=(e,n)=>{const o=n??mP(e);return Lt(gh(e.dom,o),r=>$t(r)&&!dd(r))},G4=(e,n,o)=>{const r=ZT(e,n);pt(o,(a,u)=>{const f=b=>{const C=j4(e,r,u,b.similar,WT(b)?b.vars:void 0),T=C.isSome();if(b.state.get()!==T){b.state.set(T);const M=C.getOr(n);WT(b)?b.callback(T,{node:M,format:u,parents:r}):xe(b.callbacks,P=>P(T,{node:M,format:u,parents:r}))}};xe([a.withSimilar,a.withoutSimilar],f),xe(a.withVars,f)})},S8=(e,n,o,r,a,u)=>{const f=n.get();xe(o.split(","),b=>{const C=Xo(f,b).getOrThunk(()=>{const M={withSimilar:{state:Rs(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Rs(!1),similar:!1,callbacks:[]},withVars:[]};return f[b]=M,M}),T=()=>{const M=ZT(e);return j4(e,M,b,a,u).isSome()};if(gn(u)){const M=a?C.withSimilar:C.withoutSimilar;M.callbacks.push(r),M.callbacks.length===1&&M.state.set(T())}else C.withVars.push({state:Rs(T()),similar:a,vars:u,callback:r})}),n.set(f)},x8=(e,n,o)=>{const r=e.get();xe(n.split(","),a=>Xo(r,a).each(u=>{r[a]={withSimilar:{...u.withSimilar,callbacks:Lt(u.withSimilar.callbacks,f=>f!==o)},withoutSimilar:{...u.withoutSimilar,callbacks:Lt(u.withoutSimilar.callbacks,f=>f!==o)},withVars:Lt(u.withVars,f=>f.callback!==o)}})),e.set(r)},T8=(e,n,o,r,a,u)=>(S8(e,n,o,r,a,u),{unbind:()=>x8(n,o,r)}),jT=(e,n,o,r)=>{const a=e.formatter.get(n);a&&(Mw(e,n,o,r)&&(!("toggle"in a[0])||a[0].toggle)?aP(e,n,o,r):Z4(e,n,o,r))},ag=it.explode,fP=()=>{const e={};return{addFilter:(a,u)=>{xe(ag(a),f=>{yn(e,f)||(e[f]={name:f,callbacks:[]}),e[f].callbacks.push(u)})},getFilters:()=>Sa(e),removeFilter:(a,u)=>{xe(ag(a),f=>{if(yn(e,f))if(Oe(u)){const b=e[f],C=Lt(b.callbacks,T=>T!==u);C.length>0?b.callbacks=C:delete e[f]}else delete e[f]})}}},q4=(e,n)=>{xe(n,o=>{e.attr(o,null)})},_c=(e,n,o)=>{e.addNodeFilter("font",r=>{xe(r,a=>{const u=n.parse(a.attr("style")),f=a.attr("color"),b=a.attr("face"),C=a.attr("size");f&&(u.color=f),b&&(u["font-family"]=b),C&&Ha(C).each(T=>{u["font-size"]=o[T-1]}),a.name="span",a.attr("style",n.serialize(u)),q4(a,["color","face","size"])})})},K4=(e,n,o)=>{e.addNodeFilter("strike",r=>{const a=n.type!=="html4";xe(r,u=>{if(a)u.name="s";else{const f=o.parse(u.attr("style"));f["text-decoration"]="line-through",u.name="span",u.attr("style",o.serialize(f))}})})},Y4=(e,n,o)=>{var r;const a=Nf();n.convert_fonts_to_spans&&_c(e,a,it.explode((r=n.font_size_legacy_values)!==null&&r!==void 0?r:"")),K4(e,o,a)},Th=(e,n,o)=>{n.inline_styles&&Y4(e,n,o)},gP=e=>fetch(e).then(n=>n.ok?n.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})),hP=e=>{const n=/([a-z0-9+\/=\s]+)/i.exec(e);return n?n[1]:""},Pb=e=>{const[n,...o]=e.split(","),r=o.join(","),a=/data:([^/]+\/[^;]+)(;.+)?/.exec(n);if(a){const u=a[2]===";base64",f=u?hP(r):decodeURIComponent(r);return F.some({type:a[1],data:f,base64Encoded:u})}else return F.none()},pP=(e,n,o=!0)=>{let r=n;if(o)try{r=atob(n)}catch{return F.none()}const a=new Uint8Array(r.length);for(let u=0;u<a.length;u++)a[u]=r.charCodeAt(u);return F.some(new Blob([a],{type:e}))},E8=e=>new Promise((n,o)=>{Pb(e).bind(({type:r,data:a,base64Encoded:u})=>pP(r,a,u)).fold(()=>o("Invalid data URI"),n)}),j0=e=>ms(e,"blob:")?gP(e):ms(e,"data:")?E8(e):Promise.reject("Unknown URI format"),bP=e=>new Promise((n,o)=>{const r=new FileReader;r.onloadend=()=>{n(r.result)},r.onerror=()=>{var a;o((a=r.error)===null||a===void 0?void 0:a.message)},r.readAsDataURL(e)});let Bb=0;const k8=e=>"blobid"+Bb++,Eh=(e,n,o)=>Pb(e).bind(({data:r,type:a,base64Encoded:u})=>{if(n&&!u)return F.none();{const f=u?r:btoa(r);return o(f,a)}}),vP=(e,n,o)=>{const r=e.create(k8(),n,o);return e.add(r),r},Uu=(e,n,o=!1)=>Eh(n,o,(r,a)=>F.from(e.getByData(r,a)).orThunk(()=>pP(a,r).map(u=>vP(e,u,r)))),Lw=(e,n)=>{const o=()=>Promise.reject("Invalid data URI");if(ms(n,"blob:")){const r=e.getByUri(n);return Oe(r)?Promise.resolve(r):j0(n).then(a=>bP(a).then(u=>Eh(u,!1,f=>F.some(vP(e,a,f))).getOrThunk(o)))}else return ms(n,"data:")?Uu(e,n).fold(o,r=>Promise.resolve(r)):Promise.reject("Unknown image data format")},X4=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,J4=e=>F.from(e.match(X4)).bind(n=>jc(n,1)).map(n=>ms(n,"www.")?n.substring(4):n),yP=(e,n)=>{F.from(e.attr("src")).bind(J4).forall(o=>!Cn(n,o))&&e.attr("sandbox","")},G0=(e,n)=>ms(e,`${n}/`),_8=e=>gn(e)?"iframe":G0(e,"image")?"img":G0(e,"video")?"video":G0(e,"audio")?"audio":"iframe",pm=({type:e,src:n,width:o,height:r}={},a,u)=>{const f=_8(e),b=new bi(f,1);return b.attr(f==="audio"?{src:n}:{src:n,width:o,height:r}),(f==="audio"||f==="video")&&b.attr("controls",""),f==="iframe"&&a&&yP(b,u),b},GT=e=>Oe(e.attr("data-mce-bogus")),CP=e=>e.attr("src")===nn.transparentSrc||Oe(e.attr("data-mce-placeholder")),Q4=(e,n)=>{const{blob_cache:o}=n;if(o){const r=a=>{const u=a.attr("src");CP(a)||GT(a)||dn(u)||Uu(o,u,!0).each(f=>{a.attr("src",f.blobUri())})};e.addAttributeFilter("src",a=>xe(a,r))}},eO=(e,n)=>{var o,r;const a=e.schema;e.addAttributeFilter("href",C=>{let T=C.length;const M=$=>$.split(" ").filter(J=>J.length>0).concat(["noopener"]).sort().join(" "),P=$=>{const j=$?it.trim($):"";return/\b(noopener)\b/g.test(j)?j:M(j)};if(!n.allow_unsafe_link_target)for(;T--;){const $=C[T];$.name==="a"&&$.attr("target")==="_blank"&&$.attr("rel",P($.attr("rel")))}}),n.allow_html_in_named_anchor||e.addAttributeFilter("id,name",C=>{let T=C.length,M,P,$,j;for(;T--;)if(j=C[T],j.name==="a"&&j.firstChild&&!j.attr("href"))for($=j.parent,M=j.lastChild;M&&$;)P=M.prev,$.insert(M,j),M=P}),n.fix_list_elements&&e.addNodeFilter("ul,ol",C=>{let T=C.length,M,P;for(;T--;)if(M=C[T],P=M.parent,P&&(P.name==="ul"||P.name==="ol"))if(M.prev&&M.prev.name==="li")M.prev.append(M);else{const $=new bi("li",1);$.attr("style","list-style-type: none"),M.wrap($)}});const u=a.getValidClasses();n.validate&&u&&e.addAttributeFilter("class",C=>{var T;let M=C.length;for(;M--;){const P=C[M],$=(T=P.attr("class"))!==null&&T!==void 0?T:"",j=it.explode($," ");let J="";for(let q=0;q<j.length;q++){const oe=j[q];let me=!1,we=u["*"];we&&we[oe]&&(me=!0),we=u[P.name],!me&&we&&we[oe]&&(me=!0),me&&(J&&(J+=" "),J+=oe)}J.length||(J=null),P.attr("class",J)}}),Q4(e,n);const f=(o=n.sandbox_iframes)!==null&&o!==void 0?o:!1,b=ea((r=n.sandbox_iframes_exclusions)!==null&&r!==void 0?r:[]);n.convert_unsafe_embeds&&e.addNodeFilter("object,embed",C=>xe(C,T=>{T.replace(pm({type:T.attr("type"),src:T.name==="object"?T.attr("data"):T.attr("src"),width:T.attr("width"),height:T.attr("height")},f,b))})),f&&e.addNodeFilter("iframe",C=>xe(C,T=>yP(T,b)))};/*! @license DOMPurify 3.1.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.7/LICENSE */const{entries:Xp,setPrototypeOf:qT,isFrozen:A8,getPrototypeOf:wP,getOwnPropertyDescriptor:O8}=Object;let{freeze:mu,seal:bm,create:SP}=Object,{apply:$b,construct:tO}=typeof Reflect<"u"&&Reflect;mu||(mu=function(n){return n}),bm||(bm=function(n){return n}),$b||($b=function(n,o,r){return n.apply(o,r)}),tO||(tO=function(n,o){return new n(...o)});const Fw=Dd(Array.prototype.forEach),KT=Dd(Array.prototype.pop),Hw=Dd(Array.prototype.push),Vw=Dd(String.prototype.toLowerCase),YT=Dd(String.prototype.toString),xP=Dd(String.prototype.match),zw=Dd(String.prototype.replace),D8=Dd(String.prototype.indexOf),R8=Dd(String.prototype.trim),sf=Dd(Object.prototype.hasOwnProperty),fu=Dd(RegExp.prototype.test),Uw=M8(TypeError);function Dd(e){return function(n){for(var o=arguments.length,r=new Array(o>1?o-1:0),a=1;a<o;a++)r[a-1]=arguments[a];return $b(e,n,r)}}function M8(e){return function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return tO(e,o)}}function or(e,n){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Vw;qT&&qT(e,null);let r=n.length;for(;r--;){let a=n[r];if(typeof a=="string"){const u=o(a);u!==a&&(A8(n)||(n[r]=u),a=u)}e[a]=!0}return e}function N8(e){for(let n=0;n<e.length;n++)sf(e,n)||(e[n]=null);return e}function Ib(e){const n=SP(null);for(const[o,r]of Xp(e))sf(e,o)&&(Array.isArray(r)?n[o]=N8(r):r&&typeof r=="object"&&r.constructor===Object?n[o]=Ib(r):n[o]=r);return n}function Ww(e,n){for(;e!==null;){const r=O8(e,n);if(r){if(r.get)return Dd(r.get);if(typeof r.value=="function")return Dd(r.value)}e=wP(e)}function o(){return null}return o}const nO=mu(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),oO=mu(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Jp=mu(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),P8=mu(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),sO=mu(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),B8=mu(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),TP=mu(["#text"]),rO=mu(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),cO=mu(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),EP=mu(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),XT=mu(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),$8=bm(/\{\{[\w\W]*|[\w\W]*\}\}/gm),I8=bm(/<%[\w\W]*|[\w\W]*%>/gm),L8=bm(/\${[\w\W]*}/gm),F8=bm(/^data-[\-\w.\u00B7-\uFFFF]/),H8=bm(/^aria-[\-\w]+$/),kP=bm(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),V8=bm(/^(?:\w+script|data):/i),aO=bm(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),lO=bm(/^html$/i),pG=bm(/^[a-z][.\w]*(-[.\w]+)+$/i);var q0=Object.freeze({__proto__:null,MUSTACHE_EXPR:$8,ERB_EXPR:I8,TMPLIT_EXPR:L8,DATA_ATTR:F8,ARIA_ATTR:H8,IS_ALLOWED_URI:kP,IS_SCRIPT_OR_DATA:V8,ATTR_WHITESPACE:aO,DOCTYPE_NAME:lO,CUSTOM_ELEMENT:pG});const Zw={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},bG=function(){return typeof window>"u"?null:window},vG=function(n,o){if(typeof n!="object"||typeof n.createPolicy!="function")return null;let r=null;const a="data-tt-policy-suffix";o&&o.hasAttribute(a)&&(r=o.getAttribute(a));const u="dompurify"+(r?"#"+r:"");try{return n.createPolicy(u,{createHTML(f){return f},createScriptURL(f){return f}})}catch{return console.warn("TrustedTypes policy "+u+" could not be created."),null}};function z8(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:bG();const n=Po=>z8(Po);if(n.version="3.1.7",n.removed=[],!e||!e.document||e.document.nodeType!==Zw.document)return n.isSupported=!1,n;let{document:o}=e;const r=o,a=r.currentScript,{DocumentFragment:u,HTMLTemplateElement:f,Node:b,Element:C,NodeFilter:T,NamedNodeMap:M=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:P,DOMParser:$,trustedTypes:j}=e,J=C.prototype,q=Ww(J,"cloneNode"),oe=Ww(J,"remove"),me=Ww(J,"nextSibling"),we=Ww(J,"childNodes"),Se=Ww(J,"parentNode");if(typeof f=="function"){const Po=o.createElement("template");Po.content&&Po.content.ownerDocument&&(o=Po.content.ownerDocument)}let _e,nt="";const{implementation:wt,createNodeIterator:Zt,createDocumentFragment:We,getElementsByTagName:Pe}=o,{importNode:rt}=r;let qt={};n.isSupported=typeof Xp=="function"&&typeof Se=="function"&&wt&&wt.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Sn,ERB_EXPR:ko,TMPLIT_EXPR:_o,DATA_ATTR:ps,ARIA_ATTR:_s,IS_SCRIPT_OR_DATA:ic,ATTR_WHITESPACE:Wc,CUSTOM_ELEMENT:La}=q0;let{IS_ALLOWED_URI:Ot}=q0,vn=null;const ls=or({},[...nO,...oO,...Jp,...sO,...TP]);let Ft=null;const Nn=or({},[...rO,...cO,...EP,...XT]);let In=Object.seal(SP(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),It=null,wo=null,No=!0,Jc=!0,$s=!1,wl=!0,Fi=!1,gf=!0,Fl=!1,pu=!1,$d=!1,Sl=!1,Hi=!1,bn=!1,jo=!0,jr=!1;const Qc="user-content-";let ya=!0,Zc=!1,Gr={},qr=null;const Ql=or({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Id=null;const hf=or({},["audio","video","img","source","image","track"]);let Em=null;const h1=or({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),p1="http://www.w3.org/1998/Math/MathML",gg="http://www.w3.org/2000/svg",Ld="http://www.w3.org/1999/xhtml";let Bh=Ld,Dy=!1,b1=null;const DR=or({},[p1,gg,Ld],YT);let uv=null;const EF=["application/xhtml+xml","text/html"],RR="text/html";let Hl=null,Fd=null;const Jk=o.createElement("form"),Me=function(Be){return Be instanceof RegExp||Be instanceof Function},Ne=function(){let Be=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Fd&&Fd===Be)){if((!Be||typeof Be!="object")&&(Be={}),Be=Ib(Be),uv=EF.indexOf(Be.PARSER_MEDIA_TYPE)===-1?RR:Be.PARSER_MEDIA_TYPE,Hl=uv==="application/xhtml+xml"?YT:Vw,vn=sf(Be,"ALLOWED_TAGS")?or({},Be.ALLOWED_TAGS,Hl):ls,Ft=sf(Be,"ALLOWED_ATTR")?or({},Be.ALLOWED_ATTR,Hl):Nn,b1=sf(Be,"ALLOWED_NAMESPACES")?or({},Be.ALLOWED_NAMESPACES,YT):DR,Em=sf(Be,"ADD_URI_SAFE_ATTR")?or(Ib(h1),Be.ADD_URI_SAFE_ATTR,Hl):h1,Id=sf(Be,"ADD_DATA_URI_TAGS")?or(Ib(hf),Be.ADD_DATA_URI_TAGS,Hl):hf,qr=sf(Be,"FORBID_CONTENTS")?or({},Be.FORBID_CONTENTS,Hl):Ql,It=sf(Be,"FORBID_TAGS")?or({},Be.FORBID_TAGS,Hl):{},wo=sf(Be,"FORBID_ATTR")?or({},Be.FORBID_ATTR,Hl):{},Gr=sf(Be,"USE_PROFILES")?Be.USE_PROFILES:!1,No=Be.ALLOW_ARIA_ATTR!==!1,Jc=Be.ALLOW_DATA_ATTR!==!1,$s=Be.ALLOW_UNKNOWN_PROTOCOLS||!1,wl=Be.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Fi=Be.SAFE_FOR_TEMPLATES||!1,gf=Be.SAFE_FOR_XML!==!1,Fl=Be.WHOLE_DOCUMENT||!1,Sl=Be.RETURN_DOM||!1,Hi=Be.RETURN_DOM_FRAGMENT||!1,bn=Be.RETURN_TRUSTED_TYPE||!1,$d=Be.FORCE_BODY||!1,jo=Be.SANITIZE_DOM!==!1,jr=Be.SANITIZE_NAMED_PROPS||!1,ya=Be.KEEP_CONTENT!==!1,Zc=Be.IN_PLACE||!1,Ot=Be.ALLOWED_URI_REGEXP||kP,Bh=Be.NAMESPACE||Ld,In=Be.CUSTOM_ELEMENT_HANDLING||{},Be.CUSTOM_ELEMENT_HANDLING&&Me(Be.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(In.tagNameCheck=Be.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Be.CUSTOM_ELEMENT_HANDLING&&Me(Be.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(In.attributeNameCheck=Be.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Be.CUSTOM_ELEMENT_HANDLING&&typeof Be.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(In.allowCustomizedBuiltInElements=Be.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Fi&&(Jc=!1),Hi&&(Sl=!0),Gr&&(vn=or({},TP),Ft=[],Gr.html===!0&&(or(vn,nO),or(Ft,rO)),Gr.svg===!0&&(or(vn,oO),or(Ft,cO),or(Ft,XT)),Gr.svgFilters===!0&&(or(vn,Jp),or(Ft,cO),or(Ft,XT)),Gr.mathMl===!0&&(or(vn,sO),or(Ft,EP),or(Ft,XT))),Be.ADD_TAGS&&(vn===ls&&(vn=Ib(vn)),or(vn,Be.ADD_TAGS,Hl)),Be.ADD_ATTR&&(Ft===Nn&&(Ft=Ib(Ft)),or(Ft,Be.ADD_ATTR,Hl)),Be.ADD_URI_SAFE_ATTR&&or(Em,Be.ADD_URI_SAFE_ATTR,Hl),Be.FORBID_CONTENTS&&(qr===Ql&&(qr=Ib(qr)),or(qr,Be.FORBID_CONTENTS,Hl)),ya&&(vn["#text"]=!0),Fl&&or(vn,["html","head","body"]),vn.table&&(or(vn,["tbody"]),delete It.tbody),Be.TRUSTED_TYPES_POLICY){if(typeof Be.TRUSTED_TYPES_POLICY.createHTML!="function")throw Uw('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Be.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Uw('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');_e=Be.TRUSTED_TYPES_POLICY,nt=_e.createHTML("")}else _e===void 0&&(_e=vG(j,a)),_e!==null&&typeof nt=="string"&&(nt=_e.createHTML(""));mu&&mu(Be),Fd=Be}},At=or({},["mi","mo","mn","ms","mtext"]),yt=or({},["annotation-xml"]),Ln=or({},["title","style","font","a","script"]),es=or({},[...oO,...Jp,...P8]),uc=or({},[...sO,...B8]),km=function(Be){let kn=Se(Be);(!kn||!kn.tagName)&&(kn={namespaceURI:Bh,tagName:"template"});const t=Vw(Be.tagName),s=Vw(kn.tagName);return b1[Be.namespaceURI]?Be.namespaceURI===gg?kn.namespaceURI===Ld?t==="svg":kn.namespaceURI===p1?t==="svg"&&(s==="annotation-xml"||At[s]):!!es[t]:Be.namespaceURI===p1?kn.namespaceURI===Ld?t==="math":kn.namespaceURI===gg?t==="math"&&yt[s]:!!uc[t]:Be.namespaceURI===Ld?kn.namespaceURI===gg&&!yt[s]||kn.namespaceURI===p1&&!At[s]?!1:!uc[t]&&(Ln[t]||!es[t]):!!(uv==="application/xhtml+xml"&&b1[Be.namespaceURI]):!1},Ku=function(Be){Hw(n.removed,{element:Be});try{Se(Be).removeChild(Be)}catch{oe(Be)}},Z2=function(Be,kn){try{Hw(n.removed,{attribute:kn.getAttributeNode(Be),from:kn})}catch{Hw(n.removed,{attribute:null,from:kn})}if(kn.removeAttribute(Be),Be==="is"&&!Ft[Be])if(Sl||Hi)try{Ku(kn)}catch{}else try{kn.setAttribute(Be,"")}catch{}},kF=function(Be){let kn=null,t=null;if($d)Be="<remove></remove>"+Be;else{const l=xP(Be,/^[\r\n\t ]+/);t=l&&l[0]}uv==="application/xhtml+xml"&&Bh===Ld&&(Be='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Be+"</body></html>");const s=_e?_e.createHTML(Be):Be;if(Bh===Ld)try{kn=new $().parseFromString(s,uv)}catch{}if(!kn||!kn.documentElement){kn=wt.createDocument(Bh,"template",null);try{kn.documentElement.innerHTML=Dy?nt:s}catch{}}const c=kn.body||kn.documentElement;return Be&&t&&c.insertBefore(o.createTextNode(t),c.childNodes[0]||null),Bh===Ld?Pe.call(kn,Fl?"html":"body")[0]:Fl?kn.documentElement:c},MR=function(Be){return Zt.call(Be.ownerDocument||Be,Be,T.SHOW_ELEMENT|T.SHOW_COMMENT|T.SHOW_TEXT|T.SHOW_PROCESSING_INSTRUCTION|T.SHOW_CDATA_SECTION,null)},_F=function(Be){return Be instanceof P&&(typeof Be.nodeName!="string"||typeof Be.textContent!="string"||typeof Be.removeChild!="function"||!(Be.attributes instanceof M)||typeof Be.removeAttribute!="function"||typeof Be.setAttribute!="function"||typeof Be.namespaceURI!="string"||typeof Be.insertBefore!="function"||typeof Be.hasChildNodes!="function")},AF=function(Be){return typeof b=="function"&&Be instanceof b},$h=function(Be,kn,t){qt[Be]&&Fw(qt[Be],s=>{s.call(n,kn,t,Fd)})},OF=function(Be){let kn=null;if($h("beforeSanitizeElements",Be,null),_F(Be))return Ku(Be),!0;const t=Hl(Be.nodeName);if($h("uponSanitizeElement",Be,{tagName:t,allowedTags:vn}),Be.hasChildNodes()&&!AF(Be.firstElementChild)&&fu(/<[/\w]/g,Be.innerHTML)&&fu(/<[/\w]/g,Be.textContent)||Be.nodeType===Zw.progressingInstruction||gf&&Be.nodeType===Zw.comment&&fu(/<[/\w]/g,Be.data))return Ku(Be),!0;if(!vn[t]||It[t]){if(!It[t]&&NR(t)&&(In.tagNameCheck instanceof RegExp&&fu(In.tagNameCheck,t)||In.tagNameCheck instanceof Function&&In.tagNameCheck(t)))return!1;if(ya&&!qr[t]){const s=Se(Be)||Be.parentNode,c=we(Be)||Be.childNodes;if(c&&s){const l=c.length;for(let d=l-1;d>=0;--d){const g=q(c[d],!0);g.__removalCount=(Be.__removalCount||0)+1,s.insertBefore(g,me(Be))}}}return Ku(Be),!0}return Be instanceof C&&!km(Be)||(t==="noscript"||t==="noembed"||t==="noframes")&&fu(/<\/no(script|embed|frames)/i,Be.innerHTML)?(Ku(Be),!0):(Fi&&Be.nodeType===Zw.text&&(kn=Be.textContent,Fw([Sn,ko,_o],s=>{kn=zw(kn,s," ")}),Be.textContent!==kn&&(Hw(n.removed,{element:Be.cloneNode()}),Be.textContent=kn)),$h("afterSanitizeElements",Be,null),!1)},DF=function(Be,kn,t){if(jo&&(kn==="id"||kn==="name")&&(t in o||t in Jk))return!1;if(!(Jc&&!wo[kn]&&fu(ps,kn))){if(!(No&&fu(_s,kn))){if(!Ft[kn]||wo[kn]){if(!(NR(Be)&&(In.tagNameCheck instanceof RegExp&&fu(In.tagNameCheck,Be)||In.tagNameCheck instanceof Function&&In.tagNameCheck(Be))&&(In.attributeNameCheck instanceof RegExp&&fu(In.attributeNameCheck,kn)||In.attributeNameCheck instanceof Function&&In.attributeNameCheck(kn))||kn==="is"&&In.allowCustomizedBuiltInElements&&(In.tagNameCheck instanceof RegExp&&fu(In.tagNameCheck,t)||In.tagNameCheck instanceof Function&&In.tagNameCheck(t))))return!1}else if(!Em[kn]){if(!fu(Ot,zw(t,Wc,""))){if(!((kn==="src"||kn==="xlink:href"||kn==="href")&&Be!=="script"&&D8(t,"data:")===0&&Id[Be])){if(!($s&&!fu(ic,zw(t,Wc,"")))){if(t)return!1}}}}}}return!0},NR=function(Be){return Be!=="annotation-xml"&&xP(Be,La)},PR=function(Be){$h("beforeSanitizeAttributes",Be,null);const{attributes:kn}=Be;if(!kn)return;const t={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Ft};let s=kn.length;for(;s--;){const c=kn[s],{name:l,namespaceURI:d,value:g}=c,h=Hl(l);let y=l==="value"?g:R8(g);const S=y;if(t.attrName=h,t.attrValue=y,t.keepAttr=!0,t.forceKeepAttr=void 0,$h("uponSanitizeAttribute",Be,t),y=t.attrValue,t.forceKeepAttr)continue;if(!t.keepAttr){Z2(l,Be);continue}if(!wl&&fu(/\/>/i,y)){Z2(l,Be);continue}Fi&&Fw([Sn,ko,_o],O=>{y=zw(y,O," ")});const k=Hl(Be.nodeName);if(!DF(k,h,y)){Z2(l,Be);continue}if(jr&&(h==="id"||h==="name")&&(Z2(l,Be),y=Qc+y),gf&&fu(/((--!?|])>)|<\/(style|title)/i,y)){Z2(l,Be);continue}if(_e&&typeof j=="object"&&typeof j.getAttributeType=="function"&&!d)switch(j.getAttributeType(k,h)){case"TrustedHTML":{y=_e.createHTML(y);break}case"TrustedScriptURL":{y=_e.createScriptURL(y);break}}if(y!==S)try{d?Be.setAttributeNS(d,l,y):Be.setAttribute(l,y),_F(Be)?Ku(Be):KT(n.removed)}catch{}}$h("afterSanitizeAttributes",Be,null)},qj=function Po(Be){let kn=null;const t=MR(Be);for($h("beforeSanitizeShadowDOM",Be,null);kn=t.nextNode();)$h("uponSanitizeShadowNode",kn,null),!OF(kn)&&(kn.content instanceof u&&Po(kn.content),PR(kn));$h("afterSanitizeShadowDOM",Be,null)};return n.sanitize=function(Po){let Be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},kn=null,t=null,s=null,c=null;if(Dy=!Po,Dy&&(Po="<!-->"),typeof Po!="string"&&!AF(Po))if(typeof Po.toString=="function"){if(Po=Po.toString(),typeof Po!="string")throw Uw("dirty is not a string, aborting")}else throw Uw("toString is not a function");if(!n.isSupported)return Po;if(pu||Ne(Be),n.removed=[],typeof Po=="string"&&(Zc=!1),Zc){if(Po.nodeName){const g=Hl(Po.nodeName);if(!vn[g]||It[g])throw Uw("root node is forbidden and cannot be sanitized in-place")}}else if(Po instanceof b)kn=kF("<!---->"),t=kn.ownerDocument.importNode(Po,!0),t.nodeType===Zw.element&&t.nodeName==="BODY"||t.nodeName==="HTML"?kn=t:kn.appendChild(t);else{if(!Sl&&!Fi&&!Fl&&Po.indexOf("<")===-1)return _e&&bn?_e.createHTML(Po):Po;if(kn=kF(Po),!kn)return Sl?null:bn?nt:""}kn&&$d&&Ku(kn.firstChild);const l=MR(Zc?Po:kn);for(;s=l.nextNode();)OF(s)||(s.content instanceof u&&qj(s.content),PR(s));if(Zc)return Po;if(Sl){if(Hi)for(c=We.call(kn.ownerDocument);kn.firstChild;)c.appendChild(kn.firstChild);else c=kn;return(Ft.shadowroot||Ft.shadowrootmode)&&(c=rt.call(r,c,!0)),c}let d=Fl?kn.outerHTML:kn.innerHTML;return Fl&&vn["!doctype"]&&kn.ownerDocument&&kn.ownerDocument.doctype&&kn.ownerDocument.doctype.name&&fu(lO,kn.ownerDocument.doctype.name)&&(d="<!DOCTYPE "+kn.ownerDocument.doctype.name+`>
`+d),Fi&&Fw([Sn,ko,_o],g=>{d=zw(d,g," ")}),_e&&bn?_e.createHTML(d):d},n.setConfig=function(){let Po=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ne(Po),pu=!0},n.clearConfig=function(){Fd=null,pu=!1},n.isValidAttribute=function(Po,Be,kn){Fd||Ne({});const t=Hl(Po),s=Hl(Be);return DF(t,s,kn)},n.addHook=function(Po,Be){typeof Be=="function"&&(qt[Po]=qt[Po]||[],Hw(qt[Po],Be))},n.removeHook=function(Po){if(qt[Po])return KT(qt[Po])},n.removeHooks=function(Po){qt[Po]&&(qt[Po]=[])},n.removeAllHooks=function(){qt={}},n}var _P=z8();const Wu=it.each,JT=it.trim,Qp=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],e1={ftp:21,http:80,https:443,mailto:25},AP=["img","video"],jw=(e,n)=>Oe(e)?!e:Oe(n)?!Cn(AP,n):!0,OP=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},pc=(e,n,o)=>{const r=OP(n).replace(/\s/g,"");return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(r)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(r)?jw(e.allow_svg_data_urls,o)&&/^data:image\/svg\+xml/i.test(r):/^data:/i.test(r)};class vm{static parseDataUri(n){let o;const r=decodeURIComponent(n).split(","),a=/data:([^;]+)/.exec(r[0]);return a&&(o=a[1]),{type:o,data:r[1]}}static isDomSafe(n,o,r={}){if(r.allow_script_urls)return!0;{const a=Df.decode(n).replace(/[\s\u0000-\u001F]+/g,"");return!pc(r,a,o)}}static getDocumentBaseUrl(n){var o;let r;return n.protocol.indexOf("http")!==0&&n.protocol!=="file:"?r=(o=n.href)!==null&&o!==void 0?o:"":r=n.protocol+"//"+n.host+n.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}constructor(n,o={}){this.path="",this.directory="",n=JT(n),this.settings=o;const r=o.base_uri,a=this;if(/^([\w\-]+):([^\/]{2})/i.test(n)||/^\s*#/.test(n)){a.source=n;return}const u=n.indexOf("//")===0;if(n.indexOf("/")===0&&!u&&(n=(r&&r.protocol||"http")+"://mce_host"+n),!/^[\w\-]*:?\/\//.test(n)){const b=r?r.path:new vm(document.location.href).directory;if((r==null?void 0:r.protocol)==="")n="//mce_host"+a.toAbsPath(b,n);else{const C=/([^#?]*)([#?]?.*)/.exec(n);C&&(n=(r&&r.protocol||"http")+"://mce_host"+a.toAbsPath(b,C[1])+C[2])}}n=n.replace(/@@/g,"(mce_at)");const f=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(n);f&&Wu(Qp,(b,C)=>{let T=f[C];T&&(T=T.replace(/\(mce_at\)/g,"@@")),a[b]=T}),r&&(a.protocol||(a.protocol=r.protocol),a.userInfo||(a.userInfo=r.userInfo),!a.port&&a.host==="mce_host"&&(a.port=r.port),(!a.host||a.host==="mce_host")&&(a.host=r.host),a.source=""),u&&(a.protocol="")}setPath(n){const o=/^(.*?)\/?(\w+)?$/.exec(n);o&&(this.path=o[0],this.directory=o[1],this.file=o[2]),this.source="",this.getURI()}toRelative(n){if(n==="./")return n;const o=new vm(n,{base_uri:this});if(o.host!=="mce_host"&&this.host!==o.host&&o.host||this.port!==o.port||this.protocol!==o.protocol&&o.protocol!=="")return o.getURI();const r=this.getURI(),a=o.getURI();if(r===a||r.charAt(r.length-1)==="/"&&r.substr(0,r.length-1)===a)return r;let u=this.toRelPath(this.path,o.path);return o.query&&(u+="?"+o.query),o.anchor&&(u+="#"+o.anchor),u}toAbsolute(n,o){const r=new vm(n,{base_uri:this});return r.getURI(o&&this.isSameOrigin(r))}isSameOrigin(n){if(this.host==n.host&&this.protocol==n.protocol){if(this.port==n.port)return!0;const o=this.protocol?e1[this.protocol]:null;if(o&&(this.port||o)==(n.port||o))return!0}return!1}toRelPath(n,o){let r=0,a="",u,f;const b=n.substring(0,n.lastIndexOf("/")).split("/"),C=o.split("/");if(b.length>=C.length){for(u=0,f=b.length;u<f;u++)if(u>=C.length||b[u]!==C[u]){r=u+1;break}}if(b.length<C.length){for(u=0,f=C.length;u<f;u++)if(u>=b.length||b[u]!==C[u]){r=u+1;break}}if(r===1)return o;for(u=0,f=b.length-(r-1);u<f;u++)a+="../";for(u=r-1,f=C.length;u<f;u++)u!==r-1?a+="/"+C[u]:a+=C[u];return a}toAbsPath(n,o){let r=0;const a=/\/$/.test(o)?"/":"",u=n.split("/"),f=o.split("/"),b=[];Wu(u,P=>{P&&b.push(P)});const C=[];for(let P=f.length-1;P>=0;P--)if(!(f[P].length===0||f[P]===".")){if(f[P]===".."){r++;continue}if(r>0){r--;continue}C.push(f[P])}const T=b.length-r;let M;return T<=0?M=mn(C).join("/"):M=b.slice(0,T).join("/")+"/"+mn(C).join("/"),M.indexOf("/")!==0&&(M="/"+M),a&&M.lastIndexOf("/")!==M.length-1&&(M+=a),M}getURI(n=!1){let o;return(!this.source||n)&&(o="",n||(this.protocol?o+=this.protocol+"://":o+="//",this.userInfo&&(o+=this.userInfo+"@"),this.host&&(o+=this.host),this.port&&(o+=":"+this.port)),this.path&&(o+=this.path),this.query&&(o+="?"+this.query),this.anchor&&(o+="#"+this.anchor),this.source=o),this.source}}const U8=it.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),t1="data-mce-type";let Lb=0;const Fb=(e,n,o,r,a)=>{var u,f,b,C;const T=n.validate,M=o.getSpecialElements();e.nodeType===Ws&&!n.allow_conditional_comments&&/^\[if/i.test((u=e.nodeValue)!==null&&u!==void 0?u:"")&&(e.nodeValue=" "+e.nodeValue);const P=(f=a==null?void 0:a.tagName)!==null&&f!==void 0?f:e.nodeName.toLowerCase();if(r!=="html"&&o.isValid(r)){Oe(a)&&(a.allowedTags[P]=!0);return}if(e.nodeType!==nd||P==="body")return;const $=de.fromDom(e),j=wr($,t1),J=Nc($,"data-mce-bogus");if(!j&&ee(J)){J==="all"?Ss($):ai($);return}const q=o.getElementRule(P);if(T&&!q){yn(M,P)?Ss($):ai($);return}else Oe(a)&&(a.allowedTags[P]=!0);if(T&&q&&!j){if(xe((b=q.attributesForced)!==null&&b!==void 0?b:[],oe=>{Cr($,oe.name,oe.value==="{$uid}"?`mce_${Lb++}`:oe.value)}),xe((C=q.attributesDefault)!==null&&C!==void 0?C:[],oe=>{wr($,oe.name)||Cr($,oe.name,oe.value==="{$uid}"?`mce_${Lb++}`:oe.value)}),q.attributesRequired&&!So(q.attributesRequired,oe=>wr($,oe))){ai($);return}if(q.removeEmptyAttrs&&si($)){ai($);return}q.outputName&&q.outputName!==P&&lS($,q.outputName)}},iO=(e,n,o,r,a)=>{const u=e.tagName.toLowerCase(),{attrName:f,attrValue:b}=a;a.keepAttr=QT(n,o,r,u,f,b),a.keepAttr?(a.allowedAttributes[f]=!0,dO(f,o)&&(a.attrValue=f),n.allow_svg_data_urls&&ms(b,"data:image/svg+xml")&&(a.forceKeepAttr=!0)):uO(e,f)&&(a.forceKeepAttr=!0)},QT=(e,n,o,r,a,u)=>o!=="html"&&!Js(r)?!0:!(a in U8&&pc(e,u,r))&&(!e.validate||n.isValid(r,a)||ms(a,"data-")||ms(a,"aria-")),uO=(e,n)=>e.hasAttribute(t1)&&(n==="id"||n==="class"||n==="style"),dO=(e,n)=>e in n.getBoolAttrs(),W8=(e,n,o,r)=>{const{attributes:a}=e;for(let u=a.length-1;u>=0;u--){const f=a[u],b=f.name,C=f.value;!QT(n,o,r,e.tagName.toLowerCase(),b,C)&&!uO(e,b)?e.removeAttribute(b):dO(b,o)&&e.setAttribute(b,b)}},Z8=(e,n,o)=>{const r=_P();return r.addHook("uponSanitizeElement",(a,u)=>{Fb(a,e,n,o.track(a),u)}),r.addHook("uponSanitizeAttribute",(a,u)=>{iO(a,e,n,o.current(),u)}),r},DP=(e,n)=>{const r={...{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[],SAFE_FOR_XML:!1}};return r.PARSER_MEDIA_TYPE=n,e.allow_script_urls?r.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(r.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),r},j8=e=>{const n=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(r=>`xlink:${r}`),o={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:n};_P().sanitize(e,o)},G8=(e,n)=>{const o={IN_PLACE:!0,USE_PROFILES:{mathMl:!0}},r=_P();r.addHook("uponSanitizeElement",(a,u)=>{var f;const b=(f=u.tagName)!==null&&f!==void 0?f:a.nodeName.toLowerCase(),C=n.allow_mathml_annotation_encodings;if(b==="annotation"&&Qe(C)&&C.length>0){const T=a.getAttribute("encoding");ee(T)&&Cn(C,T)&&(u.allowedTags[b]=!0)}}),r.sanitize(e,o)},q8=e=>n=>{const o=Jd(n);if(o==="svg")j8(n);else if(o==="math")G8(n,e);else throw new Error("Not a namespace element")},K8=(e,n)=>{const o=_();if(e.sanitize){const r=Z8(e,n,o);return{sanitizeHtmlElement:(u,f)=>{r.sanitize(u,DP(e,f)),r.removed=[],o.reset()},sanitizeNamespaceElement:q8(e)}}else return{sanitizeHtmlElement:(u,f)=>{const b=document.createNodeIterator(u,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let C;for(;C=b.nextNode();){const T=o.track(C);Fb(C,e,n,T),$t(C)&&W8(C,e,n,T)}o.reset()},sanitizeNamespaceElement:Mt}},RP=it.makeMap,mO=it.extend,MP=(e,n,o,r)=>{const a=e.name,u=a in o&&a!=="title"&&a!=="textarea"&&a!=="noscript",f=n.childNodes;for(let b=0,C=f.length;b<C;b++){const T=f[b],M=new bi(T.nodeName.toLowerCase(),T.nodeType);if($t(T)){const P=T.attributes;for(let $=0,j=P.length;$<j;$++){const J=P[$];M.attr(J.name,J.value)}Js(M.name)&&(r(T),M.value=T.innerHTML)}else dt(T)?(M.value=T.data,u&&(M.raw=!0)):(Zr(T)||Qa(T)||Fm(T))&&(M.value=T.data);Js(M.name)||MP(M,T,o,r),e.append(M)}},Gw=(e,n,o)=>{const r=[];for(let a=e,u=a;a;u=a,a=a.walk()){const f=a;xe(n,b=>b(f)),dn(f.parent)&&f!==e?a=u:r.push(f)}for(let a=r.length-1;a>=0;a--){const u=r[a];xe(o,f=>f(u))}},NP=(e,n,o,r)=>{const a=o.validate,u=n.getNonEmptyElements(),f=n.getWhitespaceElements(),b=mO(RP("script,style,head,html,body,title,meta,param"),n.getBlockElements()),C=By(n),T=/[ \t\r\n]+/g,M=/^[ \t\r\n]+/,P=/[ \t\r\n]+$/,$=we=>{let Se=we.parent;for(;Oe(Se);){if(Se.name in f)return!0;Se=Se.parent}return!1},j=we=>{let Se=we;for(;Oe(Se);){if(Se.name in C)return Xc(n,u,f,Se);Se=Se.parent}return!1},J=we=>we.name in b||Qd(n,we)||Js(we.name)&&we.parent===e,q=(we,Se)=>{const _e=Se?we.prev:we.next;return Oe(_e)||dn(we.parent)?!1:J(we.parent)&&(we.parent!==e||r.isRootContent===!0)};return[we=>{var Se;if(we.type===3&&!$(we)){let _e=(Se=we.value)!==null&&Se!==void 0?Se:"";_e=_e.replace(T," "),(Z6(we.prev,J)||q(we,!0))&&(_e=_e.replace(M,"")),_e.length===0||_e===" "&&we.prev&&we.prev.type===Ws&&we.next&&we.next.type===Ws?we.remove():we.value=_e}},we=>{var Se;if(we.type===1){const _e=n.getElementRule(we.name);if(a&&_e){const nt=Xc(n,u,f,we);_e.paddInEmptyBlock&&nt&&j(we)?k4(o,r,J,we):_e.removeEmpty&&nt?J(we)?we.remove():we.unwrap():_e.paddEmpty&&(nt||Gp(we))&&k4(o,r,J,we)}}else if(we.type===3&&!$(we)){let _e=(Se=we.value)!==null&&Se!==void 0?Se:"";(we.next&&J(we.next)||q(we,!1))&&(_e=_e.replace(P,"")),_e.length===0?we.remove():we.value=_e}}]},Y8=(e,n)=>{var o;const r=(o=n.forced_root_block)!==null&&o!==void 0?o:e.forced_root_block;return r===!1?"":r===!0?"p":r},Hb=(e={},n=xs())=>{const o=fP(),r=fP(),a={validate:!0,root_name:"body",sanitize:!0,...e},u=new DOMParser,f=K8(a,n),b=(Se,_e,nt="html")=>{const wt=nt==="xhtml"?"application/xhtml+xml":"text/html",Zt=yn(n.getSpecialElements(),_e.toLowerCase()),We=Zt?`<${_e}>${Se}</${_e}>`:Se,Pe=()=>nt==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${We}</body></html>`:/^[\s]*<head/i.test(Se)||/^[\s]*<html/i.test(Se)||/^[\s]*<!DOCTYPE/i.test(Se)?`<html>${We}</html>`:`<body>${We}</body>`,rt=u.parseFromString(Pe(),wt).body;return f.sanitizeHtmlElement(rt,wt),Zt?rt.firstChild:rt},C=o.addFilter,T=o.getFilters,M=o.removeFilter,P=r.addFilter,$=r.getFilters,j=r.removeFilter,J=(Se,_e)=>{_4(n,Se)&&_e.push(Se)},q=(Se,_e)=>{const nt=ee(_e.attr(t1)),wt=_e.type===1&&!yn(Se,_e.name)&&!Qd(n,_e)&&!Js(_e.name);return _e.type===3||wt&&!nt},oe=(Se,_e)=>{const nt=mO(RP("script,style,head,html,body,title,meta,param"),n.getBlockElements()),wt=/^[ \t\r\n]+/,Zt=/[ \t\r\n]+$/;let We=Se.firstChild,Pe=null;const rt=qt=>{var Sn,ko;qt&&(We=qt.firstChild,We&&We.type===3&&(We.value=(Sn=We.value)===null||Sn===void 0?void 0:Sn.replace(wt,"")),We=qt.lastChild,We&&We.type===3&&(We.value=(ko=We.value)===null||ko===void 0?void 0:ko.replace(Zt,"")))};if(n.isValidChild(Se.name,_e.toLowerCase())){for(;We;){const qt=We.next;q(nt,We)?(Pe||(Pe=new bi(_e,1),Pe.attr(a.forced_root_block_attrs),Se.insert(Pe,We)),Pe.append(We)):(rt(Pe),Pe=null),We=qt}rt(Pe)}},we={schema:n,addAttributeFilter:P,getAttributeFilters:$,removeAttributeFilter:j,addNodeFilter:C,getNodeFilters:T,removeNodeFilter:M,parse:(Se,_e={})=>{var nt;const wt=a.validate,Zt=(nt=_e.context)!==null&&nt!==void 0?nt:a.root_name,We=b(Se,Zt,_e.format);gs(n,We);const Pe=new bi(Zt,11);MP(Pe,We,n.getSpecialElements(),f.sanitizeNamespaceElement),We.innerHTML="";const[rt,qt]=NP(Pe,n,a,_e),Sn=[],ko=wt?ic=>J(ic,Sn):Mt,_o={nodes:{},attributes:{}},ps=ic=>ON(T(),$(),ic,_o);if(Gw(Pe,[rt,ps],[qt,ko]),Sn.reverse(),wt&&Sn.length>0)if(_e.context){const{pass:ic,fail:Wc}=Ht(Sn,La=>La.parent===Pe);us(Wc,n,Pe,ps),_e.invalid=ic.length>0}else us(Sn,n,Pe,ps);const _s=Y8(a,_e);return _s&&(Pe.name==="body"||_e.isRootContent)&&oe(Pe,_s),_e.invalid||E4(_o,_e),Pe}};return eO(we,a),Th(we,a,n),we},X8=e=>Kp(e)?Hp({validate:!1}).serialize(e):e,fO=(e,n,o)=>{const r=X8(e),a=n(r);if(a.isDefaultPrevented())return a;if(Kp(e))if(a.content!==r){const u=Hb({validate:!1,forced_root_block:!1,...o}).parse(a.content,{context:e.name});return{...a,content:u}}else return{...a,content:e};else return a},PP=e=>({sanitize:ax(e),sandbox_iframes:nb(e),sandbox_iframes_exclusions:DC(e)}),BP=(e,n)=>{if(n.no_events)return Fc.value(n);{const o=T0(e,n);return o.isDefaultPrevented()?Fc.error(yA(e,{content:"",...o}).content):Fc.value(o)}},gO=(e,n,o)=>o.no_events?n:fO(n,a=>yA(e,{...o,content:a}),PP(e)).content,eE=(e,n)=>{if(n.no_events)return Fc.value(n);{const o=fO(n.content,r=>rw(e,{...n,content:r}),PP(e));return o.isDefaultPrevented()?(jx(e,o),Fc.error(void 0)):Fc.value(o)}},tE=(e,n,o)=>{o.no_events||jx(e,{...o,content:n})},nE=(e,n,o)=>({element:e,width:n,rows:o}),hO=(e,n)=>({element:e,cells:n}),$P=(e,n)=>({x:e,y:n}),IP=(e,n)=>Xs(e,n).bind(Ha).getOr(1),J8=(e,n,o,r,a)=>{const u=IP(a,"rowspan"),f=IP(a,"colspan"),b=e.rows;for(let C=o;C<o+u;C++){b[C]||(b[C]=hO($1(r),[]));for(let T=n;T<n+f;T++){const M=b[C].cells;M[T]=C===o&&T===n?a:Pu(a)}}},Q8=(e,n,o)=>{const r=e.rows;return!!(r[o]?r[o].cells:[])[n]},pO=(e,n,o)=>{for(;Q8(e,n,o);)n++;return n},K0=e=>Ho(e,(n,o)=>o.cells.length>n?o.cells.length:n,0),bO=(e,n)=>{const o=e.rows;for(let r=0;r<o.length;r++){const a=o[r].cells;for(let u=0;u<a.length;u++)if(po(a[u],n))return F.some($P(u,r))}return F.none()},vO=(e,n,o,r,a)=>{const u=[],f=e.rows;for(let b=o;b<=a;b++){const C=f[b].cells,T=n<r?C.slice(n,r+1):C.slice(r,n+1);u.push(hO(f[b].element,T))}return u},oE=(e,n,o)=>{const r=n.x,a=n.y,u=o.x,f=o.y,b=a<f?vO(e,r,a,u,f):vO(e,r,f,u,a);return nE(e.element,K0(b),b)},e7=(e,n)=>{const o=Pu(e.element),r=de.fromTag("tbody");return _u(r,n),fc(o,r),o},t7=e=>Rn(e.rows,n=>{const o=Rn(n.cells,a=>{const u=$1(a);return Zs(u,"colspan"),Zs(u,"rowspan"),u}),r=Pu(n.element);return _u(r,o),r}),Vb=e=>{const n=nE(Pu(e),0,[]);return xe(Ja(e,"tr"),(o,r)=>{xe(Ja(o,"td,th"),(a,u)=>{J8(n,pO(n,u,r),r,o,a)})}),nE(n.element,K0(n.rows),n.rows)},yO=e=>e7(e,t7(e)),LP=(e,n,o)=>bO(e,n).bind(r=>bO(e,o).map(a=>oE(e,r,a))),qw=e=>qo(e,n=>Q(n)==="ul"||Q(n)==="ol"),FP=(e,n)=>qo(e,o=>Q(o)==="li"&&JC(o,n)).fold(tt([]),o=>qw(e).map(r=>{const a=de.fromTag(Q(r)),u=os(fl(r),(f,b)=>ms(b,"list-style"));return ao(a,u),[de.fromTag("li"),a]}).getOr([])),CO=(e,n)=>{const o=Ho(n,(r,a)=>(fc(a,r),a),e);return n.length>0?M0([o]):o},HP=e=>Zg(e)?la(e).filter(Cd).fold(tt([]),n=>[e,n]):Cd(e)?[e]:[],VP=(e,n,o)=>{const r=de.fromDom(n.commonAncestorContainer),a=rg(r,e),u=Lt(a,C=>o.isWrapper(Q(C))),f=FP(a,n),b=u.concat(f.length?f:HP(r));return Rn(b,Pu)},zP=()=>M0([]),n7=(e,n,o)=>CO(de.fromDom(n.cloneContents()),VP(e,n,o)),o7=(e,n)=>cc(n,"table",Je(po,e)),wO=(e,n)=>o7(e,n[0]).bind(o=>{const r=n[0],a=n[n.length-1],u=Vb(o);return LP(u,r,a).map(f=>M0([yO(f)]))}).getOrThunk(zP),s7=(e,n,o)=>n.length>0&&n[0].collapsed?zP():n7(e,n[0],o),UP=(e,n,o)=>{const r=uh(n,e);return r.length>0?wO(e,r):s7(e,n,o)},sE=(e,n)=>n>=0&&n<e.length&&ih(e.charAt(n)),WP=e=>eu(e.innerText),r7=e=>e.map(n=>n.nodeName).getOr("div").toLowerCase(),c7=e=>F.from(e.selection.getRng()).map(n=>{var o;const r=F.from(e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock)),a=e.getBody(),u=r7(r),f=de.fromDom(n.cloneContents());MM(f),NM(f);const b=e.dom.add(a,u,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},f.dom),C=WP(b),T=eu((o=b.textContent)!==null&&o!==void 0?o:"");if(e.dom.remove(b),sE(T,0)||sE(T,T.length-1)){const M=r.getOr(a),P=WP(M),$=P.indexOf(C);if($===-1)return C;{const j=sE(P,$-1),J=sE(P,$+C.length);return(j?" ":"")+C+(J?" ":"")}}else return C}).getOr(""),a7=(e,n)=>{const o=e.selection.getRng(),r=e.dom.create("body"),a=e.selection.getSel(),u=aT(e,m0(a)),f=n.contextual?UP(de.fromDom(e.getBody()),u,e.schema).dom:o.cloneContents();return f&&r.appendChild(f),e.selection.serializer.serialize(r,n)},l7=(e,n)=>{if(n.format==="text")return c7(e);{const o=a7(e,n);return n.format==="tree"?o:e.selection.isCollapsed()?"":o}},i7=(e,n)=>({...e,format:n,get:!0,selection:!0,getInner:!0}),u7=(e,n,o={})=>{const r=i7(o,n);return BP(e,r).fold(Wo,a=>{const u=l7(e,a);return gO(e,u,a)})},SO=0,ZP=1,jP=2,rE=(e,n)=>{const o=e.length+n.length+2,r=new Array(o),a=new Array(o),u=(M,P,$)=>({start:M,end:P,diag:$}),f=(M,P,$,j,J)=>{const q=C(M,P,$,j);if(q===null||q.start===P&&q.diag===P-j||q.end===M&&q.diag===M-$){let oe=M,me=$;for(;oe<P||me<j;)oe<P&&me<j&&e[oe]===n[me]?(J.push([SO,e[oe]]),++oe,++me):P-M>j-$?(J.push([jP,e[oe]]),++oe):(J.push([ZP,n[me]]),++me)}else{f(M,q.start,$,q.start-q.diag,J);for(let oe=q.start;oe<q.end;++oe)J.push([SO,e[oe]]);f(q.end,P,q.end-q.diag,j,J)}},b=(M,P,$,j)=>{let J=M;for(;J-P<j&&J<$&&e[J]===n[J-P];)++J;return u(M,J,P)},C=(M,P,$,j)=>{const J=P-M,q=j-$;if(J===0||q===0)return null;const oe=J-q,me=q+J,we=(me%2===0?me:me+1)/2;r[1+we]=M,a[1+we]=P+1;let Se,_e,nt,wt,Zt;for(Se=0;Se<=we;++Se){for(_e=-Se;_e<=Se;_e+=2){for(nt=_e+we,_e===-Se||_e!==Se&&r[nt-1]<r[nt+1]?r[nt]=r[nt+1]:r[nt]=r[nt-1]+1,wt=r[nt],Zt=wt-M+$-_e;wt<P&&Zt<j&&e[wt]===n[Zt];)r[nt]=++wt,++Zt;if(oe%2!==0&&oe-Se<=_e&&_e<=oe+Se&&a[nt-oe]<=r[nt])return b(a[nt-oe],_e+M-$,P,j)}for(_e=oe-Se;_e<=oe+Se;_e+=2){for(nt=_e+we-oe,_e===oe-Se||_e!==oe+Se&&a[nt+1]<=a[nt-1]?a[nt]=a[nt+1]-1:a[nt]=a[nt-1],wt=a[nt]-1,Zt=wt-M+$-_e;wt>=M&&Zt>=$&&e[wt]===n[Zt];)a[nt]=wt--,Zt--;if(oe%2===0&&-Se<=_e&&_e<=Se&&a[nt]<=r[nt+oe])return b(a[nt],_e+M-$,P,j)}}return null},T=[];return f(0,e.length,0,n.length,T),T},Il=e=>$t(e)?e.outerHTML:dt(e)?Df.encodeRaw(e.data,!1):Zr(e)?"<!--"+e.data+"-->":"",d7=e=>{let n;const o=document.createElement("div"),r=document.createDocumentFragment();for(e&&(o.innerHTML=e);n=o.firstChild;)r.appendChild(n);return r},cE=(e,n,o)=>{const r=d7(n);if(e.hasChildNodes()&&o<e.childNodes.length){const a=e.childNodes[o];e.insertBefore(r,a)}else e.appendChild(r)},zb=(e,n)=>{if(e.hasChildNodes()&&n<e.childNodes.length){const o=e.childNodes[n];e.removeChild(o)}},GP=(e,n)=>{let o=0;xe(e,r=>{r[0]===SO?o++:r[0]===ZP?(cE(n,r[1],o),o++):r[0]===jP&&zb(n,o)})},gu=(e,n)=>Lt(Rn(cr(e.childNodes),A(eu,Il)),o=>o.length>0),Ub=(e,n)=>{const o=Rn(cr(n.childNodes),Il);return GP(rE(o,e),n),n},qP=Fe(()=>document.implementation.createHTMLDocument("undo")),m7=e=>e.querySelector("iframe")!==null,KP=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),f7=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),Kw=e=>{const n=e.serializer.getTempAttrs(),o=RM(e.getBody(),n);return m7(o)?KP(gu(o)):f7(eu(o.innerHTML))},Wb=(e,n,o)=>{const r=o?n.beforeBookmark:n.bookmark;n.type==="fragmented"?Ub(n.fragments,e.getBody()):e.setContent(n.content,{format:"raw",no_selection:Oe(r)&&rA(r)?!r.isFakeCaret:!0}),r&&(e.selection.moveToBookmark(r),e.selection.scrollIntoView())},Yw=e=>e.type==="fragmented"?e.fragments.join(""):e.content,YP=e=>{const n=de.fromTag("body",qP());return Au(n,Yw(e)),xe(Ja(n,"*[data-mce-bogus]"),ai),Hs(n)},XP=(e,n)=>Yw(e)===Yw(n),g7=(e,n)=>YP(e)===YP(n),Xw=(e,n)=>!e||!n?!1:XP(e,n)?!0:g7(e,n),Jw=e=>e.get()===0,aE=(e,n,o)=>{Jw(o)&&(e.typing=n)},JP=(e,n)=>{e.typing&&(aE(e,!1,n),e.add())},lg=e=>{e.typing&&(e.typing=!1,e.add())},xO=(e,n,o)=>{Jw(n)&&o.set(zv(e.selection))},h7=(e,n,o,r,a,u,f)=>{const b=Kw(e),C=it.extend(u||{},b);if(!Jw(r)||e.removed)return null;const T=n.data[o.get()];if(e.dispatch("BeforeAddUndo",{level:C,lastLevel:T,originalEvent:f}).isDefaultPrevented()||T&&Xw(T,C))return null;n.data[o.get()]&&a.get().each($=>{n.data[o.get()].beforeBookmark=$});const M=Kv(e);if(M&&n.data.length>M){for(let $=0;$<n.data.length-1;$++)n.data[$]=n.data[$+1];n.data.length--,o.set(n.data.length)}C.bookmark=zv(e.selection),o.get()<n.data.length-1&&(n.data.length=o.get()+1),n.data.push(C),o.set(n.data.length-1);const P={level:C,lastLevel:T,originalEvent:f};return o.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",P),e.dispatch("change",P)):e.dispatch("AddUndo",P),C},lE=(e,n,o)=>{n.data=[],o.set(0),n.typing=!1,e.dispatch("ClearUndos")},TO=(e,n,o,r,a)=>{if(n.transact(r)){const u=n.data[o.get()].bookmark,f=n.data[o.get()-1];Wb(e,f,!0),n.transact(a)&&(n.data[o.get()-1].beforeBookmark=u)}},QP=(e,n,o)=>{let r;return n.get()<o.length-1&&(n.set(n.get()+1),r=o[n.get()],Wb(e,r,!1),e.setDirty(!0),e.dispatch("Redo",{level:r})),r},eB=(e,n,o,r)=>{let a;return n.typing&&(n.add(),n.typing=!1,aE(n,!1,o)),r.get()>0&&(r.set(r.get()-1),a=n.data[r.get()],Wb(e,a,!0),e.setDirty(!0),e.dispatch("Undo",{level:a})),a},tB=e=>{e.clear(),e.add()},p7=(e,n,o)=>o.get()>0||n.typing&&n.data[0]&&!Xw(Kw(e),n.data[0]),b7=(e,n)=>n.get()<e.data.length-1&&!e.typing,v7=(e,n,o)=>(JP(e,n),e.beforeChange(),e.ignore(o),e.add()),y7=(e,n)=>{try{e.set(e.get()+1),n()}finally{e.set(e.get()-1)}},C7=(e,n)=>{const o=e.dom,r=Oe(n)?n:e.getBody();xe(o.select("table,a",r),a=>{switch(a.nodeName){case"TABLE":const u=QS(e),f=o.getAttrib(a,"border");(!f||f==="0")&&e.hasVisual?o.addClass(a,u):o.removeClass(a,u);break;case"A":if(!o.getAttrib(a,"href")){const b=o.getAttrib(a,"name")||a.id,C=TC(e);b&&e.hasVisual?o.addClass(a,C):o.removeClass(a,C)}break}}),e.dispatch("VisualAid",{element:n,hasVisual:e.hasVisual})},EO=e=>({init:{bindEvents:Mt},undoManager:{beforeChange:(n,o)=>xO(e,n,o),add:(n,o,r,a,u,f)=>h7(e,n,o,r,a,u,f),undo:(n,o,r)=>eB(e,n,o,r),redo:(n,o)=>QP(e,n,o),clear:(n,o)=>lE(e,n,o),reset:n=>tB(n),hasUndo:(n,o)=>p7(e,n,o),hasRedo:(n,o)=>b7(n,o),transact:(n,o,r)=>v7(n,o,r),ignore:(n,o)=>y7(n,o),extra:(n,o,r,a)=>TO(e,n,o,r,a)},formatter:{match:(n,o,r,a)=>Mw(e,n,o,r,a),matchAll:(n,o)=>LN(e,n,o),matchNode:(n,o,r,a)=>nf(e,n,o,r,a),canApply:n=>o8(e,n),closest:n=>RT(e,n),apply:(n,o,r)=>Z4(e,n,o,r),remove:(n,o,r,a)=>aP(e,n,o,r,a),toggle:(n,o,r)=>jT(e,n,o,r),formatChanged:(n,o,r,a,u)=>T8(e,n,o,r,a,u)},editor:{getContent:n=>c6(e,n),setContent:(n,o)=>Rb(e,n,o),insertContent:(n,o)=>du(e,n,o),addVisual:n=>C7(e,n)},selection:{getContent:(n,o)=>u7(e,n,o)},autocompleter:{addDecoration:Mt,removeDecoration:Mt},raw:{getModel:()=>F.none()}}),w7=e=>{const n=T=>Xe(T)?T:{},{init:o,undoManager:r,formatter:a,editor:u,selection:f,autocompleter:b,raw:C}=e;return{init:{bindEvents:o.bindEvents},undoManager:{beforeChange:r.beforeChange,add:r.add,undo:r.undo,redo:r.redo,clear:r.clear,reset:r.reset,hasUndo:r.hasUndo,hasRedo:r.hasRedo,transact:(T,M,P)=>r.transact(P),ignore:(T,M)=>r.ignore(M),extra:(T,M,P,$)=>r.extra(P,$)},formatter:{match:(T,M,P,$)=>a.match(T,n(M),$),matchAll:a.matchAll,matchNode:a.matchNode,canApply:T=>a.canApply(T),closest:T=>a.closest(T),apply:(T,M,P)=>a.apply(T,n(M)),remove:(T,M,P,$)=>a.remove(T,n(M)),toggle:(T,M,P)=>a.toggle(T,n(M)),formatChanged:(T,M,P,$,j)=>a.formatChanged(M,P,$,j)},editor:{getContent:T=>u.getContent(T),setContent:(T,M)=>({content:u.setContent(T,M),html:""}),insertContent:(T,M)=>(u.insertContent(T),""),addVisual:u.addVisual},selection:{getContent:(T,M)=>f.getContent(M)},autocompleter:{addDecoration:b.addDecoration,removeDecoration:b.removeDecoration},raw:{getModel:()=>F.some(C.getRawModel())}}},S7=()=>{const e=tt(null),n=tt("");return{init:{bindEvents:Mt},undoManager:{beforeChange:Mt,add:e,undo:e,redo:e,clear:Mt,reset:Mt,hasUndo:je,hasRedo:je,transact:e,ignore:Mt,extra:Mt},formatter:{match:je,matchAll:tt([]),matchNode:tt(void 0),canApply:je,closest:n,apply:Mt,remove:Mt,toggle:Mt,formatChanged:tt({unbind:Mt})},editor:{getContent:n,setContent:tt({content:"",html:""}),insertContent:tt(""),addVisual:Mt},selection:{getContent:n},autocompleter:{addDecoration:Mt,removeDecoration:Mt},raw:{getModel:tt(F.none())}}},ig=e=>yn(e.plugins,"rtc"),nB=e=>Xo(e.plugins,"rtc").bind(n=>F.from(n.setup)),kO=e=>{const n=e;return nB(e).fold(()=>(n.rtcInstance=EO(e),F.none()),o=>(n.rtcInstance=S7(),F.some(()=>o().then(r=>(n.rtcInstance=w7(r),r.rtc.isRemote)))))},Qw=e=>e.rtcInstance?e.rtcInstance:EO(e),ha=e=>{const n=e.rtcInstance;if(n)return n;throw new Error("Failed to get RTC instance not yet initialized.")},_O=(e,n,o)=>{ha(e).undoManager.beforeChange(n,o)},oB=(e,n,o,r,a,u,f)=>ha(e).undoManager.add(n,o,r,a,u,f),sB=(e,n,o,r)=>ha(e).undoManager.undo(n,o,r),AO=(e,n,o)=>ha(e).undoManager.redo(n,o),rB=(e,n,o)=>{ha(e).undoManager.clear(n,o)},cB=(e,n)=>{ha(e).undoManager.reset(n)},aB=(e,n,o)=>ha(e).undoManager.hasUndo(n,o),x7=(e,n,o)=>ha(e).undoManager.hasRedo(n,o),OO=(e,n,o,r)=>ha(e).undoManager.transact(n,o,r),T7=(e,n,o)=>{ha(e).undoManager.ignore(n,o)},iE=(e,n,o,r,a)=>{ha(e).undoManager.extra(n,o,r,a)},E7=(e,n,o,r,a)=>ha(e).formatter.match(n,o,r,a),k7=(e,n,o)=>ha(e).formatter.matchAll(n,o),_7=(e,n,o,r,a)=>ha(e).formatter.matchNode(n,o,r,a),lB=(e,n)=>ha(e).formatter.canApply(n),iB=(e,n)=>ha(e).formatter.closest(n),A7=(e,n,o,r)=>{ha(e).formatter.apply(n,o,r)},O7=(e,n,o,r,a)=>{ha(e).formatter.remove(n,o,r,a)},D7=(e,n,o,r)=>{ha(e).formatter.toggle(n,o,r)},R7=(e,n,o,r,a,u)=>ha(e).formatter.formatChanged(n,o,r,a,u),M7=(e,n)=>Qw(e).editor.getContent(n),uB=(e,n,o)=>Qw(e).editor.setContent(n,o),yG=(e,n,o)=>Qw(e).editor.insertContent(n,o),N7=(e,n,o)=>ha(e).selection.getContent(n,o),P7=(e,n)=>ha(e).editor.addVisual(n),dB=e=>ha(e).init.bindEvents(),B7=(e,n={})=>{const o=n.format?n.format:"html";return N7(e,o,n)},mB=e=>e.dom.length===0?(Ss(e),F.none()):F.some(e),$7=(e,n)=>e.filter(o=>bh.isBookmarkNode(o.dom)).bind(n?Aa:Gi),I7=(e,n,o,r,a)=>{const u=e.dom,f=n.dom,b=r?u.length:f.length;r?(a4(u,f,a,!1,!r),o.setStart(f,b)):(a4(f,u,a,!1,!r),o.setEnd(f,b))},fB=(e,n,o)=>{la(e).each(r=>{const a=e.dom;n&&pw(r,He(a,0),o)?mT(a,0,o):!n&&bw(r,He(a,a.length),o)&&c4(a,a.length,o)})},gB=(e,n,o,r,a)=>{e.bind(u=>((r?c4:mT)(u.dom,r?u.dom.length:0,a),n.filter(ws).map(b=>I7(u,b,o,r,a)))).orThunk(()=>$7(n,r).or(n).filter(ws).map(f=>fB(f,r,a)))},L7=(e,n,o)=>{const r=F.from(n.firstChild).map(de.fromDom),a=F.from(n.lastChild).map(de.fromDom);e.deleteContents(),e.insertNode(n);const u=r.bind(Gi).filter(ws).bind(mB),f=a.bind(Aa).filter(ws).bind(mB);gB(u,r,e,!0,o),gB(f,a,e,!1,o),e.collapse(!1)},F7=(e,n)=>({format:"html",...e,set:!0,selection:!0,content:n}),H7=(e,n)=>{if(n.format!=="raw"){const o=e.selection.getRng(),r=e.dom.getParent(o.commonAncestorContainer,e.dom.isBlock),a=r?{context:r.nodeName.toLowerCase()}:{},u=e.parser.parse(n.content,{forced_root_block:!1,...a,...n});return Hp({validate:!1},e.schema).serialize(u)}else return n.content},V7=(e,n,o={})=>{const r=F7(o,n);eE(e,r).each(a=>{const u=H7(e,a),f=e.selection.getRng();L7(f,f.createContextualFragment(u),e.schema),e.selection.setRng(f),wh(e,f),tE(e,u,a)})},z7=(e,n,o)=>{if(yn(e,n)){const r=Lt(e[n],a=>a!==o);r.length===0?delete e[n]:e[n]=r}};var CG=(e,n)=>{let o,r;const a=(b,C)=>qo(C,T=>e.is(T,b)),u=b=>e.getParents(b,void 0,e.getRoot()),f=()=>{o={},r={},n.on("NodeChange",b=>{const C=b.element,T=u(C),M={};pt(o,(P,$)=>{a($,T).each(j=>{r[$]||(xe(P,J=>{J(!0,{node:j,selector:$,parents:T})}),r[$]=P),M[$]=P})}),pt(r,(P,$)=>{M[$]||(delete r[$],xe(P,j=>{j(!1,{node:C,selector:$,parents:T})}))})})};return{selectorChangedWithUnbind:(b,C)=>(o||f(),o[b]||(o[b]=[]),o[b].push(C),a(b,u(n.selection.getStart())).each(()=>{r[b]=o[b]}),{unbind:()=>{z7(o,b,C),z7(r,b,C)}})}};const hB=e=>!!(e&&e.ownerDocument)&&aa(de.fromDom(e.ownerDocument),de.fromDom(e)),U7=e=>e?hB(e.startContainer)&&hB(e.endContainer):!1,W7=(e,n,o,r)=>{let a,u;const{selectorChangedWithUnbind:f}=CG(e,r),b=(Ot,vn)=>{const ls=e.createRng();Oe(Ot)&&Oe(vn)?(ls.setStart(Ot,vn),ls.setEnd(Ot,vn),_e(ls),me(!1)):(Mx(e,ls,r.getBody(),!0),_e(ls))},C=Ot=>B7(r,Ot),T=(Ot,vn)=>V7(r,Ot,vn),M=Ot=>CM(r.getBody(),Se(),Ot),P=Ot=>wM(r.getBody(),Se(),Ot),$=(Ot,vn)=>Wc.getBookmark(Ot,vn),j=Ot=>Wc.moveToBookmark(Ot),J=(Ot,vn)=>(xM(e,Ot,vn).each(_e),Ot),q=()=>{const Ot=Se(),vn=we();return!Ot||Ot.item?!1:Ot.compareEndPoints?Ot.compareEndPoints("StartToEnd",Ot)===0:!vn||Ot.collapsed},oe=()=>{if(r.mode.isReadOnly())return!1;const Ot=Se(),vn=r.getBody().querySelectorAll('[data-mce-selected="1"]');return vn.length>0?tn(vn,ls=>e.isEditable(ls.parentElement)):ZA(e,Ot)},me=Ot=>{const vn=Se();vn.collapse(!!Ot),_e(vn)},we=()=>n.getSelection?n.getSelection():n.document.selection,Se=()=>{let Ot;const vn=(Ft,Nn,In)=>{try{return Nn.compareBoundaryPoints(Ft,In)}catch{return-1}},ls=n.document;if(Oe(r.bookmark)&&!L0(r)){const Ft=eT(r);if(Ft.isSome())return Ft.map(Nn=>aT(r,[Nn])[0]).getOr(ls.createRange())}try{const Ft=we();Ft&&!Im(Ft.anchorNode)&&(Ft.rangeCount>0?Ot=Ft.getRangeAt(0):Ot=ls.createRange(),Ot=aT(r,[Ot])[0])}catch{}if(Ot||(Ot=ls.createRange()),kf(Ot.startContainer)&&Ot.collapsed){const Ft=e.getRoot();Ot.setStart(Ft,0),Ot.setEnd(Ft,0)}return a&&u&&(vn(Ot.START_TO_START,Ot,a)===0&&vn(Ot.END_TO_END,Ot,a)===0?Ot=u:(a=null,u=null)),Ot},_e=(Ot,vn)=>{if(!U7(Ot))return;const ls=we();if(Ot=r.dispatch("SetSelectionRange",{range:Ot,forward:vn}).range,ls){u=Ot;try{ls.removeAllRanges(),ls.addRange(Ot)}catch{}vn===!1&&ls.extend&&(ls.collapse(Ot.endContainer,Ot.endOffset),ls.extend(Ot.startContainer,Ot.startOffset)),a=ls.rangeCount>0?ls.getRangeAt(0):null}if(!Ot.collapsed&&Ot.startContainer===Ot.endContainer&&(ls!=null&&ls.setBaseAndExtent)&&Ot.endOffset-Ot.startOffset<2&&Ot.startContainer.hasChildNodes()){const Nn=Ot.startContainer.childNodes[Ot.startOffset];Nn&&Nn.nodeName==="IMG"&&(ls.setBaseAndExtent(Ot.startContainer,Ot.startOffset,Ot.endContainer,Ot.endOffset),(ls.anchorNode!==Ot.startContainer||ls.focusNode!==Ot.endContainer)&&ls.setBaseAndExtent(Nn,0,Nn,1))}r.dispatch("AfterSetSelectionRange",{range:Ot,forward:vn})},nt=Ot=>(T(e.getOuterHTML(Ot)),Ot),wt=()=>YF(r.getBody(),Se()),Zt=(Ot,vn)=>cT(e,Se(),Ot,vn),We=()=>{const Ot=we(),vn=Ot==null?void 0:Ot.anchorNode,ls=Ot==null?void 0:Ot.focusNode;if(!Ot||!vn||!ls||Im(vn)||Im(ls))return!0;const Ft=e.createRng(),Nn=e.createRng();try{Ft.setStart(vn,Ot.anchorOffset),Ft.collapse(!0),Nn.setStart(ls,Ot.focusOffset),Nn.collapse(!0)}catch{return!0}return Ft.compareBoundaryPoints(Ft.START_TO_START,Nn)<=0},ic={dom:e,win:n,serializer:o,editor:r,expand:(Ot={type:"word"})=>_e(at(e).expand(Se(),Ot)),collapse:me,setCursorLocation:b,getContent:C,setContent:T,getBookmark:$,moveToBookmark:j,select:J,isCollapsed:q,isEditable:oe,isForward:We,setNode:nt,getNode:wt,getSel:we,setRng:_e,getRng:Se,getStart:M,getEnd:P,getSelectedBlocks:Zt,normalize:()=>{const Ot=Se(),vn=we();if(!aA(vn)&&g0(r)){const ls=Rt(e,Ot);return ls.each(Ft=>{_e(Ft,We())}),ls.getOr(Ot)}return Ot},selectorChanged:(Ot,vn)=>(f(Ot,vn),ic),selectorChangedWithUnbind:f,getScrollContainer:()=>{let Ot,vn=e.getRoot();for(;vn&&vn.nodeName!=="BODY";){if(vn.scrollHeight>vn.clientHeight){Ot=vn;break}vn=vn.parentNode}return Ot},scrollIntoView:(Ot,vn)=>{Oe(Ot)?IF(r,Ot,vn):wh(r,Se(),vn)},placeCaretAt:(Ot,vn)=>_e(p(Ot,vn,r.getDoc())),getBoundingClientRect:()=>{const Ot=Se();return Ot.collapsed?He.fromRangeStart(Ot).getClientRects()[0]:Ot.getBoundingClientRect()},destroy:()=>{n=a=u=null,La.destroy()}},Wc=bh(ic),La=aw(ic,r);return ic.bookmarkManager=Wc,ic.controlSelection=La,ic},Z7=(e,n,o)=>{n.addNodeFilter("br",(r,a,u)=>{const f=it.extend({},o.getBlockElements()),b=o.getNonEmptyElements(),C=o.getWhitespaceElements();f.body=1;const T=M=>M.name in f||Qd(o,M);for(let M=0,P=r.length;M<P;M++){let $=r[M],j=$.parent;if(j&&T(j)&&$===j.lastChild){let J=$.prev;for(;J;){const q=J.name;if(q!=="span"||J.attr("data-mce-type")!=="bookmark"){q==="br"&&($=null);break}J=J.prev}if($&&($.remove(),Xc(o,b,C,j))){const q=o.getElementRule(j.name);q&&(q.removeEmpty?j.remove():q.paddEmpty&&k4(e,u,T,j))}}else{let J=$;for(;j&&j.firstChild===J&&j.lastChild===J&&(J=j,!f[j.name]);)j=j.parent;if(J===j){const q=new bi("#text",3);q.value=$c,$.replace(q)}}}})},lc=(e,n,o)=>{e.addAttributeFilter("data-mce-tabindex",(r,a)=>{let u=r.length;for(;u--;){const f=r[u];f.attr("tabindex",f.attr("data-mce-tabindex")),f.attr(a,null)}}),e.addAttributeFilter("src,href,style",(r,a)=>{const u="data-mce-"+a,f=n.url_converter,b=n.url_converter_scope;let C=r.length;for(;C--;){const T=r[C];let M=T.attr(u);M!==void 0?(T.attr(a,M.length>0?M:null),T.attr(u,null)):(M=T.attr(a),a==="style"?M=o.serializeStyle(o.parseStyle(M),T.name):f&&(M=f.call(b,M,a,T.name)),T.attr(a,M.length>0?M:null))}}),e.addAttributeFilter("class",r=>{let a=r.length;for(;a--;){const u=r[a];let f=u.attr("class");f&&(f=f.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),u.attr("class",f.length>0?f:null))}}),e.addAttributeFilter("data-mce-type",(r,a,u)=>{let f=r.length;for(;f--;){const b=r[f];b.attr("data-mce-type")==="bookmark"&&!u.cleanup&&(F.from(b.firstChild).exists(T=>{var M;return!L1((M=T.value)!==null&&M!==void 0?M:"")})?b.unwrap():b.remove())}}),e.addNodeFilter("script,style",(r,a)=>{var u;const f=C=>C.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let b=r.length;for(;b--;){const C=r[b],T=C.firstChild,M=(u=T==null?void 0:T.value)!==null&&u!==void 0?u:"";if(a==="script"){const P=C.attr("type");P&&C.attr("type",P==="mce-no/type"?null:P.replace(/^mce\-/,"")),n.element_format==="xhtml"&&T&&M.length>0&&(T.value=`// <![CDATA[
`+f(M)+`
// ]]>`)}else n.element_format==="xhtml"&&T&&M.length>0&&(T.value=`<!--
`+f(M)+`
-->`)}}),e.addNodeFilter("#comment",r=>{let a=r.length;for(;a--;){const u=r[a],f=u.value;n.preserve_cdata&&(f==null?void 0:f.indexOf("[CDATA["))===0?(u.name="#cdata",u.type=4,u.value=o.decode(f.replace(/^\[CDATA\[|\]\]$/g,""))):(f==null?void 0:f.indexOf("mce:protected "))===0&&(u.name="#text",u.type=3,u.raw=!0,u.value=unescape(f).substr(14))}}),e.addNodeFilter("xml:namespace,input",(r,a)=>{let u=r.length;for(;u--;){const f=r[u];f.type===7?f.remove():f.type===1&&a==="input"&&!f.attr("type")&&f.attr("type","text")}}),e.addAttributeFilter("data-mce-type",r=>{xe(r,a=>{a.attr("data-mce-type")==="format-caret"&&(a.isEmpty(e.schema.getNonEmptyElements())?a.remove():a.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(r,a)=>{let u=r.length;for(;u--;)r[u].attr(a,null)}),n.remove_trailing_brs&&Z7(n,e,e.schema)},DO=e=>{const n=r=>(r==null?void 0:r.name)==="br",o=e.lastChild;if(n(o)){const r=o.prev;n(r)&&(o.remove(),r.remove())}},wG=(e,n,o)=>{let r;const a=e.dom;let u=n.cloneNode(!0);const f=document.implementation;if(f.createHTMLDocument){const b=f.createHTMLDocument("");it.each(u.nodeName==="BODY"?u.childNodes:[u],C=>{b.body.appendChild(b.importNode(C,!0))}),u.nodeName!=="BODY"?u=b.body.firstChild:u=b.body,r=a.doc,a.doc=b}return w0(e,{...o,node:u}),r&&(a.doc=r),u},j7=(e,n)=>Oe(e)&&e.hasEventListeners("PreProcess")&&!n.no_events,G7=(e,n,o)=>j7(e,o)?wG(e,n,o):n,Y0=(e,n,o)=>{it.inArray(n,o)===-1&&(e.addAttributeFilter(o,(r,a)=>{let u=r.length;for(;u--;)r[u].attr(a,null)}),n.push(o))},SG=(e,n,o)=>!n.no_events&&e?S0(e,{...n,content:o}).content:o,xG=(e,n,o)=>{const r=eu(o.getInner?n.innerHTML:e.getOuterHTML(n));return o.selection||Rv(de.fromDom(n))?r:it.trim(r)},Cl=(e,n,o)=>{const r=o.selection?{forced_root_block:!1,...o}:o,a=e.parse(n,r);return DO(a),a},pB=(e,n,o)=>Hp(e,n).serialize(o),bB=(e,n,o,r,a)=>{const u=pB(n,o,r);return SG(e,a,u)},vB=(e,n)=>{const o=["data-mce-selected"],r={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},a=n&&n.dom?n.dom:Gs.DOM,u=n&&n.schema?n.schema:xs(r),f=Hb(r,u);lc(f,r,a);const b=(C,T={})=>{const M={format:"html",...T},P=G7(n,C,M),$=xG(a,P,M),j=Cl(f,$,M);return M.format==="tree"?j:bB(n,r,u,j,M)};return{schema:u,addNodeFilter:f.addNodeFilter,addAttributeFilter:f.addAttributeFilter,serialize:b,addRules:u.addValidElements,setRules:u.setValidElements,addTempAttr:Je(Y0,f,o),getTempAttrs:tt(o),getNodeFilters:f.getNodeFilters,getAttributeFilters:f.getAttributeFilters,removeNodeFilter:f.removeNodeFilter,removeAttributeFilter:f.removeAttributeFilter}},yB=(e,n)=>{const o=vB(e,n);return{schema:o.schema,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:o.serialize,addRules:o.addRules,setRules:o.setRules,addTempAttr:o.addTempAttr,getTempAttrs:o.getTempAttrs,getNodeFilters:o.getNodeFilters,getAttributeFilters:o.getAttributeFilters,removeNodeFilter:o.removeNodeFilter,removeAttributeFilter:o.removeAttributeFilter}},q7="html",uE=(e,n)=>({...e,format:n,get:!0,getInner:!0}),K7=(e,n={})=>{const o=n.format?n.format:q7,r=uE(n,o);return BP(e,r).fold(Wo,a=>{const u=M7(e,a);return gO(e,u,a)})},RO="html",Y7=(e,n)=>({format:RO,...e,set:!0,content:n}),dE=(e,n,o={})=>{const r=Y7(o,n);return eE(e,r).map(a=>{const u=uB(e,a.content,a);return tE(e,u.html,a),u.content}).getOr(n)},CB="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),MO=[],wB="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),mE=[],SB=(e,n)=>{const o=Lt(n,r=>yn(e,r));return jn(o)},X7=e=>{const n=SB(e,CB),o=e.forced_root_block;return(o===!1||o==="")&&n.push("forced_root_block (false only)"),jn(n)},J7=e=>SB(e,MO),hu=(e,n)=>{const o=it.makeMap(e.plugins," "),a=Lt(n,u=>yn(o,u));return jn(a)},Q7=e=>hu(e,wB),eH=e=>hu(e,mE.map(n=>n.name)),tH=(e,n)=>{const o=X7(e),r=Q7(n),a=r.length>0,u=o.length>0,f=n.theme==="mobile";if(a||u||f){const b=`
- `,C=f?`

Themes:${b}mobile`:"",T=a?`

Plugins:${b}${r.join(b)}`:"",M=u?`

Options:${b}${o.join(b)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 7.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/7/migration-from-6x/ for more information."+C+T+M)}},nH=e=>qo(mE,n=>n.name===e).fold(()=>e,n=>n.replacedWith?`${e}, replaced by ${n.replacedWith}`:e),oH=(e,n)=>{const o=J7(e),r=eH(n),a=r.length>0,u=o.length>0;if(a||u){const f=`
- `,b=a?`

Plugins:${f}${r.map(nH).join(f)}`:"",C=u?`

Options:${f}${o.join(f)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+b+C)}},xB=(e,n)=>{tH(e,n),oH(e,n)},fE=Gs.DOM,sH=e=>{fE.setStyle(e.id,"display",e.orgDisplay)},gE=e=>F.from(e).each(n=>n.destroy()),hE=e=>{const n=e;n.contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.bodyElement=n.contentDocument=n.contentWindow=null,n.iframeElement=n.targetElm=null;const o=e.selection;if(o){const r=o.dom;n.selection=o.win=o.dom=r.doc=null}},rH=e=>{const n=e.formElement;n&&(n._mceOldSubmit&&(n.submit=n._mceOldSubmit,delete n._mceOldSubmit),fE.unbind(n,"submit reset",e.formEventDelegate))},cH=e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:o}=e,r=e.getBody(),a=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&Oe(a==null?void 0:a.nextSibling)&&fE.remove(a.nextSibling),hA(e),e.editorManager.remove(e),!e.inline&&r&&sH(e),pA(e),fE.remove(e.getContainer()),gE(n),gE(o),e.destroy()}},TB=(e,n)=>{const{selection:o,dom:r}=e;if(!e.destroyed){if(!n&&!e.removed){e.remove();return}n||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),gE(o),gE(r)),rH(e),hE(e),e.destroyed=!0}},pE=(()=>{const e={};return{add:(a,u)=>{e[a]=u},get:a=>e[a]?e[a]:{icons:{}},has:a=>yn(e,a)}})(),X0=pl.ModelManager,aH=(e,n)=>n.dom[e],kB=(e,n)=>parseInt(Lr(n,e),10),e2=Je(aH,"clientWidth"),_B=Je(aH,"clientHeight"),AB=Je(kB,"margin-top"),lH=Je(kB,"margin-left"),OB=e=>e.dom.getBoundingClientRect(),iH=(e,n,o)=>{const r=e2(e),a=_B(e);return n>=0&&o>=0&&n<=r&&o<=a},uH=(e,n,o,r)=>{const a=OB(n),u=e?a.left+n.dom.clientLeft+lH(n):0,f=e?a.top+n.dom.clientTop+AB(n):0,b=o-u,C=r-f;return{x:b,y:C}},dH=(e,n,o)=>{const r=de.fromDom(e.getBody()),a=e.inline?r:wf(r),u=uH(e.inline,a,n,o);return iH(a,u.x,u.y)},mH=e=>F.from(e).map(de.fromDom),DB=e=>{const n=e.inline?e.getBody():e.getContentAreaContainer();return mH(n).map(id).getOr(!1)};var fH=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const RB=e=>{const n=[],o=()=>{const $=e.theme;return $&&$.getNotificationManagerImpl?$.getNotificationManagerImpl():fH()},r=()=>F.from(n[0]),a=($,j)=>$.type===j.type&&$.text===j.text&&!$.progressBar&&!$.timeout&&!j.progressBar&&!j.timeout,u=()=>{r().each($=>{$.reposition()})},f=$=>{n.push($)},b=$=>{qs(n,j=>j===$).each(j=>{n.splice(j,1)})},C=($,j=!0)=>e.removed||!DB(e)?{}:(j&&e.dispatch("BeforeOpenNotification",{notification:$}),qo(n,J=>a(o().getArgs(J),$)).getOrThunk(()=>{e.editorManager.setActive(e);const J=o().open($,()=>{b(J)},()=>vM(e));return f(J),u(),e.dispatch("OpenNotification",{notification:{...J}}),J})),T=()=>{r().each($=>{o().close($),b($),u()})},M=tt(n);return($=>{$.on("SkinLoaded",()=>{const j=CC($);j&&C({text:j,type:"warning",timeout:0},!1),u()}),$.on("show ResizeEditor ResizeWindow NodeChange ToggleView FullscreenStateChanged",()=>{requestAnimationFrame(u)}),$.on("remove",()=>{xe(n.slice(),j=>{o().close(j)})}),$.addShortcut("alt+F12","Focus to notification",()=>r().map(j=>de.fromDom(j.getEl())).each(j=>xb(j)))})(e),{open:C,close:T,getNotifications:M}},ug=pl.PluginManager,n1=pl.ThemeManager;var MB=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const NB=e=>{let n=[];const o=()=>{const q=e.theme;return q&&q.getWindowManagerImpl?q.getWindowManagerImpl():MB()},r=(q,oe)=>(...me)=>oe?oe.apply(q,me):void 0,a=q=>{e.dispatch("OpenWindow",{dialog:q})},u=q=>{e.dispatch("CloseWindow",{dialog:q})},f=q=>{n.push(q),a(q)},b=q=>{u(q),n=Lt(n,oe=>oe!==q),n.length===0&&e.focus()},C=()=>F.from(n[n.length-1]),T=q=>{e.editorManager.setActive(e),mw(e),e.ui.show();const oe=q();return f(oe),oe},M=(q,oe)=>T(()=>o().open(q,oe,b)),P=q=>T(()=>o().openUrl(q,b)),$=(q,oe,me)=>{const we=o();we.alert(q,r(me||we,oe))},j=(q,oe,me)=>{const we=o();we.confirm(q,r(me||we,oe))},J=()=>{C().each(q=>{o().close(q),b(q)})};return e.on("remove",()=>{xe(n,q=>{o().close(q)})}),{open:M,openUrl:P,alert:$,confirm:j,close:J}},PB=(e,n)=>{e.notificationManager.open({type:"error",text:n})},bE=(e,n)=>{e._skinLoaded?PB(e,n):e.on("SkinLoaded",()=>{PB(e,n)})},BB=(e,n)=>{bE(e,yd.translate(["Failed to upload image: {0}",n]))},t2=(e,n,o)=>{lu(e,n,{message:o}),console.error(o)},n2=(e,n,o)=>o?`Failed to load ${e}: ${o} from url ${n}`:`Failed to load ${e} url: ${n}`,gH=(e,n,o)=>{t2(e,"PluginLoadError",n2("plugin",n,o))},hH=(e,n,o)=>{t2(e,"IconsLoadError",n2("icons",n,o))},TG=(e,n,o)=>{t2(e,"LanguageLoadError",n2("language",n,o))},rf=(e,n,o)=>{t2(e,"ThemeLoadError",n2("theme",n,o))},NO=(e,n,o)=>{t2(e,"ModelLoadError",n2("model",n,o))},pH=(e,n,o)=>{const r=yd.translate(["Failed to initialize plugin: {0}",n]);lu(e,"PluginLoadError",{message:r}),vE(r,o),bE(e,r)},vE=(e,...n)=>{const o=window.console;o&&(o.error?o.error(e,...n):o.log(e,...n))},bH=e=>/^[a-z0-9\-]+$/i.test(e),PO=e=>"content/"+e+"/content.css",Cs=e=>tinymce.Resource.has(PO(e)),vH=e=>$B(e,th(e)),o2=e=>$B(e,B_(e)),$B=(e,n)=>{const o=e.editorManager.baseURL+"/skins/content",a=`content${e.editorManager.suffix}.css`;return Rn(n,u=>Cs(u)?u:bH(u)&&!e.inline?`${o}/${u}/${a}`:e.documentBaseURI.toAbsolute(u))},yH=e=>{e.contentCSS=e.contentCSS.concat(vH(e),o2(e))},CH=e=>e?cr(e.getElementsByTagName("img")):[],IB=(e,n)=>{const o={};return{findAll:(a,u=gt)=>{const f=Lt(CH(a),C=>{const T=C.src;return C.hasAttribute("data-mce-bogus")||C.hasAttribute("data-mce-placeholder")||!T||T===nn.transparentSrc?!1:ms(T,"blob:")?!e.isUploaded(T)&&u(C):ms(T,"data:")?u(C):!1}),b=Rn(f,C=>{const T=C.src;if(yn(o,T))return o[T].then(M=>ee(M)?M:{image:C,blobInfo:M.blobInfo});{const M=Lw(n,T).then(P=>(delete o[T],{image:C,blobInfo:P})).catch(P=>(delete o[T],P));return o[T]=M,M}});return Promise.all(b)}}},kh=()=>{let o={};const r=($,j)=>({status:$,resultUri:j}),a=$=>$ in o;return{hasBlobUri:a,getResultUri:$=>{const j=o[$];return j?j.resultUri:null},isPending:$=>a($)?o[$].status===1:!1,isUploaded:$=>a($)?o[$].status===2:!1,markPending:$=>{o[$]=r(1,null)},markUploaded:($,j)=>{o[$]=r(2,j)},removeFailed:$=>{delete o[$]},destroy:()=>{o={}}}};let $i=0;const s2=()=>{const e=()=>Math.round(B1()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},o1=e=>e+$i+++s2(),dg=()=>{let e=[];const n=P=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[P.toLowerCase()]||"dat",o=(P,$,j,J,q)=>{if(ee(P))return r({id:P,name:J,filename:q,blob:$,base64:j});if(Xe(P))return r(P);throw new Error("Unknown input type")},r=P=>{if(!P.blob||!P.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const $=P.id||o1("blobid"),j=P.name||$,J=P.blob;return{id:tt($),name:tt(j),filename:tt(P.filename||j+"."+n(J.type)),blob:tt(J),base64:tt(P.base64),blobUri:tt(P.blobUri||URL.createObjectURL(J)),uri:tt(P.uri)}},a=P=>{f(P.id())||e.push(P)},u=P=>qo(e,P).getOrUndefined(),f=P=>u($=>$.id()===P);return{create:o,add:a,get:f,getByUri:P=>u($=>$.blobUri()===P),getByData:(P,$)=>u(j=>j.base64()===P&&j.blob().type===$),findFirst:u,removeByUri:P=>{e=Lt(e,$=>$.blobUri()===P?(URL.revokeObjectURL($.blobUri()),!1):!0)},destroy:()=>{xe(e,P=>{URL.revokeObjectURL(P.blobUri())}),e=[]}}},r2=(e,n)=>{const o={},r=(q,oe)=>q?q.replace(/\/$/,"")+"/"+oe.replace(/^\//,""):oe,a=(q,oe)=>new Promise((me,we)=>{const Se=new XMLHttpRequest;Se.open("POST",n.url),Se.withCredentials=n.credentials,Se.upload.onprogress=nt=>{oe(nt.loaded/nt.total*100)},Se.onerror=()=>{we("Image upload failed due to a XHR Transport error. Code: "+Se.status)},Se.onload=()=>{if(Se.status<200||Se.status>=300){we("HTTP Error: "+Se.status);return}const nt=JSON.parse(Se.responseText);if(!nt||!ee(nt.location)){we("Invalid JSON: "+Se.responseText);return}me(r(n.basePath,nt.location))};const _e=new FormData;_e.append("file",q.blob(),q.filename()),Se.send(_e)}),u=ue(n.handler)?n.handler:a,f=()=>new Promise(q=>{q([])}),b=(q,oe)=>({url:oe,blobInfo:q,status:!0}),C=(q,oe)=>({url:"",blobInfo:q,status:!1,error:oe}),T=(q,oe)=>{it.each(o[q],me=>{me(oe)}),delete o[q]},M=(q,oe,me)=>(e.markPending(q.blobUri()),new Promise(we=>{let Se,_e;try{const nt=()=>{Se&&(Se.close(),_e=Mt)},wt=We=>{nt(),e.markUploaded(q.blobUri(),We),T(q.blobUri(),b(q,We)),we(b(q,We))},Zt=We=>{nt(),e.removeFailed(q.blobUri()),T(q.blobUri(),C(q,We)),we(C(q,We))};_e=We=>{We<0||We>100||F.from(Se).orThunk(()=>F.from(me).map(ho)).each(Pe=>{Se=Pe,Pe.progressBar.value(We)})},oe(q,_e).then(wt,We=>{Zt(ee(We)?{message:We}:We)})}catch(nt){we(C(q,nt))}})),P=q=>q===a,$=q=>{const oe=q.blobUri();return new Promise(me=>{o[oe]=o[oe]||[],o[oe].push(me)})},j=(q,oe)=>(q=it.grep(q,me=>!e.isUploaded(me.blobUri())),Promise.all(it.map(q,me=>e.isPending(me.blobUri())?$(me):M(me,u,oe))));return{upload:(q,oe)=>!n.url&&P(u)?f():j(q,oe)}},yE=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),CE=(e,n)=>r2(n,{url:bC(e),basePath:vC(e),credentials:yC(e),handler:US(e)}),LB=e=>{const n=kh(),o=CE(e,n);return{upload:(r,a=!0)=>o.upload(r,a?yE(e):void 0)}},FB=(e,n)=>e.dom.isEmpty(n.dom)&&Oe(e.schema.getTextBlockElements()[Q(n)]),wH=e=>n=>{FB(e,n)&&fc(n,de.fromHtml('<br data-mce-bogus="1" />'))},SH=e=>{const n=dg();let o,r;const a=kh(),u=[],f=Se=>_e=>e.selection?Se(_e):[],b=Se=>Se+(Se.indexOf("?")===-1?"?":"&")+new Date().getTime(),C=(Se,_e,nt)=>{let wt=0;do wt=Se.indexOf(_e,wt),wt!==-1&&(Se=Se.substring(0,wt)+nt+Se.substr(wt+_e.length),wt+=nt.length-_e.length+1);while(wt!==-1);return Se},T=(Se,_e,nt)=>{const wt=`src="${nt}"${nt===nn.transparentSrc?' data-mce-placeholder="1"':""}`;return Se=C(Se,`src="${_e}"`,wt),Se=C(Se,'data-mce-src="'+_e+'"','data-mce-src="'+nt+'"'),Se},M=(Se,_e)=>{xe(e.undoManager.data,nt=>{nt.type==="fragmented"?nt.fragments=Rn(nt.fragments,wt=>T(wt,Se,_e)):nt.content=T(nt.content,Se,_e)})},P=(Se,_e)=>{const nt=e.convertURL(_e,"src");M(Se.src,_e),Xr(de.fromDom(Se),{src:zc(e)?b(_e):_e,"data-mce-src":nt})},$=()=>(o||(o=CE(e,a)),oe().then(f(Se=>{const _e=Rn(Se,nt=>nt.blobInfo);return o.upload(_e,yE(e)).then(f(nt=>{const wt=[];let Zt=!1;const We=Rn(nt,(Pe,rt)=>{const{blobInfo:qt,image:Sn}=Se[rt];let ko=!1;return Pe.status&&ys(e)?(Pe.url&&!rs(Sn.src,Pe.url)&&(Zt=!0),n.removeByUri(Sn.src),ig(e)||P(Sn,Pe.url)):Pe.error&&(Pe.error.remove&&(M(Sn.src,nn.transparentSrc),wt.push(Sn),ko=!0),BB(e,Pe.error.message)),{element:Sn,status:Pe.status,uploadUri:Pe.url,blobInfo:qt,removed:ko}});return wt.length>0&&!ig(e)?e.undoManager.transact(()=>{xe(Ki(wt),Pe=>{const rt=la(Pe);Ss(Pe),rt.each(wH(e)),n.removeByUri(Pe.dom.src)})}):Zt&&e.undoManager.dispatchChange(),We}))}))),j=()=>Pa(e)?$():Promise.resolve([]),J=Se=>tn(u,_e=>_e(Se)),q=Se=>{u.push(Se)},oe=()=>(r||(r=IB(a,n)),r.findAll(e.getBody(),J).then(f(Se=>{const _e=Lt(Se,nt=>ee(nt)?(bE(e,nt),!1):nt.uriType!=="blob");return ig(e)||xe(_e,nt=>{M(nt.image.src,nt.blobInfo.blobUri()),nt.image.src=nt.blobInfo.blobUri(),nt.image.removeAttribute("data-mce-src")}),_e}))),me=()=>{n.destroy(),a.destroy(),r=o=null},we=Se=>Se.replace(/src="(blob:[^"]+)"/g,(_e,nt)=>{const wt=a.getResultUri(nt);if(wt)return'src="'+wt+'"';let Zt=n.getByUri(nt);return Zt||(Zt=Ho(e.editorManager.get(),(We,Pe)=>We||Pe.editorUpload&&Pe.editorUpload.blobCache.getByUri(nt),void 0)),Zt?'src="data:'+Zt.blob().type+";base64,"+Zt.base64()+'"':_e});return e.on("SetContent",()=>{Pa(e)?j():oe()}),e.on("RawSaveContent",Se=>{Se.content=we(Se.content)}),e.on("GetContent",Se=>{Se.source_view||Se.format==="raw"||Se.format==="tree"||(Se.content=we(Se.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",Se=>{xe(Se,_e=>{const nt=_e.attr("src");if(!nt||n.getByUri(nt))return;const wt=a.getResultUri(nt);wt&&_e.attr("src",wt)})})}),{blobCache:n,addFilter:q,uploadImages:$,uploadImagesAuto:j,scanForImages:oe,destroy:me}},HB=e=>{const n=e.dom,o=e.schema.type,r={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:a=>{n.setStyle(a,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:a=>{n.setStyle(a,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const a={inline:"span",styles:{textDecoration:"line-through"},exact:!0},u={inline:"strike",remove:"all",preserve_attributes:["class","style"]},f={inline:"s",remove:"all",preserve_attributes:["class","style"]};return o!=="html4"?[f,a,u]:[a,f,u]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(a,u,f)=>$t(a)&&a.hasAttribute("href"),onformat:(a,u,f)=>{it.each(f,(b,C)=>{n.setAttrib(a,C,b)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":a=>{var u;return(u=a==null?void 0:a.customValue)!==null&&u!==void 0?u:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return it.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),a=>{r[a]={block:a,remove:"all"}}),r},BO={remove_similar:!0,inherit:!1},Zb={selector:"td,th",...BO},VB={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...Zb},tablecellverticalalign:{styles:{"vertical-align":"%value"},...Zb},tablecellbordercolor:{styles:{borderColor:"%value"},...Zb},tablecellclass:{classes:["%value"],...Zb},tableclass:{selector:"table",classes:["%value"],...BO},tablecellborderstyle:{styles:{borderStyle:"%value"},...Zb},tablecellborderwidth:{styles:{borderWidth:"%value"},...Zb}},$O=tt(VB),EG=e=>{const n={},o=f=>Oe(f)?n[f]:n,r=f=>yn(n,f),a=(f,b)=>{f&&(ee(f)?(Qe(b)||(b=[b]),xe(b,C=>{gn(C.deep)&&(C.deep=!cu(C)),gn(C.split)&&(C.split=!cu(C)||ma(C)),gn(C.remove)&&cu(C)&&!ma(C)&&(C.remove="none"),cu(C)&&ma(C)&&(C.mixed=!0,C.block_expand=!0),ee(C.classes)&&(C.classes=C.classes.split(/\s+/))}),n[f]=b):pt(f,(C,T)=>{a(T,C)}))},u=f=>(f&&n[f]&&delete n[f],n);return a(HB(e)),a($O()),a(qv(e)),{get:o,has:r,register:a,unregister:u}},wE=it.each,ym=Gs.DOM,IO=e=>Oe(e)&&Xe(e),zB=(e,n)=>{const o=n&&n.schema||xs({}),r=(C,T)=>{T.classes.length>0&&ym.addClass(C,T.classes.join(" ")),ym.setAttribs(C,T.attrs)},a=C=>{const T=ee(C)?{name:C,classes:[],attrs:{}}:C,M=ym.create(T.name);return r(M,T),M},u=(C,T)=>{const M=o.getElementRule(C.nodeName.toLowerCase()),P=M==null?void 0:M.parentsRequired;return P&&P.length?T&&Cn(P,T)?T:P[0]:!1},f=(C,T,M)=>{let P;const $=T[0],j=IO($)?$.name:void 0,J=u(C,j);if(J)j===J?(P=$,T=T.slice(1)):P=J;else if($)P=$,T=T.slice(1);else if(!M)return C;const q=P?a(P):ym.create("div");q.appendChild(C),M&&it.each(M,me=>{const we=a(me);q.insertBefore(we,C)});const oe=IO(P)?P.siblings:void 0;return f(q,T,oe)},b=ym.create("div");if(e.length>0){const C=e[0],T=a(C),M=IO(C)?C.siblings:void 0;b.appendChild(f(T,e.slice(1),M))}return b},mg=e=>{e=it.trim(e);let n="div";const o={name:n,classes:[],attrs:{},selector:e};return e!=="*"&&(n=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,a,u,f,b)=>{switch(a){case"#":o.attrs.id=u;break;case".":o.classes.push(u);break;case":":it.inArray("checked disabled enabled read-only required".split(" "),u)!==-1&&(o.attrs[u]=u);break}if(f==="["){const C=b.match(/([\w\-]+)(?:\=\"([^\"]+))?/);C&&(o.attrs[C[1]]=C[2])}return""})),o.name=n||"div",o},kG=e=>ee(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),it.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),n=>{const o=it.map(n.split(/(?:~\+|~|\+)/),mg),r=o.pop();return o.length&&(r.siblings=o),r}).reverse()):[],_G=(e,n)=>{let o="",r=GS(e);if(r==="")return"";const a=$=>ee($)?$.replace(/%(\w+)/g,""):"",u=($,j)=>ym.getStyle(j??e.getBody(),$,!0);if(ee(n)){const $=e.formatter.get(n);if(!$)return"";n=$[0]}if("preview"in n){const $=n.preview;if($===!1)return"";r=$||r}let f=n.block||n.inline||"span",b;const C=kG(n.selector);C.length>0?(C[0].name||(C[0].name=f),f=n.selector,b=zB(C,e)):b=zB([f],e);const T=ym.select(f,b)[0]||b.firstChild;wE(n.styles,($,j)=>{const J=a($);J&&ym.setStyle(T,j,J)}),wE(n.attributes,($,j)=>{const J=a($);J&&ym.setAttrib(T,j,J)}),wE(n.classes,$=>{const j=a($);ym.hasClass(T,j)||ym.addClass(T,j)}),e.dispatch("PreviewFormats"),ym.setStyles(b,{position:"absolute",left:-65535}),e.getBody().appendChild(b);const M=u("fontSize"),P=/px$/.test(M)?parseInt(M,10):0;return wE(r.split(" "),$=>{let j=u($,T);if(!($==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(j)&&(j=u($),M1(j).toLowerCase()==="#ffffff"))&&!($==="color"&&M1(j).toLowerCase()==="#000000")){if($==="font-size"&&/em|%$/.test(j)){if(P===0)return;j=parseFloat(j)/(/%$/.test(j)?100:1)*P+"px"}$==="border"&&j&&(o+="padding:0 2px;"),o+=$+":"+j+";"}}),e.dispatch("AfterPreviewFormats"),ym.remove(b),o},xH=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let n=1;n<=6;n++)e.addShortcut("access+"+n,"",["FormatBlock",!1,"h"+n]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},J0=e=>{const n=EG(e),o=Rs({});return xH(e),zN(e),ig(e)||w8(o,e),{get:n.get,has:n.has,register:n.register,unregister:n.unregister,apply:(r,a,u)=>{A7(e,r,a,u)},remove:(r,a,u,f)=>{O7(e,r,a,u,f)},toggle:(r,a,u)=>{D7(e,r,a,u)},match:(r,a,u,f)=>E7(e,r,a,u,f),closest:r=>iB(e,r),matchAll:(r,a)=>k7(e,r,a),matchNode:(r,a,u,f)=>_7(e,r,a,u,f),canApply:r=>lB(e,r),formatChanged:(r,a,u,f)=>R7(e,o,r,a,u,f),getCssText:Je(_G,e)}},UB=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},WB=(e,n,o)=>{const r=Rs(!1),a=C=>{aE(n,!1,o),n.add({},C)};e.on("init",()=>{n.add()}),e.on("BeforeExecCommand",C=>{const T=C.command;UB(T)||(JP(n,o),n.beforeChange())}),e.on("ExecCommand",C=>{const T=C.command;UB(T)||a(C)}),e.on("ObjectResizeStart cut",()=>{n.beforeChange()}),e.on("SaveContent ObjectResized blur",a),e.on("dragend",a),e.on("keyup",C=>{const T=C.keyCode;if(C.isDefaultPrevented())return;const M=nn.os.isMacOS()&&C.key==="Meta";(T>=33&&T<=36||T>=37&&T<=40||T===45||C.ctrlKey||M)&&(a(),e.nodeChanged()),(T===46||T===8)&&e.nodeChanged(),r.get()&&n.typing&&!Xw(Kw(e),n.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),r.set(!1),e.nodeChanged())}),e.on("keydown",C=>{const T=C.keyCode;if(C.isDefaultPrevented())return;if(T>=33&&T<=36||T>=37&&T<=40||T===45){n.typing&&a(C);return}const M=C.ctrlKey&&!C.altKey||C.metaKey;if((T<16||T>20)&&T!==224&&T!==91&&!n.typing&&!M){n.beforeChange(),aE(n,!0,o),n.add({},C),r.set(!0);return}(nn.os.isMacOS()?C.metaKey:C.ctrlKey&&!C.altKey)&&n.beforeChange()}),e.on("mousedown",C=>{n.typing&&a(C)});const u=C=>C.inputType==="insertReplacementText",f=C=>C.inputType==="insertText"&&C.data===null,b=C=>C.inputType==="insertFromPaste"||C.inputType==="insertFromDrop";e.on("input",C=>{C.inputType&&(u(C)||f(C)||b(C))&&a(C)}),e.on("AddUndo Undo Redo ClearUndos",C=>{C.isDefaultPrevented()||e.nodeChanged()})},ZB=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},LO=e=>{const n=qc(),o=Rs(0),r=Rs(0),a={data:[],typing:!1,beforeChange:()=>{_O(e,o,n)},add:(u,f)=>oB(e,a,r,o,n,u,f),dispatchChange:()=>{e.setDirty(!0);const u=Kw(e);u.bookmark=zv(e.selection),e.dispatch("change",{level:u,lastLevel:jc(a.data,r.get()).getOrUndefined()})},undo:()=>sB(e,a,o,r),redo:()=>AO(e,r,a.data),clear:()=>{rB(e,a,r)},reset:()=>{cB(e,a)},hasUndo:()=>aB(e,a,r),hasRedo:()=>x7(e,a,r),transact:u=>OO(e,a,o,u),ignore:u=>{T7(e,o,u)},extra:(u,f)=>{iE(e,a,r,u,f)}};return ig(e)||WB(e,a,o),ZB(e),a},TH=[9,27,Wt.HOME,Wt.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,Wt.DOWN,Wt.UP,Wt.LEFT,Wt.RIGHT].concat(nn.browser.isFirefox()?[224]:[]),jB="data-mce-placeholder",_h=e=>e.type==="keydown"||e.type==="keyup",GB=e=>{const n=e.keyCode;return n===Wt.BACKSPACE||n===Wt.DELETE},EH=e=>{if(_h(e)){const n=e.keyCode;return!GB(e)&&(Wt.metaKeyPressed(e)||e.altKey||n>=112&&n<=123||Cn(TH,n))}else return!1},kH=e=>_h(e)&&!(GB(e)||e.type==="keyup"&&e.keyCode===229),_H=(e,n,o)=>{if(e.isEmpty(n,void 0,{skipBogus:!1,includeZwsp:!0})){const r=n.firstElementChild;return r?e.getStyle(n.firstElementChild,"padding-left")||e.getStyle(n.firstElementChild,"padding-right")?!1:o===r.nodeName.toLowerCase():!0}else return!1},AH=e=>{var n;const o=e.dom,r=Wa(e),a=(n=im(e))!==null&&n!==void 0?n:"",u=(f,b)=>{if(EH(f))return;const C=e.getBody(),T=kH(f)?!1:_H(o,C,r);(o.getAttrib(C,jB)!==""!==T||b)&&(o.setAttrib(C,jB,T?a:null),ol(e,T),e.on(T?"keydown":"keyup",u),e.off(T?"keyup":"keydown",u))};xo(a)&&e.on("init",f=>{u(f,!0),e.on("change SetContent ExecCommand",u),e.on("paste",b=>Hu.setEditorTimeout(e,()=>u(b)))})},OH=(e,n)=>({block:e,position:n}),DH=(e,n)=>({from:e,to:n}),FO=(e,n)=>{const o=de.fromDom(e),r=de.fromDom(n.container());return _b(o,r).map(a=>OH(a,n))},RH=e=>!(aa(e.to.block,e.from.block)||aa(e.from.block,e.to.block)),SE=e=>!po(e.from.block,e.to.block),qB=(e,n)=>ir(n,a=>I1(a)||Ke(a.dom),a=>po(a,e)).filter(mo).getOr(e),MH=(e,n)=>{const o=de.fromDom(e);return po(qB(o,n.from.block),qB(o,n.to.block))},AG=e=>as(e.from.block.dom)===!1&&as(e.to.block.dom)===!1,c2=e=>{const n=o=>ui(o)||ii(o.dom)||Zg(o);return n(e.from.block)&&n(e.to.block)},NH=(e,n,o,r)=>cs(r.position.getNode())&&!Ma(e,r.block)?ch(!1,r.block.dom).bind(a=>a.isEqual(r.position)?Di(o,n,a).bind(u=>FO(n,u)):F.some(r)).getOr(r):r,HO=(e,n,o,r)=>{const a=FO(n,He.fromRangeStart(r)),u=a.bind(f=>Di(o,n,f.position).bind(b=>FO(n,b).map(C=>NH(e,n,o,C))));return Gn(a,u,DH).filter(f=>SE(f)&&MH(n,f)&&AG(f)&&c2(f)&&RH(f))},PH=(e,n,o,r)=>r.collapsed?HO(e,n,o,r):F.none(),BH=(e,n)=>{const o=wc(e);return qs(o,r=>n.isBlock(Q(r))).fold(tt(o),r=>o.slice(0,r))},KB=(e,n)=>{const o=BH(e,n);return xe(o,Ss),o},YB=(e,n,o)=>{const r=rg(o,n);return qo(r.reverse(),a=>Ma(e,a)).each(Ss)},jb=(e,n)=>Lt(Fh(n),o=>!Ma(e,o)).length===0,Gb=(e,n,o,r,a)=>{if(Ma(r,o))return rm(o),yl(o.dom);jb(r,a)&&Ma(r,n)&&Ds(a,de.fromTag("br"));const u=gi(o.dom,He.before(a.dom));return xe(KB(n,r),f=>{Ds(a,f)}),YB(r,e,n),u},xE=(e,n)=>e.isInline(Q(n)),TE=(e,n,o,r)=>{if(Ma(r,o)){if(Ma(r,n)){const f=Zo((b=>{const C=(T,M)=>Oa(T).fold(()=>M,P=>xE(r,P)?C(P,M.concat(Pu(P))):M);return C(b,[])})(o),(b,C)=>(ci(b,C),C),wd());qd(n),fc(n,f)}return Ss(o),yl(n.dom)}const a=Ri(o.dom);return xe(KB(n,r),u=>{fc(o,u)}),YB(r,e,n),a},qb=(e,n)=>{const o=rg(n,e);return F.from(o[o.length-1])},Kb=(e,n)=>aa(n,e)?qb(n,e):F.none(),a2=(e,n)=>{ch(e,n.dom).bind(o=>F.from(o.getNode())).map(de.fromDom).filter(Wm).each(Ss)},l2=(e,n,o,r)=>(a2(!0,n),a2(!1,o),Kb(n,o).fold(Je(TE,e,n,o,r),Je(Gb,e,n,o,r))),VO=(e,n,o,r,a)=>n?l2(e,r,o,a):l2(e,o,r,a),i2=(e,n)=>{const o=de.fromDom(e.getBody());return PH(e.schema,o.dom,n,e.selection.getRng()).map(a=>()=>{VO(o,n,a.from.block,a.to.block,e.schema).each(u=>{e.selection.setRng(u.toRange())})})},zO=(e,n,o)=>{const r=n.getRng();return Gn(_b(e,de.fromDom(r.startContainer)),_b(e,de.fromDom(r.endContainer)),(a,u)=>po(a,u)?F.none():F.some(()=>{r.deleteContents(),VO(e,!0,a,u,o).each(f=>{n.setRng(f.toRange())})})).getOr(F.none())},UO=(e,n)=>{const o=de.fromDom(n),r=Je(po,e);return lr(o,I1,r).isSome()},XB=(e,n)=>UO(e,n.startContainer)||UO(e,n.endContainer),Q0=(e,n)=>{const o=gi(e.dom,He.fromRangeStart(n)).isNone(),r=vl(e.dom,He.fromRangeEnd(n)).isNone();return!XB(e,n)&&o&&r},JB=e=>F.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),QB=e=>{const n=de.fromDom(e.getBody()),o=e.selection.getRng();return Q0(n,o)?JB(e):zO(n,e.selection,e.schema)},EE=(e,n)=>e.selection.isCollapsed()?F.none():QB(e),Cm=(e,n,o,r,a)=>F.from(n._selectionOverrides.showCaret(e,o,r,a)),e$=e=>{const n=e.ownerDocument.createRange();return n.selectNode(e),n},ey=(e,n)=>e.dispatch("BeforeObjectSelected",{target:n}).isDefaultPrevented()?F.none():F.some(e$(n)),t$=(e,n,o)=>{const r=$C(1,e.getBody(),n),a=He.fromRangeStart(r),u=a.getNode();if(sh(u))return Cm(1,e,u,!a.isAtEnd(),!1);const f=a.getNode(!0);if(sh(f))return Cm(1,e,f,!1,!1);const b=fm(e.dom.getRoot(),a.getNode());return sh(b)?Cm(1,e,b,!1,o):F.none()},kE=(e,n,o)=>n.collapsed?t$(e,n,o).getOr(n):n,Ah=e=>zp(e)||H0(e),s1=e=>Up(e)||gw(e),wm=(e,n)=>{dt(n)&&n.data.length===0&&e.remove(n)},n$=(e,n,o,r,a,u)=>{Cm(r,e,u.getNode(!a),a,!0).each(f=>{if(n.collapsed){const b=n.cloneRange();a?b.setEnd(f.startContainer,f.startOffset):b.setStart(f.endContainer,f.endOffset),b.deleteContents()}else n.deleteContents();e.selection.setRng(f)}),wm(e.dom,o)},$H=(e,n)=>{const o=e.selection.getRng();if(!dt(o.commonAncestorContainer))return F.none();const r=n?$a.Forwards:$a.Backwards,a=Za(e.getBody()),u=Je(IC,n?a.next:a.prev),f=n?Ah:s1,b=rh(r,e.getBody(),o),C=u(b),T=C&&_d(n,C);if(!T||!ab(b,T))return F.none();if(f(T))return F.some(()=>n$(e,o,b.getNode(),r,n,T));const M=u(T);return M&&f(M)&&ab(T,M)?F.some(()=>n$(e,o,b.getNode(),r,n,M)):F.none()},WO=(e,n)=>$H(e,n),ZO=(e,n)=>{const o=e.getBody();return n?yl(o).filter(zp):Ri(o).filter(Up)},jO=e=>{const n=e.selection.getRng();return!n.collapsed&&(ZO(e,!0).exists(o=>o.isEqual(He.fromRangeStart(n)))||ZO(e,!1).exists(o=>o.isEqual(He.fromRangeEnd(n))))},IH=e=>Oe(e)&&(I1(de.fromDom(e))||Zg(de.fromDom(e))),Zu=ou.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),LH=(e,n)=>{const o=n.getNode(!e),r=e?"after":"before";return $t(o)&&o.getAttribute("data-mce-caret")===r},FH=(e,n,o,r,a)=>{const u=f=>a.isInline(f.nodeName.toLowerCase())&&!Sd(o,r,e);return r0(!n,o).fold(()=>r0(n,r).fold(je,u),u)},o$=(e,n,o,r,a)=>{const u=a.getNode(!o);return _b(de.fromDom(n),de.fromDom(r.getNode())).map(f=>Ma(e,f)?Zu.remove(f.dom):Zu.moveToElement(u)).orThunk(()=>F.some(Zu.moveToElement(u)))},s$=(e,n,o,r)=>Di(n,e,o).bind(a=>IH(a.getNode())||FH(e,n,o,a,r)?F.none():n&&as(a.getNode())||!n&&as(a.getNode(!0))?o$(r,e,n,o,a):n&&Up(o)||!n&&zp(o)?F.some(Zu.moveToPosition(a)):F.none()),HH=(e,n)=>dn(n)?F.none():e&&as(n.nextSibling)?F.some(Zu.moveToElement(n.nextSibling)):!e&&as(n.previousSibling)?F.some(Zu.moveToElement(n.previousSibling)):F.none(),GO=(e,n,o)=>o.fold(r=>F.some(Zu.remove(r)),r=>F.some(Zu.moveToElement(r)),r=>Sd(n,r,e)?F.none():F.some(Zu.moveToPosition(r))),qO=(e,n,o,r)=>LH(n,o)?HH(n,o.getNode(!n)).orThunk(()=>s$(e,n,o,r)):s$(e,n,o,r).bind(a=>GO(e,o,a)),r$=(e,n,o,r)=>{const a=$C(n?1:-1,e,o),u=He.fromRangeStart(a),f=de.fromDom(e);return!n&&Up(u)?F.some(Zu.remove(u.getNode(!0))):n&&zp(u)?F.some(Zu.remove(u.getNode())):!n&&zp(u)&&dT(f,u,r)?Vn(f,u,r).map(b=>Zu.remove(b.getNode())):n&&Up(u)&&e4(f,u,r)?y6(f,u,r).map(b=>Zu.remove(b.getNode())):qO(e,n,u,r)},VH=(e,n)=>o=>(e._selectionOverrides.hideFakeCaret(),Eb(e,n,de.fromDom(o)),!0),zH=(e,n)=>o=>{const r=n?He.before(o):He.after(o);return e.selection.setRng(r.toRange()),!0},c$=e=>n=>(e.selection.setRng(n.toRange()),!0),KO=(e,n)=>F.from(fm(e.getBody(),n)),YO=(e,n)=>{const o=e.selection.getNode();return KO(e,o).filter(as).fold(()=>r$(e.getBody(),n,e.selection.getRng(),e.schema).map(r=>()=>r.fold(VH(e,n),zH(e,n),c$(e))),()=>F.some(Mt))},a$=e=>{xe(Ja(e,".mce-offscreen-selection"),Ss)},l$=(e,n)=>{const o=e.selection.getNode();return as(o)&&!Og(o)?KO(e,o.parentNode).filter(as).fold(()=>F.some(()=>{a$(de.fromDom(e.getBody())),Eb(e,n,de.fromDom(e.selection.getNode())),Wp(e)}),()=>F.some(Mt)):jO(e)?F.some(()=>{Vu(e,e.selection.getRng(),de.fromDom(e.getBody()))}):F.none()},_E=e=>{const n=e.dom,o=e.selection,r=fm(e.getBody(),o.getNode());if(Ke(r)&&n.isBlock(r)&&n.isEmpty(r)){const a=n.create("br",{"data-mce-bogus":"1"});n.setHTML(r,""),r.appendChild(a),o.setRng(He.before(a).toRange())}return!0},XO=(e,n)=>e.selection.isCollapsed()?YO(e,n):l$(e,n),i$=e=>e.hasOwnProperty("text"),cf=e=>e.hasOwnProperty("marker"),Rd=(e,n)=>{const o=(u,f)=>{if(dt(u))return{text:u,offset:f};{const b=n(),C=u.childNodes;return f<C.length?(u.insertBefore(b,C[f]),{marker:b,before:!0}):(u.appendChild(b),{marker:b,before:!1})}},r=o(e.endContainer,e.endOffset);return{start:o(e.startContainer,e.startOffset),end:r}},u2=e=>{var n,o;const{start:r,end:a}=e,u=new window.Range;return i$(r)?u.setStart(r.text,r.offset):cf(r)&&(r.before?u.setStartBefore(r.marker):u.setStartAfter(r.marker),(n=r.marker.parentNode)===null||n===void 0||n.removeChild(r.marker)),i$(a)?u.setEnd(a.text,a.offset):cf(a)&&(a.before?u.setEndBefore(a.marker):u.setEndAfter(a.marker),(o=a.marker.parentNode)===null||o===void 0||o.removeChild(a.marker)),u},AE=(e,n)=>{var o;const r=e.dom,a=r.getParent(e.selection.getStart(),r.isBlock),u=r.getParent(e.selection.getEnd(),r.isBlock),f=e.getBody();if(((o=a==null?void 0:a.nodeName)===null||o===void 0?void 0:o.toLowerCase())==="div"&&a&&u&&a===f.firstChild&&u===f.lastChild&&!r.isEmpty(f)){const C=a.cloneNode(!1),T=()=>{if(n?iN(e):cg(e),f.firstChild!==a){const M=Rd(e.selection.getRng(),()=>document.createElement("span"));Array.from(f.childNodes).forEach(P=>C.appendChild(P)),f.appendChild(C),e.selection.setRng(u2(M))}};return F.some(T)}return F.none()},OE=(e,n)=>{const o=He.fromRangeStart(e.selection.getRng());return Di(n,e.getBody(),o).filter(r=>n?En(r):zM(r)).bind(r=>BC(n?0:-1,r)).map(r=>()=>e.selection.select(r))},DE=(e,n)=>e.selection.isCollapsed()?OE(e,n):F.none(),Yb=dt,JO=e=>Yb(e)&&e.data[0]===Kc,QO=e=>Yb(e)&&e.data[e.data.length-1]===Kc,e3=e=>{var n;return((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(Kc)},u$=e=>{var n;if(Yb(e.previousSibling))return QO(e.previousSibling)||e.previousSibling.appendData(Kc),e.previousSibling;if(Yb(e))return JO(e)||e.insertData(0,Kc),e;{const o=e3(e);return(n=e.parentNode)===null||n===void 0||n.insertBefore(o,e),o}},RE=e=>{var n,o;if(Yb(e.nextSibling))return JO(e.nextSibling)||e.nextSibling.insertData(0,Kc),e.nextSibling;if(Yb(e))return QO(e)||e.appendData(Kc),e;{const r=e3(e);return e.nextSibling?(n=e.parentNode)===null||n===void 0||n.insertBefore(r,e.nextSibling):(o=e.parentNode)===null||o===void 0||o.appendChild(r),r}},ty=(e,n)=>e?u$(n):RE(n),UH=Je(ty,!0),WH=Je(ty,!1),d$=(e,n)=>dt(e.container())?ty(n,e.container()):ty(n,e.getNode()),m$=(e,n)=>{const o=n.get();return o&&e.container()===o&&Bu(o)},ME=(e,n)=>n.fold(o=>{oh(e.get());const r=UH(o);return e.set(r),F.some(He(r,r.length-1))},o=>yl(o).map(r=>{if(m$(r,e)){const a=e.get();return He(a,1)}else{oh(e.get());const a=d$(r,!0);return e.set(a),He(a,1)}}),o=>Ri(o).map(r=>{if(m$(r,e)){const a=e.get();return He(a,a.length-1)}else{oh(e.get());const a=d$(r,!1);return e.set(a),He(a,a.length-1)}}),o=>{oh(e.get());const r=WH(o);return e.set(r),F.some(He(r,1))}),f$=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o].apply(null,n);if(r.isSome())return r}return F.none()},yi=ou.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),NE=(e,n)=>{const o=fi(n,e);return o||e},ZH=(e,n,o)=>{const r=cN(o),a=NE(n,r.container());return Sh(e,a,r).fold(()=>vl(a,r).bind(Je(Sh,e,a)).map(u=>yi.before(u)),F.none)},jH=(e,n)=>ah(e,n)===null,g$=(e,n,o)=>Sh(e,n,o).filter(Je(jH,n)),GH=(e,n,o)=>{const r=aN(o);return g$(e,n,r).bind(a=>gi(a,r).isNone()?F.some(yi.start(a)):F.none())},qH=(e,n,o)=>{const r=cN(o);return g$(e,n,r).bind(a=>vl(a,r).isNone()?F.some(yi.end(a)):F.none())},KH=(e,n,o)=>{const r=aN(o),a=NE(n,r.container());return Sh(e,a,r).fold(()=>gi(a,r).bind(Je(Sh,e,a)).map(u=>yi.after(u)),F.none)},h$=e=>!l4(d2(e)),Md=(e,n,o)=>f$([ZH,GH,qH,KH],[e,n,o]).filter(h$),d2=e=>e.fold(Wo,Wo,Wo,Wo),p$=e=>e.fold(tt("before"),tt("start"),tt("end"),tt("after")),PE=e=>e.fold(yi.before,yi.before,yi.after,yi.after),t3=e=>e.fold(yi.start,yi.start,yi.end,yi.end),YH=(e,n)=>p$(e)===p$(n)&&d2(e)===d2(n),b$=(e,n,o,r,a,u)=>Gn(Sh(n,o,r),Sh(n,o,a),(f,b)=>f!==b&&rN(o,f,b)?yi.after(e?f:b):u).getOr(u),XH=(e,n)=>e.fold(gt,o=>!YH(o,n)),JH=(e,n,o,r,a)=>{const u=_d(e,a);return Di(e,o,u).map(Je(_d,e)).fold(()=>r.map(PE),C=>Md(n,o,C).map(Je(b$,e,n,o,u,C)).filter(Je(XH,r))).filter(h$)},n3=(e,n)=>e?n.fold(A(F.some,yi.start),F.none,A(F.some,yi.after),F.none):n.fold(F.none,A(F.some,yi.before),F.none,A(F.some,yi.end)),QH=(e,n,o,r)=>{const a=_d(e,r),u=Md(n,o,a);return Md(n,o,a).bind(Je(n3,e)).orThunk(()=>JH(e,n,o,u,r))},eV=e=>ue(e.selection.getSel().modify),v$=(e,n,o)=>{const r=e?1:-1;return n.setRng(He(o.container(),o.offset()+r).toRange()),n.getSel().modify("move",e?"forward":"backward","word"),!0},tV=(e,n)=>{const o=n.selection.getRng(),r=e?He.fromRangeEnd(o):He.fromRangeStart(o);return eV(n)?e&&cm(r)?v$(!0,n.selection,r):!e&&Zm(r)?v$(!1,n.selection,r):!1:!1};var fg;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(fg||(fg={}));const BE=(e,n)=>e===$a.Backwards?mn(n):n,nV=(e,n,o)=>e===$a.Forwards?n.next(o):n.prev(o),$E=(e,n,o,r)=>cs(r.getNode(n===$a.Forwards))?fg.Br:Sd(o,r)===!1?fg.Block:fg.Wrap,m2=(e,n,o,r)=>{const a=Za(o);let u=r;const f=[];for(;u;){const b=nV(n,a,u);if(!b)break;if(cs(b.getNode(!1)))return n===$a.Forwards?{positions:BE(n,f).concat([b]),breakType:fg.Br,breakAt:F.some(b)}:{positions:BE(n,f),breakType:fg.Br,breakAt:F.some(b)};if(!b.isVisible()){u=b;continue}if(e(u,b)){const C=$E(o,n,u,b);return{positions:BE(n,f),breakType:C,breakAt:F.some(b)}}f.push(b),u=b}return{positions:BE(n,f),breakType:fg.Eol,breakAt:F.none()}},y$=(e,n,o,r)=>n(o,r).breakAt.map(a=>{const u=n(o,a).positions;return e===$a.Backwards?u.concat(a):[a].concat(u)}).getOr([]),o3=(e,n)=>Ho(e,(o,r)=>o.fold(()=>F.some(r),a=>Gn(ro(a.getClientRects()),ro(r.getClientRects()),(u,f)=>{const b=Math.abs(n-u.left);return Math.abs(n-f.left)<=b?r:a}).or(o)),F.none()),Xb=(e,n)=>ro(n.getClientRects()).bind(o=>o3(e,o.left)),f2=Je(m2,He.isAbove,-1),g2=Je(m2,He.isBelow,1),C$=Je(y$,-1,f2),w$=Je(y$,1,g2),S$=(e,n)=>f2(e,n).breakAt.isNone(),x$=(e,n)=>g2(e,n).breakAt.isNone(),oV=e=>yl(e).map(n=>[n].concat(g2(e,n).positions)).getOr([]),sV=e=>Ri(e).map(n=>f2(e,n).positions.concat(n)).getOr([]),rV=(e,n)=>Xb(C$(e,n),n),cV=(e,n)=>Xb(w$(e,n),n),aV=as,lV=(e,n)=>Math.abs(e.left-n),Nd=(e,n)=>Math.abs(e.right-n),s3=e=>Ls(e,"node"),r3=(e,n)=>le(e,(o,r)=>{const a=Math.min(lV(o,n),Nd(o,n)),u=Math.min(lV(r,n),Nd(r,n));return u===a&&s3(r)&&aV(r.node)||u<a?r:o}),T$=e=>{const n=o=>Rn(o,r=>{const a=jm(r);return a.node=e,a});if($t(e))return n(e.getClientRects());if(dt(e)){const o=e.ownerDocument.createRange();return o.setStart(e,0),o.setEnd(e,e.data.length),n(o.getClientRects())}else return[]},E$=e=>lt(e,T$);var ny;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(ny||(ny={}));const iV=(e,n,o,r)=>{let a=r;for(;a=rb(a,e,wS,n);)if(o(a))return},c3=(e,n,o,r,a,u)=>{let f=0;const b=[],C=P=>{let $=E$([P]);e===-1&&($=$.reverse());for(let j=0;j<$.length;j++){const J=$[j];if(!o(J,T)){if(b.length>0&&n(J,De(b))&&f++,J.line=f,a(J))return!0;b.push(J)}}return!1},T=De(u.getClientRects());if(!T)return b;const M=u.getNode();return M&&(C(M),iV(e,r,C,M)),b},uV=(e,n)=>n.line>e,dV=(e,n)=>n.line===e,mV=Je(c3,ny.Up,er,F1),oy=Je(c3,ny.Down,F1,er),a3=e=>De(e.getClientRects()),k$=(e,n,o,r)=>{const a=Za(n);let u,f,b,C;const T=[];let M=0;e===1?(u=a.next,f=F1,b=er,C=He.after(r)):(u=a.prev,f=er,b=F1,C=He.before(r));const P=a3(C);do{if(!C.isVisible())continue;const $=a3(C);if(b($,P))continue;T.length>0&&f($,De(T))&&M++;const j=jm($);if(j.position=C,j.line=M,o(j))return T;T.push(j)}while(C=u(C));return T},l3=e=>n=>uV(e,n),h2=e=>n=>dV(e,n),Oh=(e,n)=>{e.selection.setRng(n),wh(e,e.selection.getRng())},i3=(e,n,o)=>F.some(kE(e,n,o)),_$=(e,n,o,r,a,u)=>{const f=n===$a.Forwards,b=Za(e.getBody()),C=Je(IC,f?b.next:b.prev),T=f?r:a;if(!o.collapsed){const J=H1(o);if(u(J))return Cm(n,e,J,n===$a.Backwards,!1);if(jO(e)){const q=o.cloneRange();return q.collapse(n===$a.Backwards),F.from(q)}}const M=rh(n,e.getBody(),o);if(T(M))return ey(e,M.getNode(!f));let P=C(M);const $=Qs(o);if(P)P=_d(f,P);else return $?F.some(o):F.none();if(T(P))return Cm(n,e,P.getNode(!f),f,!1);const j=C(P);return j&&T(j)&&ab(P,j)?Cm(n,e,j.getNode(!f),f,!1):$?i3(e,P.toRange(),!1):F.none()},A$=(e,n,o,r,a,u)=>{const f=rh(n,e.getBody(),o),b=De(f.getClientRects()),C=n===ny.Down,T=e.getBody();if(!b)return F.none();if(jO(e)){const oe=C?He.fromRangeEnd(o):He.fromRangeStart(o);return(C?cV:rV)(T,oe).orThunk(()=>F.from(oe)).map(we=>we.toRange())}const P=(C?oy:mV)(T,l3(1),f),$=Lt(P,h2(1)),j=b.left,J=r3($,j);if(J&&u(J.node)){const oe=Math.abs(j-J.left),me=Math.abs(j-J.right);return Cm(n,e,J.node,oe<me,!1)}let q;if(r(f)?q=f.getNode():a(f)?q=f.getNode(!0):q=H1(o),q){const oe=k$(n,T,l3(1),q);let me=r3(Lt(oe,h2(1)),j);if(me||(me=De(Lt(oe,h2(0))),me))return i3(e,me.position.toRange(),!1)}return $.length===0?O$(e,C).filter(C?a:r).map(oe=>kE(e,oe.toRange(),!1)):F.none()},O$=(e,n)=>{const o=e.selection.getRng(),r=n?He.fromRangeEnd(o):He.fromRangeStart(o),a=tA(r.container(),e.getBody());if(n){const u=g2(a,r);return ns(u.positions)}else{const u=f2(a,r);return ro(u.positions)}},fV=(e,n,o)=>O$(e,n).filter(o).exists(r=>(e.selection.setRng(r.toRange()),!0)),u3=(e,n)=>{const o=e.dom.createRng();o.setStart(n.container(),n.offset()),o.setEnd(n.container(),n.offset()),e.selection.setRng(o)},Pd=(e,n)=>{e?n.setAttribute("data-mce-selected","inline-boundary"):n.removeAttribute("data-mce-selected")},D$=(e,n,o)=>ME(n,o).map(r=>(u3(e,r),o)),gV=(e,n,o)=>{const r=He.fromRangeStart(e);if(e.collapsed)return r;{const a=He.fromRangeEnd(e);return o?gi(n,a).getOr(a):vl(n,r).getOr(r)}},Jb=(e,n,o)=>{const r=e.getBody(),a=gV(e.selection.getRng(),r,o),u=Je(kb,e);return QH(o,u,r,a).bind(b=>D$(e,n,b))},R$=(e,n,o)=>{const r=Rn(Ja(de.fromDom(n.getRoot()),'*[data-mce-selected="inline-boundary"]'),f=>f.dom),a=Lt(r,e),u=Lt(o,e);xe(Mo(a,u),Je(Pd,!1)),xe(Mo(u,a),Je(Pd,!0))},hV=(e,n)=>{const o=n.get();if(e.selection.isCollapsed()&&!e.composing&&o){const r=He.fromRangeStart(e.selection.getRng());He.isTextPosition(r)&&!vi(r)&&(u3(e,X_(o,r)),n.set(null))}},IE=(e,n,o,r)=>{if(n.selection.isCollapsed()){const a=Lt(r,e);xe(a,u=>{const f=He.fromRangeStart(n.selection.getRng());Md(e,n.getBody(),f).bind(b=>D$(n,o,b))})}},M$=(e,n,o)=>Y1(e)?Jb(e,n,o).isSome():!1,N$=(e,n,o)=>Y1(n)?tV(e,n):!1,pV=e=>{const n=Rs(null),o=Je(kb,e);return e.on("NodeChange",r=>{Y1(e)&&(R$(o,e.dom,r.parents),hV(e,n),IE(o,e,n,r.parents))}),n},bV=Je(N$,!0),P$=Je(N$,!1),LE=(e,n,o)=>{if(Y1(e)){const r=O$(e,n).getOrThunk(()=>{const a=e.selection.getRng();return n?He.fromRangeEnd(a):He.fromRangeStart(a)});return Md(Je(kb,e),e.getBody(),r).exists(a=>{const u=PE(a);return ME(o,u).exists(f=>(u3(e,f),!0))})}else return!1},Dh=(e,n)=>{const o=document.createRange();return o.setStart(e.container(),e.offset()),o.setEnd(n.container(),n.offset()),o},d3=e=>Gn(yl(e),Ri(e),(n,o)=>{const r=_d(!0,n),a=_d(!1,o);return vl(e,r).forall(u=>u.isEqual(a))}).getOr(!0),B$=(e,n)=>o=>ME(n,o).map(r=>()=>u3(e,r)),$$=(e,n,o,r)=>{const a=e.getBody(),u=Je(kb,e);e.undoManager.ignore(()=>{e.selection.setRng(Dh(o,r)),cg(e),Md(u,a,He.fromRangeStart(e.selection.getRng())).map(t3).bind(B$(e,n)).each(Us)}),e.nodeChanged()},vV=(e,n)=>{const o=fi(n,e);return o||e},yV=(e,n,o,r)=>{const a=vV(e.getBody(),r.container()),u=Je(kb,e),f=Md(u,a,r);return f.bind(C=>o?C.fold(tt(F.some(t3(C))),F.none,tt(F.some(PE(C))),F.none):C.fold(F.none,tt(F.some(PE(C))),F.none,tt(F.some(t3(C))))).map(B$(e,n)).getOrThunk(()=>{const C=Xf(o,a,r),T=C.bind(M=>Md(u,a,M));return Gn(f,T,()=>Sh(u,a,r).bind(M=>d3(M)?F.some(()=>{Eb(e,o,de.fromDom(M))}):F.none())).getOrThunk(()=>T.bind(()=>C.map(M=>()=>{o?$$(e,n,r,M):$$(e,n,M,r)})))})},m3=(e,n,o)=>{if(e.selection.isCollapsed()&&Y1(e)){const r=He.fromRangeStart(e.selection.getRng());return yV(e,n,o,r)}return F.none()},f3=e=>Wd(e)>1,FE=(e,n)=>{const o=de.fromDom(e.getBody()),r=de.fromDom(e.selection.getStart()),a=rg(r,o);return qs(a,n).fold(tt(a),u=>a.slice(0,u))},g3=e=>Wd(e)===1,I$=e=>FE(e,n=>e.schema.isBlock(Q(n))||f3(n)),L$=e=>FE(e,n=>e.schema.isBlock(Q(n))),h3=(e,n)=>{const o=Je(L4,e);return lt(n,r=>o(r)?[r.dom]:[])},F$=e=>{const n=L$(e);return h3(e,n)},p2=(e,n,o,r)=>{const a=h3(n,r);if(a.length===0)Eb(n,e,o);else{const u=BT(o.dom,a);n.selection.setRng(u.toRange())}},HE=(e,n)=>{const o=Lt(I$(e),g3);return ns(o).bind(r=>{const a=He.fromRangeStart(e.selection.getRng());return uN(n,a,r.dom)&&!hb(r)?F.some(()=>p2(n,e,r,o)):F.none()})},H$=(e,n)=>{const o=n.parentElement;return cs(n)&&!W(o)&&e.dom.isEmpty(o)},V$=e=>hb(de.fromDom(e)),p3=(e,n)=>{const o=e.selection.getStart(),r=H$(e,o)||V$(o)?BT(o,n):UN(e.selection.getRng(),n);e.selection.setRng(r.toRange())},z$=(e,n)=>{const o=Mo(n,F$(e));o.length>0&&p3(e,o)},b2=e=>dt(e.startContainer),b3=e=>e.startOffset===0&&b2(e),v2=(e,n)=>{const o=n.startContainer.parentElement;return!W(o)&&L4(e,de.fromDom(o))},CV=e=>{const n=e.startContainer.parentNode,o=e.endContainer.parentNode;return!W(n)&&!W(o)&&n.isEqualNode(o)},U$=e=>{const n=e.endContainer;return e.endOffset===(dt(n)?n.length:n.childNodes.length)},wV=e=>CV(e)&&U$(e),SV=e=>!e.endContainer.isEqualNode(e.commonAncestorContainer),W$=e=>wV(e)||SV(e),xV=e=>{const n=e.selection.getRng();return b3(n)&&v2(e,n)&&W$(n)},Z$=e=>{if(xV(e)){const n=F$(e);return F.some(()=>{cg(e),z$(e,n)})}else return F.none()},j$=(e,n)=>e.selection.isCollapsed()?HE(e,n):Z$(e),TV=(e,n)=>Eg(e,o=>Mi(o.dom),o=>n.isBlock(Q(o))),EV=e=>TV(de.fromDom(e.selection.getStart()),e.schema),kV=e=>{const n=e.selection.getRng();return n.collapsed&&(b2(n)||e.dom.isEmpty(n.startContainer))&&!EV(e)},y2=e=>(kV(e)&&p3(e,[]),!0),v3=(e,n,o)=>Oe(o)?F.some(()=>{e._selectionOverrides.hideFakeCaret(),Eb(e,n,de.fromDom(o))}):F.none(),_V=(e,n)=>{const o=n?H0:gw,r=n?$a.Forwards:$a.Backwards,a=rh(r,e.getBody(),e.selection.getRng());return o(a)?v3(e,n,a.getNode(!n)):F.from(_d(n,a)).filter(u=>o(u)&&ab(a,u)).bind(u=>v3(e,n,u.getNode(!n)))},AV=(e,n)=>{const o=e.selection.getNode();return Ra(o)?v3(e,n,o):F.none()},y3=(e,n)=>e.selection.isCollapsed()?_V(e,n):AV(e,n),G$=e=>ir(e,n=>Ke(n.dom)||as(n.dom)).exists(n=>Ke(n.dom)),C3=e=>Ha(e??"").getOr(0),r1=(e,n)=>{const o=e||g_(n)?"margin":"padding",r=Lr(n,"direction")==="rtl"?"-right":"-left";return o+r},q$=(e,n,o,r,a,u)=>{const f=r1(o,de.fromDom(u)),b=C3(e.getStyle(u,f));if(n==="outdent"){const C=Math.max(0,b-r);e.setStyle(u,f,C?C+a:"")}else{const C=b+r+a;e.setStyle(u,f,C)}},w3=(e,n)=>tn(n,o=>{const r=r1(ZS(e),o),a=ku(o,r).map(C3).getOr(0);return e.dom.getContentEditable(o.dom)!=="false"&&a>0}),S3=e=>{const n=x3(e);return!e.mode.isReadOnly()&&(n.length>1||w3(e,n))},VE=e=>Cd(e)||Zg(e),c1=e=>la(e).exists(VE),x3=e=>Lt(Ki(e.selection.getSelectedBlocks()),n=>!VE(n)&&!c1(n)&&G$(n)),ju=(e,n)=>{var o,r;if(e.mode.isReadOnly())return;const{dom:a}=e,u=KR(e),f=(r=(o=/[a-z%]+$/i.exec(u))===null||o===void 0?void 0:o[0])!==null&&r!==void 0?r:"px",b=C3(u),C=ZS(e);xe(x3(e),T=>{q$(a,n,C,b,f,T.dom)})},Qb=e=>ju(e,"indent"),zE=e=>ju(e,"outdent"),K$=e=>{if(e.selection.isCollapsed()&&S3(e)){const n=e.dom,o=e.selection.getRng(),r=He.fromRangeStart(o),a=n.getParent(o.startContainer,n.isBlock);if(a!==null&&uT(de.fromDom(a),r,e.schema))return F.some(()=>zE(e))}return F.none()},T3=(e,n,o)=>Br([K$,XO,WO,(r,a)=>m3(r,n,a),i2,ET,DE,y3,EE,j$,AE],r=>r(e,o)).filter(r=>e.selection.isEditable()),OV=(e,n)=>{T3(e,n,!1).fold(()=>{e.selection.isEditable()&&(cg(e),Wp(e))},Us)},DV=(e,n)=>{T3(e,n,!0).fold(()=>{e.selection.isEditable()&&iN(e)},Us)},RV=(e,n)=>{e.addCommand("delete",()=>{OV(e,n)}),e.addCommand("forwardDelete",()=>{DV(e,n)})},Y$=5,MV=400,E3=e=>e.touches===void 0||e.touches.length!==1?F.none():F.some(e.touches[0]),NV=(e,n)=>{const o=Math.abs(e.clientX-n.x),r=Math.abs(e.clientY-n.y);return o>Y$||r>Y$},PV=e=>{const n=qc(),o=Rs(!1),r=_v(a=>{e.dispatch("longpress",{...a,type:"longpress"}),o.set(!0)},MV);e.on("touchstart",a=>{E3(a).each(u=>{r.cancel();const f={x:u.clientX,y:u.clientY,target:a.target};r.throttle(a),o.set(!1),n.set(f)})},!0),e.on("touchmove",a=>{r.cancel(),E3(a).each(u=>{n.on(f=>{NV(u,f)&&(n.clear(),o.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",a=>{r.cancel(),a.type!=="touchcancel"&&n.get().filter(u=>u.target.isEqualNode(a.target)).each(()=>{o.get()?a.preventDefault():e.dispatch("tap",{...a,type:"tap"})})},!0)},a1=(e,n)=>yn(e,n.nodeName),UE=(e,n)=>dt(n)?!0:$t(n)?!a1(e.getBlockElements(),n)&&!hi(n)&&!md(e,n)&&!Gh(n):!1,X$=(e,n,o)=>So(hw(de.fromDom(o),de.fromDom(n)),r=>a1(e,r.dom)),J$=(e,n)=>{if(dt(n)){if(n.data.length===0)return!0;if(/^\s+$/.test(n.data))return!n.nextSibling||a1(e,n.nextSibling)||Gh(n.nextSibling)}return!1},C2=e=>e.dom.create(Wa(e),Wf(e)),BV=e=>{const n=e.dom,o=e.selection,r=e.schema,a=r.getBlockElements(),u=o.getStart(),f=e.getBody();let b,C,T=null;const M=Wa(e);if(!u||!$t(u))return;const P=f.nodeName.toLowerCase();if(!r.isValidChild(P,M.toLowerCase())||X$(a,f,u))return;if(f.firstChild===f.lastChild&&cs(f.firstChild)){b=C2(e),b.appendChild(wd().dom),f.replaceChild(b,f.firstChild),e.selection.setCursorLocation(b,0),e.nodeChanged();return}let $=f.firstChild;for(;$;)if($t($)&&dr(r,$),UE(r,$)){if(J$(a,$)){C=$,$=$.nextSibling,n.remove(C);continue}if(!b){if(!T&&e.hasFocus()&&(T=Rd(e.selection.getRng(),()=>document.createElement("span"))),!$.parentNode){$=null;break}b=C2(e),f.insertBefore(b,$)}C=$,$=$.nextSibling,b.appendChild(C)}else b=null,$=$.nextSibling;T&&(e.selection.setRng(u2(T)),e.nodeChanged())},Q$=(e,n,o)=>{const r=de.fromDom(C2(e)),a=wd();fc(r,a),o(n,r);const u=document.createRange();return u.setStartBefore(a.dom),u.setEndBefore(a.dom),u},$V=e=>{e.on("NodeChange",()=>BV(e))},e5=e=>n=>(" "+n.attr("class")+" ").indexOf(e)!==-1,IV=(e,n,o)=>function(r){const a=arguments,u=a[a.length-2],f=u>0?n.charAt(u-1):"";if(f==='"')return r;if(f===">"){const b=n.lastIndexOf("<",u);if(b!==-1&&n.substring(b,u).indexOf('contenteditable="false"')!==-1)return r}return'<span class="'+o+'" data-mce-content="'+e.dom.encode(a[0])+'">'+e.dom.encode(typeof a[1]=="string"?a[1]:a[0])+"</span>"},LV=(e,n,o)=>{let r=n.length,a=o.content;if(o.format!=="raw"){for(;r--;)a=a.replace(n[r],IV(e,a,Xv(e)));o.content=a}},FV=(e,n)=>tn(e,o=>{const r=n.match(o);return r!==null&&r[0].length===n.length}),t5=e=>{const n="contenteditable",o=" "+it.trim(Fu(e))+" ",r=" "+it.trim(Xv(e))+" ",a=e5(o),u=e5(r),f=Jv(e);f.length>0&&e.on("BeforeSetContent",b=>{LV(e,f,b)}),e.parser.addAttributeFilter("class",b=>{let C=b.length;for(;C--;){const T=b[C];a(T)?T.attr(n,"true"):u(T)&&T.attr(n,"false")}}),e.serializer.addAttributeFilter(n,b=>{let C=b.length;for(;C--;){const T=b[C];if(!a(T)&&!u(T))continue;const M=T.attr("data-mce-content");f.length>0&&M?FV(f,M)?(T.name="#text",T.type=3,T.raw=!0,T.value=M):T.remove():T.attr(n,null)}})},HV=e=>hn(de.fromDom(e.getBody()),"*[data-mce-caret]").map(n=>n.dom).getOrNull(),n5=(e,n)=>{n.hasAttribute("data-mce-caret")&&(mp(n),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(n))},Gu=(e,n)=>{const o=HV(e);if(o){if(n.type==="compositionstart"){n.preventDefault(),n.stopPropagation(),n5(e,o);return}gS(o)&&(n5(e,o),e.undoManager.add())}},VV=e=>{e.on("keyup compositionstart",Je(Gu,e))},WE=as,o5=(e,n,o)=>_$(n,e,o,zp,Up,WE),k3=(e,n,o)=>A$(n,e,o,u=>zp(u)||iT(u),u=>Up(u)||JA(u),WE),zV=e=>{const n=e.dom.create(Wa(e));return n.innerHTML='<br data-mce-bogus="1">',n},s5=(e,n,o)=>{const r=Za(e.getBody()),a=Je(IC,n===1?r.next:r.prev);if(o.collapsed){const u=e.dom.getParent(o.startContainer,"PRE");if(!u)return;if(!a(He.fromRangeStart(o))){const b=de.fromDom(zV(e));n===1?Gl(de.fromDom(u),b):Ds(de.fromDom(u),b),e.selection.select(b.dom,!0),e.selection.collapse()}}},UV=(e,n)=>{const o=n?$a.Forwards:$a.Backwards,r=e.selection.getRng();return o5(o,e,r).orThunk(()=>(s5(e,o,r),F.none()))},WV=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return k3(o,e,r).orThunk(()=>(s5(e,o,r),F.none()))},ZV=(e,n)=>{const o=n?e.getEnd(!0):e.getStart(!0);return l4(o)?!n:n},_3=(e,n)=>UV(e,ZV(e.selection,n)).exists(o=>(Oh(e,o),!0)),r5=(e,n)=>WV(e,n).exists(o=>(Oh(e,o),!0)),c5=(e,n)=>fV(e,n,n?Up:zp),l1=(e,n)=>ZO(e,!n).map(o=>{const r=o.toRange(),a=e.selection.getRng();return n?r.setStart(a.startContainer,a.startOffset):r.setEnd(a.endContainer,a.endOffset),r}).exists(o=>(Oh(e,o),!0)),Rh=e=>Cn(["figcaption"],Q(e)),ev=(e,n,o)=>{const r=Je(po,n);return ir(de.fromDom(e.container()),a=>o.isBlock(Q(a)),r).filter(Rh)},ZE=(e,n,o)=>n?x$(e.dom,o):S$(e.dom,o),A3=(e,n)=>{const o=de.fromDom(e.getBody()),r=He.fromRangeStart(e.selection.getRng());return ev(r,o,e.schema).exists(()=>{if(ZE(o,n,r)){const u=Q$(e,o,n?fc:ud);return e.selection.setRng(u),!0}else return!1})},jE=(e,n)=>e.selection.isCollapsed()?A3(e,n):!1,a5=(e,n,o)=>{const r=e.selection.getRng(),a=He.fromRangeStart(r);return e.getBody().firstChild===n&&S$(o,a)?(e.execCommand("InsertNewBlockBefore"),!0):!1},jV=(e,n)=>{const o=e.selection.getRng(),r=He.fromRangeStart(o);return e.getBody().lastChild===n&&x$(n,r)?(e.execCommand("InsertNewBlockAfter"),!0):!1},l5=(e,n)=>n?F.from(e.dom.getParent(e.selection.getNode(),"details")).map(o=>jV(e,o)).getOr(!1):F.from(e.dom.getParent(e.selection.getNode(),"summary")).bind(o=>F.from(e.dom.getParent(o,"details")).map(r=>a5(e,r,o))).getOr(!1),O3=(e,n)=>l5(e,n),i5={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},GV=e=>Rn(e,n=>({...i5,...n})),qV=e=>Rn(e,n=>({...i5,...n})),u5=(e,n)=>n.keyCode===e.keyCode&&n.shiftKey===e.shiftKey&&n.altKey===e.altKey&&n.ctrlKey===e.ctrlKey&&n.metaKey===e.metaKey,KV=(e,n)=>lt(GV(e),o=>u5(o,n)?[o]:[]),YV=(e,n)=>lt(qV(e),o=>u5(o,n)?[o]:[]),Xn=(e,...n)=>()=>e.apply(null,n),sy=(e,n)=>qo(KV(e,n),o=>o.action()),XV=(e,n)=>Br(YV(e,n),o=>o.action()),JV=(e,n)=>{const o=n?$a.Forwards:$a.Backwards,r=e.selection.getRng();return _$(e,o,r,H0,gw,Ra).exists(a=>(Oh(e,a),!0))},QV=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return A$(e,o,r,H0,gw,Ra).exists(a=>(Oh(e,a),!0))},d5=(e,n)=>fV(e,n,n?gw:H0),ez=ou.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),w2={...ez,none:e=>ez.none(e)},tz=(e,n)=>nz(e,n,gt),nz=(e,n,o)=>lt(wc(e),r=>ml(r,n)?o(r)?[r]:[]:nz(r,n,o)),oz=(e,n,o=je)=>{if(o(n))return F.none();if(Cn(e,Q(n)))return F.some(n);const r=a=>ml(a,"table")||o(a);return cc(n,e.join(","),r)},Ii=(e,n)=>oz(["td","th"],e,n),m5=e=>tz(e,"th,td"),ry=(e,n)=>qi(e,"table",n),D3=(e,n,o,r,a=gt)=>{const u=r===1;if(!u&&o<=0)return w2.first(e[0]);if(u&&o>=e.length-1)return w2.last(e[e.length-1]);{const f=o+r,b=e[f];return a(b)?w2.middle(n,b):D3(e,n,f,r,a)}},R3=(e,n)=>ry(e,n).bind(o=>{const r=m5(o);return qs(r,u=>po(e,u)).map(u=>({index:u,all:r}))}),f5=(e,n,o)=>R3(e,o).fold(()=>w2.none(e),a=>D3(a.all,e,a.index,1,n)),g5=(e,n,o)=>R3(e,o).fold(()=>w2.none(),a=>D3(a.all,e,a.index,-1,n)),M3=e=>uS(e).filter(n=>n.trim().length!==0||n.indexOf($c)>-1).isSome(),h5=e=>Oo(e)&&Nc(e,"contenteditable")==="false",sz=["img","br"],p5=e=>M3(e)||Cn(sz,Q(e))||h5(e),rz=e=>wg(e,p5),cz=(e,n)=>({left:e.left-n,top:e.top-n,right:e.right+n*2,bottom:e.bottom+n*2,width:e.width+n,height:e.height+n}),az=(e,n)=>lt(n,o=>{const r=cz(jm(o.getBoundingClientRect()),-1);return[{x:r.left,y:e(r),cell:o},{x:r.right,y:e(r),cell:o}]}),N3=(e,n,o)=>Ho(e,(r,a)=>r.fold(()=>F.some(a),u=>{const f=Math.sqrt(Math.abs(u.x-n)+Math.abs(u.y-o)),b=Math.sqrt(Math.abs(a.x-n)+Math.abs(a.y-o));return F.some(b<f?a:u)}),F.none()),b5=(e,n,o,r,a)=>{const u=Ja(de.fromDom(o),"td,th,caption").map(b=>b.dom),f=Lt(az(e,u),b=>n(b,a));return N3(f,r,a).map(b=>b.cell)},lz=e=>e.bottom,OG=e=>e.top,iz=(e,n)=>e.y<n,v5=(e,n)=>e.y>n,DG=Je(b5,lz,iz),uz=Je(b5,OG,v5),dz=(e,n)=>ro(n.getClientRects()).bind(o=>DG(e,o.left,o.top)).bind(o=>Xb(sV(o),n)),mz=(e,n)=>ns(n.getClientRects()).bind(o=>uz(e,o.left,o.top)).bind(o=>Xb(oV(o),n)),P3=(e,n,o)=>o.breakAt.exists(r=>e(n,r).breakAt.isSome()),GE=e=>e.breakType===fg.Wrap&&e.positions.length===0,y5=e=>e.breakType===fg.Br&&e.positions.length===1,B3=(e,n,o)=>{const r=e(n,o);return GE(r)||!cs(o.getNode())&&y5(r)?!P3(e,n,r):r.breakAt.isNone()},fz=Je(B3,f2),gz=Je(B3,g2),$3=(e,n,o)=>{const r=He.fromRangeStart(n);return ch(!e,o).exists(a=>a.isEqual(r))},hz=(e,n,o,r)=>{const a=e.selection.getRng(),u=n?1:-1;return Q_()&&$3(n,a,o)?(Cm(u,e,o,!n,!1).each(f=>{Oh(e,f)}),!0):!1},pz=(e,n,o)=>dz(n,o).orThunk(()=>ro(o.getClientRects()).bind(r=>o3(C$(e,He.before(n)),r.left))).getOr(He.before(n)),bz=(e,n,o)=>mz(n,o).orThunk(()=>ro(o.getClientRects()).bind(r=>o3(w$(e,He.after(n)),r.left))).getOr(He.after(n)),C5=(e,n)=>{const o=n.getNode(e);return Yi(o)?F.some(o):F.none()},Sm=(e,n,o)=>{n.undoManager.transact(()=>{const r=e?Gl:Ds,a=Q$(n,de.fromDom(o),r);Oh(n,a)})},I3=(e,n,o)=>{const r=C5(!!n,o),a=n===!1;r.fold(()=>Oh(e,o.toRange()),u=>ch(a,e.getBody()).filter(f=>f.isEqual(o)).fold(()=>Oh(e,o.toRange()),f=>Sm(n,e,u)))},w5=(e,n,o,r)=>{const a=e.selection.getRng(),u=He.fromRangeStart(a),f=e.getBody();if(!n&&fz(r,u)){const b=pz(f,o,u);return I3(e,n,b),!0}else if(n&&gz(r,u)){const b=bz(f,o,u);return I3(e,n,b),!0}else return!1},vz=(e,n,o)=>F.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(r=>F.from(e.dom.getParent(r,"table")).map(a=>o(e,n,a,r))).getOr(!1),yz=(e,n)=>vz(e,n,hz),S5=(e,n)=>vz(e,n,w5),RG=e=>{const n=wb.exact(e,0,e,0);return i(n)},x5=(e,n,o)=>o.fold(F.none,F.none,(r,a)=>rz(a).map(u=>RG(u)),r=>e.mode.isReadOnly()?F.none():(e.execCommand("mceTableInsertRowAfter"),S2(e,n,r))),S2=(e,n,o)=>x5(e,n,f5(o,Al)),Cz=(e,n,o)=>x5(e,n,g5(o,Al)),qE=(e,n)=>{const o=["table","li","dl"],r=de.fromDom(e.getBody()),a=b=>{const C=Q(b);return po(b,r)||Cn(o,C)},u=e.selection.getRng(),f=de.fromDom(n?u.endContainer:u.startContainer);return Ii(f,a).map(b=>(ry(b,a).each(M=>{e.model.table.clearSelectedCells(M.dom)}),e.selection.collapse(!n),(n?S2:Cz)(e,a,b).each(M=>{e.selection.setRng(M)}),!0)).getOr(!1)},T5=(e,n,o)=>{const r=nn.os.isMacOS()||nn.os.isiOS();sy([{keyCode:Wt.RIGHT,action:Xn(_3,e,!0)},{keyCode:Wt.LEFT,action:Xn(_3,e,!1)},{keyCode:Wt.UP,action:Xn(r5,e,!1)},{keyCode:Wt.DOWN,action:Xn(r5,e,!0)},...r?[{keyCode:Wt.UP,action:Xn(l1,e,!1),metaKey:!0,shiftKey:!0},{keyCode:Wt.DOWN,action:Xn(l1,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:Wt.RIGHT,action:Xn(yz,e,!0)},{keyCode:Wt.LEFT,action:Xn(yz,e,!1)},{keyCode:Wt.UP,action:Xn(S5,e,!1)},{keyCode:Wt.DOWN,action:Xn(S5,e,!0)},{keyCode:Wt.UP,action:Xn(S5,e,!1)},{keyCode:Wt.UP,action:Xn(O3,e,!1)},{keyCode:Wt.DOWN,action:Xn(O3,e,!0)},{keyCode:Wt.RIGHT,action:Xn(JV,e,!0)},{keyCode:Wt.LEFT,action:Xn(JV,e,!1)},{keyCode:Wt.UP,action:Xn(QV,e,!1)},{keyCode:Wt.DOWN,action:Xn(QV,e,!0)},{keyCode:Wt.RIGHT,action:Xn(M$,e,n,!0)},{keyCode:Wt.LEFT,action:Xn(M$,e,n,!1)},{keyCode:Wt.RIGHT,ctrlKey:!r,altKey:r,action:Xn(bV,e,n)},{keyCode:Wt.LEFT,ctrlKey:!r,altKey:r,action:Xn(P$,e,n)},{keyCode:Wt.UP,action:Xn(jE,e,!1)},{keyCode:Wt.DOWN,action:Xn(jE,e,!0)}],o).each(a=>{o.preventDefault()})},E5=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||T5(e,n,o)})},xm=(e,n)=>({container:e,offset:n}),KE=Gs.DOM,YE=e=>n=>e===n?-1:0,wz=e=>n=>e.isBlock(n)||Cn(["BR","IMG","HR","INPUT"],n.nodeName)||e.getContentEditable(n)==="false",L3=(e,n,o)=>{if(dt(e)&&n>=0)return F.some(xm(e,n));{const r=Ug(KE);return F.from(r.backwards(e,n,YE(e),o)).map(a=>xm(a.container,a.container.data.length))}},XE=(e,n,o)=>{if(dt(e)&&n>=e.length)return F.some(xm(e,n));{const r=Ug(KE);return F.from(r.forwards(e,n,YE(e),o)).map(a=>xm(a.container,0))}},F3=(e,n,o)=>{if(!dt(e))return F.none();const r=e.data;if(n>=0&&n<=r.length)return F.some(xm(e,n));{const a=Ug(KE);return F.from(a.backwards(e,n,YE(e),o)).bind(u=>{const f=u.container.data;return F3(u.container,n+f.length,o)})}},k5=(e,n,o)=>{if(!dt(e))return F.none();const r=e.data;if(n<=r.length)return F.some(xm(e,n));{const a=Ug(KE);return F.from(a.forwards(e,n,YE(e),o)).bind(u=>k5(u.container,n-r.length,o))}},H3=(e,n,o,r,a)=>{const u=Ug(e,wz(e));return F.from(u.backwards(n,o,r,a))},V3=e=>e.collapsed&&dt(e.startContainer),Sz=e=>eu(e.toString().replace(/\u00A0/g," ")),_5=e=>e!==""&&`  \f
\r	\v`.indexOf(e)!==-1,A5=(e,n)=>e.substring(n.length),xz=(e,n,o,r=!1)=>{let a;const u=o.charAt(0);for(a=n-1;a>=0;a--){const f=e.charAt(a);if(!r&&_5(f))return F.none();if(u===f&&rs(e,o,a,n))break}return F.some(a)},z3=(e,n,o,r=!1)=>{if(!V3(n))return F.none();const a={text:"",offset:0},u=(b,C,T)=>(a.text=T+a.text,a.offset+=C,xz(a.text,a.offset,o,r).getOr(C)),f=e.getParent(n.startContainer,e.isBlock)||e.getRoot();return H3(e,n.startContainer,n.startOffset,u,f).bind(b=>{const C=n.cloneRange();if(C.setStart(b.container,b.offset),C.setEnd(n.endContainer,n.endOffset),C.collapsed)return F.none();const T=Sz(C);return T.lastIndexOf(o)!==0?F.none():F.some({text:A5(T,o),range:C,trigger:o})})},Tz=e=>e.nodeType===G,Ez=e=>e.nodeType===nd,O5=e=>{if(Tz(e))return xm(e,e.data.length);{const n=e.childNodes;return n.length>0?O5(n[n.length-1]):xm(e,n.length)}},D5=(e,n)=>{const o=e.childNodes;return o.length>0&&n<o.length?D5(o[n],0):o.length>0&&Ez(e)&&o.length===n?O5(o[o.length-1]):xm(e,n)},U3=(e,n)=>{var o;const r=(o=e.getParent(n.container,e.isBlock))!==null&&o!==void 0?o:e.getRoot();return H3(e,n.container,n.offset,(a,u)=>u===0?-1:u,r).filter(a=>{const u=a.container.data.charAt(a.offset-1);return!_5(u)}).isSome()},kz=e=>n=>{const o=D5(n.startContainer,n.startOffset);return!U3(e,o)},R5=(e,n,o)=>Br(o.triggers,r=>z3(e,n,r)),_z=(e,n)=>{const o=n(),r=e.selection.getRng();return R5(e.dom,r,o).bind(a=>M5(e,n,a))},M5=(e,n,o,r={})=>{var a;const u=n(),b=(a=e.selection.getRng().startContainer.nodeValue)!==null&&a!==void 0?a:"",C=Lt(u.lookupByTrigger(o.trigger),M=>o.text.length>=M.minChars&&M.matches.getOrThunk(()=>kz(e.dom))(o.range,b,o.text));if(C.length===0)return F.none();const T=Promise.all(Rn(C,M=>M.fetch(o.text,M.maxResults,r).then($=>({matchText:o.text,items:$,columns:M.columns,onAction:M.onAction,highlightOn:M.highlightOn}))));return F.some({lookupData:T,context:o})};var af;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(af||(af={}));const W3=(e,n,o)=>e.stype===af.Error?n(e.serror):o(e.svalue),Az=e=>{const n=[],o=[];return xe(e,r=>{W3(r,a=>o.push(a),a=>n.push(a))}),{values:n,errors:o}},Oz=(e,n)=>e.stype===af.Error?{stype:af.Error,serror:n(e.serror)}:e,pa=(e,n)=>e.stype===af.Value?{stype:af.Value,svalue:n(e.svalue)}:e,Dz=(e,n)=>e.stype===af.Value?n(e.svalue):e,Rz=(e,n)=>e.stype===af.Error?n(e.serror):e,N5=e=>({stype:af.Value,svalue:e}),Z3=e=>({stype:af.Error,serror:e}),Ac={fromResult:e=>e.fold(Z3,N5),toResult:e=>W3(e,Fc.error,Fc.value),svalue:N5,partition:Az,serror:Z3,bind:Dz,bindError:Rz,map:pa,mapError:Oz,fold:W3},x2=e=>Xe(e)&&Vt(e).length>100?" removed due to size":JSON.stringify(e,null,2),B5=e=>{const n=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:tt("... (only showing first ten failures)")}]):e;return Rn(n,o=>"Failed path: ("+o.path.join(" > ")+`)
`+o.getErrorInfo())},cy=(e,n)=>Ac.serror([{path:e,getErrorInfo:n}]),j3=(e,n,o)=>cy(e,()=>'Could not find valid *required* value for "'+n+'" in '+x2(o)),G3=(e,n)=>cy(e,()=>'Choice schema did not contain choice key: "'+n+'"'),$5=(e,n,o)=>cy(e,()=>'The chosen schema: "'+o+'" did not exist in branches: '+x2(n)),JE=(e,n)=>cy(e,tt(n)),QE=(e,n,o,r)=>Xo(o,r).fold(()=>$5(e,o,r),u=>u.extract(e.concat(["branch: "+r]),n)),T2=(e,n)=>({extract:(a,u)=>Xo(u,e).fold(()=>G3(a,e),b=>QE(a,u,n,b)),toString:()=>"chooseOn("+e+"). Possible values: "+Vt(n)}),E2=(e,n)=>n,Tm=(e,n)=>Zn(e)&&Zn(n)?k2(e,n):n,ay=e=>(...n)=>{if(n.length===0)throw new Error("Can't merge zero objects");const o={};for(let r=0;r<n.length;r++){const a=n[r];for(const u in a)yn(a,u)&&(o[u]=e(o[u],a[u]))}return o},k2=ay(Tm),q3=ay(E2),I5=()=>({tag:"required",process:{}}),L5=e=>({tag:"defaultedThunk",process:e}),F5=e=>L5(tt(e)),Nz=()=>({tag:"option",process:{}}),_2=(e,n)=>e.length>0?Ac.svalue(k2(n,q3.apply(void 0,e))):Ac.svalue(n),H5=e=>A(Ac.serror,st)(e),Pz={consolidateObj:(e,n)=>{const o=Ac.partition(e);return o.errors.length>0?H5(o.errors):_2(o.values,n)},consolidateArr:e=>{const n=Ac.partition(e);return n.errors.length>0?H5(n.errors):Ac.svalue(n.values)}},Bz=(e,n,o,r)=>({tag:"field",key:e,newKey:n,presence:o,prop:r}),$z=(e,n)=>({tag:"custom",newKey:e,instantiator:n}),V5=(e,n,o)=>{switch(e.tag){case"field":return n(e.key,e.newKey,e.presence,e.prop);case"custom":return o(e.newKey,e.instantiator)}},K3=e=>{const n=(r,a)=>Ac.bindError(e(a),u=>JE(r,u)),o=tt("val");return{extract:n,toString:o}},Iz=K3(Ac.svalue),Lz=(e,n,o,r)=>Xo(n,o).fold(()=>j3(e,o,n),r),z5=(e,n,o,r)=>{const a=Xo(e,n).getOrThunk(()=>o(e));return r(a)},Fz=(e,n,o)=>o(Xo(e,n)),Hz=(e,n,o,r)=>{const a=Xo(e,n).map(u=>u===!0?o(e):u);return r(a)},Vz=(e,n,o,r,a)=>{const u=b=>a.extract(n.concat([r]),b),f=b=>b.fold(()=>Ac.svalue(F.none()),C=>{const T=a.extract(n.concat([r]),C);return Ac.map(T,F.some)});switch(e.tag){case"required":return Lz(n,o,r,u);case"defaultedThunk":return z5(o,r,e.process,u);case"option":return Fz(o,r,f);case"defaultedOptionThunk":return Hz(o,r,e.process,f);case"mergeWithThunk":return z5(o,r,tt({}),b=>{const C=k2(e.process(o),b);return u(C)})}},U5=(e,n,o)=>{const r={},a=[];for(const u of o)V5(u,(f,b,C,T)=>{const M=Vz(C,e,n,f,T);Ac.fold(M,P=>{a.push(...P)},P=>{r[b]=P})},(f,b)=>{r[f]=b(n)});return a.length>0?Ac.serror(a):Ac.svalue(r)},ek=e=>({extract:(r,a)=>U5(r,a,e),toString:()=>`obj{
`+Rn(e,a=>V5(a,(u,f,b,C)=>u+" -> "+C.toString(),(u,f)=>"state("+u+")")).join(`
`)+"}"}),Y3=e=>({extract:(r,a)=>{const u=Rn(a,(f,b)=>e.extract(r.concat(["["+b+"]"]),f));return Pz.consolidateArr(u)},toString:()=>"array("+e.toString()+")"}),zz=e=>K3(n=>e(n).fold(Ac.serror,Ac.svalue)),Uz=(e,n,o)=>{const r=n.extract([e],o);return Ac.mapError(r,a=>({input:o,errors:a}))},Wz=(e,n,o)=>Ac.toResult(Uz(e,n,o)),Zz=e=>`Errors: 
`+B5(e.errors).join(`
`)+`

Input object: `+x2(e.input),X3=(e,n)=>T2(e,yo(n,ek)),jz=tt(Iz),A2=(e,n)=>K3(o=>{const r=typeof o;return e(o)?Ac.svalue(o):Ac.serror(`Expected type: ${n} but got: ${r}`)}),Gz=A2(ts,"number"),O2=A2(ee,"string"),W5=A2(xt,"boolean"),J3=A2(ue,"function"),D2=Bz,Z5=$z,qz=e=>zz(n=>Cn(e,n)?Fc.value(n):Fc.error(`Unsupported value: "${n}", choose one of "${e.join(", ")}".`)),Q3=(e,n)=>D2(e,e,I5(),n),j5=e=>Q3(e,O2),G5=e=>Q3(e,J3),q5=(e,n)=>D2(e,e,I5(),Y3(n)),eD=(e,n)=>D2(e,e,Nz(),n),tk=e=>eD(e,O2),K5=e=>eD(e,J3),Kz=(e,n)=>D2(e,e,F5(n),jz()),ly=(e,n,o)=>D2(e,e,F5(n),o),Y5=(e,n)=>ly(e,n,Gz),tD=(e,n)=>ly(e,n,O2),nD=(e,n,o)=>ly(e,n,qz(o)),oD=(e,n)=>ly(e,n,W5),sD=(e,n)=>ly(e,n,J3),Yz=(e,n,o)=>ly(e,n,Y3(o)),Xz=j5("type"),Jz=G5("fetch"),rD=G5("onAction"),Qz=sD("onSetup",()=>Mt),e9=tk("text"),PG=tk("icon"),t9=tk("tooltip"),nk=tk("label"),X5=oD("active",!1),J5=oD("enabled",!0),Q5=oD("primary",!1),eI=e=>Kz("columns",e),iy=e=>tD("type",e),n9=ek([Xz,j5("trigger"),Y5("minChars",1),eI(1),Y5("maxResults",10),K5("matches"),Jz,rD,Yz("highlightOn",[],O2)]),o9=e=>Wz("Autocompleter",n9,e),cD=[J5,t9,PG,e9,Qz,tD("context","mode:design")],aD=[X5].concat(cD),s9=[sD("predicate",je),nD("scope","node",["node","editor"]),nD("position","selection",["node","selection","line"])],lD=cD.concat([iy("contextformbutton"),Q5,rD,Z5("original",Wo)]),r9=aD.concat([iy("contextformbutton"),Q5,rD,Z5("original",Wo)]),c9=cD.concat([iy("contextformbutton")]),a9=aD.concat([iy("contextformtogglebutton")]),tI=X3("type",{contextformbutton:lD,contextformtogglebutton:r9});ek([iy("contextform"),sD("initValue",tt("")),nk,q5("commands",tI),eD("launch",X3("type",{contextformbutton:c9,contextformtogglebutton:a9}))].concat(s9));const l9=e=>{const n=e.ui.registry.getAll().popups,o=yo(n,f=>o9(f).fold(b=>{throw new Error(Zz(b))},Wo)),r=Vl(ta(o,f=>f.trigger)),a=Sa(o);return{dataset:o,triggers:r,lookupByTrigger:f=>Lt(a,b=>b.trigger===f)}},i9=(e,n)=>{const o=_v(n.load,50);e.on("input",r=>{r.inputType==="insertCompositionText"&&!e.composing||o.throttle()}),e.on("keydown",r=>{const a=r.which;a===8?o.throttle():a===27?(o.cancel(),n.cancelIfNecessary()):(a===38||a===40)&&o.cancel()},!0),e.on("remove",o.cancel)},u9=e=>{const n=qc(),o=Rs(!1),r=n.isSet,a=()=>{r()&&(wA(e),o.set(!1),n.clear())},u=P=>{r()||n.set({trigger:P.trigger,matchLength:P.text.length})},f=Fe(()=>l9(e)),b=P=>n.get().map($=>z3(e.dom,e.selection.getRng(),$.trigger,!0).bind(j=>M5(e,f,j,P))).getOrThunk(()=>_z(e,f)),C=P=>{b(P).fold(a,$=>{u($.context),$.lookupData.then(j=>{n.get().map(J=>{const q=$.context;J.trigger===q.trigger&&(n.set({...J,matchLength:q.text.length}),o.get()?(k0(e,{range:q.range}),CA(e,{lookupData:j})):(o.set(!0),k0(e,{range:q.range}),E0(e,{lookupData:j})))})})})},T=(P,$)=>{const j=P.compareBoundaryPoints(window.Range.START_TO_START,$),J=P.compareBoundaryPoints(window.Range.END_TO_END,$);return j>=0&&J<=0},M=()=>n.get().bind(({trigger:P})=>{const $=e.selection.getRng();return z3(e.dom,$,P,o.get()).filter(({range:j})=>T($,j)).map(({range:j})=>j)});e.addCommand("mceAutocompleterReload",(P,$)=>{const j=Xe($)?$.fetchOptions:{};C(j)}),e.addCommand("mceAutocompleterClose",a),e.addCommand("mceAutocompleterRefreshActiveRange",()=>{M().each(P=>{k0(e,{range:P})})}),e.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",()=>M().isSome()),i9(e,{cancelIfNecessary:a,load:C})},d9=U().browser.isSafari(),ba=e=>rm(de.fromDom(e)),lf=(e,n)=>{var o;return e.startOffset===0&&e.endOffset===((o=n.textContent)===null||o===void 0?void 0:o.length)},ok=(e,n)=>F.from(e.getParent(n.container(),"details")),m9=(e,n)=>ok(e,n).isSome(),f9=(e,n)=>{const o=F.from(e.getParent(n.startContainer,"details")),r=F.from(e.getParent(n.endContainer,"details"));if(o.isSome()||r.isSome()){const a=o.bind(u=>F.from(e.select("summary",u)[0]));return F.some({startSummary:a,startDetails:o,endDetails:r})}else return F.none()},g9=(e,n)=>yl(n).exists(o=>o.isEqual(e)),h9=(e,n)=>Ri(n).exists(o=>cs(o.getNode())&&gi(n,o).exists(r=>r.isEqual(e))||o.isEqual(e)),p9=(e,n)=>n.startSummary.exists(o=>g9(e,o)),nI=(e,n)=>n.startSummary.exists(o=>h9(e,o)),uy=(e,n)=>n.startDetails.exists(o=>gi(o,e).forall(r=>n.startSummary.exists(a=>!a.contains(e.container())&&a.contains(r.container())))),$G=(e,n,o)=>o.startDetails.exists(r=>vl(e,n).forall(a=>!r.contains(a.container()))),oI=(e,n)=>{const o=n.getNode();gn(o)||e.selection.setCursorLocation(o,n.offset())},sI=(e,n,o)=>{const r=e.dom.getParent(n.container(),"details");if(r&&!r.open){const a=e.dom.select("summary",r)[0];a&&(o?yl(a):Ri(a)).each(f=>oI(e,f))}else oI(e,n)},uf=(e,n)=>{const o=C=>C.contains(e.startContainer),r=C=>C.contains(e.endContainer),a=n.startSummary.exists(o),u=n.startSummary.exists(r),f=n.startDetails.forall(C=>n.endDetails.forall(T=>C!==T));return(a||u)&&!(a&&u)||f},rI=(e,n,o)=>{const{dom:r,selection:a}=e,u=e.getBody();if(o==="character"){const f=He.fromRangeStart(a.getRng()),b=r.getParent(f.container(),r.isBlock),C=ok(r,f),T=b&&r.isEmpty(b),M=W(b==null?void 0:b.previousSibling),P=W(b==null?void 0:b.nextSibling);return T&&(n?P:M)&&Xf(!n,u,f).exists(J=>m9(r,J)&&!rc(C,ok(r,J)))?!0:Xf(n,u,f).fold(je,$=>{const j=ok(r,$);if(m9(r,$)&&!rc(C,j)){if(n||sI(e,$,!1),b&&T){if(n&&M)return!0;if(!n&&P)return!0;sI(e,$,n),e.dom.remove(b)}return!0}else return!1})}else return!1},b9=(e,n,o,r)=>{const u=e.selection.getRng(),f=He.fromRangeStart(u),b=e.getBody();return r==="selection"?uf(u,n):o?nI(f,n)||$G(b,f,n):p9(f,n)||uy(f,n)},cI=(e,n,o)=>f9(e.dom,e.selection.getRng()).fold(()=>rI(e,n,o),r=>b9(e,r,n,o)||rI(e,n,o)),v9=(e,n,o)=>{const r=e.selection,a=r.getNode(),u=r.getRng(),f=He.fromRangeStart(u);return Xd(a)?(o==="selection"&&lf(u,a)||uN(n,f,a)?ba(a):e.undoManager.transact(()=>{const b=r.getSel();let{anchorNode:C,anchorOffset:T,focusNode:M,focusOffset:P}=b??{};const $=()=>{Oe(C)&&Oe(T)&&Oe(M)&&Oe(P)&&(b==null||b.setBaseAndExtent(C,T,M,P))},j=()=>{C=b==null?void 0:b.anchorNode,T=b==null?void 0:b.anchorOffset,M=b==null?void 0:b.focusNode,P=b==null?void 0:b.focusOffset},J=(oe,me)=>{xe(oe.childNodes,we=>{dh(we)&&me.appendChild(we)})},q=e.dom.create("span",{"data-mce-bogus":"1"});J(a,q),a.appendChild(q),$(),(o==="word"||o==="line")&&(b==null||b.modify("extend",n?"right":"left",o)),!r.isCollapsed()&&lf(r.getRng(),q)?ba(a):(e.execCommand(n?"ForwardDelete":"Delete"),j(),J(q,a),$()),e.dom.remove(q)}),!0):!1},Mh=(e,n,o)=>cI(e,n,o)||d9&&v9(e,n,o)?F.some(Mt):F.none(),df=e=>(n,o,r={})=>{const a=n.getBody(),u={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:a,currentTarget:a,eventPhase:Event.AT_TARGET,originalTarget:a,explicitOriginalTarget:a,isTrusted:!1,srcElement:a,cancelable:!1,preventDefault:Mt,inputType:o},f=Ly(new InputEvent(e));return n.dispatch(e,{...f,...u,...r})},dy=df("input"),R2=df("beforeinput"),aI=U(),M2=aI.os,sk=M2.isMacOS()||M2.isiOS(),lI=aI.browser.isFirefox(),C9=(e,n,o)=>{const r=o.keyCode===Wt.BACKSPACE?"deleteContentBackward":"deleteContentForward",a=e.selection.isCollapsed(),u=a?"character":"selection",f=b=>a?b?"word":"line":"selection";XV([{keyCode:Wt.BACKSPACE,action:Xn(K$,e)},{keyCode:Wt.BACKSPACE,action:Xn(XO,e,!1)},{keyCode:Wt.DELETE,action:Xn(XO,e,!0)},{keyCode:Wt.BACKSPACE,action:Xn(WO,e,!1)},{keyCode:Wt.DELETE,action:Xn(WO,e,!0)},{keyCode:Wt.BACKSPACE,action:Xn(m3,e,n,!1)},{keyCode:Wt.DELETE,action:Xn(m3,e,n,!0)},{keyCode:Wt.BACKSPACE,action:Xn(ET,e,!1)},{keyCode:Wt.DELETE,action:Xn(ET,e,!0)},{keyCode:Wt.BACKSPACE,action:Xn(Mh,e,!1,u)},{keyCode:Wt.DELETE,action:Xn(Mh,e,!0,u)},...sk?[{keyCode:Wt.BACKSPACE,altKey:!0,action:Xn(Mh,e,!1,f(!0))},{keyCode:Wt.DELETE,altKey:!0,action:Xn(Mh,e,!0,f(!0))},{keyCode:Wt.BACKSPACE,metaKey:!0,action:Xn(Mh,e,!1,f(!1))}]:[{keyCode:Wt.BACKSPACE,ctrlKey:!0,action:Xn(Mh,e,!1,f(!0))},{keyCode:Wt.DELETE,ctrlKey:!0,action:Xn(Mh,e,!0,f(!0))}],{keyCode:Wt.BACKSPACE,action:Xn(DE,e,!1)},{keyCode:Wt.DELETE,action:Xn(DE,e,!0)},{keyCode:Wt.BACKSPACE,action:Xn(y3,e,!1)},{keyCode:Wt.DELETE,action:Xn(y3,e,!0)},{keyCode:Wt.BACKSPACE,action:Xn(EE,e,!1)},{keyCode:Wt.DELETE,action:Xn(EE,e,!0)},{keyCode:Wt.BACKSPACE,action:Xn(i2,e,!1)},{keyCode:Wt.DELETE,action:Xn(i2,e,!0)},{keyCode:Wt.BACKSPACE,action:Xn(j$,e,!1)},{keyCode:Wt.DELETE,action:Xn(j$,e,!0)},{keyCode:Wt.BACKSPACE,action:Xn(AE,e,!1)},{keyCode:Wt.DELETE,action:Xn(AE,e,!0)}],o).filter(b=>e.selection.isEditable()).each(b=>{o.preventDefault(),R2(e,r).isDefaultPrevented()||(b(),dy(e,r))})},w9=(e,n,o)=>sy([{keyCode:Wt.BACKSPACE,action:Xn(_E,e)},{keyCode:Wt.DELETE,action:Xn(_E,e)},...sk?[{keyCode:Wt.BACKSPACE,altKey:!0,action:Xn(y2,e)},{keyCode:Wt.DELETE,altKey:!0,action:Xn(y2,e)},...o?[{keyCode:lI?224:91,action:Xn(y2,e)}]:[]]:[{keyCode:Wt.BACKSPACE,ctrlKey:!0,action:Xn(y2,e)},{keyCode:Wt.DELETE,ctrlKey:!0,action:Xn(y2,e)}]],n),S9=(e,n)=>{let o=!1;e.on("keydown",r=>{o=r.keyCode===Wt.BACKSPACE,r.isDefaultPrevented()||C9(e,n,r)}),e.on("keyup",r=>{r.isDefaultPrevented()||w9(e,r,o),o=!1})},x9=e=>{for(;e;){if($t(e)||dt(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null},my=(e,n)=>{const o=e.dom,r=e.schema.getMoveCaretBeforeOnEnterElements();if(!n)return;if(/^(LI|DT|DD)$/.test(n.nodeName)){const u=x9(n.firstChild);u&&/^(UL|OL|DL)$/.test(u.nodeName)&&n.insertBefore(o.doc.createTextNode($c),n.firstChild)}const a=o.createRng();if(n.normalize(),n.hasChildNodes()){const u=new Bc(n,n);let f=n,b;for(;b=u.current();){if(dt(b)){a.setStart(b,0),a.setEnd(b,0);break}if(r[b.nodeName.toLowerCase()]){a.setStartBefore(b),a.setEndBefore(b);break}f=b,b=u.next()}b||(a.setStart(f,0),a.setEnd(f,0))}else cs(n)?n.nextSibling&&o.isBlock(n.nextSibling)?(a.setStartBefore(n),a.setEndBefore(n)):(a.setStartAfter(n),a.setEndAfter(n)):(a.setStart(n,0),a.setEnd(n,0));e.selection.setRng(a),wh(e,a)},fy=(e,n)=>{const o=e.getRoot();let r,a=n;for(;a!==o&&a&&e.getContentEditable(a)!=="false";){if(e.getContentEditable(a)==="true"){r=a;break}a=a.parentNode}return a!==o?r:o},iD=e=>F.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),T9=e=>iD(e).fold(tt(""),n=>n.nodeName.toUpperCase()),E9=e=>iD(e).filter(n=>Zg(de.fromDom(n))).isSome(),uD=e=>{e.innerHTML='<br data-mce-bogus="1">'},k9=(e,n,o)=>{const r=e.dom;F.from(o.style).map(r.parseStyle).each(C=>{const M={...fl(de.fromDom(n)),...C};r.setStyles(n,M)});const a=F.from(o.class).map(C=>C.split(/\s+/)),u=F.from(n.className).map(C=>Lt(C.split(/\s+/),T=>T!==""));Gn(a,u,(C,T)=>{const M=Lt(T,$=>!Cn(C,$)),P=[...C,...M];r.setAttrib(n,"class",P.join(" "))});const f=["style","class"],b=os(o,(C,T)=>!Cn(f,T));r.setAttribs(n,b)},gy=(e,n)=>{if(Wa(e).toLowerCase()===n.tagName.toLowerCase()){const r=Wf(e);k9(e,n,r)}},dD=(e,n,o,r,a=!0,u,f)=>{const b=e.dom,C=e.schema,T=Wa(e),M=o?o.nodeName.toUpperCase():"";let P=n;const $=C.getTextInlineElements();let j;u||M==="TABLE"||M==="HR"?j=b.create(u||T,f||{}):j=o.cloneNode(!1);let J=j;if(!a)b.setAttrib(j,"style",null),b.setAttrib(j,"class",null);else do if($[P.nodeName]){if(Mi(P)||hi(P))continue;const q=P.cloneNode(!1);b.setAttrib(q,"id",""),j.hasChildNodes()?(q.appendChild(j.firstChild),j.appendChild(q)):(J=q,j.appendChild(q))}while((P=P.parentNode)&&P!==r);return gy(e,j),uD(J),j},_9=(e,n)=>e.dom.getParent(n,k1),A9=(e,n,o)=>{let r=n;for(;r&&r!==e&&W(r.nextSibling);){const a=r.parentElement;if(!a||!o(a))return k1(a);r=a}return!1},IG=(e,n,o)=>!n&&o.nodeName.toLowerCase()===Wa(e)&&e.dom.isEmpty(o)&&A9(e.getBody(),o,r=>yn(e.schema.getTextBlockElements(),r.nodeName.toLowerCase())),mD=(e,n,o)=>{var r,a,u;const f=n(Wa(e)),b=_9(e,o);b&&(e.dom.insertAfter(f,b),my(e,f),((u=(a=(r=o.parentElement)===null||r===void 0?void 0:r.childNodes)===null||a===void 0?void 0:a.length)!==null&&u!==void 0?u:0)>1&&e.dom.remove(o))},O9=(e,n)=>e.firstChild&&e.firstChild.nodeName===n,D9=e=>{var n;return((n=e.parentNode)===null||n===void 0?void 0:n.firstChild)===e},iI=(e,n)=>{const o=e==null?void 0:e.parentNode;return Oe(o)&&o.nodeName===n},fD=e=>Oe(e)&&/^(OL|UL|LI)$/.test(e.nodeName),gD=e=>Oe(e)&&/^(LI|DT|DD)$/.test(e.nodeName),uI=e=>fD(e)&&fD(e.parentNode),rk=e=>{const n=e.parentNode;return gD(n)?n:e},ck=(e,n,o)=>{let r=e[o?"firstChild":"lastChild"];for(;r&&!$t(r);)r=r[o?"nextSibling":"previousSibling"];return r===n},R9=e=>Ho(ta(fl(de.fromDom(e)),(n,o)=>`${o}: ${n};`),(n,o)=>n+o,""),Ll=(e,n,o,r,a)=>{const u=e.dom,f=e.selection.getRng(),b=o.parentNode;if(o===e.getBody()||!b)return;uI(o)&&(a="LI");const C=gD(r)?R9(r):void 0;let T=gD(r)&&C?n(a,{style:R9(r)}):n(a);if(ck(o,r,!0)&&ck(o,r,!1))if(iI(o,"LI")){const M=rk(o);u.insertAfter(T,M),D9(o)?u.remove(M):u.remove(o)}else u.replace(T,o);else if(ck(o,r,!0))iI(o,"LI")?(u.insertAfter(T,rk(o)),T.appendChild(u.doc.createTextNode(" ")),T.appendChild(o)):b.insertBefore(T,o),u.remove(r);else if(ck(o,r,!1))u.insertAfter(T,rk(o)),u.remove(r);else{o=rk(o);const M=f.cloneRange();M.setStartAfter(r),M.setEndAfter(o);const P=M.extractContents();if(a==="LI"&&O9(P,"LI")){const $=Lt(Rn(T.children,de.fromDom),vo(Mc("br")));T=P.firstChild,u.insertAfter(P,o),xe($,j=>ud(de.fromDom(T),j)),C&&T.setAttribute("style",C)}else u.insertAfter(P,o),u.insertAfter(T,o);u.remove(r)}my(e,T)},M9=e=>{xe(Tg(de.fromDom(e),ws),n=>{const o=n.dom;o.nodeValue=eu(o.data)})},N9=(e,n)=>{const o=e.dom.getParent(n,"ol,ul,dl");return o!==null&&e.dom.getContentEditableParent(o)==="false"},P9=(e,n)=>n&&n.nodeName==="A"&&e.isEmpty(n),hD=(e,n)=>e.nodeName===n||e.previousSibling&&e.previousSibling.nodeName===n,B9=(e,n)=>e.nodeName===n||e.nextSibling&&e.nextSibling.nodeName===n,pD=(e,n)=>Oe(n)&&e.isBlock(n)&&!/^(TD|TH|CAPTION|FORM)$/.test(n.nodeName)&&!/^(fixed|absolute)/i.test(n.style.position)&&e.isEditable(n.parentNode)&&e.getContentEditable(n)!=="false",$9=(e,n,o)=>{var r;const a=[];if(!o)return;let u=o;for(;u=u.firstChild;){if(e.isBlock(u))return;$t(u)&&!n[u.nodeName.toLowerCase()]&&a.push(u)}let f=a.length;for(;f--;)u=a[f],(!u.hasChildNodes()||u.firstChild===u.lastChild&&((r=u.firstChild)===null||r===void 0?void 0:r.nodeValue)===""||P9(e,u))&&e.remove(u)},hy=(e,n,o)=>dt(n)?e?o===1&&n.data.charAt(o-1)===Kc?0:o:o===n.data.length-1&&n.data.charAt(o)===Kc?n.data.length:o:o,I9=e=>{const n=e.cloneRange();return n.setStart(e.startContainer,hy(!0,e.startContainer,e.startOffset)),n.setEnd(e.endContainer,hy(!1,e.endContainer,e.endOffset)),n},L9=e=>{let n=e;do dt(n)&&(n.data=n.data.replace(/^[\r\n]+/,"")),n=n.firstChild;while(n)},bD=(e,n,o,r,a)=>{var u,f;const b=e.dom,C=(u=fy(b,r))!==null&&u!==void 0?u:b.getRoot();let T=b.getParent(r,b.isBlock);if(!T||!pD(b,T)){if(T=T||C,!T.hasChildNodes()){const j=b.create(n);return gy(e,j),T.appendChild(j),o.setStart(j,0),o.setEnd(j,0),j}let M=r;for(;M&&M.parentNode!==T;)M=M.parentNode;let P;for(;M&&!b.isBlock(M);)P=M,M=M.previousSibling;const $=(f=P==null?void 0:P.parentElement)===null||f===void 0?void 0:f.nodeName;if(P&&$&&e.schema.isValidChild($,n.toLowerCase())){const j=P.parentNode,J=b.create(n);for(gy(e,J),j.insertBefore(J,P),M=P;M&&!b.isBlock(M);){const q=M.nextSibling;J.appendChild(M),M=q}o.setStart(r,a),o.setEnd(r,a)}}return r},vD=(e,n)=>{n.normalize();const o=n.lastChild;(!o||$t(o)&&/^(left|right)$/gi.test(e.getStyle(o,"float",!0)))&&e.add(n,"br")},F9=(e,n)=>{const o=Vc(e);return dn(n)?!1:ee(o)?Cn(it.explode(o),n.nodeName.toLowerCase()):o},H9={insert:(e,n)=>{let o,r,a,u,f=!1;const b=e.dom,C=e.schema,T=C.getNonEmptyElements(),M=e.selection.getRng(),P=Wa(e),$=de.fromDom(M.startContainer),j=Ka($,M.startOffset),J=j.exists(rt=>Oo(rt)&&!Al(rt)),q=M.collapsed&&J,oe=(rt,qt)=>dD(e,o,wt,nt,Hc(e),rt,qt),me=rt=>{const qt=hy(rt,o,r);if(dt(o)&&(rt?qt>0:qt<o.data.length))return!1;if((o.parentNode===wt||o===wt)&&f&&!rt||rt&&$t(o)&&o===wt.firstChild)return!0;if(hD(o,"TABLE")||hD(o,"HR"))return B9(o,"BR")?!rt:f&&!rt||!f&&rt;const Sn=new Bc(o,wt);dt(o)&&(rt&&qt===0?Sn.prev():!rt&&qt===o.data.length&&Sn.next());let ko;for(;ko=Sn.current();){if($t(ko)){if(!ko.getAttribute("data-mce-bogus")){const _o=ko.nodeName.toLowerCase();if(T[_o]&&_o!=="br")return!1}}else if(dt(ko)&&!Kl(ko.data))return!1;rt?Sn.prev():Sn.next()}return!0},we=()=>{let rt;return/^(H[1-6]|PRE|FIGURE)$/.test(a)&&Zt!=="HGROUP"?rt=oe(P):rt=oe(),F9(e,u)&&pD(b,u)&&b.isEmpty(wt,void 0,{includeZwsp:!0})?rt=b.split(u,wt):b.insertAfter(rt,wt),my(e,rt),rt};Rt(b,M).each(rt=>{M.setStart(rt.startContainer,rt.startOffset),M.setEnd(rt.endContainer,rt.endOffset)}),o=M.startContainer,r=M.startOffset;const Se=!!(n&&n.shiftKey),_e=!!(n&&n.ctrlKey);$t(o)&&o.hasChildNodes()&&!q&&(f=r>o.childNodes.length-1,o=o.childNodes[Math.min(r,o.childNodes.length-1)]||o,f&&dt(o)?r=o.data.length:r=0);const nt=fy(b,o);if(!nt||N9(e,o))return;Se||(o=bD(e,P,M,o,r));let wt=b.getParent(o,b.isBlock)||b.getRoot();u=Oe(wt==null?void 0:wt.parentNode)?b.getParent(wt.parentNode,b.isBlock):null,a=wt?wt.nodeName.toUpperCase():"";const Zt=u?u.nodeName.toUpperCase():"";if(Zt==="LI"&&!_e){const rt=u;wt=rt,u=rt.parentNode,a=Zt}if($t(u)&&IG(e,Se,wt))return mD(e,oe,wt);if(/^(LI|DT|DD)$/.test(a)&&$t(u)&&b.isEmpty(wt)){Ll(e,oe,u,wt,P);return}if(!q&&(wt===e.getBody()||!pD(b,wt)))return;const We=wt.parentNode;let Pe;if(q)Pe=oe(P),j.fold(()=>{fc($,de.fromDom(Pe))},rt=>{Ds(rt,de.fromDom(Pe))}),e.selection.setCursorLocation(Pe,0);else if(Ff(wt))Pe=mp(wt),b.isEmpty(wt)&&uD(wt),gy(e,Pe),my(e,Pe);else if(me(!1))Pe=we();else if(me(!0)&&We){const rt=He.fromRangeStart(M),qt=JA(rt),Sn=de.fromDom(wt),_o=dT(Sn,rt,e.schema)?Vn(Sn,rt,e.schema).bind(_s=>F.from(_s.getNode())):F.none();Pe=We.insertBefore(oe(),wt);const ps=hD(wt,"HR")||qt?Pe:_o.getOr(wt);my(e,ps)}else{const rt=I9(M).cloneRange();rt.setEndAfter(wt);const qt=rt.extractContents();M9(qt),L9(qt),Pe=qt.firstChild,b.insertAfter(qt,wt),$9(b,T,Pe),vD(b,wt),b.isEmpty(wt)&&uD(wt),Pe.normalize(),b.isEmpty(Pe)?(b.remove(Pe),we()):(gy(e,Pe),my(e,Pe))}b.setAttrib(Pe,"id",""),e.dispatch("NewBlock",{newBlock:Pe})},fakeEventName:"insertParagraph"},V9=(e,n,o)=>{const r=new Bc(n,o);let a;const u=e.getNonEmptyElements();for(;a=r.next();)if(u[a.nodeName.toLowerCase()]||dt(a)&&a.length>0)return!0;return!1},dI=(e,n,o)=>{const r=e.dom.createRng();o?(r.setStartBefore(n),r.setEndBefore(n)):(r.setStartAfter(n),r.setEndAfter(n)),e.selection.setRng(r),wh(e,r)},LG=(e,n)=>{const o=e.selection,r=e.dom,a=o.getRng();let u,f=!1;Rt(r,a).each(j=>{a.setStart(j.startContainer,j.startOffset),a.setEnd(j.endContainer,j.endOffset)});let b=a.startOffset,C=a.startContainer;if($t(C)&&C.hasChildNodes()){const j=b>C.childNodes.length-1;C=C.childNodes[Math.min(b,C.childNodes.length-1)]||C,j&&dt(C)?b=C.data.length:b=0}let T=r.getParent(C,r.isBlock);const M=T&&T.parentNode?r.getParent(T.parentNode,r.isBlock):null,P=M?M.nodeName.toUpperCase():"",$=!!(n&&n.ctrlKey);P==="LI"&&!$&&(T=M),dt(C)&&b>=C.data.length&&(V9(e.schema,C,T||r.getRoot())||(u=r.create("br"),a.insertNode(u),a.setStartAfter(u),a.setEndAfter(u),f=!0)),u=r.create("br"),W1(r,a,u),dI(e,u,f),e.undoManager.add()},z9=(e,n)=>{const o=de.fromTag("br");Ds(de.fromDom(n),o),e.undoManager.add()},mf=(e,n)=>{mI(e.getBody(),n)||Gl(de.fromDom(n),de.fromTag("br"));const o=de.fromTag("br");Gl(de.fromDom(n),o),dI(e,o.dom,!1),e.undoManager.add()},U9=e=>cs(e.getNode()),mI=(e,n)=>U9(He.after(n))?!0:vl(e,He.after(n)).map(o=>cs(o.getNode())).getOr(!1),fI=e=>e&&e.nodeName==="A"&&"href"in e,W9=e=>e.fold(je,fI,fI,je),Z9=e=>{const n=Je(kb,e),o=He.fromRangeStart(e.selection.getRng());return Md(n,e.getBody(),o).filter(W9)},j9=(e,n)=>{n.fold(Mt,Je(z9,e),Je(mf,e),Mt)},gI={insert:(e,n)=>{const o=Z9(e);o.isSome()?o.each(Je(j9,e)):LG(e,n)},fakeEventName:"insertLineBreak"},ak=(e,n)=>iD(e).filter(o=>n.length>0&&ml(de.fromDom(o),n)).isSome(),hI=e=>ak(e,eh(e)),lk=e=>ak(e,P_(e)),qu=ou.generate([{br:[]},{block:[]},{none:[]}]),G9=(e,n)=>lk(e),pI=e=>(n,o)=>E9(n)===e,bI=(e,n)=>(o,r)=>T9(o)===e.toUpperCase()===n,q9=e=>{const n=fy(e.dom,e.selection.getStart());return dn(n)},py=e=>bI("pre",e),K9=()=>bI("summary",!0),N2=e=>(n,o)=>zS(n)===e,vI=(e,n)=>hI(e),ik=(e,n)=>n,Y9=e=>{const n=Wa(e),o=fy(e.dom,e.selection.getStart());return Oe(o)&&e.schema.isValidChild(o.nodeName,n)},yD=e=>{const n=e.selection.getRng(),o=de.fromDom(n.startContainer),a=Ka(o,n.startOffset).map(u=>Oo(u)&&!Al(u));return n.collapsed&&a.getOr(!0)},Bd=(e,n)=>(o,r)=>Ho(e,(u,f)=>u&&f(o,r),!0)?F.some(n):F.none(),X9=(e,n)=>f$([Bd([G9],qu.none()),Bd([py(!0),q9],qu.none()),Bd([K9()],qu.br()),Bd([py(!0),N2(!1),ik],qu.br()),Bd([py(!0),N2(!1)],qu.block()),Bd([py(!0),N2(!0),ik],qu.block()),Bd([py(!0),N2(!0)],qu.br()),Bd([pI(!0),ik],qu.br()),Bd([pI(!0)],qu.block()),Bd([vI],qu.br()),Bd([ik],qu.br()),Bd([Y9],qu.block()),Bd([yD],qu.block())],[e,!!(n&&n.shiftKey)]).getOr(qu.none()),tv=(e,n,o)=>{n.mode.isReadOnly()||(n.selection.isCollapsed()||V6(n),!(Oe(o)&&R2(n,e.fakeEventName).isDefaultPrevented())&&(e.insert(n,o),Oe(o)&&dy(n,e.fakeEventName)))},yI=(e,n)=>{if(e.mode.isReadOnly())return;const o=()=>tv(gI,e,n),r=()=>tv(H9,e,n),a=X9(e,n);switch(pC(e)){case"linebreak":a.fold(o,o,Mt);break;case"block":a.fold(r,r,Mt);break;case"invert":a.fold(r,o,Mt);break;default:a.fold(o,r,Mt);break}},uk=U(),CD=uk.os.isiOS()&&uk.browser.isSafari(),wD=(e,n)=>{n.isDefaultPrevented()||(n.preventDefault(),lg(e.undoManager),e.undoManager.transact(()=>{yI(e,n)}))},J9=e=>{if(!e.collapsed)return!1;const n=e.startContainer;if(dt(n)){const o=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,r=n.data.charAt(e.startOffset-1);return o.test(r)}else return!1},VG=e=>{let n=F.none();const o=a=>{n=F.some(a.selection.getBookmark()),a.undoManager.add()},r=(a,u)=>{a.undoManager.undo(),n.fold(Mt,f=>a.selection.moveToBookmark(f)),wD(a,u),n=F.none()};e.on("keydown",a=>{a.keyCode===Wt.ENTER&&(CD&&J9(e.selection.getRng())?o(e):wD(e,a))}),e.on("keyup",a=>{a.keyCode===Wt.ENTER&&n.each(()=>r(e,a))})},i1=(e,n,o)=>{const r=nn.os.isMacOS()||nn.os.isiOS();sy([{keyCode:Wt.END,action:Xn(c5,e,!0)},{keyCode:Wt.HOME,action:Xn(c5,e,!1)},...r?[]:[{keyCode:Wt.HOME,action:Xn(l1,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:Wt.END,action:Xn(l1,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:Wt.END,action:Xn(d5,e,!0)},{keyCode:Wt.HOME,action:Xn(d5,e,!1)},{keyCode:Wt.END,action:Xn(LE,e,!0,n)},{keyCode:Wt.HOME,action:Xn(LE,e,!1,n)}],o).each(a=>{o.preventDefault()})},Q9=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||i1(e,n,o)})},eU=e=>{e.on("input",n=>{n.isComposing||QM(e)})},tU=U(),dk=(e,n,o)=>{sy([{keyCode:Wt.PAGE_UP,action:Xn(LE,e,!1,n)},{keyCode:Wt.PAGE_DOWN,action:Xn(LE,e,!0,n)}],o)},SD=e=>e.stopImmediatePropagation(),xD=e=>e.keyCode===Wt.PAGE_UP||e.keyCode===Wt.PAGE_DOWN,CI=(e,n,o)=>{o&&!e.get()?n.on("NodeChange",SD,!0):!o&&e.get()&&n.off("NodeChange",SD),e.set(o)},wI=(e,n)=>{if(tU.os.isMacOS())return;const o=Rs(!1);e.on("keydown",r=>{xD(r)&&CI(o,e,!0)}),e.on("keyup",r=>{r.isDefaultPrevented()||dk(e,n,r),xD(r)&&o.get()&&(CI(o,e,!1),e.nodeChanged())})},nU=e=>{e.on("beforeinput",n=>{(!e.selection.isEditable()||So(n.getTargetRanges(),o=>!ZA(e.dom,o)))&&n.preventDefault()})},SI=(e,n)=>{const o=n.container(),r=n.offset();return dt(o)?(o.insertData(r,e),F.some(He(o,r+e.length))):cb(n).map(a=>{const u=de.fromText(e);return n.isAtEnd()?Gl(a,u):Ds(a,u),He(u.dom,e.length)})},xI=Je(SI,$c),mk=Je(SI," "),TD=(e,n,o)=>qM(e,n,o)?xI(n):mk(n),oU=e=>n=>n.fold(o=>gi(e.dom,He.before(o)),o=>yl(o),o=>Ri(o),o=>vl(e.dom,He.after(o))),ED=(e,n,o)=>r=>qM(e,r,o)?xI(n):mk(n),kD=e=>n=>{e.selection.setRng(n.toRange()),e.nodeChanged()},fk=(e,n)=>e.isEditable(e.getParent(n,"summary")),TI=e=>{const n=He.fromRangeStart(e.selection.getRng()),o=de.fromDom(e.getBody());if(e.selection.isCollapsed()){const r=Je(kb,e),a=He.fromRangeStart(e.selection.getRng());return Md(r,e.getBody(),a).bind(oU(o)).map(u=>()=>ED(o,n,e.schema)(u).each(kD(e)))}else return F.none()},EI=e=>{const n=()=>{const o=de.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete");const r=He.fromRangeStart(e.selection.getRng());TD(o,r,e.schema).each(kD(e))};return qa(nn.browser.isFirefox()&&e.selection.isEditable()&&fk(e.dom,e.selection.getRng().startContainer),n)},sU=(e,n)=>{XV([{keyCode:Wt.SPACEBAR,action:Xn(TI,e)},{keyCode:Wt.SPACEBAR,action:Xn(EI,e)}],n).each(o=>{n.preventDefault(),R2(e,"insertText",{data:" "}).isDefaultPrevented()||(o(),dy(e,"insertText",{data:" "}))})},rU=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||sU(e,n)})},gk=e=>G_(e)?[{keyCode:Wt.TAB,action:Xn(qE,e,!0)},{keyCode:Wt.TAB,shiftKey:!0,action:Xn(qE,e,!1)}]:[],kI=(e,n)=>{sy([...gk(e)],n).each(o=>{n.preventDefault()})},cU=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||kI(e,n)})},aU=e=>{if(e.addShortcut("Meta+P","","mcePrint"),u9(e),ig(e))return Rs(null);{const n=pV(e);return nU(e),VV(e),E5(e,n),S9(e,n),VG(e),rU(e),eU(e),cU(e),Q9(e,n),wI(e,n),n}};class _I{constructor(n){this.lastPath=[],this.editor=n;let o;const r=this;"onselectionchange"in n.getDoc()||n.on("NodeChange click mouseup keyup focus",a=>{const u=n.selection.getRng(),f={startContainer:u.startContainer,startOffset:u.startOffset,endContainer:u.endContainer,endOffset:u.endOffset};(a.type==="nodechange"||!v(f,o))&&n.dispatch("SelectionChange"),o=f}),n.on("contextmenu",()=>{mw(n),n.dispatch("SelectionChange")}),n.on("SelectionChange",()=>{const a=n.selection.getStart(!0);a&&g0(n)&&!r.isSameElementPath(a)&&n.dom.isChildOf(a,n.getBody())&&n.nodeChanged({selectionChange:!0})}),n.on("mouseup",a=>{!a.isDefaultPrevented()&&g0(n)&&(n.selection.getNode().nodeName==="IMG"?Hu.setEditorTimeout(n,()=>{n.nodeChanged()}):n.nodeChanged())})}nodeChanged(n={}){const o=this.editor,r=o.selection;let a;if(o.initialized&&r&&!F_(o)){const u=o.getBody();a=r.getStart(!0)||u,(a.ownerDocument!==o.getDoc()||!o.dom.isChildOf(a,u))&&(a=u);const f=[];o.dom.getParent(a,b=>b===u?!0:(f.push(b),!1)),o.dispatch("NodeChange",{...n,element:a,parents:f})}}isSameElementPath(n){let o;const r=this.editor,a=mn(r.dom.getParents(n,gt,r.getBody()));if(a.length===this.lastPath.length){for(o=a.length;o>=0&&a[o]===this.lastPath[o];o--);if(o===-1)return this.lastPath=a,!0}return this.lastPath=a,!1}}const AI=lp("image"),lU=e=>{const n=e;return F.from(n[AI])},iU=(e,n)=>{const o=e;o[AI]=n},_D=lp("event"),uU=e=>{const n=e;return F.from(n[_D])},P2=e=>n=>{const o=n;o[_D]=e},dU=(e,n)=>P2(n)(e),AD=P2(0),mU=P2(2),fU=P2(1),gU=(e=>n=>{const o=n;return F.from(o[_D]).exists(r=>r===e)})(0),hU=()=>Object.freeze({length:0,item:e=>null}),u1=lp("mode"),pU=e=>{const n=e;return F.from(n[u1])},hk=e=>n=>{const o=n;o[u1]=e},OD=(e,n)=>hk(n)(e),OI=hk(0),DD=hk(2),bU=hk(1),RD=e=>n=>{const o=n;return F.from(o[u1]).exists(r=>r===e)},by=RD(0),DI=RD(1),UG=(e,n)=>({...n,get length(){return n.length},add:(o,r)=>{if(by(e))if(ee(o)){if(!gn(r))return n.add(o,r)}else return n.add(o);return null},remove:o=>{by(e)&&n.remove(o)},clear:()=>{by(e)&&n.clear()}}),pk=["none","copy","link","move"],vU=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],MD=()=>{const e=new window.DataTransfer;let n="move",o="all";const r={get dropEffect(){return n},set dropEffect(a){Cn(pk,a)&&(n=a)},get effectAllowed(){return o},set effectAllowed(a){gU(r)&&Cn(vU,a)&&(o=a)},get items(){return UG(r,e.items)},get files(){return DI(r)?hU():e.files},get types(){return e.types},setDragImage:(a,u,f)=>{by(r)&&(iU(r,{image:a,x:u,y:f}),e.setDragImage(a,u,f))},getData:a=>DI(r)?"":e.getData(a),setData:(a,u)=>{by(r)&&e.setData(a,u)},clearData:a=>{by(r)&&e.clearData(a)}};return OI(r),r},yU=e=>{const n=MD(),o=pU(e);return DD(e),AD(n),n.dropEffect=e.dropEffect,n.effectAllowed=e.effectAllowed,lU(e).each(r=>n.setDragImage(r.image,r.x,r.y)),xe(e.types,r=>{r!=="Files"&&n.setData(r,e.getData(r))}),xe(e.files,r=>n.items.add(r)),uU(e).each(r=>{dU(n,r)}),o.each(r=>{OD(e,r),OD(n,r)}),n},CU=e=>{const n=e.getData("text/html");return n===""?F.none():F.some(n)},RI=(e,n)=>e.setData("text/html",n),MI="x-tinymce/html",bk=tt(MI),ND="<!-- "+MI+" -->",wU=e=>ND+e,SU=e=>e.replace(ND,""),NI=e=>e.indexOf(ND)!==-1,xU=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),TU=(e,n)=>{let o="<"+e;const r=ta(n,(a,u)=>u+'="'+Df.encodeAllRaw(a)+'"');return r.length&&(o+=" "+r.join(" ")),o+">"},sr=(e,n,o)=>{const r=e.split(/\n\n/),a=TU(n,o),u="</"+n+">",f=Rn(r,C=>C.split(/\n/).join("<br />")),b=C=>a+C+u;return f.length===1?f[0]:Rn(f,b).join("")},PI="%MCEPASTEBIN%",BI=(e,n)=>{const{dom:o,selection:r}=e,a=e.getBody();n.set(r.getRng());const u=o.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},PI);nn.browser.isFirefox()&&o.setStyle(u,"left",o.getStyle(a,"direction",!0)==="rtl"?65535:-65535),o.bind(u,"beforedeactivate focusin focusout",f=>{f.stopPropagation()}),u.focus(),r.select(u,!0)},EU=(e,n)=>{const o=e.dom;if(B2(e)){let r;const a=n.get();for(;r=B2(e);)o.remove(r),o.unbind(r);a&&e.selection.setRng(a)}n.set(null)},B2=e=>e.dom.get("mcepastebin"),$I=e=>Oe(e)&&e.id==="mcepastebin",kU=e=>{const n=e.dom,o=(f,b)=>{f.appendChild(b),n.remove(b,!0)},[r,...a]=Lt(e.getBody().childNodes,$I);xe(a,f=>{o(r,f)});const u=n.select("div[id=mcepastebin]",r);for(let f=u.length-1;f>=0;f--){const b=n.create("div");r.insertBefore(b,u[f]),o(b,u[f])}return r?r.innerHTML:""},II=e=>e===PI,LI=e=>{const n=Rs(null);return{create:()=>BI(e,n),remove:()=>EU(e,n),getEl:()=>B2(e),getHtml:()=>kU(e),getLastRng:n.get}},vk=(e,n)=>(it.each(n,o=>{Re(o,RegExp)?e=e.replace(o,""):e=e.replace(o[0],o[1])}),e),_U=e=>{const n=xs(),o=Hb({},n);let r="";const a=n.getVoidElements(),u=it.makeMap("script noscript style textarea video audio iframe object"," "),f=n.getBlockElements(),b=C=>{const T=C.name,M=C;if(T==="br"){r+=`
`;return}if(T!=="wbr"){if(a[T]&&(r+=" "),u[T]){r+=" ";return}if(C.type===3&&(r+=C.value),!(C.name in n.getVoidElements())){let P=C.firstChild;if(P)do b(P);while(P=P.next)}f[T]&&M.next&&(r+=`
`,T==="p"&&(r+=`
`))}};return e=vk(e,[/<!\[[^\]]+\]>/g]),b(o.parse(e)),r},FI=e=>(e=vk(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(o,r,a)=>!r&&!a?" ":$c],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),AU=e=>{let n=0;return()=>e+n++},HI=e=>{const n=e.toLowerCase(),o={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return it.hasOwn(o,n)?"image/"+o[n]:"image/"+n},OU=(e,n)=>{const o=Hb({sanitize:ax(e),sandbox_iframes:nb(e),sandbox_iframes_exclusions:DC(e),convert_unsafe_embeds:K_(e)},e.schema);o.addNodeFilter("meta",a=>{it.each(a,u=>{u.remove()})});const r=o.parse(n,{forced_root_block:!1,isRootContent:!0});return Hp({validate:!0},e.schema).serialize(r)},VI=(e,n)=>({content:e,cancelled:n}),vy=(e,n,o)=>{const r=e.dom.create("div",{style:"display:none"},n),a=Gx(e,r,o);return VI(a.node.innerHTML,a.isDefaultPrevented())},DU=(e,n,o)=>{const r=SA(e,n,o),a=OU(e,r.content);return e.hasEventListeners("PastePostProcess")&&!r.isDefaultPrevented()?vy(e,a,o):VI(a,r.isDefaultPrevented())},yy=(e,n,o)=>DU(e,n,o),nv=(e,n)=>(e.insertContent(n,{merge:sx(e),paste:!0}),!0),PD=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),RU=(e,n)=>PD(n)&&So(ix(e),o=>tc(n.toLowerCase(),`.${o.toLowerCase()}`)),Cy=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.insertContent('<img src="'+n+'">')}),!0),MU=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.execCommand("mceInsertLink",!1,n)}),!0),BD=(e,n,o)=>!e.selection.isCollapsed()&&PD(n)?MU(e,n,o):!1,NU=(e,n,o)=>RU(e,n)?Cy(e,n,o):!1,zI=(e,n)=>{it.each([BD,NU,nv],o=>!o(e,n,nv))},UI=(e,n,o)=>{o||!AC(e)?nv(e,n):zI(e,n)},$D=AU("mceclip"),WI=e=>{const n=MD();return RI(n,e),DD(n),n},ZI=(e,n,o,r,a)=>{const u=yy(e,n,o);if(!u.cancelled){const f=u.content,b=()=>UI(e,f,r);a?R2(e,"insertFromPaste",{dataTransfer:WI(f)}).isDefaultPrevented()||(b(),dy(e,"insertFromPaste")):b()}},yk=(e,n,o,r)=>{const a=o||NI(n);ZI(e,SU(n),a,!1,r)},Ck=(e,n,o)=>{const r=e.dom.encode(n).replace(/\r\n/g,`
`),a=Ti(r,jf(e)),u=sr(a,Wa(e),Wf(e));ZI(e,u,!1,!0,o)},jI=e=>{const n={};if(e&&e.types)for(let o=0;o<e.types.length;o++){const r=e.types[o];try{n[r]=e.getData(r)}catch{n[r]=""}}return n},Nh=(e,n)=>n in e&&e[n].length>0,wk=e=>Nh(e,"text/html")||Nh(e,"text/plain"),GI=(e,n)=>{const o=n.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return Oe(o)?e.dom.encode(o[1]):void 0},PU=(e,n,o,r)=>{const a=$D(),u=zc(e)&&Oe(o.name),f=u?GI(e,o.name):a,b=u?o.name:void 0,C=n.create(a,o,r,f,b);return n.add(C),C},BU=(e,n)=>{Pb(n.uri).each(({data:o,type:r,base64Encoded:a})=>{const u=a?o:btoa(o),f=n.file,b=e.editorUpload.blobCache,C=b.getByData(u,r),T=C??PU(e,b,f,u);yk(e,`<img src="${T.blobUri()}">`,!1,!0)})},$U=e=>e.type==="paste",qI=e=>Promise.all(Rn(e,n=>bP(n).then(o=>({file:n,uri:o})))),ID=e=>{const n=ix(e);return o=>ms(o.type,"image/")&&So(n,r=>HI(r)===o.type)},IU=(e,n)=>{const o=n.items?lt(cr(n.items),a=>a.kind==="file"?[a.getAsFile()]:[]):[],r=n.files?cr(n.files):[];return Lt(o.length>0?o:r,ID(e))},LD=(e,n,o)=>{const r=$U(n)?n.clipboardData:n.dataTransfer;if(tb(e)&&r){const a=IU(e,r);if(a.length>0)return n.preventDefault(),qI(a).then(u=>{o&&e.selection.setRng(o),xe(u,f=>{BU(e,f)})}),!0}return!1},KI=e=>{var n,o;return nn.os.isAndroid()&&((o=(n=e.clipboardData)===null||n===void 0?void 0:n.items)===null||o===void 0?void 0:o.length)===0},LU=e=>Wt.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,Sk=(e,n,o,r,a)=>{let u=FI(o);const f=Nh(n,bk())||NI(o),b=!f&&xU(u),C=PD(u);(II(u)||!u.length||b&&!C)&&(r=!0),(r||C)&&(Nh(n,"text/plain")&&b?u=n["text/plain"]:u=_U(u)),!II(u)&&(r?Ck(e,u,a):yk(e,u,f,a))},FU=(e,n,o)=>{let r;const a=()=>n.getLastRng()||e.selection.getRng();e.on("keydown",u=>{LU(u)&&!u.isDefaultPrevented()&&(r=u.shiftKey&&u.keyCode===86)}),e.on("paste",u=>{if(u.isDefaultPrevented()||KI(u))return;const f=o.get()==="text"||r;r=!1;const b=jI(u.clipboardData);!wk(b)&&LD(e,u,a())||(Nh(b,"text/html")?(u.preventDefault(),Sk(e,b,b["text/html"],f,!0)):Nh(b,"text/plain")&&Nh(b,"text/uri-list")?(u.preventDefault(),Sk(e,b,b["text/plain"],f,!0)):(n.create(),Hu.setEditorTimeout(e,()=>{const C=n.getHtml();n.remove(),Sk(e,b,C,f,!1)},0)))})},HU=e=>{const n=a=>ms(a,"webkit-fake-url"),o=a=>ms(a,"data:"),r=a=>{var u;return((u=a.data)===null||u===void 0?void 0:u.paste)===!0};e.parser.addNodeFilter("img",(a,u,f)=>{if(!tb(e)&&r(f))for(const b of a){const C=b.attr("src");ee(C)&&!b.attr("data-mce-object")&&C!==nn.transparentSrc&&(n(C)||!cx(e)&&o(C))&&b.remove()}})},VU=(e,n,o)=>{FU(e,n,o),HU(e)},zU=(e,n)=>{n.get()==="text"?(n.set("html"),_0(e,!1)):(n.set("text"),_0(e,!0)),e.focus()},UU=(e,n)=>{e.addCommand("mceTogglePlainTextPaste",()=>{zU(e,n)}),e.addCommand("mceInsertClipboardContent",(o,r)=>{r.html&&yk(e,r.html,r.internal,!1),r.text&&Ck(e,r.text,!1)})},xk=(e,n,o)=>{if(e)try{return e.clearData(),e.setData("text/html",n),e.setData("text/plain",o),e.setData(bk(),n),!0}catch{return!1}else return!1},YI=(e,n,o,r)=>{xk(e.clipboardData,n.html,n.text)?(e.preventDefault(),r()):o(n.html,r)},FD=e=>(n,o)=>{const{dom:r,selection:a}=e,u=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),f=r.create("div",{contenteditable:"true"},n);r.setStyles(u,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),u.appendChild(f),r.add(e.getBody(),u);const b=a.getRng();f.focus();const C=r.createRng();C.selectNodeContents(f),a.setRng(C),Hu.setEditorTimeout(e,()=>{a.setRng(b),r.remove(u),o()},0)},XI=e=>({html:wU(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),WU=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),HD=e=>!e.selection.isCollapsed()||WU(e),JI=e=>n=>{!n.isDefaultPrevented()&&HD(e)&&e.selection.isEditable()&&YI(n,XI(e),FD(e),()=>{if(nn.browser.isChromium()||nn.browser.isFirefox()){const o=e.selection.getRng();Hu.setEditorTimeout(e,()=>{e.selection.setRng(o),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},ZU=e=>n=>{!n.isDefaultPrevented()&&HD(e)&&YI(n,XI(e),FD(e),Mt)},jU=e=>{e.on("cut",JI(e)),e.on("copy",ZU(e))},QI=(e,n)=>{var o,r;return at.getCaretRangeFromPoint((o=n.clientX)!==null&&o!==void 0?o:0,(r=n.clientY)!==null&&r!==void 0?r:0,e.getDoc())},GU=e=>{const n=e["text/plain"];return n?n.indexOf("file://")===0:!1},eL=(e,n)=>{e.focus(),n&&e.selection.setRng(n)},tL=e=>So(e.files,n=>/^image\//.test(n.type)),qU=(e,n,o,r)=>{const a=e.getParent(o,f=>md(n,f));if(!W(e.getParent(o,"summary")))return!0;if(a&&yn(r,"text/html")){const f=new DOMParser().parseFromString(r["text/html"],"text/html").body;return!W(f.querySelector(a.nodeName.toLowerCase()))}else return!1},KU=e=>{e.on("input",n=>{const o=r=>W(r.querySelector("summary"));if(n.inputType==="deleteByDrag"){const r=Lt(e.dom.select("details"),o);xe(r,a=>{cs(a.firstChild)&&a.firstChild.remove();const u=e.dom.create("summary");u.appendChild(wd().dom),a.prepend(u)})}})},YU=(e,n)=>{kC(e)&&e.on("dragend dragover draggesture dragdrop drop drag",o=>{o.preventDefault(),o.stopPropagation()}),tb(e)||e.on("drop",o=>{const r=o.dataTransfer;r&&tL(r)&&o.preventDefault()}),e.on("drop",o=>{if(o.isDefaultPrevented())return;const r=QI(e,o);if(dn(r))return;const a=jI(o.dataTransfer),u=Nh(a,bk());if((!wk(a)||GU(a))&&LD(e,o,r))return;const f=a[bk()],b=f||a["text/html"]||a["text/plain"],C=qU(e.dom,e.schema,r.startContainer,a),T=n.get();T&&!C||b&&(o.preventDefault(),Hu.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{(f||T&&C)&&e.execCommand("Delete"),eL(e,r);const M=FI(b);a["text/html"]?yk(e,M,u,!0):Ck(e,M,!0)})}))}),e.on("dragstart",o=>{n.set(!0)}),e.on("dragover dragend",o=>{tb(e)&&!n.get()&&(o.preventDefault(),eL(e,QI(e,o))),o.type==="dragend"&&n.set(!1)}),KU(e)},XU=e=>{const n=a=>u=>{a(e,u)},o=_C(e);ue(o)&&e.on("PastePreProcess",n(o));const r=tx(e);ue(r)&&e.on("PastePostProcess",n(r))},JU=(e,n)=>{e.on("PastePreProcess",o=>{o.content=n(e,o.content,o.internal)})},QU=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,nL=e=>it.trim(e).replace(QU,M1).toLowerCase(),eW=(e,n,o)=>{const r=ox(e);if(o||r==="all"||!W_(e))return n;const a=r?r.split(/[, ]/):[];if(a&&r!=="none"){const u=e.dom,f=e.selection.getNode();n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(b,C,T,M)=>{const P=u.parseStyle(u.decode(T)),$={};for(let J=0;J<a.length;J++){const q=P[a[J]];let oe=q,me=u.getStyle(f,a[J],!0);/color/.test(a[J])&&(oe=nL(oe),me=nL(me)),me!==oe&&($[a[J]]=q)}const j=u.serializeStyle($,"span");return j?C+' style="'+j+'"'+M:C+M})}else n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return n=n.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(u,f,b,C)=>f+' style="'+b+'"'+C),n},oL=e=>{(nn.browser.isChromium()||nn.browser.isSafari())&&JU(e,eW)},sL=e=>{const n=Rs(!1),o=Rs(rx(e)?"text":"html"),r=LI(e);oL(e),UU(e,o),XU(e),e.addQueryStateHandler("mceTogglePlainTextPaste",()=>o.get()==="text"),e.on("PreInit",()=>{jU(e),YU(e,n),VU(e,r,o)})},tW=e=>{e.on("click",n=>{e.dom.getParent(n.target,"details")&&n.preventDefault()})},nW=e=>{e.parser.addNodeFilter("details",n=>{const o=q_(e);xe(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})}),e.serializer.addNodeFilter("details",n=>{const o=ux(e);xe(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})})},oW=e=>{tW(e),nW(e)},sW=cs,rL=dt,rW=e=>as(e.dom),cW=e=>Ke(e.dom),$2=e=>n=>po(de.fromDom(e),n),cL=(e,n,o)=>ir(de.fromDom(e),r=>cW(r)||o.isBlock(Q(r)),$2(n)).getOr(de.fromDom(n)).dom,aL=(e,n)=>ir(de.fromDom(e),rW,$2(n)),VD=(e,n,o)=>{const r=new Bc(e,n),a=o?r.next.bind(r):r.prev.bind(r);let u=e;for(let f=o?e:a();f&&!sW(f);f=a())Iu(f)&&(u=f);return u},lL=(e,n,o)=>{const a=He.fromRangeStart(e).getNode(),u=cL(a,n,o),f=VD(a,u,!1),b=VD(a,u,!0),C=document.createRange();return aL(f,u).fold(()=>{rL(f)?C.setStart(f,0):C.setStartBefore(f)},T=>C.setStartBefore(T.dom)),aL(b,u).fold(()=>{rL(b)?C.setEnd(b,b.data.length):C.setEndAfter(b)},T=>C.setEndAfter(T.dom)),C},zD=e=>{const n=lL(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(kT(n))},aW=e=>{e.on("mousedown",n=>{n.detail>=3&&(n.preventDefault(),zD(e))})};var ov;(function(e){e.Before="before",e.After="after"})(ov||(ov={}));const lW=(e,n)=>Math.abs(e.left-n),iL=(e,n)=>Math.abs(e.right-n),iW=(e,n)=>e>=n.top&&e<=n.bottom,uL=(e,n)=>e.top<n.bottom&&e.bottom>n.top,uW=(e,n)=>{const o=$u(e,n)/Math.min(e.height,n.height);return uL(e,n)&&o>.5},dW=(e,n)=>{const o=Lt(e,r=>iW(n,r));return bS(o).fold(()=>[[],e],r=>{const{pass:a,fail:u}=Ht(e,f=>uW(f,r));return[a,u]})},mW=(e,n)=>({node:e.node,position:lW(e,n)<iL(e,n)?ov.Before:ov.After}),I2=(e,n,o)=>n>e.left&&n<e.right?0:Math.min(Math.abs(e.left-n),Math.abs(e.right-n)),UD=(e,n,o,r)=>{const a=P=>Iu(P.node)?F.some(P):$t(P.node)?UD(cr(P.node.childNodes),n,o,!1):F.none(),u=(P,$,j)=>a($).filter(J=>Math.abs(j(P,n,o)-j(J,n,o))<2&&dt(J.node)),f=(P,$)=>{const j=jn(P,(J,q)=>$(J,n,o)-$(q,n,o));return Br(j,a).map(J=>r&&!dt(J.node)&&j.length>1?u(J,j[1],$).getOr(J):J)},[b,C]=dW(E$(e),o),{pass:T,fail:M}=Ht(C,P=>P.top<o);return f(b,I2).orThunk(()=>f(M,Kg)).orThunk(()=>f(T,Kg))},fW=(e,n,o,r)=>{const a=(u,f)=>{const b=T=>$t(T)&&T.classList.contains("mce-drag-container"),C=Lt(u.dom.childNodes,vo(b));return f.fold(()=>UD(C,o,r,!0),T=>{const M=Lt(C,P=>P!==T.dom);return UD(M,o,r,!0)}).orThunk(()=>(po(u,e)?F.none():Rm(u)).bind(M=>a(M,F.some(u))))};return a(n,F.none())},dL=(e,n,o)=>{const r=de.fromDom(e),a=Su(r),f=de.fromPoint(a,n,o).filter(b=>aa(r,b)).getOr(r);return fW(r,f,n,o)},mL=(e,n,o)=>dL(e,n,o).filter(r=>Ep(r.node)).map(r=>mW(r,n)),fL=e=>{var n,o;const r=e.getBoundingClientRect(),a=e.ownerDocument,u=a.documentElement,f=a.defaultView;return{top:r.top+((n=f==null?void 0:f.scrollY)!==null&&n!==void 0?n:0)-u.clientTop,left:r.left+((o=f==null?void 0:f.scrollX)!==null&&o!==void 0?o:0)-u.clientLeft}},gW=e=>e.inline?fL(e.getBody()):{left:0,top:0},hW=e=>{const n=e.getBody();return e.inline?{left:n.scrollLeft,top:n.scrollTop}:{left:0,top:0}},pW=e=>{const n=e.getBody(),o=e.getDoc().documentElement,r={left:n.scrollLeft,top:n.scrollTop},a={left:n.scrollLeft||o.scrollLeft,top:n.scrollTop||o.scrollTop};return e.inline?r:a},Tk=(e,n)=>{if(n.target.ownerDocument!==e.getDoc()){const o=fL(e.getContentAreaContainer()),r=pW(e);return{left:n.pageX-o.left+r.left,top:n.pageY-o.top+r.top}}return{left:n.pageX,top:n.pageY}},gL=(e,n,o)=>({pageX:o.left-e.left+n.left,pageY:o.top-e.top+n.top}),hL=(e,n)=>gL(gW(e),hW(e),Tk(e,n)),pL=e=>({target:e,srcElement:e}),bW=(e,n,o,r)=>({...n,dataTransfer:r,type:e,...pL(o)}),vW=(e,n,o)=>{const r=Ms("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:r,initEvent:r,preventDefault:Mt,stopImmediatePropagation:Mt,stopPropagation:Mt,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:r,initMouseEvent:r,getModifierState:r,dataTransfer:o,...pL(n)}},WG=(e,n)=>{const o=yU(e);return n==="dragstart"?(AD(o),OI(o)):n==="drop"?(mU(o),DD(o)):(fU(o),bU(o)),o},yW=(e,n,o,r)=>{const a=WG(o,e);return gn(r)?vW(e,n,a):bW(e,r,n,a)},L2=32,WD=100,sv=8,Ek=16,bL=as,vL=yS(bL,Ke),CW=(e,n,o)=>bL(o)&&o!==n&&e.isEditable(o.parentElement),ZD=(e,n,o)=>dn(n)||n===o||e.dom.isChildOf(n,o)?!1:e.dom.isEditable(n),yL=(e,n,o,r)=>{const a=e.dom,u=n.cloneNode(!0);a.setStyles(u,{width:o,height:r}),a.setAttrib(u,"data-mce-selected",null);const f=a.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return a.setStyles(f,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:o,height:r}),a.setStyles(u,{margin:0,boxSizing:"border-box"}),f.appendChild(u),f},wW=(e,n)=>{e.parentNode!==n&&n.appendChild(e)},kk=(e,n)=>o=>()=>{const r=e==="left"?o.scrollX:o.scrollY;o.scroll({[e]:r+n,behavior:"smooth"})},jD=kk("left",-L2),CL=kk("left",L2),SW=kk("top",-L2),wL=kk("top",L2),xW=(e,n,o,r,a,u,f,b,C,T,M,P)=>{let $=0,j=0;e.style.left=n.pageX+"px",e.style.top=n.pageY+"px",n.pageX+o>a&&($=n.pageX+o-a),n.pageY+r>u&&(j=n.pageY+r-u),e.style.width=o-$+"px",e.style.height=r-j+"px";const J=C.clientHeight,q=C.clientWidth,oe=f+C.getBoundingClientRect().top,me=b+C.getBoundingClientRect().left;M.on(we=>{we.intervalId.clear(),we.dragging&&P&&(f+sv>=J?we.intervalId.set(wL(T)):f-sv<=0?we.intervalId.set(SW(T)):b+sv>=q?we.intervalId.set(CL(T)):b-sv<=0?we.intervalId.set(jD(T)):oe+Ek>=window.innerHeight?we.intervalId.set(wL(window)):oe-Ek<=0?we.intervalId.set(SW(window)):me+Ek>=window.innerWidth?we.intervalId.set(CL(window)):me-Ek<=0&&we.intervalId.set(jD(window)))})},SL=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},xL=(e,n)=>{const o=e.getParent(n.parentNode,e.isBlock);SL(n),o&&o!==e.getRoot()&&e.isEmpty(o)&&rm(de.fromDom(o))},TW=e=>e.button===0,TL=(e,n)=>({pageX:n.pageX-e.relX,pageY:n.pageY+5}),EW=(e,n)=>o=>{if(TW(o)){const r=qo(n.dom.getParents(o.target),vL).getOr(null);if(Oe(r)&&CW(n.dom,n.getBody(),r)){const a=n.dom.getPos(r),u=n.getBody(),f=n.getDoc().documentElement;e.set({element:r,dataTransfer:MD(),dragging:!1,screenX:o.screenX,screenY:o.screenY,maxX:(n.inline?u.scrollWidth:f.offsetWidth)-2,maxY:(n.inline?u.scrollHeight:f.offsetHeight)-2,relX:o.pageX-a.x,relY:o.pageY-a.y,width:r.offsetWidth,height:r.offsetHeight,ghost:yL(n,r,r.offsetWidth,r.offsetHeight),intervalId:Qr(WD)})}}},kW=(e,n,o)=>{e._selectionOverrides.hideFakeCaret(),mL(e.getBody(),n,o).fold(()=>e.selection.placeCaretAt(n,o),r=>{const a=e._selectionOverrides.showCaret(1,r.node,r.position===ov.Before,!1);a?e.selection.setRng(a):e.selection.placeCaretAt(n,o)})},F2=(e,n,o,r,a)=>{n==="dragstart"&&RI(r,e.dom.getOuterHTML(o));const u=yW(n,o,r,a);return e.dispatch(n,u)},_W=(e,n)=>{const o=sp((a,u)=>kW(n,a,u),0);n.on("remove",o.cancel);const r=e;return a=>e.on(u=>{const f=Math.max(Math.abs(a.screenX-u.screenX),Math.abs(a.screenY-u.screenY));if(!u.dragging&&f>10){const b=F2(n,"dragstart",u.element,u.dataTransfer,a);if(Oe(b.dataTransfer)&&(u.dataTransfer=b.dataTransfer),b.isDefaultPrevented())return;u.dragging=!0,n.focus()}if(u.dragging){const b=a.currentTarget===n.getDoc().documentElement,C=TL(u,hL(n,a));wW(u.ghost,n.getBody()),xW(u.ghost,C,u.width,u.height,u.maxX,u.maxY,a.clientY,a.clientX,n.getContentAreaContainer(),n.getWin(),r,b),o.throttle(a.clientX,a.clientY)}})},AW=e=>{const n=e.getSel();if(Oe(n)){const r=n.getRangeAt(0).startContainer;return dt(r)?r.parentNode:r}else return null},EL=(e,n)=>o=>{e.on(r=>{var a;if(r.intervalId.clear(),r.dragging){if(ZD(n,AW(n.selection),r.element)){const u=(a=n.getDoc().elementFromPoint(o.clientX,o.clientY))!==null&&a!==void 0?a:n.getBody();F2(n,"drop",u,r.dataTransfer,o).isDefaultPrevented()||n.undoManager.transact(()=>{xL(n.dom,r.element),CU(r.dataTransfer).each(b=>n.insertContent(b)),n._selectionOverrides.hideFakeCaret()})}F2(n,"dragend",n.getBody(),r.dataTransfer,o)}}),GD(e)},OW=(e,n,o)=>{e.on(r=>{r.intervalId.clear(),r.dragging&&o.fold(()=>F2(n,"dragend",r.element,r.dataTransfer),a=>F2(n,"dragend",r.element,r.dataTransfer,a))}),GD(e)},DW=(e,n)=>o=>OW(e,n,F.some(o)),GD=e=>{e.on(n=>{n.intervalId.clear(),SL(n.ghost)}),e.clear()},RW=e=>{const n=qc(),o=Gs.DOM,r=document,a=EW(n,e),u=_W(n,e),f=EL(n,e),b=DW(n,e);e.on("mousedown",a),e.on("mousemove",u),e.on("mouseup",f),o.bind(r,"mousemove",u),o.bind(r,"mouseup",b),e.on("remove",()=>{o.unbind(r,"mousemove",u),o.unbind(r,"mouseup",b)}),e.on("keydown",C=>{C.keyCode===Wt.ESC&&OW(n,e,F.none())})},qD=e=>{const n=a=>{if(!a.isDefaultPrevented()){const u=a.dataTransfer;u&&(Cn(u.types,"Files")||u.files.length>0)&&(a.preventDefault(),a.type==="drop"&&bE(e,"Dropped file type is not supported"))}},o=a=>{nT(e,a.target)&&n(a)},r=()=>{const a=Gs.DOM,u=e.dom,f=document,b=e.inline?e.getBody():e.getDoc(),C=["drop","dragover"];xe(C,T=>{a.bind(f,T,o),u.bind(b,T,n)}),e.on("remove",()=>{xe(C,T=>{a.unbind(f,T,o),u.unbind(b,T,n)})})};e.on("init",()=>{Hu.setEditorTimeout(e,r,0)})},MW=e=>{RW(e),Pl(e)&&qD(e)},NW=e=>{const n=sp(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const o=e.selection.getRng();if(o.collapsed){const r=kE(e,o,!1);e.selection.setRng(r)}}},0);e.on("focus",()=>{n.throttle()}),e.on("blur",()=>{n.cancel()})},PW=e=>{e.on("init",()=>{e.on("focusin",n=>{const o=n.target;if(Ra(o)){const r=fm(e.getBody(),o),a=as(r)?r:o;e.selection.getNode()!==a&&ey(e,a).each(u=>e.selection.setRng(u))}})})},wy=as,H2=(e,n)=>fm(e.getBody(),n),kL=e=>{const n=e.selection,o=e.dom,r=e.getBody(),a=vx(e,r,o.isBlock,()=>L0(e)),u="sel-"+o.uniqueId(),f="data-mce-selected";let b;const C=Zt=>Oe(Zt)&&o.hasClass(Zt,"mce-offscreen-selection"),T=Zt=>Zt!==r&&(wy(Zt)||Ra(Zt))&&o.isChildOf(Zt,r)&&o.isEditable(Zt.parentNode),M=Zt=>{Zt&&n.setRng(Zt)},P=(Zt,We,Pe,rt=!0)=>e.dispatch("ShowCaret",{target:We,direction:Zt,before:Pe}).isDefaultPrevented()?null:(rt&&n.scrollIntoView(We,Zt===-1),a.show(Pe,We)),$=Zt=>{Zt.hasAttribute("data-mce-caret")&&(mp(Zt),n.scrollIntoView(Zt))},j=()=>{e.on("click",We=>{o.isEditable(We.target)||(We.preventDefault(),e.focus())}),e.on("blur NewBlock",_e),e.on("ResizeWindow FullscreenStateChanged",a.reposition),e.on("tap",We=>{const Pe=We.target,rt=H2(e,Pe);wy(rt)?(We.preventDefault(),ey(e,rt).each(Se)):T(Pe)&&ey(e,Pe).each(Se)},!0),e.on("mousedown",We=>{const Pe=We.target;if(Pe!==r&&Pe.nodeName!=="HTML"&&!o.isChildOf(Pe,r)||!dH(e,We.clientX,We.clientY))return;_e(),wt();const rt=H2(e,Pe);wy(rt)?(We.preventDefault(),ey(e,rt).each(Se)):mL(r,We.clientX,We.clientY).each(qt=>{We.preventDefault();const Sn=P(1,qt.node,qt.position===ov.Before,!1);M(Sn),Ei(rt)?rt.focus():e.getBody().focus()})}),e.on("keypress",We=>{Wt.modifierPressed(We)||wy(n.getNode())&&We.preventDefault()}),e.on("GetSelectionRange",We=>{let Pe=We.range;if(b){if(!b.parentNode){b=null;return}Pe=Pe.cloneRange(),Pe.selectNode(b),We.range=Pe}}),e.on("SetSelectionRange",We=>{We.range=oe(We.range);const Pe=Se(We.range,We.forward);Pe&&(We.range=Pe)});const Zt=We=>$t(We)&&We.id==="mcepastebin";e.on("AfterSetSelectionRange",We=>{const Pe=We.range,rt=Pe.startContainer.parentElement;!q(Pe)&&!Zt(rt)&&wt(),C(rt)||_e()}),MW(e),NW(e),PW(e)},J=Zt=>tu(Zt)||Lo(Zt)||tl(Zt),q=Zt=>J(Zt.startContainer)||J(Zt.endContainer),oe=Zt=>{const We=e.schema.getVoidElements(),Pe=o.createRng(),rt=Zt.startContainer,qt=Zt.startOffset,Sn=Zt.endContainer,ko=Zt.endOffset;return yn(We,rt.nodeName.toLowerCase())?qt===0?Pe.setStartBefore(rt):Pe.setStartAfter(rt):Pe.setStart(rt,qt),yn(We,Sn.nodeName.toLowerCase())?ko===0?Pe.setEndBefore(Sn):Pe.setEndAfter(Sn):Pe.setEnd(Sn,ko),Pe},me=(Zt,We)=>{const Pe=de.fromDom(e.getBody()),rt=e.getDoc(),qt=hn(Pe,"#"+u).getOrThunk(()=>{const _o=de.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',rt);return Cr(_o,"id",u),fc(Pe,_o),_o}),Sn=o.createRng();qd(qt),_u(qt,[de.fromText($c,rt),de.fromDom(We),de.fromText($c,rt)]),Sn.setStart(qt.dom.firstChild,1),Sn.setEnd(qt.dom.lastChild,0),ao(qt,{top:o.getPos(Zt,e.getBody()).y+"px"}),xb(qt);const ko=n.getSel();return ko&&(ko.removeAllRanges(),ko.addRange(Sn)),Sn},we=Zt=>{const We=Zt.cloneNode(!0),Pe=e.dispatch("ObjectSelected",{target:Zt,targetClone:We});if(Pe.isDefaultPrevented())return null;const rt=me(Zt,Pe.targetClone),qt=de.fromDom(Zt);return xe(Ja(de.fromDom(e.getBody()),`*[${f}]`),Sn=>{po(qt,Sn)||Zs(Sn,f)}),o.getAttrib(Zt,f)||Zt.setAttribute(f,"1"),b=Zt,wt(),rt},Se=(Zt,We)=>{if(!Zt)return null;if(Zt.collapsed){if(!q(Zt)){const Sn=We?1:-1,ko=rh(Sn,r,Zt),_o=ko.getNode(!We);if(Oe(_o)){if(Ep(_o))return P(Sn,_o,We?!ko.isAtEnd():!1,!1);if(Bu(_o)&&as(_o.nextSibling)){const _s=o.createRng();return _s.setStart(_o,0),_s.setEnd(_o,0),_s}}const ps=ko.getNode(We);if(Oe(ps)){if(Ep(ps))return P(Sn,ps,We?!1:!ko.isAtEnd(),!1);if(Bu(ps)&&as(ps.previousSibling)){const _s=o.createRng();return _s.setStart(ps,1),_s.setEnd(ps,1),_s}}}return null}let Pe=Zt.startContainer,rt=Zt.startOffset;const qt=Zt.endOffset;if(dt(Pe)&&rt===0&&wy(Pe.parentNode)&&(Pe=Pe.parentNode,rt=o.nodeIndex(Pe),Pe=Pe.parentNode),!$t(Pe))return null;if(qt===rt+1&&Pe===Zt.endContainer){const Sn=Pe.childNodes[rt];if(T(Sn))return we(Sn)}return null},_e=()=>{b&&b.removeAttribute(f),hn(de.fromDom(e.getBody()),"#"+u).each(Ss),b=null},nt=()=>{a.destroy(),b=null},wt=()=>{a.hide()};return ig(e)||j(),{showCaret:P,showBlockCaretContainer:$,hideFakeCaret:wt,destroy:nt}},_L=(e,n)=>{let o=n;for(let r=e.previousSibling;dt(r);r=r.previousSibling)o+=r.data.length;return o},AL=(e,n,o,r,a)=>{if(dt(o)&&(r<0||r>o.data.length))return[];const u=a&&dt(o)?[_L(o,r)]:[r];let f=o;for(;f!==n&&f.parentNode;)u.push(e.nodeIndex(f,a)),f=f.parentNode;return f===n?u.reverse():[]},KD=(e,n,o,r,a,u,f=!1)=>{const b=AL(e,n,o,r,f),C=AL(e,n,a,u,f);return{start:b,end:C}},YD=(e,n)=>{const o=n.slice(),r=o.pop();return ts(r)?Ho(o,(u,f)=>u.bind(b=>F.from(b.childNodes[f])),F.some(e)).bind(u=>dt(u)&&(r<0||r>u.data.length)?F.none():F.some({node:u,offset:r})):F.none()},OL=(e,n)=>YD(e,n.start).bind(({node:o,offset:r})=>YD(e,n.end).map(({node:a,offset:u})=>{const f=document.createRange();return f.setStart(o,r),f.setEnd(a,u),f})),BW=(e,n,o,r=!1)=>KD(e,n,o.startContainer,o.startOffset,o.endContainer,o.endOffset,r),Sy=(e,n,o)=>{if(n&&e.isEmpty(n)&&!o(n)){const r=n.parentNode;e.remove(n,dt(n.firstChild)&&Kl(n.firstChild.data)),Sy(e,r,o)}},xy=(e,n,o,r=!0)=>{const a=n.startContainer.parentNode,u=n.endContainer.parentNode;n.deleteContents(),r&&!o(n.startContainer)&&(dt(n.startContainer)&&n.startContainer.data.length===0&&e.remove(n.startContainer),dt(n.endContainer)&&n.endContainer.data.length===0&&e.remove(n.endContainer),Sy(e,a,o),a!==u&&Sy(e,u,o))},_k=(e,n)=>F.from(e.dom.getParent(n.startContainer,e.dom.isBlock)),XD=(e,n,o)=>{const r=e.dynamicPatternsLookup({text:o,block:n});return{...e,blockPatterns:IS(r).concat(e.blockPatterns),inlinePatterns:zf(r).concat(e.inlinePatterns)}},JD=(e,n,o,r)=>{const a=e.createRng();return a.setStart(n,0),a.setEnd(o,r),a.toString()},DL=(e,n)=>e.create("span",{"data-mce-type":"bookmark",id:n}),Ak=(e,n)=>{const o=e.createRng();return o.setStartAfter(n.start),o.setEndBefore(n.end),o},RL=(e,n,o)=>{const r=OL(e.getRoot(),o).getOrDie("Unable to resolve path range"),a=r.startContainer,u=r.endContainer,f=r.endOffset===0?u:u.splitText(r.endOffset),b=r.startOffset===0?a:a.splitText(r.startOffset),C=b.parentNode,T=f.parentNode;return{prefix:n,end:T.insertBefore(DL(e,n+"-end"),f),start:C.insertBefore(DL(e,n+"-start"),b)}},QD=(e,n,o)=>{Sy(e,e.get(n.prefix+"-end"),o),Sy(e,e.get(n.prefix+"-start"),o)},Ok=e=>e.start.length===0,eR=e=>(n,o)=>{const a=n.data.substring(0,o),u=a.lastIndexOf(e.charAt(e.length-1)),f=a.lastIndexOf(e);return f!==-1?f+e.length:u!==-1?u+1:-1},Dk=(e,n,o,r)=>{const a=n.start;return H3(e,r.container,r.offset,eR(a),o).bind(f=>{var b,C;const T=(C=(b=o.textContent)===null||b===void 0?void 0:b.indexOf(a))!==null&&C!==void 0?C:-1;if(T!==-1&&f.offset>=T+a.length){const P=e.createRng();return P.setStart(f.container,f.offset-a.length),P.setEnd(f.container,f.offset),F.some(P)}else{const P=f.offset-a.length;return F3(f.container,P,o).map($=>{const j=e.createRng();return j.setStart($.container,$.offset),j.setEnd(f.container,f.offset),j}).filter($=>$.toString()===a).orThunk(()=>Dk(e,n,o,xm(f.container,0)))}})},$W=(e,n,o,r,a,u=!1)=>{if(n.start.length===0&&!u){const f=e.createRng();return f.setStart(o,r),f.setEnd(o,r),F.some(f)}return L3(o,r,a).bind(f=>Dk(e,n,a,f).bind(C=>{var T;if(u){if(C.endContainer===f.container&&C.endOffset===f.offset)return F.none();if(f.offset===0&&((T=C.endContainer.textContent)===null||T===void 0?void 0:T.length)===C.endOffset)return F.none()}return F.some(C)}))},tR=(e,n,o,r)=>{const a=e.dom,u=a.getRoot(),f=o.pattern,b=o.position.container,C=o.position.offset;return F3(b,C-o.pattern.end.length,n).bind(T=>{const M=KD(a,u,T.container,T.offset,b,C,r);if(Ok(f))return F.some({matches:[{pattern:f,startRng:M,endRng:M}],position:T});{const P=Rk(e,o.remainingPatterns,T.container,T.offset,n,r),$=P.getOr({matches:[],position:T}),j=$.position;return $W(a,f,j.container,j.offset,n,P.isNone()).map(q=>{const oe=BW(a,u,q,r);return{matches:$.matches.concat([{pattern:f,startRng:oe,endRng:M}]),position:xm(q.startContainer,q.startOffset)}})}})},Rk=(e,n,o,r,a,u)=>{const f=e.dom;return L3(o,r,f.getRoot()).bind(b=>{const C=JD(f,a,o,r);for(let T=0;T<n.length;T++){const M=n[T];if(!tc(C,M.end))continue;const P=n.slice();P.splice(T,1);const $=tR(e,a,{pattern:M,remainingPatterns:P,position:b},u);if($.isNone()&&r>0)return Rk(e,n,o,r-1,a,u);if($.isSome())return $}return F.none()})},ML=(e,n,o)=>{e.selection.setRng(o),n.type==="inline-format"?xe(n.format,r=>{e.formatter.apply(r)}):e.execCommand(n.cmd,!1,n.value)},NL=(e,n,o,r)=>{const a=Ak(e.dom,o);xy(e.dom,a,r),ML(e,n,a)},IW=(e,n,o,r,a)=>{const u=e.dom,f=Ak(u,r),b=Ak(u,o);xy(u,b,a),xy(u,f,a);const C={prefix:o.prefix,start:o.end,end:r.start},T=Ak(u,C);ML(e,n,T)},LW=(e,n)=>{const o=lp("mce_textpattern"),r=Zo(n,(a,u)=>{const f=RL(e,o+`_end${a.length}`,u.endRng);return a.concat([{...u,endMarker:f}])},[]);return Zo(r,(a,u)=>{const f=r.length-a.length-1,b=Ok(u.pattern)?u.endMarker:RL(e,o+`_start${f}`,u.startRng);return a.concat([{...u,startMarker:b}])},[])},FW=e=>jn(e,(n,o)=>o.end.length-n.end.length),HW=(e,n)=>{const o=tn(e,r=>So(n,a=>r.pattern.start===a.pattern.start&&r.pattern.end===a.pattern.end));return e.length===n.length?o?e:n:e.length>n.length?e:n},PL=(e,n,o,r,a,u)=>{const f=Rk(e,a.inlinePatterns,o,r,n,u).fold(()=>[],C=>C.matches),b=Rk(e,FW(a.inlinePatterns),o,r,n,u).fold(()=>[],C=>C.matches);return HW(f,b)},BL=(e,n)=>{if(n.length===0)return;const o=e.dom,r=e.selection.getBookmark(),a=LW(o,n);xe(a,u=>{const f=o.getParent(u.startMarker.start,o.isBlock),b=C=>C===f;Ok(u.pattern)?NL(e,u.pattern,u.endMarker,b):IW(e,u.pattern,u.startMarker,u.endMarker,b),QD(o,u.endMarker,b),QD(o,u.startMarker,b)}),e.selection.moveToBookmark(r)},$L=(e,n,o)=>XE(n,0,n).map(r=>{const a=r.container;return k5(a,o.start.length,n).each(u=>{const f=e.createRng();f.setStart(a,0),f.setEnd(u.container,u.offset),xy(e,f,b=>b===n)}),a}),IL=e=>(n,o)=>{const r=n.dom,a=o.pattern,u=OL(r.getRoot(),o.range).getOrDie("Unable to resolve path range"),f=(b,C)=>{const T=C.get(b);return Qe(T)&&ro(T).exists(M=>yn(M,"block"))};return _k(n,u).each(b=>{a.type==="block-format"?f(a.format,n.formatter)&&n.undoManager.transact(()=>{e(n.dom,b,a),n.formatter.apply(a.format)}):a.type==="block-command"&&n.undoManager.transact(()=>{e(n.dom,b,a),n.execCommand(a.cmd,!1,a.value)})}),!0},LL=e=>jn(e,(n,o)=>o.start.length-n.start.length),FL=e=>(n,o)=>{const r=LL(n),a=o.replace($c," ");return qo(r,u=>e(u,o,a))},Mk=(e,n)=>(o,r,a,u,f)=>{var b;f===void 0&&(f=(b=r.textContent)!==null&&b!==void 0?b:"");const C=o.dom,T=Wa(o);return C.is(r,T)?e(a.blockPatterns,f).map(M=>n&&it.trim(f).length===M.start.length?[]:[{pattern:M,range:KD(C,C.getRoot(),r,0,r,0,u)}]).getOr([]):[]},VW=e=>/^\s[^\s]/.test(e),zW=IL((e,n,o)=>{$L(e,n,o).each(r=>{const a=de.fromDom(r),u=up(a);VW(u)&&dp(a,u.slice(1))})}),UW=FL((e,n,o)=>n.indexOf(e.start)===0||o.indexOf(e.start)===0),WW=Mk(UW,!0),ZW=(e,n)=>{const o=e.selection.getRng();return _k(e,o).map(r=>{var a;const u=Math.max(0,o.startOffset),f=XD(n,r,(a=r.textContent)!==null&&a!==void 0?a:""),b=PL(e,r,o.startContainer,u,f,!0),C=WW(e,r,f,!0);return{inlineMatches:b,blockMatches:C}}).filter(({inlineMatches:r,blockMatches:a})=>a.length>0||r.length>0)},Nk=(e,n)=>{if(n.length===0)return;const o=e.selection.getBookmark();xe(n,r=>zW(e,r)),e.selection.moveToBookmark(o)},jW=IL($L),GW=FL((e,n,o)=>n===e.start||o===e.start),qW=Mk(GW,!1),KW=(e,n)=>{const o=e.selection.getRng();return _k(e,o).map(r=>{const a=Math.max(0,o.startOffset),u=JD(e.dom,r,o.startContainer,a),f=XD(n,r,u);return qW(e,r,f,!1,u)}).filter(r=>r.length>0)},YW=(e,n)=>{xe(n,o=>jW(e,o))},XW=(e,n)=>ZW(e,n).fold(je,({inlineMatches:o,blockMatches:r})=>(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{Mv(e),BL(e,o),Nk(e,r);const a=e.selection.getRng(),u=L3(a.startContainer,a.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),u.each(f=>{const b=f.container;b.data.charAt(f.offset-1)===Vh&&(b.deleteData(f.offset-1,1),Sy(e.dom,b.parentNode,C=>C===e.dom.getRoot()))})}),!0)),JW=(e,n)=>{const o=e.selection.getRng();_k(e,o).map(r=>{const a=Math.max(0,o.startOffset-1),u=JD(e.dom,r,o.startContainer,a),f=XD(n,r,u),b=PL(e,r,o.startContainer,a,f,!1);b.length>0&&e.undoManager.transact(()=>{BL(e,b)})})},QW=(e,n)=>KW(e,n).fold(je,o=>(e.undoManager.transact(()=>{YW(e,o)}),!0)),HL=(e,n,o)=>{for(let r=0;r<e.length;r++)if(o(e[r],n))return!0;return!1},VL=(e,n)=>HL(e,n,(o,r)=>o===r.keyCode&&!Wt.modifierPressed(r)),eZ=(e,n)=>HL(e,n,(o,r)=>o.charCodeAt(0)===r.charCode),zL=e=>{const n=[",",".",";",":","!","?"],o=[32],r=()=>za(Z_(e).filter(f=>f.type==="inline-command"||f.type==="block-command"?e.queryCommandSupported(f.cmd):!0),j_(e)),a=()=>lx(e);e.on("keydown",f=>{if(f.keyCode===13&&!Wt.modifierPressed(f)&&e.selection.isCollapsed()&&e.selection.isEditable()){const b=lm(r(),"enter");(b.inlinePatterns.length>0||b.blockPatterns.length>0||a())&&XW(e,b)&&f.preventDefault()}},!0),e.on("keydown",f=>{if(f.keyCode===32&&e.selection.isCollapsed()&&e.selection.isEditable()){const b=lm(r(),"space");(b.blockPatterns.length>0||a())&&QW(e,b)&&f.preventDefault()}},!0);const u=()=>{if(e.selection.isCollapsed()&&e.selection.isEditable()){const f=lm(r(),"space");(f.inlinePatterns.length>0||a())&&JW(e,f)}};e.on("keyup",f=>{VL(o,f)&&u()}),e.on("keypress",f=>{eZ(n,f)&&Hu.setEditorTimeout(e,u)})},tZ=e=>{zL(e)},nZ=e=>{const n=it.each,o=Wt.BACKSPACE,r=Wt.DELETE,a=e.dom,u=e.selection,f=e.parser,b=nn.browser,C=b.isFirefox(),T=b.isChromium()||b.isSafari(),M=nn.deviceType.isiPhone()||nn.deviceType.isiPad(),P=nn.os.isMacOS()||nn.os.isiOS(),$=(Ft,Nn)=>{try{e.getDoc().execCommand(Ft,!1,String(Nn))}catch{}},j=Ft=>Ft.isDefaultPrevented(),J=()=>{const Ft=In=>{const It=a.create("body"),wo=In.cloneContents();return It.appendChild(wo),u.serializer.serialize(It,{format:"html"})},Nn=In=>{const It=Ft(In),wo=a.createRng();wo.selectNode(e.getBody());const No=Ft(wo);return It===No};e.on("keydown",In=>{const It=In.keyCode;if(!j(In)&&(It===r||It===o)&&e.selection.isEditable()){const wo=e.selection.isCollapsed(),No=e.getBody();if(wo&&!Lc(e.schema,No)||!wo&&!Nn(e.selection.getRng()))return;In.preventDefault(),e.setContent(""),No.firstChild&&a.isBlock(No.firstChild)?e.selection.setCursorLocation(No.firstChild,0):e.selection.setCursorLocation(No,0),e.nodeChanged()}})},q=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},oe=()=>{e.inline||a.bind(e.getDoc(),"mousedown mouseup",Ft=>{let Nn;if(Ft.target===e.getDoc().documentElement)if(Nn=u.getRng(),e.getBody().focus(),Ft.type==="mousedown"){if(tu(Nn.startContainer))return;u.placeCaretAt(Ft.clientX,Ft.clientY)}else u.setRng(Nn)})},me=()=>{e.on("keydown",Ft=>{if(!j(Ft)&&Ft.keyCode===o){if(!e.getBody().getElementsByTagName("hr").length)return;if(u.isCollapsed()&&u.getRng().startOffset===0){const Nn=u.getNode(),In=Nn.previousSibling;if(Nn.nodeName==="HR"){a.remove(Nn),Ft.preventDefault();return}In&&In.nodeName&&In.nodeName.toLowerCase()==="hr"&&(a.remove(In),Ft.preventDefault())}}})},we=()=>{Range.prototype.getClientRects||e.on("mousedown",Ft=>{if(!j(Ft)&&Ft.target.nodeName==="HTML"){const Nn=e.getBody();Nn.blur(),Hu.setEditorTimeout(e,()=>{Nn.focus()})}})},Se=()=>{const Ft=TC(e);e.on("click",Nn=>{const In=Nn.target;/^(IMG|HR)$/.test(In.nodeName)&&a.isEditable(In)&&(Nn.preventDefault(),e.selection.select(In),e.nodeChanged()),In.nodeName==="A"&&a.hasClass(In,Ft)&&In.childNodes.length===0&&a.isEditable(In.parentNode)&&(Nn.preventDefault(),u.select(In))})},_e=()=>{const Ft=()=>{const In=a.getAttribs(u.getStart().cloneNode(!1));return()=>{const It=u.getStart();It!==e.getBody()&&(a.setAttrib(It,"style",null),n(In,wo=>{It.setAttributeNode(wo.cloneNode(!0))}))}},Nn=()=>!u.isCollapsed()&&a.getParent(u.getStart(),a.isBlock)!==a.getParent(u.getEnd(),a.isBlock);e.on("keypress",In=>{let It;return!j(In)&&(In.keyCode===8||In.keyCode===46)&&Nn()?(It=Ft(),e.getDoc().execCommand("delete",!1),It(),In.preventDefault(),!1):!0}),a.bind(e.getDoc(),"cut",In=>{if(!j(In)&&Nn()){const It=Ft();Hu.setEditorTimeout(e,()=>{It()})}})},nt=()=>{e.on("keydown",Ft=>{if(!j(Ft)&&Ft.keyCode===o&&u.isCollapsed()&&u.getRng().startOffset===0){const Nn=u.getNode().previousSibling;if(Nn&&Nn.nodeName&&Nn.nodeName.toLowerCase()==="table")return Ft.preventDefault(),!1}return!0})},wt=()=>{e.on("keydown",Ft=>{if(j(Ft)||Ft.keyCode!==Wt.BACKSPACE)return;let Nn=u.getRng();const In=Nn.startContainer,It=Nn.startOffset,wo=a.getRoot();let No=In;if(!(!Nn.collapsed||It!==0)){for(;No.parentNode&&No.parentNode.firstChild===No&&No.parentNode!==wo;)No=No.parentNode;No.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,No),Nn=a.createRng(),Nn.setStart(In,0),Nn.setEnd(In,0),u.setRng(Nn))}})},Zt=()=>{const Ft=()=>{$("StyleWithCSS",!1),$("enableInlineTableEditing",!1),yp(e)||$("enableObjectResizing",!1)};YS(e)||e.on("BeforeExecCommand mousedown",Ft)},We=()=>{const Ft=()=>{n(a.select("a:not([data-mce-block])"),Nn=>{var In;let It=Nn.parentNode;const wo=a.getRoot();if((It==null?void 0:It.lastChild)===Nn){for(;It&&!a.isBlock(It);){if(((In=It.parentNode)===null||In===void 0?void 0:In.lastChild)!==It||It===wo)return;It=It.parentNode}a.add(It,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",Nn=>{(Nn.type==="setcontent"||Nn.command==="mceInsertLink")&&Ft()})},Pe=()=>{e.on("init",()=>{$("DefaultParagraphSeparator",Wa(e))})},rt=Ft=>{const Nn=Ft.getBody(),In=Ft.selection.getRng();return In.startContainer===In.endContainer&&In.startContainer===Nn&&In.startOffset===0&&In.endOffset===Nn.childNodes.length},qt=()=>{e.on("keyup focusin mouseup",Ft=>{!Wt.modifierPressed(Ft)&&!rt(e)&&u.normalize()},!0)},Sn=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},ko=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},_o=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",Ft=>{let Nn;Ft.target.nodeName==="HTML"&&(Nn=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(Nn),e.selection.normalize(),e.nodeChanged())}))},ps=()=>{P&&e.on("keydown",Ft=>{Wt.metaKeyPressed(Ft)&&!Ft.shiftKey&&(Ft.keyCode===37||Ft.keyCode===39)&&(Ft.preventDefault(),e.selection.getSel().modify("move",Ft.keyCode===37?"backward":"forward","lineboundary"))})},_s=()=>{e.on("click",Ft=>{let Nn=Ft.target;do if(Nn.tagName==="A"){Ft.preventDefault();return}while(Nn=Nn.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},ic=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",Ft=>{Ft.preventDefault()})})},Wc=()=>{f.addNodeFilter("br",Ft=>{let Nn=Ft.length;for(;Nn--;)Ft[Nn].attr("class")==="Apple-interchange-newline"&&Ft[Nn].remove()})},La=Mt,Ot=()=>{if(!C||e.removed)return!1;const Ft=e.selection.getSel();return!Ft||!Ft.rangeCount||Ft.rangeCount===0},vn=()=>{T&&(oe(),Se(),ic(),q(),M&&(ko(),_o(),_s())),C&&(we(),Zt(),Sn(),ps())},ls=()=>{wt(),J(),nn.windowsPhone||qt(),T&&(oe(),Se(),Pe(),ic(),nt(),Wc(),M?(ko(),_o(),_s()):q()),C&&(me(),we(),_e(),Zt(),We(),Sn(),ps(),nt())};return ig(e)?vn():ls(),{refreshContentEditable:La,isHidden:Ot}},UL=e=>e.toLowerCase()==="gpl",V2=e=>e.length>=64&&e.length<=255,oZ=e=>UL(e)||V2(e)?"VALID":"INVALID",WL=e=>{const n=Sp(e);!ee(dx(e))&&(gn(n)||oZ(n)==="INVALID")&&console.warn("TinyMCE is running in evaluation mode. Provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms. Read more at https://www.tiny.cloud/license-key/")},nR=Gs.DOM,sZ=(e,n)=>{const o=de.fromDom(e.getBody()),r=jd(ri(o)),a=de.fromTag("style");Cr(a,"type","text/css"),fc(a,de.fromText(n)),fc(r,a),e.on("remove",()=>{Ss(a)})},rZ=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,oR=e=>os(e,n=>gn(n)===!1),sR=e=>{const n=e.options.get,o=e.editorUpload.blobCache;return oR({allow_conditional_comments:n("allow_conditional_comments"),allow_html_data_urls:n("allow_html_data_urls"),allow_svg_data_urls:n("allow_svg_data_urls"),allow_html_in_named_anchor:n("allow_html_in_named_anchor"),allow_script_urls:n("allow_script_urls"),allow_mathml_annotation_encodings:n("allow_mathml_annotation_encodings"),allow_unsafe_link_target:n("allow_unsafe_link_target"),convert_unsafe_embeds:n("convert_unsafe_embeds"),convert_fonts_to_spans:n("convert_fonts_to_spans"),fix_list_elements:n("fix_list_elements"),font_size_legacy_values:n("font_size_legacy_values"),forced_root_block:n("forced_root_block"),forced_root_block_attrs:n("forced_root_block_attrs"),preserve_cdata:n("preserve_cdata"),inline_styles:n("inline_styles"),root_name:rZ(e),sandbox_iframes:n("sandbox_iframes"),sandbox_iframes_exclusions:DC(e),sanitize:n("xss_sanitization"),validate:!0,blob_cache:o,document:e.getDoc()})},ZL=e=>{const n=e.options.get;return oR({custom_elements:n("custom_elements"),extended_valid_elements:n("extended_valid_elements"),invalid_elements:n("invalid_elements"),invalid_styles:n("invalid_styles"),schema:n("schema"),valid_children:n("valid_children"),valid_classes:n("valid_classes"),valid_elements:n("valid_elements"),valid_styles:n("valid_styles"),verify_html:n("verify_html"),padd_empty_block_inline_children:n("format_empty_lines")})},jL=e=>{const n=e.options.get;return{...sR(e),...ZL(e),...oR({remove_trailing_brs:n("remove_trailing_brs"),pad_empty_with_br:n("pad_empty_with_br"),url_converter:n("url_converter"),url_converter_scope:n("url_converter_scope"),element_format:n("element_format"),entities:n("entities"),entity_encoding:n("entity_encoding"),indent:n("indent"),indent_after:n("indent_after"),indent_before:n("indent_before")})}},cZ=e=>{const n=Hb(sR(e),e.schema);return n.addAttributeFilter("src,href,style,tabindex",(o,r)=>{const a=e.dom,u="data-mce-"+r;let f=o.length;for(;f--;){const b=o[f];let C=b.attr(r);if(C&&!b.attr(u)){if(C.indexOf("data:")===0||C.indexOf("blob:")===0)continue;r==="style"?(C=a.serializeStyle(a.parseStyle(C),b.name),C.length||(C=null),b.attr(u,C),b.attr(r,C)):r==="tabindex"?(b.attr(u,C),b.attr(r,null)):b.attr(u,e.convertURL(C,r,b.name))}}}),n.addNodeFilter("script",o=>{let r=o.length;for(;r--;){const a=o[r],u=a.attr("type")||"no/type";u.indexOf("mce-")!==0&&a.attr("type","mce-"+u)}}),Qv(e)&&n.addNodeFilter("#cdata",o=>{var r;let a=o.length;for(;a--;){const u=o[a];u.type=8,u.name="#comment",u.value="[CDATA["+e.dom.encode((r=u.value)!==null&&r!==void 0?r:"")+"]]"}}),n.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",o=>{let r=o.length;const a=e.schema.getNonEmptyElements();for(;r--;){const u=o[r];u.isEmpty(a)&&u.getAll("br").length===0&&u.append(new bi("br",1))}}),n},aZ=e=>{const n=Yv(e);n&&Hu.setEditorTimeout(e,()=>{let o;n===!0?o=e:o=e.editorManager.get(n),o&&!o.destroyed&&(o.focus(),o.selection.scrollIntoView())},100)},lZ=e=>{const n=e.dom.getRoot();!e.inline&&(!g0(e)||e.selection.getStart(!0)===n)&&yl(n).each(o=>{const r=o.getNode(),a=Yi(r)?yl(r).getOr(o):o;e.selection.setRng(a.toRange())})},iZ=e=>{e.bindPendingEventDelegates(),e.initialized=!0,x0(e),e.focus(!0),lZ(e),e.nodeChanged({initial:!0});const n=z_(e);ue(n)&&n.call(e,e),aZ(e)},rR=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,uZ=(e,n,o)=>{const{pass:r,fail:a}=Ht(n,b=>tinymce.Resource.has(PO(b))),f=[...r.map(b=>{const C=tinymce.Resource.get(PO(b));return ee(C)?Promise.resolve(rR(e).loadRawCss(b,C)):Promise.resolve()}),rR(e).loadAll(a)];return e.inline?f:f.concat([e.ui.styleSheetLoader.loadAll(o)])},GL=e=>{const n=rR(e),o=B_(e),r=e.contentCSS,a=()=>{n.unloadAll(r),e.inline||e.ui.styleSheetLoader.unloadAll(o)},u=()=>{e.removed?a():e.on("remove",a)};if(e.contentStyles.length>0){let C="";it.each(e.contentStyles,T=>{C+=T+`\r
`}),e.dom.addStyle(C)}const f=Promise.all(uZ(e,r,o)).then(u).catch(u),b=mi(e);return b&&sZ(e,b),f},dZ=e=>{const n=e.getDoc(),o=e.getBody();Zx(e),ex(e)||(n.body.spellcheck=!1,nR.setAttrib(o,"spellcheck","false")),e.quirks=nZ(e),sw(e);const r=$_(e);r!==void 0&&(o.dir=r);const a=EC(e);a&&e.on("BeforeSetContent",u=>{it.each(a,f=>{u.content=u.content.replace(f,b=>"<!--mce:protected "+escape(b)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",u=>{e.composing=u.type==="compositionstart"})},mZ=e=>{ig(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},Pk=e=>{e.removed!==!0&&(mZ(e),iZ(e))},cR=e=>{let n=!1;const o=setTimeout(()=>{n||e.setProgressState(!0)},500);return()=>{clearTimeout(o),n=!0,e.setProgressState(!1)}},aR=e=>{const n=e.getElement();let o=e.getDoc();e.inline&&(nR.addClass(n,"mce-content-body"),e.contentDocument=o=document,e.contentWindow=window,e.bodyElement=n,e.contentAreaContainer=n);const r=e.getBody();r.disabled=!0,e.readonly=YS(e),e._editableRoot=H_(e),e.hasEditableRoot()&&(e.inline&&nR.getStyle(r,"position",!0)==="static"&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,e.editorUpload=SH(e),e.schema=xs(ZL(e)),e.dom=Gs(o,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:WS(e),referrerPolicy:q1(e),onSetAttrib:f=>{e.dispatch("SetAttrib",f)}}),e.parser=cZ(e),e.serializer=yB(jL(e),e),e.selection=W7(e.dom,e.getWin(),e.serializer,e),e.annotator=Td(e),e.formatter=J0(e),e.undoManager=LO(e),e._nodeChangeDispatcher=new _I(e),e._selectionOverrides=kL(e),PV(e),oW(e),t5(e),ig(e)||(aW(e),tZ(e));const a=aU(e);RV(e,a),$V(e),AH(e),sL(e);const u=kO(e);dZ(e),WL(e),u.fold(()=>{const f=cR(e);GL(e).then(()=>{Pk(e),f()})},f=>{e.setProgressState(!0),GL(e).then(()=>{f().then(b=>{e.setProgressState(!1),Pk(e),dB(e)},b=>{e.notificationManager.open({type:"error",text:String(b)}),Pk(e),dB(e)})})})},qL=gt,fZ=(e,n,o)=>x(e,n,qL,o),lR=Gs.DOM,gZ=(e,n,o,r)=>{const a=de.fromTag("iframe");return r.each(u=>Cr(a,"tabindex",u)),Xr(a,o),Xr(a,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:n}),xi(a,"tox-edit-area__iframe"),a},KL=e=>{let n=Ua(e)+"<html><head>";HS(e)!==e.documentBaseUrl&&(n+='<base href="'+e.documentBaseURI.getURI()+'" />'),n+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const o=Uf(e),r=VS(e),a=e.translate(eb(e));return hC(e)&&(n+='<meta http-equiv="Content-Security-Policy" content="'+hC(e)+'" />'),n+=`</head><body id="${o}" class="mce-content-body ${r}" data-id="${e.id}" aria-label="${a}"><br></body></html>`,n},YL=(e,n)=>{const o=nn.browser.isFirefox()?eb(e):"Rich Text Area",r=e.translate(o),a=Xs(de.fromDom(e.getElement()),"tabindex").bind(Ha),u=gZ(e.id,r,N_(e),a).dom;u.onload=()=>{u.onload=null,e.dispatch("load")},e.contentAreaContainer=n.iframeContainer,e.iframeElement=u,e.iframeHTML=KL(e),lR.add(n.iframeContainer,u)},hZ=e=>{const n=e.iframeElement,o=()=>{e.contentDocument=n.contentDocument,aR(e)};if(kc(e)||nn.browser.isFirefox()){const r=e.getDoc();r.open(),r.write(e.iframeHTML),r.close(),o()}else{const r=fZ(de.fromDom(n),"load",()=>{r.unbind(),o()});n.srcdoc=e.iframeHTML}},pZ=(e,n)=>{YL(e,n),n.editorContainer&&(n.editorContainer.style.display=e.orgDisplay,e.hidden=lR.isHidden(n.editorContainer)),e.getElement().style.display="none",lR.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,hZ(e)},Bk=Gs.DOM,$k=(e,n,o)=>{const r=ug.get(o),a=ug.urls[o]||e.documentBaseUrl.replace(/\/$/,"");if(o=it.trim(o),r&&it.inArray(n,o)===-1){if(e.plugins[o])return;try{const u=r(e,a)||{};e.plugins[o]=u,ue(u.init)&&(u.init(e,a),n.push(o))}catch(u){pH(e,o,u)}}},Ik=e=>e.replace(/^\-/,""),Ph=e=>{const n=[];xe(Q1(e),o=>{$k(e,n,Ik(o))})},Lk=e=>{const n=it.trim(Ec(e)),o=e.ui.registry.getAll().icons,r={...pE.get("default").icons,...pE.get(n).icons};pt(r,(a,u)=>{yn(o,u)||e.ui.registry.addIcon(u,a)})},Ty=e=>{const n=Zf(e);if(ee(n)){const o=n1.get(n);e.theme=o(e,n1.urls[n])||{},ue(e.theme.init)&&e.theme.init(e,n1.urls[n]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},XL=e=>{const n=Gv(e),o=X0.get(n);e.model=o(e,X0.urls[n])},bZ=e=>{const n=e.theme.renderUI;return n?n():Fk(e)},vZ=e=>{const n=e.getElement(),r=Zf(e)(e,n);return r.editorContainer.nodeType&&(r.editorContainer.id=r.editorContainer.id||e.id+"_parent"),r.iframeContainer&&r.iframeContainer.nodeType&&(r.iframeContainer.id=r.iframeContainer.id||e.id+"_iframecontainer"),r.height=r.iframeHeight?r.iframeHeight:n.offsetHeight,r},iR=(e,n)=>({editorContainer:e,iframeContainer:n,api:{}}),yZ=e=>{const n=Bk.create("div");return Bk.insertAfter(n,e),iR(n,n)},Fk=e=>{const n=e.getElement();return e.inline?iR(null):yZ(n)},Hk=e=>{const n=e.getElement();return e.orgDisplay=n.style.display,ee(Zf(e))?bZ(e):ue(Zf(e))?vZ(e):Fk(e)},d1=(e,n)=>{const o={show:F.from(n.show).getOr(Mt),hide:F.from(n.hide).getOr(Mt),isEnabled:F.from(n.isEnabled).getOr(gt),setEnabled:r=>{r&&e.mode.get()==="readonly"||F.from(n.setEnabled).each(u=>u(r))}};e.ui={...e.ui,...o}},rv=async e=>{e.dispatch("ScriptsLoaded"),Lk(e),Ty(e),XL(e),Ph(e);const n=await Hk(e);d1(e,F.from(n.api).getOr({})),e.editorContainer=n.editorContainer,yH(e),e.inline?aR(e):pZ(e,{editorContainer:n.editorContainer,iframeContainer:n.iframeContainer})},m1=Gs.DOM,JL=e=>e.charAt(0)==="-",CZ=(e,n)=>{const o=jv(n),r=K1(n);if(!yd.hasCode(o)&&o!=="en"){const a=xo(r)?r:`${n.editorManager.baseURL}/langs/${o}.js`;e.add(a).catch(()=>{TG(n,a,o)})}},wZ=(e,n)=>{const o=Zf(e);if(ee(o)&&!JL(o)&&!yn(n1.urls,o)){const r=jS(e),a=r?e.documentBaseURI.toAbsolute(r):`themes/${o}/theme${n}.js`;n1.load(o,a).catch(()=>{rf(e,a,o)})}},SZ=(e,n)=>{const o=Gv(e);if(o!=="plugin"&&!yn(X0.urls,o)){const r=wC(e),a=ee(r)?e.documentBaseURI.toAbsolute(r):`models/${o}/model${n}.js`;X0.load(o,a).catch(()=>{NO(e,a,o)})}},xZ=e=>F.from(Zv(e)).filter(xo).map(n=>({url:n,name:F.none()})),QL=(e,n,o)=>F.from(n).filter(r=>xo(r)&&!pE.has(r)).map(r=>({url:`${e.editorManager.baseURL}/icons/${r}/icons${o}.js`,name:F.some(r)})),eF=(e,n,o)=>{const r=QL(n,"default",o),a=xZ(n).orThunk(()=>QL(n,Ec(n),""));xe(kl([r,a]),u=>{e.add(u.url).catch(()=>{hH(n,u.url,u.name.getOrUndefined())})})},TZ=(e,n)=>{const o=(r,a)=>{ug.load(r,a).catch(()=>{gH(e,a,r)})};pt(JS(e),(r,a)=>{o(a,r),e.options.set("plugins",Q1(e).concat(a))}),xe(Q1(e),r=>{r=it.trim(r),r&&!ug.urls[r]&&!JL(r)&&o(r,`plugins/${r}/plugin${n}.js`)})},EZ=e=>{const n=Zf(e);return!ee(n)||Oe(n1.get(n))},kZ=e=>{const n=Gv(e);return Oe(X0.get(n))},jG=(e,n)=>{const o=om.ScriptLoader,r=()=>{!e.removed&&EZ(e)&&kZ(e)&&rv(e)};wZ(e,n),SZ(e,n),CZ(o,e),eF(o,e,n),TZ(e,n),o.loadQueue().then(r,r)},_Z=(e,n)=>fr.forElement(e,{contentCssCors:XS(n),referrerPolicy:q1(n)}),uR=e=>{const n=e.id;yd.setCode(jv(e));const o=()=>{m1.unbind(window,"ready",o),e.render()};if(!Hg.Event.domLoaded){m1.bind(window,"ready",o);return}if(!e.getElement())return;const r=de.fromDom(e.getElement()),a=Vd(r);e.on("remove",()=>{zn(r.dom.attributes,f=>Zs(r,f.name)),Xr(r,a)}),e.ui.styleSheetLoader=_Z(r,e),nh(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const u=e.getElement().form||m1.getParent(n,"form");u&&(e.formElement=u,J1(e)&&!xr(e.getElement())&&(m1.insertAfter(m1.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=f=>{e.dispatch(f.type,f)},m1.bind(u,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),I_(e)&&!u.submit.nodeType&&!u.submit.length&&!u._mceOldSubmit&&(u._mceOldSubmit=u.submit,u.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),u._mceOldSubmit(u)))),e.windowManager=NB(e),e.notificationManager=RB(e),e0(e)&&e.on("GetContent",f=>{f.save&&(f.content=m1.encode(f.content))}),SC(e)&&e.on("submit",()=>{e.initialized&&e.save()}),L_(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),jG(e,e.suffix)},AZ=(e,n)=>{e._editableRoot!==n&&(e._editableRoot=n,e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged(),Vs(e,n))},OZ=e=>e._editableRoot,tF=(e,n)=>({sections:tt(e),options:tt(n)}),nF=U().deviceType,dR=nF.isPhone(),DZ=nF.isTablet(),cv=e=>{if(dn(e))return[];{const n=Qe(e)?e:e.split(/[ ,]/),o=Rn(n,Ps);return Lt(o,xo)}},RZ=(e,n)=>{const o=Gc(n,(r,a)=>Cn(e,a));return tF(o.t,o.f)},MZ=(e,n,o={})=>{const r=e.sections(),a=Xo(r,n).getOr({});return it.extend({},o,a)},mR=(e,n)=>yn(e.sections(),n),NZ=(e,n)=>mR(e,n)?e.sections()[n]:{},oF=(e,n)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Xo(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...n?{menubar:!1}:{}}),fR=(e,n)=>{var o;const r=(o=n.external_plugins)!==null&&o!==void 0?o:{};return e&&e.external_plugins?it.extend({},e.external_plugins,r):r},sF=(e,n)=>[...cv(e),...cv(n)],gR=(e,n,o,r)=>e&&mR(n,"mobile")?r:o,PZ=(e,n,o,r)=>{const a=cv(o.forced_plugins),u=cv(r.plugins),f=NZ(n,"mobile"),b=f.plugins?cv(f.plugins):u,C=gR(e,n,u,b),T=sF(a,C);return it.extend(r,{forced_plugins:a,plugins:T})},GG=(e,n)=>e&&mR(n,"mobile"),qG=(e,n,o,r,a)=>{var u;const f=e?{mobile:oF((u=a.mobile)!==null&&u!==void 0?u:{},n)}:{},b=RZ(["mobile"],k2(f,a)),C=it.extend(o,r,b.options(),GG(e,b)?MZ(b,"mobile"):{},{external_plugins:fR(r,b.options())});return PZ(e,b,r,C)},BZ=(e,n)=>{const o=q3(n);return qG(dR||DZ,dR,o,e,o)},rF=(e,n)=>P7(e,n),$Z=e=>{const n=(r,a)=>{e.formatter.toggle(r,a),e.nodeChanged()},o=r=>()=>{xe("left,center,right,justify".split(","),a=>{r!==a&&e.formatter.remove("align"+a)}),r!=="none"&&n("align"+r)};e.editorCommands.addCommands({JustifyLeft:o("left"),JustifyCenter:o("center"),JustifyRight:o("right"),JustifyFull:o("justify"),JustifyNone:o("none")})},IZ=e=>{const n=o=>()=>{const r=e.selection,a=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return So(a,u=>Oe(e.formatter.matchNode(u,o)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")},LZ=e=>{$Z(e),IZ(e)},KG=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=e.getDoc();let r;try{o.execCommand(n)}catch{r=!0}if(n==="paste"&&!o.queryCommandEnabled(n)&&(r=!0),r||!o.queryCommandSupported(n)){let a=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(nn.os.isMacOS()||nn.os.isiOS())&&(a=a.replace(/Ctrl\+/g,"⌘+")),e.notificationManager.open({text:a,type:"error"})}}})},YG=(e,n,o,r)=>{const a=de.fromDom(e.getRoot());return pw(a,He.fromRangeStart(n),r)?o=o.replace(/^ /,"&nbsp;"):o=o.replace(/^&nbsp;/," "),bw(a,He.fromRangeEnd(n),r)?o=o.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):o=o.replace(/&nbsp;(<br( \/)?>)?$/," "),o},cF=e=>{if(typeof e!="string"){const n=it.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:n}}return{content:e,details:{}}},aF=(e,n)=>{const o=e.selection,r=e.dom;return/^ | $/.test(n)?YG(r,o.getRng(),n,e.schema):n},Vk=(e,n)=>{if(e.selection.isEditable()){const{content:o,details:r}=cF(n);eE(e,{...r,content:aF(e,o),format:"html",set:!1,selection:!0}).each(a=>{const u=yG(e,a.content,r);tE(e,u,a),e.addVisual()})}},FZ=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{Vk(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{Vk(e,e.dom.encode(r))},insertHTML:(n,o,r)=>{Vk(e,r)},mceInsertContent:(n,o,r)=>{Vk(e,r)},mceSetContent:(n,o,r)=>{e.setContent(r)},mceReplaceContent:(n,o,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(nx(e))}})},HZ={"font-size":"size","font-family":"face"},XG=Mc("font"),JG=(e,n,o)=>{const r=u=>ku(u,e).orThunk(()=>XG(u)?Xo(HZ,e).bind(f=>Xs(u,f)):F.none()),a=u=>po(de.fromDom(n),u);return Ow(de.fromDom(o),u=>r(u),a)},QG=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),VZ=(e,n)=>F.from(Gs.DOM.getStyle(n,e,!0)),zZ=e=>(n,o)=>F.from(o).map(de.fromDom).filter(mo).bind(r=>JG(e,n,r.dom).or(VZ(e,r.dom))).getOr(""),UZ=zZ("font-size"),av=A(QG,zZ("font-family")),hR=e=>yl(e.getBody()).bind(n=>{const o=n.container();return F.from(dt(o)?o.parentNode:o)}),zk=e=>F.from(e.selection.getRng()).bind(n=>{const o=e.getBody();return n.startContainer===o&&n.startOffset===0?F.none():F.from(e.selection.getStart(!0))}),lF=(e,n)=>zk(e).orThunk(Je(hR,e)).map(de.fromDom).filter(mo).bind(n),Uk=(e,n)=>lF(e,Bo(F.some,n)),pR=(e,n)=>{if(/^[0-9.]+$/.test(n)){const o=parseInt(n,10);if(o>=1&&o<=7){const r=wp(e),a=Gf(e);return a.length>0?a[o-1]||n:r[o-1]||n}else return n}else return n},WZ=e=>{const n=e.split(/\s*,\s*/);return Rn(n,o=>o.indexOf(" ")!==-1&&!(ms(o,'"')||ms(o,"'"))?`'${o}'`:o).join(",")},ZZ=(e,n)=>{const o=pR(e,n);e.formatter.toggle("fontname",{value:WZ(o)}),e.nodeChanged()},jZ=e=>Uk(e,n=>av(e.getBody(),n.dom)).getOr(""),GZ=(e,n)=>{e.formatter.toggle("fontsize",{value:pR(e,n)}),e.nodeChanged()},qZ=e=>Uk(e,n=>UZ(e.getBody(),n.dom)).getOr(""),KZ=e=>Uk(e,n=>{const o=de.fromDom(e.getBody()),r=Ow(n,u=>ku(u,"line-height"),Je(po,o)),a=()=>{const u=parseFloat(Lr(n,"line-height")),f=parseFloat(Lr(n,"font-size"));return String(u/f)};return r.getOrThunk(a)}).getOr(""),f1=(e,n)=>{e.formatter.toggle("lineheight",{value:String(n)}),e.nodeChanged()},YZ=e=>{const n=(o,r)=>{e.formatter.toggle(o,r),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{n(o)},"ForeColor,HiliteColor":(o,r,a)=>{n(o,{value:a})},BackColor:(o,r,a)=>{n("hilitecolor",{value:a})},FontName:(o,r,a)=>{ZZ(e,a)},FontSize:(o,r,a)=>{GZ(e,a)},LineHeight:(o,r,a)=>{f1(e,a)},Lang:(o,r,a)=>{var u;n(o,{value:a.code,customValue:(u=a.customCode)!==null&&u!==void 0?u:null})},RemoveFormat:o=>{e.formatter.remove(o)},mceBlockQuote:()=>{n("blockquote")},FormatBlock:(o,r,a)=>{n(ee(a)?a:"p")},mceToggleFormat:(o,r,a)=>{n(a)}})},iF=e=>{const n=o=>e.formatter.match(o);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>n(o),mceBlockQuote:()=>n("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>jZ(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>qZ(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>KZ(e))},XZ=e=>{YZ(e),iF(e)},Wk=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},JZ=e=>{e.editorCommands.addCommands({Indent:()=>{Qb(e)},Outdent:()=>{zE(e)}}),e.editorCommands.addCommands({Outdent:()=>S3(e)},"state")},QZ=e=>{const n=(o,r,a)=>{if(e.mode.isReadOnly())return;const u=ee(a)?{href:a}:a,f=e.dom.getParent(e.selection.getNode(),"a");Xe(u)&&ee(u.href)&&(u.href=u.href.replace(/ /g,"%20"),(!f||!u.href)&&e.formatter.remove("link"),u.href&&e.formatter.apply("link",u,f))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");o&&e.dom.remove(o,!0);return}e.formatter.remove("link")}},mceInsertLink:n,createLink:n})},ej=(e,n,o,r)=>{const a=e.dom,u=b=>a.isBlock(b)&&b.parentElement===o,f=u(n)?n:a.getParent(r,u,o);return F.from(f).map(de.fromDom)},bR=(e,n)=>{if(e.mode.isReadOnly())return;const o=e.dom,r=e.selection.getRng(),a=n?e.selection.getStart():e.selection.getEnd(),u=n?r.startContainer:r.endContainer,f=fy(o,u);if(!f||!f.isContentEditable)return;const b=n?Ds:Gl,C=Wa(e);ej(e,a,f,u).each(T=>{const M=dD(e,u,T.dom,f,!1,C);b(T,de.fromDom(M)),e.selection.setCursorLocation(M,0),e.dispatch("NewBlock",{newBlock:M}),dy(e,"insertParagraph")})},tj=e=>bR(e,!0),nj=e=>bR(e,!1),oj=e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{tj(e)},InsertNewBlockAfter:()=>{nj(e)}})},sj=e=>{e.editorCommands.addCommands({insertParagraph:()=>{tv(H9,e)},mceInsertNewLine:(n,o,r)=>{yI(e,r)},InsertLineBreak:(n,o,r)=>{tv(gI,e)}})},vR=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let a=0;e.dom.getParent(e.selection.getNode(),u=>$t(u)&&a++===r?(e.selection.select(u),!1):!0,e.getBody())},mceSelectNode:(n,o,r)=>{e.selection.select(r)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),Ke);if(n){const o=e.dom.createRng();o.selectNodeContents(n),e.selection.setRng(o)}}})},rj=e=>{e.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const a=r??e.selection.getNode();if(a!==e.getBody()){const u=e.selection.getBookmark();e.dom.remove(a,!0),e.selection.moveToBookmark(u)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,o,r)=>{yM(e,r===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},cj=e=>{LZ(e),KG(e),Wk(e),vR(e),FZ(e),QZ(e),JZ(e),oj(e),sj(e),XZ(e),rj(e)},va=["toggleview"],uF=e=>Cn(va,e.toLowerCase());class dF{constructor(n){this.commands={state:{},exec:{},value:{}},this.editor=n}execCommand(n,o=!1,r,a){const u=this.editor,f=n.toLowerCase(),b=a==null?void 0:a.skip_focus;if(u.removed||(f!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(f)&&!b?u.focus():tT(u)),u.dispatch("BeforeExecCommand",{command:n,ui:o,value:r}).isDefaultPrevented()))return!1;const T=this.commands.exec[f];return ue(T)?(T(f,o,r),u.dispatch("ExecCommand",{command:n,ui:o,value:r}),!0):!1}queryCommandState(n){if(!uF(n)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const o=n.toLowerCase(),r=this.commands.state[o];return ue(r)?r(o):!1}queryCommandValue(n){if(!uF(n)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const o=n.toLowerCase(),r=this.commands.value[o];return ue(r)?r(o):""}addCommands(n,o="exec"){const r=this.commands;pt(n,(a,u)=>{xe(u.toLowerCase().split(","),f=>{r[o][f]=a})})}addCommand(n,o,r){const a=n.toLowerCase();this.commands.exec[a]=(u,f,b)=>o.call(r??this.editor,f,b)}queryCommandSupported(n){const o=n.toLowerCase();return!!this.commands.exec[o]}addQueryStateHandler(n,o,r){this.commands.state[n.toLowerCase()]=()=>o.call(r??this.editor)}addQueryValueHandler(n,o,r){this.commands.value[n.toLowerCase()]=()=>o.call(r??this.editor)}}const yR=(e,n,o)=>{Om(e,n)&&!o?rd(e,n):o&&xi(e,n)},Zk=(e,n,o)=>{try{e.getDoc().execCommand(n,!1,String(o))}catch{}},jk=(e,n)=>{e.dom.contentEditable="true"},aj=e=>{F.from(e.selection.getNode()).each(n=>{n.removeAttribute("data-mce-selected")})},lj=e=>{e.selection.setRng(e.selection.getRng())},ij=(e,n)=>{Zk(e,"StyleWithCSS",n),Zk(e,"enableInlineTableEditing",n),Zk(e,"enableObjectResizing",n)},uj=e=>{e.readonly=!0,e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),aj(e)},dj=(e,n)=>{e.readonly=!1,e.hasEditableRoot()&&jk(n),ij(e,!1),vM(e)&&e.focus(),lj(e),e.nodeChanged()},mj=(e,n)=>{const o=de.fromDom(e.getBody());yR(o,"mce-content-readonly",n),n?(uj(e),e.hasEditableRoot()&&jk(o)):dj(e,o)},Ey=e=>e.readonly,fj=e=>e.type==="click",ky=["copy"],ff=e=>Cn(ky,e.type),gj=(e,n)=>qi(n,"a",r=>po(r,de.fromDom(e.getBody()))).bind(r=>Xs(r,"href")),hj=(e,n)=>{if(fj(n)&&!Wt.metaKeyPressed(n)){const o=de.fromDom(n.target);gj(e,o).each(r=>{if(n.preventDefault(),/^#/.test(r)){const a=e.dom.select(`${r},[name="${As(r,"#")}"]`);a.length&&e.selection.scrollIntoView(a[0],!0)}else window.open(r,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else ff(n)&&e.dispatch(n.type,n)},pj=e=>{e.on("beforeinput paste cut dragend dragover draggesture dragdrop drop drag",n=>{Ey(e)&&n.preventDefault()}),e.on("BeforeExecCommand",n=>{(n.command==="Undo"||n.command==="Redo")&&Ey(e)&&n.preventDefault()}),e.on("input",n=>{if(!n.isComposing&&Ey(e)){const o=e.undoManager.add();Oe(o)&&e.undoManager.undo()}}),e.on("compositionend",()=>{if(Ey(e)){const n=e.undoManager.add();Oe(n)&&e.undoManager.undo()}})},bj=it.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class CR{static isNative(n){return!!bj[n.toLowerCase()]}constructor(n){this.bindings={},this.settings=n||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||je}fire(n,o){return this.dispatch(n,o)}dispatch(n,o){const r=n.toLowerCase(),a=Fg(r,o??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(a);const u=this.bindings[r];if(u)for(let f=0,b=u.length;f<b;f++){const C=u[f];if(!C.removed){if(C.once&&this.off(r,C.func),a.isImmediatePropagationStopped())return a;if(C.func.call(this.scope,a)===!1)return a.preventDefault(),a}}return a}on(n,o,r,a){if(o===!1&&(o=je),o){const u={func:o,removed:!1};a&&it.extend(u,a);const f=n.toLowerCase().split(" ");let b=f.length;for(;b--;){const C=f[b];let T=this.bindings[C];T||(T=[],this.toggleEvent(C,!0)),r?T=[u,...T]:T=[...T,u],this.bindings[C]=T}}return this}off(n,o){if(n){const r=n.toLowerCase().split(" ");let a=r.length;for(;a--;){const u=r[a];let f=this.bindings[u];if(!u)return pt(this.bindings,(b,C)=>{this.toggleEvent(C,!1),delete this.bindings[C]}),this;if(f){if(!o)f.length=0;else{const b=Ht(f,C=>C.func===o);f=b.fail,this.bindings[u]=f,xe(b.pass,C=>{C.removed=!0})}f.length||(this.toggleEvent(n,!1),delete this.bindings[u])}}}else pt(this.bindings,(r,a)=>{this.toggleEvent(a,!1)}),this.bindings={};return this}once(n,o,r){return this.on(n,o,r,{once:!0})}has(n){n=n.toLowerCase();const o=this.bindings[n];return!(!o||o.length===0)}}const z2=e=>(e._eventDispatcher||(e._eventDispatcher=new CR({scope:e,toggleEvent:(n,o)=>{CR.isNative(n)&&e.toggleNativeEvent&&e.toggleNativeEvent(n,o)}})),e._eventDispatcher),wR={fire(e,n,o){return this.dispatch(e,n,o)},dispatch(e,n,o){const r=this;if(r.removed&&e!=="remove"&&e!=="detach")return Fg(e.toLowerCase(),n??{},r);const a=z2(r).dispatch(e,n);if(o!==!1&&r.parent){let u=r.parent();for(;u&&!a.isPropagationStopped();)u.dispatch(e,a,!1),u=u.parent?u.parent():void 0}return a},on(e,n,o){return z2(this).on(e,n,o)},off(e,n){return z2(this).off(e,n)},once(e,n){return z2(this).once(e,n)},hasEventListeners(e){return z2(this).has(e)}},Gk=Gs.DOM;let lv;const SR=(e,n)=>{if(n==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(n))return e.getDoc().documentElement;const o=bl(e);return o?(e.eventRoot||(e.eventRoot=Gk.select(o)[0]),e.eventRoot):e.getBody()},vj=e=>!e.hidden,mF=(e,n,o)=>{vj(e)?e.dispatch(n,o):Ey(e)&&hj(e,o)},fF=(e,n)=>{if(e.delegates||(e.delegates={}),e.delegates[n]||e.removed)return;const o=SR(e,n);if(bl(e)){if(lv||(lv={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||lv&&(pt(lv,(a,u)=>{e.dom.unbind(SR(e,u))}),lv=null)})),lv[n])return;const r=a=>{const u=a.target,f=e.editorManager.get();let b=f.length;for(;b--;){const C=f[b].getBody();(C===u||Gk.isChildOf(u,C))&&mF(f[b],n,a)}};lv[n]=r,Gk.bind(o,n,r)}else{const r=a=>{mF(e,n,a)};Gk.bind(o,n,r),e.delegates[n]=r}},gF={...wR,bindPendingEventDelegates(){const e=this;it.each(e._pendingNativeEvents,n=>{fF(e,n)})},toggleNativeEvent(e,n){const o=this;e==="focus"||e==="blur"||o.removed||(n?o.initialized?fF(o,e):o._pendingNativeEvents?o._pendingNativeEvents.push(e):o._pendingNativeEvents=[e]:o.initialized&&o.delegates&&(o.dom.unbind(SR(o,e),e,o.delegates[e]),delete o.delegates[e]))},unbindAllNativeEvents(){const e=this,n=e.getBody(),o=e.dom;e.delegates&&(pt(e.delegates,(r,a)=>{e.dom.unbind(SR(e,a),a,r)}),delete e.delegates),!e.inline&&n&&o&&(n.onload=null,o.unbind(e.getWin()),o.unbind(e.getDoc())),o&&(o.unbind(n),o.unbind(e.getContainer()))}},yj=e=>ee(e)?{value:e.split(/[ ,]/),valid:!0}:no(e,ee)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},Cj=e=>{const n=(()=>{switch(e){case"array":return Qe;case"boolean":return xt;case"function":return ue;case"number":return ts;case"object":return Xe;case"string":return ee;case"string[]":return yj;case"object[]":return o=>no(o,Xe);case"regexp":return o=>Re(o,RegExp);default:return gt}})();return o=>xR(o,n,`The value must be a ${e}.`)},wj=e=>ee(e.processor),hF=(e,n)=>{const o=Kr(n.message)?"":`. ${n.message}`;return e+o},pF=e=>e.valid,xR=(e,n,o="")=>{const r=n(e);return xt(r)?r?{value:e,valid:!0}:{valid:!1,message:o}:r},Sj=(e,n,o)=>{if(!gn(n)){const r=xR(n,o);if(pF(r))return r.value;console.error(hF(`Invalid default value passed for the "${e}" option`,r))}},xj=(e,n,o=n)=>{const r={},a={},u=(j,J,q)=>{const oe=xR(J,q);return pF(oe)?(a[j]=oe.value,!0):(console.warn(hF(`Invalid value passed for the ${j} option`,oe)),!1)},f=(j,J)=>{const q=wj(J)?Cj(J.processor):J.processor,oe=Sj(j,J.default,q);r[j]={...J,default:oe,processor:q},Xo(a,j).orThunk(()=>Xo(n,j)).each(we=>u(j,we,q))},b=j=>yn(r,j);return{register:f,isRegistered:b,get:j=>Xo(a,j).orThunk(()=>Xo(r,j).map(J=>J.default)).getOrUndefined(),set:(j,J)=>{if(b(j)){const q=r[j];return q.immutable?(console.error(`"${j}" is an immutable option and cannot be updated`),!1):u(j,J,q.processor)}else return console.warn(`"${j}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:j=>{const J=b(j);return J&&delete a[j],J},isSet:j=>yn(a,j),debug:()=>{try{console.log(JSON.parse(JSON.stringify(o,(j,J)=>xt(J)||ts(J)||ee(J)||W(J)||Qe(J)||Zn(J)?J:Object.prototype.toString.call(J))))}catch(j){console.error(j)}}}},Tj=["design","readonly"],bF=(e,n,o,r)=>{const a=o[n.get()],u=o[r];try{u.activate()}catch(f){console.error(`problem while activating editor mode ${r}:`,f);return}a.deactivate(),a.editorReadOnly!==u.editorReadOnly&&mj(e,u.editorReadOnly),n.set(r),bA(e,r)},Ej=(e,n,o,r)=>{if(r!==o.get()){if(!yn(n,r))throw new Error(`Editor mode '${r}' is invalid`);e.initialized?bF(e,o,n,r):e.on("init",()=>bF(e,o,n,r))}},kj=(e,n,o)=>{if(Cn(Tj,n))throw new Error(`Cannot override default mode ${n}`);return{...e,[n]:{...o,deactivate:()=>{try{o.deactivate()}catch(r){console.error(`problem while deactivating editor mode ${n}:`,r)}}}}},_j=e=>{const n=Rs("design"),o=Rs({design:{activate:Mt,deactivate:Mt,editorReadOnly:!1},readonly:{activate:Mt,deactivate:Mt,editorReadOnly:!0}});return pj(e),{isReadOnly:()=>Ey(e),set:r=>Ej(e,o.get(),n,r),get:()=>n.get(),register:(r,a)=>{o.set(kj(o.get(),r,a))}}},TR=it.each,ER=it.explode,Aj={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},vF=it.makeMap("alt,ctrl,shift,meta,access"),Oj=e=>e in vF,Dj=e=>{const n={},o=nn.os.isMacOS()||nn.os.isiOS();TR(ER(e.toLowerCase(),"+"),u=>{Oj(u)?n[u]=!0:/^[0-9]{2,}$/.test(u)?n.keyCode=parseInt(u,10):(n.charCode=u.charCodeAt(0),n.keyCode=Aj[u]||u.toUpperCase().charCodeAt(0))});const r=[n.keyCode];let a;for(a in vF)n[a]?r.push(a):n[a]=!1;return n.id=r.join(","),n.access&&(n.alt=!0,o?n.ctrl=!0:n.shift=!0),n.meta&&(o?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n};class kR{constructor(n){this.shortcuts={},this.pendingPatterns=[],this.editor=n;const o=this;n.on("keyup keypress keydown",r=>{(o.hasModifier(r)||o.isFunctionKey(r))&&!r.isDefaultPrevented()&&(TR(o.shortcuts,a=>{o.matchShortcut(r,a)&&(o.pendingPatterns=a.subpatterns.slice(0),r.type==="keydown"&&o.executeShortcutAction(a))}),o.matchShortcut(r,o.pendingPatterns[0])&&(o.pendingPatterns.length===1&&r.type==="keydown"&&o.executeShortcutAction(o.pendingPatterns[0]),o.pendingPatterns.shift()))})}add(n,o,r,a){const u=this,f=u.normalizeCommandFunc(r);return TR(ER(it.trim(n)),b=>{const C=u.createShortcut(b,o,f,a);u.shortcuts[C.id]=C}),!0}remove(n){const o=this.createShortcut(n);return this.shortcuts[o.id]?(delete this.shortcuts[o.id],!0):!1}normalizeCommandFunc(n){const o=this,r=n;return typeof r=="string"?()=>{o.editor.execCommand(r,!1,null)}:it.isArray(r)?()=>{o.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(n,o,r,a){const u=it.map(ER(n,">"),Dj);return u[u.length-1]=it.extend(u[u.length-1],{func:r,scope:a||this.editor}),it.extend(u[0],{desc:this.editor.translate(o),subpatterns:u.slice(1)})}hasModifier(n){return n.altKey||n.ctrlKey||n.metaKey}isFunctionKey(n){return n.type==="keydown"&&n.keyCode>=112&&n.keyCode<=123}matchShortcut(n,o){return!o||o.ctrl!==n.ctrlKey||o.meta!==n.metaKey||o.alt!==n.altKey||o.shift!==n.shiftKey?!1:n.keyCode===o.keyCode||n.charCode&&n.charCode===o.charCode?(n.preventDefault(),!0):!1}executeShortcutAction(n){return n.func?n.func.call(n.scope):null}}const Rj=()=>{const e={},n={},o={},r={},a={},u={},f={},b={},C={},T=($,j)=>(J,q)=>{$[J.toLowerCase()]={...q,type:j}},M=($,j)=>r[$.toLowerCase()]=j,P=($,j)=>f[$.toLowerCase()]=j;return{addButton:T(e,"button"),addGroupToolbarButton:T(e,"grouptoolbarbutton"),addToggleButton:T(e,"togglebutton"),addMenuButton:T(e,"menubutton"),addSplitButton:T(e,"splitbutton"),addMenuItem:T(n,"menuitem"),addNestedMenuItem:T(n,"nestedmenuitem"),addToggleMenuItem:T(n,"togglemenuitem"),addAutocompleter:T(o,"autocompleter"),addContextMenu:T(a,"contextmenu"),addContextToolbar:T(u,"contexttoolbar"),addContextForm:T(u,"contextform"),addSidebar:T(b,"sidebar"),addView:T(C,"views"),addIcon:M,addContext:P,getAll:()=>({buttons:e,menuItems:n,icons:r,popups:o,contextMenus:a,contextToolbars:u,sidebars:b,views:C,contexts:f})}},Mj=()=>{const e=Rj();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,addContext:e.addContext,getAll:e.getAll}},iv=Gs.DOM,yF=it.extend,Nj=it.each;class qk{constructor(n,o,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,yF(this,gF);const a=this;this.id=n,this.hidden=!1;const u=BZ(r.defaultOptions,o);this.options=xj(a,u,o),FS(a);const f=this.options.get;f("deprecation_warnings")&&xB(o,u);const b=f("suffix");b&&(r.suffix=b),this.suffix=r.suffix;const C=f("base_url");C&&r._setBaseUrl(C),this.baseUri=r.baseURI;const T=q1(a);T&&(om.ScriptLoader._setReferrerPolicy(T),Gs.DOM.styleSheetLoader._setReferrerPolicy(T));const M=XS(a);Oe(M)&&Gs.DOM.styleSheetLoader._setContentCssCors(M),pl.languageLoad=f("language_load"),pl.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new vm(HS(a),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=nh(a),this.hasVisual=xC(a),this.shortcuts=new kR(this),this.editorCommands=new dF(this),cj(this);const P=f("cache_suffix");P&&(nn.cacheSuffix=P.replace(/^[\?\&]+/,"")),this.ui={registry:Mj(),styleSheetLoader:void 0,show:Mt,hide:Mt,setEnabled:Mt,isEnabled:gt},this.mode=_j(a),r.dispatch("SetupEditor",{editor:this});const $=V_(a);ue($)&&$.call(a,a)}render(){uR(this)}focus(n){this.execCommand("mceFocus",!1,n)}hasFocus(){return L0(this)}translate(n){return yd.translate(n)}getParam(n,o,r){const a=this.options;return a.isRegistered(n)||(Oe(r)?a.register(n,{processor:r,default:o}):a.register(n,{processor:gt,default:o})),!a.isSet(n)&&!gn(o)?o:a.get(n)}hasPlugin(n,o){return Cn(Q1(this),n)?o?ug.get(n)!==void 0:!0:!1}nodeChanged(n){this._nodeChangeDispatcher.nodeChanged(n)}addCommand(n,o,r){this.editorCommands.addCommand(n,o,r)}addQueryStateHandler(n,o,r){this.editorCommands.addQueryStateHandler(n,o,r)}addQueryValueHandler(n,o,r){this.editorCommands.addQueryValueHandler(n,o,r)}addShortcut(n,o,r,a){this.shortcuts.add(n,o,r,a)}execCommand(n,o,r,a){return this.editorCommands.execCommand(n,o,r,a)}queryCommandState(n){return this.editorCommands.queryCommandState(n)}queryCommandValue(n){return this.editorCommands.queryCommandValue(n)}queryCommandSupported(n){return this.editorCommands.queryCommandSupported(n)}show(){const n=this;n.hidden&&(n.hidden=!1,n.inline?n.getBody().contentEditable="true":(iv.show(n.getContainer()),iv.hide(n.id)),n.load(),n.dispatch("show"))}hide(){const n=this;n.hidden||(n.save(),n.inline?(n.getBody().contentEditable="false",n===n.editorManager.focusedEditor&&(n.editorManager.focusedEditor=null)):(iv.hide(n.getContainer()),iv.setStyle(n.id,"display",n.orgDisplay)),n.hidden=!0,n.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(n,o){this.dispatch("ProgressState",{state:n,time:o})}load(n={}){const o=this,r=o.getElement();if(o.removed)return"";if(r){const a={...n,load:!0},u=xr(r)?r.value:r.innerHTML,f=o.setContent(u,a);return a.no_events||o.dispatch("LoadContent",{...a,element:r}),f}else return""}save(n={}){const o=this;let r=o.getElement();if(!r||!o.initialized||o.removed)return"";const a={...n,save:!0,element:r};let u=o.getContent(a);const f={...a,content:u};if(f.no_events||o.dispatch("SaveContent",f),f.format==="raw"&&o.dispatch("RawSaveContent",f),u=f.content,xr(r))r.value=u;else{(n.is_removing||!o.inline)&&(r.innerHTML=u);const b=iv.getParent(o.id,"form");b&&Nj(b.elements,C=>C.name===o.id?(C.value=u,!1):!0)}return f.element=a.element=r=null,f.set_dirty!==!1&&o.setDirty(!1),u}setContent(n,o){return dE(this,n,o)}getContent(n){return K7(this,n)}insertContent(n,o){o&&(n=yF({content:n},o)),this.execCommand("mceInsertContent",!1,n)}resetContent(n){n===void 0?dE(this,this.startContent,{format:"raw"}):dE(this,n),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(n){const o=!this.isNotDirty;this.isNotDirty=!n,n&&n!==o&&this.dispatch("dirty")}getContainer(){const n=this;return n.container||(n.container=n.editorContainer||iv.get(n.id+"_parent")),n.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=iv.get(this.id)),this.targetElm}getWin(){const n=this;if(!n.contentWindow){const o=n.iframeElement;o&&(n.contentWindow=o.contentWindow)}return n.contentWindow}getDoc(){const n=this;if(!n.contentDocument){const o=n.getWin();o&&(n.contentDocument=o.document)}return n.contentDocument}getBody(){var n,o;const r=this.getDoc();return(o=(n=this.bodyElement)!==null&&n!==void 0?n:r==null?void 0:r.body)!==null&&o!==void 0?o:null}convertURL(n,o,r){const a=this,u=a.options.get,f=U_(a);if(ue(f))return f.call(a,n,r,!0,o);if(!u("convert_urls")||r==="link"||Xe(r)&&r.nodeName==="LINK"||n.indexOf("file:")===0||n.length===0)return n;const b=new vm(n);return b.protocol!=="http"&&b.protocol!=="https"&&b.protocol!==""?n:u("relative_urls")?a.documentBaseURI.toRelative(n):(n=a.documentBaseURI.toAbsolute(n,u("remove_script_host")),n)}addVisual(n){rF(this,n)}setEditableRoot(n){AZ(this,n)}hasEditableRoot(){return OZ(this)}remove(){cH(this)}destroy(n){TB(this,n)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const _y=Gs.DOM,Kk=it.each;let _R=!1,Yk,Li=[];const Xk=e=>{const n=e.type;Kk(g1.get(),o=>{switch(n){case"scroll":o.dispatch("ScrollWindow",e);break;case"resize":o.dispatch("ResizeWindow",e);break}})},CF=e=>{if(e!==_R){const n=Gs.DOM;e?(n.bind(window,"resize",Xk),n.bind(window,"scroll",Xk)):(n.unbind(window,"resize",Xk),n.unbind(window,"scroll",Xk)),_R=e}},wF=e=>{const n=Li;return Li=Lt(Li,o=>e!==o),g1.activeEditor===e&&(g1.activeEditor=Li.length>0?Li[0]:null),g1.focusedEditor===e&&(g1.focusedEditor=null),n.length!==Li.length},Pj=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(wF(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},Bj=document.compatMode!=="CSS1Compat",g1={...wR,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"7",minorVersion:"4.1",releaseDate:"TBD",i18n:yd,activeEditor:null,focusedEditor:null,setup(){const e=this;let n="",o="",r=vm.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const a=window.tinymce||window.tinyMCEPreInit;if(a)n=a.base||a.baseURL,o=a.suffix;else{const u=document.getElementsByTagName("script");for(let f=0;f<u.length;f++){const b=u[f].src||"";if(b==="")continue;const C=b.substring(b.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(b)){C.indexOf(".min")!==-1&&(o=".min"),n=b.substring(0,b.lastIndexOf("/"));break}}if(!n&&document.currentScript){const f=document.currentScript.src;f.indexOf(".min")!==-1&&(o=".min"),n=f.substring(0,f.lastIndexOf("/"))}}e.baseURL=new vm(r).toAbsolute(n),e.documentBaseURL=r,e.baseURI=new vm(e.baseURL),e.suffix=o,jF(e)},overrideDefaults(e){const n=e.base_url;n&&this._setBaseUrl(n);const o=e.suffix;o&&(this.suffix=o),this.defaultOptions=e;const r=e.plugin_base_urls;r!==void 0&&pt(r,(a,u)=>{pl.PluginManager.urls[u]=a})},init(e){const n=this;let o;const r=it.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),a=(M,P)=>M.inline&&P.tagName.toLowerCase()in r,u=M=>{let P=M.id;return P||(P=Xo(M,"name").filter($=>!_y.get($)).getOrThunk(_y.uniqueId),M.setAttribute("id",P)),P},f=M=>{const P=e[M];if(P)return P.apply(n,[])},b=M=>nn.browser.isIE()||nn.browser.isEdge()?(vE("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/7/support/#supportedwebbrowsers"),[]):Bj?(vE("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):ee(M.selector)?_y.select(M.selector):Oe(M.target)?[M.target]:[];let C=M=>{o=M};const T=()=>{let M=0;const P=[];let $;const j=(J,q,oe)=>{const me=new qk(J,q,n);P.push(me),me.on("init",()=>{++M===$.length&&C(P)}),me.targetElm=me.targetElm||oe,me.render()};_y.unbind(window,"ready",T),f("onpageload"),$=ea(b(e)),it.each($,J=>{Pj(n.get(J.id))}),$=it.grep($,J=>!n.get(J.id)),$.length===0?C([]):Kk($,J=>{a(e,J)?vE("Could not initialize inline editor on invalid inline target element",J):j(u(J),e,J)})};return _y.bind(window,"ready",T),new Promise(M=>{o?M(o):C=P=>{M(P)}})},get(e){return arguments.length===0?Li.slice(0):ee(e)?qo(Li,n=>n.id===e).getOr(null):ts(e)&&Li[e]?Li[e]:null},add(e){const n=this,o=n.get(e.id);return o===e||(o===null&&Li.push(e),CF(!0),n.activeEditor=e,n.dispatch("AddEditor",{editor:e}),Yk||(Yk=r=>{const a=n.dispatch("BeforeUnload");if(a.returnValue)return r.preventDefault(),r.returnValue=a.returnValue,a.returnValue},window.addEventListener("beforeunload",Yk))),e},createEditor(e,n){return this.add(new qk(e,n,this))},remove(e){const n=this;let o;if(!e){for(let r=Li.length-1;r>=0;r--)n.remove(Li[r]);return}if(ee(e)){Kk(_y.select(e),r=>{o=n.get(r.id),o&&n.remove(o)});return}return o=e,W(n.get(o.id))?null:(wF(o)&&n.dispatch("RemoveEditor",{editor:o}),Li.length===0&&window.removeEventListener("beforeunload",Yk),o.remove(),CF(Li.length>0),o)},execCommand(e,n,o){var r;const a=this,u=Xe(o)?(r=o.id)!==null&&r!==void 0?r:o.index:o;switch(e){case"mceAddEditor":{if(!a.get(u)){const f=o.options;new qk(u,f,a).render()}return!0}case"mceRemoveEditor":{const f=a.get(u);return f&&f.remove(),!0}case"mceToggleEditor":{const f=a.get(u);return f?(f.isHidden()?f.show():f.hide(),!0):(a.execCommand("mceAddEditor",!1,o),!0)}}return a.activeEditor?a.activeEditor.execCommand(e,n,o):!1},triggerSave:()=>{Kk(Li,e=>{e.save()})},addI18n:(e,n)=>{yd.add(e,n)},translate:e=>yd.translate(e),setActive(e){const n=this.activeEditor;this.activeEditor!==e&&(n&&n.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:n})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new vm(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new vm(this.baseURL)}};g1.setup();const eq=(()=>{const e=qc(),n=u=>({items:u,types:Vt(u),getType:f=>Xo(u,f).getOrUndefined()}),o=u=>{e.set(u)},r=()=>e.get().getOrUndefined(),a=e.clear;return{FakeClipboardItem:n,write:o,read:r,clear:a}})(),AR=Math.min,Ay=Math.max,U2=Math.round,SF=(e,n,o)=>{let r=n.x,a=n.y;const u=e.w,f=e.h,b=n.w,C=n.h,T=(o||"").split("");return T[0]==="b"&&(a+=C),T[1]==="r"&&(r+=b),T[0]==="c"&&(a+=U2(C/2)),T[1]==="c"&&(r+=U2(b/2)),T[3]==="b"&&(a-=f),T[4]==="r"&&(r-=u),T[3]==="c"&&(a-=U2(f/2)),T[4]==="c"&&(r-=U2(u/2)),Oy(r,a,u,f)},Ij=(e,n,o,r)=>{for(let a=0;a<r.length;a++){const u=SF(e,n,r[a]);if(u.x>=o.x&&u.x+u.w<=o.w+o.x&&u.y>=o.y&&u.y+u.h<=o.h+o.y)return r[a]}return null},Lj=(e,n,o)=>Oy(e.x-n,e.y-o,e.w+n*2,e.h+o*2),Fj=(e,n)=>{const o=Ay(e.x,n.x),r=Ay(e.y,n.y),a=AR(e.x+e.w,n.x+n.w),u=AR(e.y+e.h,n.y+n.h);return a-o<0||u-r<0?null:Oy(o,r,a-o,u-r)},Hj=(e,n,o)=>{let r=e.x,a=e.y,u=e.x+e.w,f=e.y+e.h;const b=n.x+n.w,C=n.y+n.h,T=Ay(0,n.x-r),M=Ay(0,n.y-a),P=Ay(0,u-b),$=Ay(0,f-C);return r+=T,a+=M,o&&(u+=T,f+=M,r-=P,a-=$),u-=P,f-=$,Oy(r,a,u-r,f-a)},Oy=(e,n,o,r)=>({x:e,y:n,w:o,h:r}),OR={inflate:Lj,relativePosition:SF,findBestRelativePosition:Ij,intersect:Fj,clamp:Hj,create:Oy,fromClientRect:e=>Oy(e.left,e.top,e.width,e.height)},Vj=(e,n,o=1e3)=>{let r=!1,a=null;const u=T=>(...M)=>{r||(r=!0,a!==null&&(clearTimeout(a),a=null),T.apply(null,M))},f=u(e),b=u(n);return{start:(...T)=>{!r&&a===null&&(a=setTimeout(()=>b.apply(null,T),o))},resolve:f,reject:b}},Uj=(()=>{const e={},n={},o={};return{load:(C,T)=>{const M=`Script at URL "${T}" failed to load`,P=`Script at URL "${T}" did not call \`tinymce.Resource.add('${C}', data)\` within 1 second`;if(e[C]!==void 0)return e[C];{const $=new Promise((j,J)=>{const q=Vj(j,J);n[C]=q.resolve,om.ScriptLoader.loadScript(T).then(()=>q.start(P),()=>q.reject(M))});return e[C]=$,$}},add:(C,T)=>{n[C]!==void 0&&(n[C](T),delete n[C]),e[C]=Promise.resolve(T),o[C]=T},has:C=>C in o,get:C=>o[C],unload:C=>{delete e[C],delete o[C]}}})(),Wj=()=>(()=>{let e={},n=[];const o={getItem:r=>{const a=e[r];return a||null},setItem:(r,a)=>{n.push(r),e[r]=String(a)},key:r=>n[r],removeItem:r=>{n=n.filter(a=>a===r),delete e[r]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})();let W2;try{const e="__storage_test__";W2=window.localStorage,W2.setItem(e,e),W2.removeItem(e)}catch{W2=Wj()}var Zj=W2;const jj={geom:{Rect:OR},util:{Delay:Hu,Tools:it,VK:Wt,URI:vm,EventDispatcher:CR,Observable:wR,I18n:yd,LocalStorage:Zj,ImageUploader:LB},dom:{EventUtils:Hg,TreeWalker:Bc,TextSeeker:Ug,DOMUtils:Gs,ScriptLoader:om,RangeUtils:at,Serializer:yB,StyleSheetLoader:em,ControlSelection:aw,BookmarkManager:bh,Selection:W7,Event:Hg.Event},html:{Styles:Nf,Entities:Df,Node:bi,Schema:xs,DomParser:Hb,Writer:KA,Serializer:Hp},Env:nn,AddOnManager:pl,Annotator:Td,Formatter:J0,UndoManager:LO,EditorCommands:dF,WindowManager:NB,NotificationManager:RB,EditorObservable:gF,Shortcuts:kR,Editor:qk,FocusManager:FA,EditorManager:g1,DOM:Gs.DOM,ScriptLoader:om.ScriptLoader,PluginManager:ug,ThemeManager:n1,ModelManager:X0,IconManager:pE,Resource:Uj,FakeClipboard:eq,trim:it.trim,isArray:it.isArray,is:it.is,toArray:it.toArray,makeMap:it.makeMap,each:it.each,map:it.map,grep:it.grep,inArray:it.inArray,extend:it.extend,walk:it.walk,resolve:it.resolve,explode:it.explode,_addCacheSuffix:it._addCacheSuffix},TF=it.extend(g1,jj),Gj=e=>{try{ht.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(TF),Gj(TF)})()})(EK);tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"accordion-toggle":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>',accordion:'<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"ai-prompt":'<svg width="24" height="24"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.7a1 1 0 0 0-1.4 0l-9.9 10a1 1 0 0 0 0 1.3l2.1 2.1c.4.4 1 .4 1.4 0l10-9.9c.3-.3.3-1 0-1.4l-2.2-2Zm1.4 2.8-2-2-3 2.7 2.2 2.2 2.8-2.9Z"/><path d="m18.5 7.3-.7-1.5-1.5-.8 1.5-.7.7-1.5.7 1.5 1.5.7-1.5.8-.7 1.5ZM18.5 16.5l-.7-1.6-1.5-.7 1.5-.7.7-1.6.7 1.6 1.5.7-1.5.7-.7 1.6ZM9.7 7.3 9 5.8 7.5 5 9 4.3l.7-1.5.7 1.5L12 5l-1.5.8-.7 1.5Z"/></g><defs><clipPath id="a"><path d="M0 0h24v24H0z"/></clipPath></defs></svg>',ai:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5Zm6.8 11.5.5 1.2a68.3 68.3 0 0 0 .7 1.1l.4.1c.3 0 .5 0 .7-.3.2-.1.3-.3.3-.6l-.3-1-2.6-6.2a20.4 20.4 0 0 0-.5-1.3l-.5-.4-.7-.2c-.2 0-.5 0-.6.2-.2 0-.4.2-.5.4l-.3.6-.3.7L5.7 15l-.2.6-.1.4c0 .3 0 .5.3.7l.6.2c.3 0 .5 0 .7-.2l.4-1 .5-1.2h3.9ZM9.8 9l1.5 4h-3l1.5-4Zm5.6-.9v7.6c0 .4 0 .7.2 1l.7.2c.3 0 .6 0 .8-.3l.2-.9V8.1c0-.4 0-.7-.2-.9a1 1 0 0 0-.8-.3c-.2 0-.5.1-.7.3l-.2 1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3Zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3Zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1ZM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7Zm10 3.5.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0Zm-10-7-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3Zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7Zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8ZM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8Zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7Z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6Z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-code":'<svg width="24" height="24"><path d="m10 22 2-7H6l9-13h2l-2 8h7L12 22h-2ZM6 2h7l-1.4 2H6V2Zm4.2 4H4v2h4.8l1.4-2Zm-2.7 4H2v2h4l1.5-2Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0Z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3 16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6Zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6Z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',"math-equation":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 4.8c.1-.5.5-.8 1-.8h10a1 1 0 1 1 0 2h-9.2L8.3 19.2a1 1 0 0 1-1.7.4l-3.4-4.2a1 1 0 0 1 1.6-1.2l2 2.5L9 4.8Zm9.7 5.5c.4.4.4 1 0 1.4L17 13.5l1.8 1.8a1 1 0 1 1-1.4 1.4L15.5 15l-1.8 1.8a1 1 0 0 1-1.4-1.4l1.8-1.8-1.8-1.8a1 1 0 0 1 1.4-1.4l1.8 1.8 1.8-1.8a1 1 0 0 1 1.4 0Z"/></svg>',mentions:'<svg height="24" width="24"><path d="M12 21a8.8 8.8 0 0 1-3.5-.7 9 9 0 0 1-2.9-2 9 9 0 0 1-1.9-2.8A8.8 8.8 0 0 1 3 12c0-1.3.2-2.4.7-3.5a9 9 0 0 1 4.8-4.8A8.8 8.8 0 0 1 12 3c1.3 0 2.4.2 3.5.7a9.1 9.1 0 0 1 4.8 4.8A8.7 8.7 0 0 1 21 12v1.4a3 3 0 0 1-.9 2.2 3 3 0 0 1-2.2.9c-.5 0-1-.1-1.5-.4a3.8 3.8 0 0 1-1.1-1 4.8 4.8 0 0 1-1.5 1 4.3 4.3 0 0 1-1.8.4c-1.2 0-2.3-.4-3.2-1.3-.9-.9-1.3-2-1.3-3.2s.4-2.3 1.3-3.2c.9-.9 2-1.3 3.2-1.3s2.3.4 3.2 1.3c.9.9 1.3 2 1.3 3.2v1.4c0 .4.1.7.4 1 .3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1V12c0-2-.7-3.8-2.1-5.2S14 4.7 12 4.7s-3.8.7-5.2 2.1S4.7 10 4.7 12s.7 3.8 2.1 5.2 3.2 2.1 5.2 2.1h4.5V21zm0-6.2c.8 0 1.4-.3 2-.8a2.7 2.7 0 0 0 .8-2c0-.8-.3-1.4-.8-2a2.7 2.7 0 0 0-2-.8c-.8 0-1.4.3-2 .8a2.7 2.7 0 0 0-.8 2c0 .8.3 1.4.8 2a2.7 2.7 0 0 0 2 .8z"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"export-pdf":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H7v3H5V5c0-1.1.9-2 2-2Z"/><path d="M2.6 15.2v-1.9h1c.6 0 1-.2 1.4-.5.3-.3.5-.7.5-1.2s-.2-.9-.5-1.2a2 2 0 0 0-1.3-.4H1v5.2h1.6Zm.4-3h-.4v-1.1h.5l.6.1.2.5c0 .1 0 .3-.2.4l-.7.1Zm5.7 3 1-.1c.3 0 .5-.2.7-.4l.5-.8c.2-.3.2-.7.2-1.3v-1l-.5-.8c-.2-.3-.4-.5-.7-.6L8.7 10H6.3v5.2h2.4Zm-.4-1.1H8v-3h.4c.5 0 .8.2 1 .4l.2 1.1-.1 1-.3.3-.8.2Zm5.3 1.2V13h2v-1h-2v-1H16V10h-4v5.2h1.6Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"export-word":'<svg width="24" height="24"><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H5c0-1.1.9-2 2-2ZM15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"import-word":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V15h-2V9h-4V5H5c0-1.1.9-2 2-2Z"/><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M11.4 18.2a1 1 0 0 0 1.2 1.6l1.4-1V22a1 1 0 1 0 2 0v-3.1l1.4 1a1 1 0 0 0 1.2-1.7L15 15.8l-3.6 2.4Z"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"revision-history":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',send:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.3 22 7-18.3-18.3 7L9 15l4.3 7ZM18 6.8l-.7-.7L9.4 14l.7.7L18 6.8Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}});(function(){var ht=tinymce.util.Tools.resolve("tinymce.ModelManager");const _n=(i,m,p)=>{var v;return p(i,m.prototype)?!0:((v=i.constructor)===null||v===void 0?void 0:v.name)===m.name},jt=i=>{const m=typeof i;return i===null?"null":m==="object"&&Array.isArray(i)?"array":m==="object"&&_n(i,String,(p,v)=>v.isPrototypeOf(p))?"string":m},un=i=>m=>jt(m)===i,Ct=i=>m=>typeof m===i,Gt=i=>m=>i===m,Jn=un("string"),Dt=un("object"),Yt=un("array"),io=Gt(null),xn=Ct("boolean"),Xt=Gt(void 0),Mn=i=>i==null,zt=i=>!Mn(i),ft=Ct("function"),et=Ct("number"),ct=()=>{},Qn=(i,m)=>(...p)=>i(m.apply(null,p)),Re=(i,m)=>p=>i(m(p)),ee=i=>()=>i,Xe=i=>i,Zn=(i,m)=>i===m;function Qe(i,...m){return(...p)=>{const v=m.concat(p);return i.apply(null,v)}}const W=i=>m=>!i(m),xt=i=>()=>{throw new Error(i)},gn=i=>i(),dn=ee(!1),Oe=ee(!0);class ue{constructor(m,p){this.tag=m,this.value=p}static some(m){return new ue(!0,m)}static none(){return ue.singletonNone}fold(m,p){return this.tag?p(this.value):m()}isSome(){return this.tag}isNone(){return!this.tag}map(m){return this.tag?ue.some(m(this.value)):ue.none()}bind(m){return this.tag?m(this.value):ue.none()}exists(m){return this.tag&&m(this.value)}forall(m){return!this.tag||m(this.value)}filter(m){return!this.tag||m(this.value)?this:ue.none()}getOr(m){return this.tag?this.value:m}or(m){return this.tag?this:m}getOrThunk(m){return this.tag?this.value:m()}orThunk(m){return this.tag?this:m()}getOrDie(m){if(this.tag)return this.value;throw new Error(m??"Called getOrDie on None")}static from(m){return zt(m)?ue.some(m):ue.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(m){this.tag&&m(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}ue.singletonNone=new ue(!1);const ts=Array.prototype.slice,no=Array.prototype.indexOf,Mt=Array.prototype.push,A=(i,m)=>no.call(i,m),Bo=(i,m)=>A(i,m)>-1,tt=(i,m)=>{for(let p=0,v=i.length;p<v;p++){const E=i[p];if(m(E,p))return!0}return!1},Wo=(i,m)=>{const p=[];for(let v=0;v<i;v++)p.push(m(v));return p},cn=(i,m)=>{const p=i.length,v=new Array(p);for(let E=0;E<p;E++){const D=i[E];v[E]=m(D,E)}return v},Je=(i,m)=>{for(let p=0,v=i.length;p<v;p++){const E=i[p];m(E,p)}},vo=(i,m)=>{for(let p=i.length-1;p>=0;p--){const v=i[p];m(v,p)}},Ms=(i,m)=>{const p=[],v=[];for(let E=0,D=i.length;E<D;E++){const I=i[E];(m(I,E)?p:v).push(I)}return{pass:p,fail:v}},ho=(i,m)=>{const p=[];for(let v=0,E=i.length;v<E;v++){const D=i[v];m(D,v)&&p.push(D)}return p},Us=(i,m,p)=>(vo(i,(v,E)=>{p=m(p,v,E)}),p),je=(i,m,p)=>(Je(i,(v,E)=>{p=m(p,v,E)}),p),gt=(i,m,p)=>{for(let v=0,E=i.length;v<E;v++){const D=i[v];if(m(D,v))return ue.some(D);if(p(D,v))break}return ue.none()},F=(i,m)=>gt(i,m,dn),dc=(i,m)=>{for(let p=0,v=i.length;p<v;p++){const E=i[p];if(m(E,p))return ue.some(p)}return ue.none()},uo=i=>{const m=[];for(let p=0,v=i.length;p<v;++p){if(!Yt(i[p]))throw new Error("Arr.flatten item "+p+" was not an array, input: "+i);Mt.apply(m,i[p])}return m},ds=(i,m)=>uo(cn(i,m)),Go=(i,m)=>{for(let p=0,v=i.length;p<v;++p){const E=i[p];if(m(E,p)!==!0)return!1}return!0},wa=i=>{const m=ts.call(i,0);return m.reverse(),m},Cn=(i,m)=>{const p={};for(let v=0,E=i.length;v<E;v++){const D=i[v];p[String(D)]=m(D,v)}return p},So=(i,m)=>{const p=ts.call(i,0);return p.sort(m),p},Rn=(i,m)=>m>=0&&m<i.length?ue.some(i[m]):ue.none(),xe=i=>Rn(i,0),zn=i=>Rn(i,i.length-1),Ht=(i,m)=>{for(let p=0;p<i.length;p++){const v=m(i[p],p);if(v.isSome())return v}return ue.none()},Lt=Object.keys,Zo=Object.hasOwnProperty,Ho=(i,m)=>{const p=Lt(i);for(let v=0,E=p.length;v<E;v++){const D=p[v],I=i[D];m(I,D)}},pr=(i,m)=>qo(i,(p,v)=>({k:v,v:m(p,v)})),qo=(i,m)=>{const p={};return Ho(i,(v,E)=>{const D=m(v,E);p[D.k]=D.v}),p},qs=i=>(m,p)=>{i[p]=m},st=(i,m,p,v)=>{Ho(i,(E,D)=>{(m(E,D)?p:v)(E,D)})},lt=(i,m)=>{const p={};return st(i,m,qs(p),ct),p},tn=(i,m)=>{const p=[];return Ho(i,(v,E)=>{p.push(m(v,E))}),p},mn=i=>tn(i,Xe),Mo=(i,m)=>Ao(i,m)?ue.from(i[m]):ue.none(),Ao=(i,m)=>Zo.call(i,m),jn=(i,m)=>Ao(i,m)&&i[m]!==void 0&&i[m]!==null,jc=i=>{for(const m in i)if(Zo.call(i,m))return!1;return!0},ro=typeof window<"u"?window:Function("return this;")(),ns=(i,m)=>{let p=m??ro;for(let v=0;v<i.length&&p!==void 0&&p!==null;++v)p=p[i[v]];return p},cr=(i,m)=>{const p=i.split(".");return ns(p,m)},Br=(i,m)=>cr(i,m),ea=(i,m)=>{const p=Br(i,m);if(p==null)throw new Error(i+" not available on this browser");return p},Vt=Object.getPrototypeOf,cl=i=>ea("HTMLElement",i),pt=i=>{const m=cr("ownerDocument.defaultView",i);return Dt(i)&&(cl(m).prototype.isPrototypeOf(i)||/^HTML\w*Element$/.test(Vt(i).constructor.name))},yo=8,Vr=9,br=11,Oc=1,Gc=3,os=i=>i.dom.nodeName.toLowerCase(),ta=i=>i.dom.nodeType,Sa=i=>m=>ta(m)===i,Xo=i=>ta(i)===yo||os(i)==="#comment",yn=i=>Ls(i)&&pt(i.dom),Ls=Sa(Oc),bc=Sa(Gc),Vl=Sa(Vr),zl=Sa(br),hs=i=>m=>Ls(m)&&os(m)===i,kr=(i,m,p)=>{if(Jn(p)||xn(p)||et(p))i.setAttribute(m,p+"");else throw console.error("Invalid call to Attribute.set. Key ",m,":: Value ",p,":: Element ",i),new Error("Attribute value was not simple")},Ns=(i,m,p)=>{kr(i.dom,m,p)},mc=(i,m)=>{const p=i.dom;Ho(m,(v,E)=>{kr(p,E,v)})},Fa=(i,m)=>{Ho(m,(p,v)=>{p.fold(()=>{re(i,v)},E=>{kr(i.dom,v,E)})})},_r=(i,m)=>{const p=i.dom.getAttribute(m);return p===null?void 0:p},le=(i,m)=>ue.from(_r(i,m)),re=(i,m)=>{i.dom.removeAttribute(m)},De=i=>je(i.dom.attributes,(m,p)=>(m[p.name]=p.value,m),{}),Fe=(i,m)=>{const v=(m||document).createElement("div");if(v.innerHTML=i,!v.hasChildNodes()||v.childNodes.length>1){const E="HTML does not have a single root node";throw console.error(E,i),new Error(E)}return Kn(v.childNodes[0])},fn=(i,m)=>{const v=(m||document).createElement(i);return Kn(v)},Pn=(i,m)=>{const v=(m||document).createTextNode(i);return Kn(v)},Kn=i=>{if(i==null)throw new Error("Node cannot be null or undefined");return{dom:i}},ge={fromHtml:Fe,fromTag:fn,fromText:Pn,fromDom:Kn,fromPoint:(i,m,p)=>ue.from(i.dom.elementFromPoint(m,p)).map(Kn)},Yn=(i,m)=>{const p=i.dom;if(p.nodeType!==Oc)return!1;{const v=p;if(v.matches!==void 0)return v.matches(m);if(v.msMatchesSelector!==void 0)return v.msMatchesSelector(m);if(v.webkitMatchesSelector!==void 0)return v.webkitMatchesSelector(m);if(v.mozMatchesSelector!==void 0)return v.mozMatchesSelector(m);throw new Error("Browser lacks native selectors")}},Ks=i=>i.nodeType!==Oc&&i.nodeType!==Vr&&i.nodeType!==br||i.childElementCount===0,vr=(i,m)=>{const p=m===void 0?document:m.dom;return Ks(p)?[]:cn(p.querySelectorAll(i),ge.fromDom)},vc=(i,m)=>{const p=m===void 0?document:m.dom;return Ks(p)?ue.none():ue.from(p.querySelector(i)).map(ge.fromDom)},ss=(i,m)=>i.dom===m.dom,al=(i,m)=>{const p=i.dom,v=m.dom;return p===v?!1:p.contains(v)},$r=Yn,zr=i=>ge.fromDom(i.dom.ownerDocument),As=i=>Vl(i)?i:zr(i),rs=i=>ge.fromDom(As(i).dom.documentElement),ms=i=>ge.fromDom(As(i).dom.defaultView),tc=i=>ue.from(i.dom.parentNode).map(ge.fromDom),Ur=i=>ue.from(i.dom.parentElement).map(ge.fromDom),Ps=(i,m)=>{const p=ft(m)?m:dn;let v=i.dom;const E=[];for(;v.parentNode!==null&&v.parentNode!==void 0;){const D=v.parentNode,I=ge.fromDom(D);if(E.push(I),p(I)===!0)break;v=D}return E},Ga=i=>ue.from(i.dom.previousSibling).map(ge.fromDom),xa=i=>ue.from(i.dom.nextSibling).map(ge.fromDom),xo=i=>cn(i.dom.childNodes,ge.fromDom),Kr=(i,m)=>{const p=i.dom.childNodes;return ue.from(p[m]).map(ge.fromDom)},Ir=i=>Kr(i,0),Ha=(i,m)=>{tc(i).each(v=>{v.dom.insertBefore(m.dom,i.dom)})},Dc=(i,m)=>{xa(i).fold(()=>{tc(i).each(E=>{Os(E,m)})},v=>{Ha(v,m)})},Ar=(i,m)=>{Ir(i).fold(()=>{Os(i,m)},v=>{i.dom.insertBefore(m.dom,v.dom)})},Os=(i,m)=>{i.dom.appendChild(m.dom)},ed=(i,m,p)=>{Kr(i,p).fold(()=>{Os(i,m)},v=>{Ha(v,m)})},Ta=(i,m)=>{Ha(i,m),Os(m,i)},Ko=(i,m)=>{Je(m,(p,v)=>{const E=v===0?i:m[v-1];Dc(E,p)})},nc=(i,m)=>{Je(m,p=>{Os(i,p)})},oc=i=>{i.dom.textContent="",Je(xo(i),m=>{Or(m)})},Or=i=>{const m=i.dom;m.parentNode!==null&&m.parentNode.removeChild(m)},Ul=i=>{const m=xo(i);m.length>0&&Ko(i,m),Or(i)},Rc=(i,m)=>ge.fromDom(i.dom.cloneNode(m)),yc=i=>Rc(i,!1),Ea=i=>Rc(i,!0),na=(i,m)=>{const p=ge.fromTag(m),v=De(i);return mc(p,v),p},ni=(i,m)=>{const p=na(i,m),v=xo(Ea(i));return nc(p,v),p},oi=(i,m)=>{const p=na(i,m);Dc(i,p);const v=xo(i);return nc(p,v),Or(i),p},El=["tfoot","thead","tbody","colgroup"],oa=i=>Bo(El,i),Yr=(i,m)=>({rows:i,columns:m}),Wl=(i,m)=>({row:i,column:m}),Zl=(i,m,p)=>({element:i,rowspan:m,colspan:p}),Ci=(i,m,p,v)=>({element:i,rowspan:m,colspan:p,isNew:v}),ll=(i,m,p,v,E,D)=>({element:i,rowspan:m,colspan:p,row:v,column:E,isLocked:D}),Dr=(i,m,p)=>({element:i,cells:m,section:p}),sa=(i,m,p,v)=>({element:i,cells:m,section:p,isNew:v}),sc=(i,m,p)=>({element:i,isNew:m,isLocked:p}),Cc=(i,m,p,v)=>({element:i,cells:m,section:p,isNew:v}),wi=(i,m,p,v)=>({startRow:i,startCol:m,finishRow:p,finishCol:v}),Si=(i,m,p)=>({element:i,colspan:m,column:p}),U=(i,m)=>({element:i,columns:m}),se=i=>zl(i)&&zt(i.dom.host),be=i=>ge.fromDom(i.dom.getRootNode()),ze=i=>se(i)?i:ge.fromDom(As(i).dom.body),bt=i=>{const m=be(i);return se(m)?ue.some(m):ue.none()},Ve=i=>ge.fromDom(i.dom.host),Vo=i=>{if(zt(i.target)){const m=ge.fromDom(i.target);if(Ls(m)&&nn(m)&&i.composed&&i.composedPath){const p=i.composedPath();if(p)return xe(p)}}return ue.from(i.target)},nn=i=>zt(i.dom.shadowRoot),Hn=i=>{const m=bc(i)?i.dom.parentNode:i.dom;if(m==null||m.ownerDocument===null)return!1;const p=m.ownerDocument;return bt(ge.fromDom(m)).fold(()=>p.body.contains(m),Re(Hn,Ve))},Fs=()=>B(ge.fromDom(document)),B=i=>{const m=i.dom.body;if(m==null)throw new Error("Body is not available yet");return ge.fromDom(m)},K=(i,m,p)=>ho(Ps(i,p),m),ie=(i,m)=>ho(xo(i),m),Ee=(i,m)=>{let p=[];return Je(xo(i),v=>{m(v)&&(p=p.concat([v])),p=p.concat(Ee(v,m))}),p},qe=(i,m,p)=>K(i,v=>Yn(v,m),p),co=(i,m)=>ie(i,p=>Yn(p,m)),Jo=(i,m)=>vr(m,i);var fs=(i,m,p,v,E)=>i(p,v)?ue.some(p):ft(E)&&E(p)?ue.none():m(p,v,E);const it=(i,m,p)=>{let v=i.dom;const E=ft(p)?p:dn;for(;v.parentNode;){v=v.parentNode;const D=ge.fromDom(v);if(m(D))return ue.some(D);if(E(D))break}return ue.none()},bs=(i,m,p)=>fs((E,D)=>D(E),it,i,m,p),rc=(i,m)=>{const p=E=>m(ge.fromDom(E));return F(i.dom.childNodes,p).map(ge.fromDom)},kl=(i,m)=>{const p=v=>{for(let E=0;E<v.childNodes.length;E++){const D=ge.fromDom(v.childNodes[E]);if(m(D))return ue.some(D);const I=p(v.childNodes[E]);if(I.isSome())return I}return ue.none()};return p(i.dom)},Gn=(i,m,p)=>it(i,v=>Yn(v,m),p),ka=(i,m)=>rc(i,p=>Yn(p,m)),qa=(i,m)=>vc(m,i),Wr=(i,m,p)=>fs((E,D)=>Yn(E,D),Gn,i,m,p),vs=(i,m,p=Zn)=>i.exists(v=>p(v,m)),_l=i=>{const m=[],p=v=>{m.push(v)};for(let v=0;v<i.length;v++)i[v].each(p);return m},bf=(i,m)=>i!=null?m(i):ue.none(),Hd=(i,m)=>i?ue.some(m):ue.none(),Ys=(i,m)=>i.substring(m),td=(i,m,p)=>m===""||i.length>=m.length&&i.substr(p,p+m.length)===m,il=(i,m)=>ul(i,m)?Ys(i,m.length):i,Ws=(i,m,p=0,v)=>{const E=i.indexOf(m,p);return E!==-1?Xt(v)?!0:E+m.length<=v:!1},ul=(i,m)=>td(i,m,0),ra=(i,m)=>td(i,m,i.length-m.length),G=(i=>m=>m.replace(i,""))(/^\s+|\s+$/g),Q=i=>i.length>0,ke=i=>{const m=parseFloat(i);return isNaN(m)?ue.none():ue.some(m)},Ue=i=>i.style!==void 0&&ft(i.style.getPropertyValue),wn=(i,m,p)=>{if(!Jn(p))throw console.error("Invalid call to CSS.set. Property ",m,":: Value ",p,":: Element ",i),new Error("CSS value must be a string: "+p);Ue(i)&&i.style.setProperty(m,p)},Oo=(i,m)=>{Ue(i)&&i.style.removeProperty(m)},mo=(i,m,p)=>{const v=i.dom;wn(v,m,p)},ws=(i,m)=>{const p=i.dom;Ho(m,(v,E)=>{wn(p,E,v)})},Rr=(i,m)=>{const p=i.dom,E=window.getComputedStyle(p).getPropertyValue(m);return E===""&&!Hn(i)?ca(p,m):E},ca=(i,m)=>Ue(i)?i.style.getPropertyValue(m):"",Mc=(i,m)=>{const p=i.dom,v=ca(p,m);return ue.from(v).filter(E=>E.length>0)},yr=(i,m)=>{const p=i.dom;Oo(p,m),vs(le(i,"style").map(G),"")&&re(i,"style")},Cr=(i,m)=>{const p=i.dom,v=m.dom;Ue(p)&&Ue(v)&&(v.style.cssText=p.style.cssText)},Xr=(i,m,p=0)=>le(i,m).map(v=>parseInt(v,10)).getOr(p),Nc=(i,m)=>Xr(i,m,1),Xs=i=>hs("col")(i)?Xr(i,"span",1)>1:Nc(i,"colspan")>1,wr=i=>Nc(i,"rowspan")>1,Zs=(i,m)=>parseInt(Rr(i,m),10),si=ee(10),Vd=ee(10),Zi=(i,m)=>od(i,m,Oe),od=(i,m,p)=>ds(xo(i),v=>Yn(v,m)?p(v)?[v]:[]:od(v,m,p)),sd=(i,m,p=dn)=>{if(p(m))return ue.none();if(Bo(i,os(m)))return ue.some(m);const v=E=>Yn(E,"table")||p(E);return Gn(m,i.join(","),v)},vu=(i,m)=>sd(["td","th"],i,m),yu=i=>Zi(i,"th,td"),dl=i=>Yn(i,"colgroup")?co(i,"col"):ds(xi(i),m=>co(m,"col")),_a=(i,m)=>Wr(i,"table",m),pg=i=>Zi(i,"tr"),xi=i=>_a(i).fold(ee([]),m=>co(m,"colgroup")),vf=(i,m)=>cn(i,p=>{if(os(p)==="colgroup"){const v=cn(dl(p),E=>{const D=Xr(E,"span",1);return Zl(E,1,D)});return Dr(p,v,"colgroup")}else{const v=cn(yu(p),E=>{const D=Xr(E,"rowspan",1),I=Xr(E,"colspan",1);return Zl(E,D,I)});return Dr(p,v,m(p))}}),rd=i=>tc(i).map(m=>{const p=os(m);return oa(p)?p:"tbody"}).getOr("tbody"),yf=i=>{const m=pg(i),v=[...xi(i),...m];return vf(v,rd)},Om=(i,m)=>vf(i,()=>m),cd=i=>{let m=!1,p;return(...v)=>(m||(m=!0,p=i.apply(null,v)),p)},Dm=(i,m,p,v)=>{const E=i.isiOS()&&/ipad/i.test(p)===!0,D=i.isiOS()&&!E,I=i.isiOS()||i.isAndroid(),Z=I||v("(pointer:coarse)"),te=E||!D&&I&&v("(min-device-width:768px)"),fe=D||I&&!te,Ae=m.isSafari()&&i.isiOS()&&/safari/i.test(p)===!1,mt=!fe&&!te&&!Ae;return{isiPad:ee(E),isiPhone:ee(D),isTablet:ee(te),isPhone:ee(fe),isTouch:ee(Z),isAndroid:i.isAndroid,isiOS:i.isiOS,isWebView:ee(Ae),isDesktop:ee(mt)}},Cf=(i,m)=>{for(let p=0;p<i.length;p++){const v=i[p];if(v.test(m))return v}},Cu=(i,m)=>{const p=Cf(i,m);if(!p)return{major:0,minor:0};const v=E=>Number(m.replace(p,"$"+E));return ad(v(1),v(2))},bg=(i,m)=>{const p=String(m).toLowerCase();return i.length===0?de():Cu(i,p)},de=()=>ad(0,0),ad=(i,m)=>({major:i,minor:m}),ml={nu:ad,detect:bg,unknown:de},Ih=(i,m)=>Ht(m.brands,p=>{const v=p.brand.toLowerCase();return F(i,E=>{var D;return v===((D=E.brand)===null||D===void 0?void 0:D.toLowerCase())}).map(E=>({current:E.name,version:ml.nu(parseInt(p.version,10),0)}))}),Lh=(i,m)=>{const p=String(m).toLowerCase();return F(i,v=>v.search(p))},wu=(i,m)=>Lh(i,m).map(p=>{const v=ml.detect(p.versionRegexes,m);return{current:p.name,version:v}}),po=(i,m)=>Lh(i,m).map(p=>{const v=ml.detect(p.versionRegexes,m);return{current:p.name,version:v}}),aa=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Pc=i=>m=>Ws(m,i),Su=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:i=>Ws(i,"edge/")&&Ws(i,"chrome")&&Ws(i,"safari")&&Ws(i,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,aa],search:i=>Ws(i,"chrome")&&!Ws(i,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:i=>Ws(i,"msie")||Ws(i,"trident")},{name:"Opera",versionRegexes:[aa,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Pc("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Pc("firefox")},{name:"Safari",versionRegexes:[aa,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:i=>(Ws(i,"safari")||Ws(i,"mobile/"))&&Ws(i,"applewebkit")}],wf=[{name:"Windows",search:Pc("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:i=>Ws(i,"iphone")||Ws(i,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Pc("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Pc("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Pc("linux"),versionRegexes:[]},{name:"Solaris",search:Pc("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Pc("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Pc("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],zd={browsers:ee(Su),oses:ee(wf)},la="Edge",Rm="Chromium",ji="IE",Mm="Opera",Gi="Firefox",Aa="Safari",Fh=()=>Ud({current:void 0,version:ml.unknown()}),Ud=i=>{const m=i.current,p=i.version,v=E=>()=>m===E;return{current:m,version:p,isEdge:v(la),isChromium:v(Rm),isIE:v(ji),isOpera:v(Mm),isFirefox:v(Gi),isSafari:v(Aa)}},wc={unknown:Fh,nu:Ud,edge:ee(la),chromium:ee(Rm),ie:ee(ji),opera:ee(Mm),firefox:ee(Gi),safari:ee(Aa)},Ka="Windows",Oa="iOS",ld="Android",Wd="Linux",vg="macOS",Zd="Solaris",ri="FreeBSD",jd="ChromeOS",S1=()=>yg({current:void 0,version:ml.unknown()}),yg=i=>{const m=i.current,p=i.version,v=E=>()=>m===E;return{current:m,version:p,isWindows:v(Ka),isiOS:v(Oa),isAndroid:v(ld),isMacOS:v(vg),isLinux:v(Wd),isSolaris:v(Zd),isFreeBSD:v(ri),isChromeOS:v(jd)}},Hh={unknown:S1,nu:yg,windows:ee(Ka),ios:ee(Oa),android:ee(ld),linux:ee(Wd),macos:ee(vg),solaris:ee(Zd),freebsd:ee(ri),chromeos:ee(jd)},Gd={detect:(i,m,p)=>{const v=zd.browsers(),E=zd.oses(),D=m.bind(te=>Ih(v,te)).orThunk(()=>wu(v,i)).fold(wc.unknown,wc.nu),I=po(E,i).fold(Hh.unknown,Hh.nu),Z=Dm(I,D,i,p);return{browser:D,os:I,deviceType:Z}}},id=i=>window.matchMedia(i).matches;let Nm=cd(()=>Gd.detect(window.navigator.userAgent,ue.from(window.navigator.userAgentData),id));const lr=()=>Nm(),ir=(i,m)=>{const p=(Z,te)=>{if(!et(te)&&!te.match(/^[0-9]+$/))throw new Error(i+".set accepts only positive integer values. Value was "+te);const fe=Z.dom;Ue(fe)&&(fe.style[i]=te+"px")},v=Z=>{const te=m(Z);if(te<=0||te===null){const fe=Rr(Z,i);return parseFloat(fe)||0}return te},E=v,D=(Z,te)=>je(te,(fe,Ae)=>{const mt=Rr(Z,Ae),Pt=mt===void 0?0:parseInt(mt,10);return isNaN(Pt)?fe:fe+Pt},0);return{set:p,get:v,getOuter:E,aggregate:D,max:(Z,te,fe)=>{const Ae=D(Z,fe);return te>Ae?te-Ae:0}}},xu=(i,m)=>ke(i).getOr(m),jl=(i,m,p)=>xu(Rr(i,m),p),wg=(i,m,p,v)=>{const E=jl(i,`padding-${p}`,0),D=jl(i,`padding-${v}`,0),I=jl(i,`border-${p}-width`,0),Z=jl(i,`border-${v}-width`,0);return m-E-D-I-Z},cc=(i,m)=>{const p=i.dom,v=p.getBoundingClientRect().width||p.offsetWidth;return m==="border-box"?v:wg(i,v,"left","right")},hn=i=>jl(i,"height",i.dom.offsetHeight),qi=i=>jl(i,"width",i.dom.offsetWidth),Sg=i=>cc(i,"content-box"),Al=ir("width",i=>i.dom.offsetWidth),Yo=i=>Al.get(i),Tu=i=>Al.getOuter(i),Pm=Sg,Sf=qi,xg=(i,m,p)=>{const v=i.cells,E=v.slice(0,m),D=v.slice(m),I=E.concat(p).concat(D);return Eu(i,I)},ao=(i,m,p)=>xg(i,m,[p]),Lr=(i,m,p)=>{const v=i.cells;v[m]=p},Eu=(i,m)=>Cc(i.element,m,i.section,i.isNew),ku=(i,m)=>{const p=i.cells,v=cn(p,m);return Cc(i.element,v,i.section,i.isNew)},fl=(i,m)=>i.cells[m],Ya=(i,m)=>fl(i,m).element,Ol=i=>i.cells.length,Ds=i=>{const m=Ms(i,p=>p.section==="colgroup");return{rows:m.fail,cols:m.pass}},Gl=(i,m,p)=>{const v=cn(i.cells,p);return Cc(m(i.element),v,i.section,!0)},ud="data-snooker-locked-cols",fc=i=>le(i,ud).bind(m=>ue.from(m.match(/\d+/g))).map(m=>Cn(m,Oe)),ci=i=>{const m=je(Ds(i).rows,(v,E)=>(Je(E.cells,(D,I)=>{D.isLocked&&(v[I]=!0)}),v),{}),p=tn(m,(v,E)=>parseInt(E,10));return So(p)},Sr=(i,m)=>i+","+m,_u=(i,m,p)=>ue.from(i.access[Sr(m,p)]),qd=(i,m,p)=>{const v=Ss(i,E=>p(m,E.element));return v.length>0?ue.some(v[0]):ue.none()},Ss=(i,m)=>{const p=ds(i.all,v=>v.cells);return ho(p,m)},ai=i=>{const m={};let p=0;return Je(i.cells,v=>{const E=v.colspan;Wo(E,D=>{const I=p+D;m[I]=Si(v.element,E,I)}),p+=E}),m},xf=i=>{const m={},p=[],E=xe(i).map(Rt=>Rt.element).bind(_a).bind(fc).getOr({});let D=0,I=0,Z=0;const{pass:te,fail:fe}=Ms(i,Rt=>Rt.section==="colgroup");Je(fe,Rt=>{const Tt=[];Je(Rt.cells,rn=>{let at=0;for(;m[Sr(Z,at)]!==void 0;)at++;const Et=jn(E,at.toString()),_t=ll(rn.element,rn.rowspan,rn.colspan,Z,at,Et);for(let Un=0;Un<rn.colspan;Un++)for(let Io=0;Io<rn.rowspan;Io++){const Es=Z+Io,tr=at+Un,Tr=Sr(Es,tr);m[Tr]=_t,I=Math.max(I,tr+1)}Tt.push(_t)}),D++,p.push(Dr(Rt.element,Tt,Rt.section)),Z++});const{columns:Ae,colgroups:mt}=zn(te).map(Rt=>{const Tt=ai(Rt);return{colgroups:[U(Rt.element,mn(Tt))],columns:Tt}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:Yr(D,I),access:m,all:p,columns:Ae,colgroups:mt}},To={fromTable:i=>{const m=yf(i);return xf(m)},generate:xf,getAt:_u,findItem:qd,filterItems:Ss,justCells:i=>ds(i.all,m=>m.cells),justColumns:i=>mn(i.columns),hasColumns:i=>Lt(i.columns).length>0,getColumnAt:(i,m)=>ue.from(i.columns[m])},Yd=(i,m=Oe)=>{const p=i.grid,v=Wo(p.columns,Xe),E=Wo(p.rows,Xe);return cn(v,D=>Tf(()=>ds(E,fe=>To.getAt(i,fe,D).filter(Ae=>Ae.column===D).toArray()),fe=>fe.colspan===1&&m(fe.element),()=>To.getAt(i,0,D)))},Tf=(i,m,p)=>{const v=i();return F(v,m).orThunk(()=>ue.from(v[0]).orThunk(p)).map(I=>I.element)},x=i=>{const m=i.grid,p=Wo(m.rows,Xe),v=Wo(m.columns,Xe);return cn(p,E=>Tf(()=>ds(v,te=>To.getAt(i,E,te).filter(fe=>fe.row===E).fold(ee([]),fe=>[fe])),te=>te.rowspan===1,()=>To.getAt(i,E,0)))},R=(i,m)=>{if(m<0||m>=i.length-1)return ue.none();const p=i[m].fold(()=>{const E=wa(i.slice(0,m));return Ht(E,(D,I)=>D.map(Z=>({value:Z,delta:I+1})))},E=>ue.some({value:E,delta:0})),v=i[m+1].fold(()=>{const E=i.slice(m+1);return Ht(E,(D,I)=>D.map(Z=>({value:Z,delta:I+1})))},E=>ue.some({value:E,delta:1}));return p.bind(E=>v.map(D=>{const I=D.delta+E.delta;return Math.abs(D.value-E.value)/I}))},H=(i,m)=>p=>ce(p)==="rtl"?m:i,ce=i=>Rr(i,"direction")==="rtl"?"rtl":"ltr",he=ir("height",i=>{const m=i.dom;return Hn(i)?m.getBoundingClientRect().height:m.offsetHeight}),ot=i=>he.get(i),On=i=>he.getOuter(i),so=hn,qn=(i,m)=>({left:i,top:m,translate:(v,E)=>qn(i+v,m+E)}),pn=qn,ur=i=>{const m=i.getBoundingClientRect();return pn(m.left,m.top)},Jr=(i,m)=>i!==void 0?i:m!==void 0?m:0,Da=i=>{const m=i.dom.ownerDocument,p=m.body,v=m.defaultView,E=m.documentElement;if(p===i.dom)return pn(p.offsetLeft,p.offsetTop);const D=Jr(v==null?void 0:v.pageYOffset,E.scrollTop),I=Jr(v==null?void 0:v.pageXOffset,E.scrollLeft),Z=Jr(E.clientTop,p.clientTop),te=Jr(E.clientLeft,p.clientLeft);return Ou(i).translate(I-te,D-Z)},Ou=i=>{const m=i.dom,v=m.ownerDocument.body;return v===m?pn(v.offsetLeft,v.offsetTop):Hn(i)?ur(m):pn(0,0)},Bm=(i,m)=>({row:i,y:m}),Tg=(i,m)=>({col:i,x:m}),Ja=i=>Da(i).left+Tu(i),Eg=i=>Da(i).left,gv=(i,m)=>Tg(i,Eg(m)),x1=(i,m)=>Tg(i,Ja(m)),Bc=i=>Da(i).top,Vh=(i,m)=>Bm(i,Bc(m)),$c=(i,m)=>Bm(i,Bc(m)+On(m)),zh=(i,m,p)=>{if(p.length===0)return[];const v=cn(p.slice(1),(D,I)=>D.map(Z=>i(I,Z))),E=p[p.length-1].map(D=>m(p.length-1,D));return v.concat([E])},ql=i=>-i,An={delta:Xe,positions:i=>zh(Vh,$c,i),edge:Bc},Uh=H({delta:Xe,edge:Eg,positions:i=>zh(gv,x1,i)},{delta:ql,edge:Ja,positions:i=>zh(x1,gv,i)}),$m={delta:(i,m)=>Uh(m).delta(i,m),positions:(i,m)=>Uh(m).positions(i,m),edge:i=>Uh(i).edge(i)},E1={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},Ti=(()=>{const i="[0-9]+",p="[eE]"+("[+-]?"+i),v="\\.",E=Z=>`(?:${Z})?`,I=`[+-]?(?:${["Infinity",i+v+E(i)+E(p),v+i+E(p),i+E(p)].join("|")})`;return new RegExp(`^(${I})(.*)$`)})(),Du=(i,m)=>tt(m,p=>tt(E1[p],v=>i===v)),Im=(i,m)=>ue.from(Ti.exec(i)).bind(v=>{const E=Number(v[1]),D=v[2];return Du(D,m)?ue.some({value:E,unit:D}):ue.none()}),$t=/(\d+(\.\d+)?)%/,Ei=/(\d+(\.\d+)?)px|em/,Wh=hs("col"),Ef=hs("tr"),ki=(i,m,p)=>{const v=Ur(i).getOrThunk(()=>B(zr(i)));return m(i)/p(v)*100},kg=(i,m)=>{mo(i,"width",m+"px")},Lm=(i,m)=>{mo(i,"width",m+"%")},dd=(i,m)=>{mo(i,"height",m+"px")},_g=i=>{yr(i,"height")},Yi=i=>so(i)+"px",hv=(i,m,p,v)=>{const E=_a(i).map(D=>{const I=p(D);return Math.floor(m/100*I)}).getOr(m);return v(i,E),E},xr=(i,m,p,v)=>{const E=parseFloat(i);return ra(i,"%")&&os(m)!=="table"?hv(m,E,p,v):E},dt=i=>{const m=Yi(i);return m?xr(m,i,ot,dd):ot(i)},Qa=(i,m,p)=>{const v=p(i),E=Nc(i,m);return v/E},Fm=(i,m)=>Mc(i,m).orThunk(()=>le(i,m).map(p=>p+"px")),Zr=i=>Fm(i,"width"),kf=i=>Fm(i,"height"),Ic=i=>ki(i,Yo,Pm),cs=i=>Wh(i)?Yo(i):Sf(i),Ag=i=>Ef(i)?ot(i):Qa(i,"rowspan",dt),Ke=i=>Zr(i).bind(p=>Im(p,["fixed","relative","empty"])),as=(i,m,p)=>{mo(i,"width",m+p)},Og=i=>Yo(i)+"px",Sc=i=>ot(i)+"px",Ra=i=>ki(i,Yo,Pm)+"%",li=i=>Zr(i).exists(m=>$t.test(m)),k1=i=>Zr(i).exists(m=>Ei.test(m)),Xd=i=>Zr(i).isNone(),_1=ee($t),Yl=hs("col"),Qo=i=>Zr(i).getOrThunk(()=>cs(i)+"px"),Ru=i=>kf(i).getOrThunk(()=>Ag(i)+"px"),Dg=i=>cn(To.justColumns(i),m=>ue.from(m.element)),xc=i=>{const m=lr().browser,p=m.isChromium()||m.isFirefox();return Yl(i)?p:!0},Zh=(i,m,p,v,E,D)=>i.filter(v).fold(()=>D(R(p,m)),I=>E(I)),Xi=(i,m,p,v)=>{const E=Yd(i),D=To.hasColumns(i)?Dg(i):E,I=[ue.some($m.edge(m))].concat(cn($m.positions(E,m),te=>te.map(fe=>fe.x))),Z=W(Xs);return cn(D,(te,fe)=>Zh(te,fe,I,Z,Ae=>{if(xc(Ae))return p(Ae);{const mt=bf(E[fe],Xe);return Zh(mt,fe,I,Z,Pt=>v(ue.some(Yo(Pt))),v)}},v))},Rg=i=>i.map(m=>m+"px").getOr(""),Lc=(i,m)=>Xi(i,m,Qo,Rg),Ma=(i,m,p)=>Xi(i,m,Ic,v=>v.fold(()=>p.minCellWidth(),E=>E/p.pixelWidth()*100)),Te=(i,m,p)=>Xi(i,m,cs,v=>v.getOrThunk(p.minCellWidth)),Rs=(i,m,p,v)=>{const E=x(i),D=cn(i.all,Z=>ue.some(Z.element)),I=[ue.some(An.edge(m))].concat(cn(An.positions(E,m),Z=>Z.map(te=>te.y)));return cn(D,(Z,te)=>Zh(Z,te,I,Oe,p,v))},jh=(i,m)=>Rs(i,m,Ag,p=>p.getOrThunk(Vd)),Qr=(i,m)=>Rs(i,m,Ru,Rg),qc=(i,m)=>()=>Hn(i)?m(i):parseFloat(Mc(i,"width").getOr("0")),Tc=i=>{const m=qc(i,Yo),p=ee(0);return{width:m,pixelWidth:m,getWidths:(E,D)=>Te(E,i,D),getCellDelta:p,singleColumnWidth:ee([0]),minCellWidth:p,setElementWidth:ct,adjustTableWidth:ct,isRelative:!0,label:"none"}},Js=i=>{const m=qc(i,te=>parseFloat(Ra(te))),p=qc(i,Yo);return{width:m,pixelWidth:p,getWidths:(te,fe)=>Ma(te,i,fe),getCellDelta:te=>te/p()*100,singleColumnWidth:(te,fe)=>[100-te],minCellWidth:()=>si()/p()*100,setElementWidth:Lm,adjustTableWidth:te=>{const fe=m(),Ae=te/100*fe,mt=fe+Ae;Lm(i,mt)},isRelative:!0,label:"percent"}},Gh=i=>{const m=qc(i,Yo);return{width:m,pixelWidth:m,getWidths:(I,Z)=>Te(I,i,Z),getCellDelta:Xe,singleColumnWidth:(I,Z)=>[Math.max(si(),I+Z)-I],minCellWidth:si,setElementWidth:kg,adjustTableWidth:I=>{const Z=m()+I;kg(i,Z)},isRelative:!1,label:"pixel"}},Jd=(i,m)=>_1().exec(m)!==null?Js(i):Gh(i),_={getTableSize:i=>Zr(i).fold(()=>Tc(i),p=>Jd(i,p)),pixelSize:Gh,percentageSize:Js,noneSize:Tc},L=(i,m,p,v,E,D)=>({minRow:i,minCol:m,maxRow:p,maxCol:v,allCells:E,selectedCells:D}),Y=(i,m)=>{const p=i.grid.columns;let E=i.grid.rows,D=p,I=0,Z=0;const te=[],fe=[];return Ho(i.access,Ae=>{if(te.push(Ae),m(Ae)){fe.push(Ae);const mt=Ae.row,Pt=mt+Ae.rowspan-1,Rt=Ae.column,Tt=Rt+Ae.colspan-1;mt<E?E=mt:Pt>I&&(I=Pt),Rt<D?D=Rt:Tt>Z&&(Z=Tt)}}),L(E,D,I,Z,te,fe)},pe=(i,m,p)=>{const v=i[p].element,E=ge.fromTag("td");Os(E,ge.fromTag("br")),(m?Os:Ar)(v,E)},Ge=(i,m,p,v)=>{const E=ho(i,Z=>Z.section!=="colgroup"),D=m.grid.columns,I=m.grid.rows;for(let Z=0;Z<I;Z++){let te=!1;for(let fe=0;fe<D;fe++)Z<p.minRow||Z>p.maxRow||fe<p.minCol||fe>p.maxCol||(To.getAt(m,Z,fe).filter(v).isNone()?pe(E,te,Z):te=!0)}},St=(i,m,p,v)=>{Ho(p.columns,I=>{(I.column<m.minCol||I.column>m.maxCol)&&Or(I.element)});const E=ho(Zi(i,"tr"),I=>I.dom.childElementCount===0);Je(E,Or),(m.minCol===m.maxCol||m.minRow===m.maxRow)&&Je(Zi(i,"th,td"),I=>{re(I,"rowspan"),re(I,"colspan")}),re(i,ud),re(i,"data-snooker-col-series"),_.getTableSize(i).adjustTableWidth(v)},on=(i,m,p,v)=>{if(v.minCol===0&&m.grid.columns===v.maxCol+1)return 0;const E=Te(m,i,p),D=je(E,(fe,Ae)=>fe+Ae,0),te=je(E.slice(v.minCol,v.maxCol+1),(fe,Ae)=>fe+Ae,0)/D*p.pixelWidth()-p.pixelWidth();return p.getCellDelta(te)},Fn=(i,m)=>{const p=Pt=>Yn(Pt.element,m),v=Ea(i),E=yf(v),D=_.getTableSize(i),I=To.generate(E),Z=Y(I,p),te="th:not("+m+"),td:not("+m+")",fe=od(v,"th,td",Pt=>Yn(Pt,te));Je(fe,Or),Ge(E,I,Z,p);const Ae=To.fromTable(i),mt=on(i,Ae,D,Z);return St(v,Z,I,mt),v},lo=" ",gs=((i,m)=>{const p=D=>{if(!i(D))throw new Error("Can only get "+m+" value of a "+m+" node");return v(D).getOr("")},v=D=>i(D)?ue.from(D.dom.nodeValue):ue.none();return{get:p,getOption:v,set:(D,I)=>{if(!i(D))throw new Error("Can only set raw "+m+" value of a "+m+" node");D.dom.nodeValue=I}}})(bc,"text"),dr=i=>gs.get(i),gl=i=>gs.getOption(i),ii=(i,m)=>gs.set(i,m),ia=i=>os(i)==="img"?1:gl(i).fold(()=>xo(i).length,m=>m.length),Mu=i=>gl(i).filter(m=>m.trim().length!==0||m.indexOf(lo)>-1).isSome(),md=i=>yn(i)&&_r(i,"contenteditable")==="false",fd=["img","br"],Qd=i=>Mu(i)||Bo(fd,os(i))||md(i),_f=i=>kl(i,Qd),Mg=i=>qh(i,Qd),qh=(i,m)=>{const p=v=>{const E=xo(v);for(let D=E.length-1;D>=0;D--){const I=E[D];if(m(I))return ue.some(I);const Z=p(I);if(Z.isSome())return Z}return ue.none()};return p(i)},gc={scope:["row","col"]},Ji=i=>()=>{const m=ge.fromTag("td",i.dom);return Os(m,ge.fromTag("br",i.dom)),m},em=i=>()=>ge.fromTag("col",i.dom),zo=i=>()=>ge.fromTag("colgroup",i.dom),fr=i=>()=>ge.fromTag("tr",i.dom),Mr=(i,m,p)=>{const v=ni(i,m);return Ho(p,(E,D)=>{E===null?re(v,D):Ns(v,D,E)}),v},el=i=>i,Kh=(i,m,p)=>_f(i).map(E=>{const D=p.join(","),I=qe(E,D,Z=>ss(Z,i));return Us(I,(Z,te)=>{const fe=yc(te);return Os(Z,fe),fe},m)}).getOr(m),Yh=(i,m)=>{Ho(gc,(p,v)=>le(i,v).filter(E=>Bo(p,E)).each(E=>Ns(m,v,E)))},Dl=(i,m,p)=>{const v=(I,Z)=>{Cr(I.element,Z),yr(Z,"height"),I.colspan!==1&&yr(Z,"width")},E=I=>{const Z=ge.fromTag(os(I.element),m.dom),te=p.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),fe=te.length>0?Kh(I.element,Z,te):Z;return Os(fe,ge.fromTag("br")),v(I,Z),Yh(I.element,Z),i(I.element,Z),Z};return{col:I=>{const Z=ge.fromTag(os(I.element),m.dom);return v(I,Z),i(I.element,Z),Z},colgroup:zo(m),row:fr(m),cell:E,replace:Mr,colGap:em(m),gap:Ji(m)}},Rl=i=>({col:em(i),colgroup:zo(i),row:fr(i),cell:Ji(i),replace:el,colGap:em(i),gap:Ji(i)}),K2=(i,m)=>{const v=document.createElement("div");return v.innerHTML=i,xo(ge.fromDom(v))},Qi=i=>cn(i,ge.fromDom),Ng=i=>m=>m.options.get(i),gd="100%",tm=i=>{var m;const p=i.dom,v=(m=p.getParent(i.selection.getStart(),p.isBlock))!==null&&m!==void 0?m:i.getBody();return Pm(ge.fromDom(v))+"px"},Pg=(i,m)=>Of(i)||!Df(i)?m:Na(i)?{...m,width:tm(i)}:{...m,width:gd},s_=(i,m)=>Of(i)||Df(i)?m:Na(i)?{...m,width:tm(i)}:{...m,width:gd},A1=i=>{const m=i.options.register;m("table_clone_elements",{processor:"string[]"}),m("table_use_colgroups",{processor:"boolean",default:!0}),m("table_header_type",{processor:p=>{const v=Bo(["section","cells","sectionCells","auto"],p);return v?{value:p,valid:v}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),m("table_sizing_mode",{processor:"string",default:"auto"}),m("table_default_attributes",{processor:"object",default:{border:"1"}}),m("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),m("table_column_resizing",{processor:p=>{const v=Bo(["preservetable","resizetable"],p);return v?{value:p,valid:v}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),m("table_resize_bars",{processor:"boolean",default:!0}),m("table_style_by_css",{processor:"boolean",default:!0}),m("table_merge_content_on_paste",{processor:"boolean",default:!0})},Af=i=>ue.from(i.options.get("table_clone_elements")),r_=i=>{const m=i.options.get("object_resizing");return Bo(m.split(","),"table")},ac=Ng("table_header_type"),pv=Ng("table_column_resizing"),hd=i=>pv(i)==="preservetable",Bg=i=>pv(i)==="resizetable",O1=Ng("table_sizing_mode"),pd=i=>O1(i)==="relative",Na=i=>O1(i)==="fixed",Of=i=>O1(i)==="responsive",bv=Ng("table_resize_bars"),Df=Ng("table_style_by_css"),ua=Ng("table_merge_content_on_paste"),vv=i=>{const m=i.options,p=m.get("table_default_attributes");return m.isSet("table_default_attributes")?p:s_(i,p)},yv=i=>{const m=i.options,p=m.get("table_default_styles");return m.isSet("table_default_styles")?p:Pg(i,p)},c_=Ng("table_use_colgroups"),Y2=i=>Wr(i,"[contenteditable]"),Rf=(i,m=!1)=>Hn(i)?i.dom.isContentEditable:Y2(i).fold(ee(m),p=>$g(p)==="true"),$g=i=>i.dom.contentEditable,Xl=i=>ge.fromDom(i.getBody()),_i=i=>m=>ss(m,Xl(i)),Ai=i=>{re(i,"data-mce-style");const m=p=>re(p,"data-mce-style");Je(yu(i),m),Je(dl(i),m),Je(pg(i),m)},D1=i=>ge.fromDom(i.selection.getStart()),R1=i=>i.getBoundingClientRect().width,Xh=i=>i.getBoundingClientRect().height,Ny=i=>(m,p)=>{const v=m.dom.getStyle(p,i)||m.dom.getAttrib(p,i);return ue.from(v).filter(Q)},X2=Ny("width"),J2=Ny("height"),Py=i=>/^(\d+(\.\d+)?)%$/.test(i),Jh=i=>/^(\d+(\.\d+)?)px$/.test(i),Eo=i=>bs(i,hs("table")).exists(Rf),ln=(i,m)=>{const p=m.column,v=m.column+m.colspan-1,E=m.row,D=m.row+m.rowspan-1;return p<=i.finishCol&&v>=i.startCol&&E<=i.finishRow&&D>=i.startRow},Mf=(i,m)=>m.column>=i.startCol&&m.column+m.colspan-1<=i.finishCol&&m.row>=i.startRow&&m.row+m.rowspan-1<=i.finishRow,Cv=(i,m)=>{let p=!0;const v=Qe(Mf,m);for(let E=m.startRow;E<=m.finishRow;E++)for(let D=m.startCol;D<=m.finishCol;D++)p=p&&To.getAt(i,E,D).exists(v);return p?ue.some(m):ue.none()},wv=(i,m)=>wi(Math.min(i.row,m.row),Math.min(i.column,m.column),Math.max(i.row+i.rowspan-1,m.row+m.rowspan-1),Math.max(i.column+i.colspan-1,m.column+m.colspan-1)),By=(i,m,p)=>{const v=To.findItem(i,m,ss),E=To.findItem(i,p,ss);return v.bind(D=>E.map(I=>wv(D,I)))},Sv=(i,m,p)=>By(i,m,p).bind(v=>Cv(i,v)),xs=(i,m,p,v)=>To.findItem(i,m,ss).bind(E=>{const D=p>0?E.row+E.rowspan-1:E.row,I=v>0?E.column+E.colspan-1:E.column;return To.getAt(i,D+p,I+v).map(te=>te.element)}),$y=(i,m,p)=>By(i,m,p).map(v=>{const E=To.filterItems(i,Qe(ln,v));return cn(E,D=>D.element)}),Q2=(i,m)=>{const p=(v,E)=>al(E,v);return To.findItem(i,m,p).map(v=>v.element)},Iy=(i,m,p)=>_a(i).bind(v=>{const E=Ig(v);return xs(E,i,m,p)}),Ye=(i,m,p)=>{const v=Ig(i);return $y(v,m,p)},Qh=(i,m,p,v,E)=>{const D=Ig(i),I=ss(i,p)?ue.some(m):Q2(D,m),Z=ss(i,E)?ue.some(v):Q2(D,v);return I.bind(te=>Z.bind(fe=>$y(D,te,fe)))},eS=(i,m,p)=>{const v=Ig(i);return Sv(v,m,p)},Ig=To.fromTable;var tS=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Hm=()=>{const i=fe=>ge.fromDom(fe.dom.cloneNode(!1)),m=fe=>As(fe).dom,p=fe=>Ls(fe)?os(fe)==="body"?!0:Bo(tS,os(fe)):!1,v=fe=>Ls(fe)?Bo(["br","img","hr","input"],os(fe)):!1,E=fe=>Ls(fe)&&_r(fe,"contenteditable")==="false",D=(fe,Ae)=>fe.dom.compareDocumentPosition(Ae.dom),I=(fe,Ae)=>{const mt=De(fe);mc(Ae,mt)},Z=fe=>{const Ae=os(fe);return Bo(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],Ae)},te=fe=>Ls(fe)?le(fe,"lang"):ue.none();return{up:ee({selector:Gn,closest:Wr,predicate:it,all:Ps}),down:ee({selector:Jo,predicate:Ee}),styles:ee({get:Rr,getRaw:Mc,set:mo,remove:yr}),attrs:ee({get:_r,set:Ns,remove:re,copyTo:I}),insert:ee({before:Ha,after:Dc,afterAll:Ko,append:Os,appendAll:nc,prepend:Ar,wrap:Ta}),remove:ee({unwrap:Ul,remove:Or}),create:ee({nu:ge.fromTag,clone:i,text:ge.fromText}),query:ee({comparePosition:D,prevSibling:Ga,nextSibling:xa}),property:ee({children:xo,name:os,parent:tc,document:m,isText:bc,isComment:Xo,isElement:Ls,isSpecial:Z,getLanguage:te,getText:dr,setText:ii,isBoundary:p,isEmptyTag:v,isNonEditable:E}),eq:ss,is:$r}};const xv=(i,m,p,v)=>{const E=p[0],D=p.slice(1);return v(i,m,E,D)},Lg=(i,m,p)=>p.length>0?xv(i,m,p,M1):ue.none(),M1=(i,m,p,v)=>{const E=m(i,p);return Us(v,(D,I)=>{const Z=m(i,I);return Nf(i,D,Z)},E)},Nf=(i,m,p)=>m.bind(v=>p.filter(Qe(i.eq,v))),mr=(i,m)=>Qe(i.eq,m),nm=(i,m,p,v=dn)=>{const E=[m].concat(i.up().all(m)),D=[p].concat(i.up().all(p)),I=Ae=>dc(Ae,v).fold(()=>Ae,Pt=>Ae.slice(0,Pt+1)),Z=I(E),te=I(D),fe=F(Z,Ae=>tt(te,mr(i,Ae)));return{firstpath:Z,secondpath:te,shared:fe}},nS=Lg,Vm=nm,Ly=Hm(),Fg=(i,m)=>nS(Ly,(p,v)=>i(v),m),Fy=(i,m,p)=>Vm(Ly,i,m,p),Hy=i=>Gn(i,"table"),Ml=(i,m,p)=>{const v=E=>D=>p!==void 0&&p(D)||ss(D,E);return ss(i,m)?ue.some({boxes:ue.some([i]),start:i,finish:m}):Hy(i).bind(E=>Hy(m).bind(D=>{if(ss(E,D))return ue.some({boxes:Ye(E,i,m),start:i,finish:m});if(al(E,D)){const I=qe(m,"td,th",v(E)),Z=I.length>0?I[I.length-1]:m;return ue.some({boxes:Qh(E,i,E,m,D),start:i,finish:Z})}else if(al(D,E)){const I=qe(i,"td,th",v(D)),Z=I.length>0?I[I.length-1]:i;return ue.some({boxes:Qh(D,i,E,m,D),start:i,finish:Z})}else return Fy(i,m).shared.bind(I=>Wr(I,"table",p).bind(Z=>{const te=qe(m,"td,th",v(Z)),fe=te.length>0?te[te.length-1]:m,Ae=qe(i,"td,th",v(Z)),mt=Ae.length>0?Ae[Ae.length-1]:i;return ue.some({boxes:Qh(Z,i,E,m,D),start:mt,finish:fe})}))}))},ep=(i,m)=>{const p=Jo(i,m);return p.length>0?ue.some(p):ue.none()},a_=(i,m)=>F(i,p=>Yn(p,m)),Pf=(i,m,p)=>qa(i,m).bind(v=>qa(i,p).bind(E=>Fg(Hy,[v,E]).map(D=>({first:v,last:E,table:D})))),l_=(i,m)=>Gn(i,"table").bind(p=>qa(p,m).bind(v=>Ml(v,i).bind(E=>E.boxes.map(D=>({boxes:D,start:E.start,finish:E.finish}))))),Hg=(i,m,p,v,E)=>a_(i,E).bind(D=>Iy(D,m,p).bind(I=>l_(I,v))),Tv=(i,m)=>ep(i,m),i_=(i,m,p)=>Pf(i,m,p).bind(v=>{const E=te=>ss(i,te),D="thead,tfoot,tbody,table",I=Gn(v.first,D,E),Z=Gn(v.last,D,E);return I.bind(te=>Z.bind(fe=>ss(te,fe)?eS(v.table,v.first,v.last):ue.none()))}),N1=Xe,bd=i=>{const m=(v,E)=>le(v,E).exists(D=>parseInt(D,10)>1),p=v=>m(v,"rowspan")||m(v,"colspan");return i.length>0&&Go(i,p)?ue.some(i):ue.none()},hl=(i,m,p)=>m.length<=1?ue.none():i_(i,p.firstSelectedSelector,p.lastSelectedSelector).map(v=>({bounds:v,cells:m})),vt="data-mce-selected",tp="td["+vt+"],th["+vt+"]",da="["+vt+"]",Vy="data-mce-first-selected",zy="td["+Vy+"],th["+Vy+"]",Uy="data-mce-last-selected",Gs="td["+Uy+"],th["+Uy+"]",u_=da,Vg={selected:vt,selectedSelector:tp,firstSelected:Vy,firstSelectedSelector:zy,lastSelected:Uy,lastSelectedSelector:Gs},zm=(i,m,p)=>({element:p,mergable:hl(m,i,Vg),unmergable:bd(i),selection:N1(i)}),np=(i,m,p)=>({element:i,clipboard:m,generators:p}),Wy=(i,m,p,v)=>({selection:N1(i),clipboard:p,generators:v}),om=i=>_a(i).bind(m=>Tv(m,Vg.firstSelectedSelector)).fold(ee(i),m=>m[0]),oS=i=>(m,p)=>{const v=os(m),E=v==="col"||v==="colgroup"?om(m):m;return Wr(E,i,p)},hc=oS("th,td,caption"),Ev=oS("th,td"),Ts=i=>Qi(i.model.table.getSelectedCells()),Zy=i=>ho(Ts(i),m=>Yn(m,Vg.selectedSelector)),Nl=i=>_a(i[0]).map(m=>{const p=Fn(m,u_);return Ai(p),[p]}),op=(i,m)=>cn(m,p=>i.selection.serializer.serialize(p.dom,{})).join(""),vd=(i,m)=>{const p=i.getDoc(),v=be(ge.fromDom(i.getBody())),E=ge.fromTag("div",p);Ns(E,"data-mce-bogus","all"),ws(E,{position:"fixed",left:"-9999999px",top:"0",overflow:"hidden",opacity:"0"});const D=ze(v);nc(E,m),Os(D,E);const I=E.dom.innerText;return Or(E),I},WR=(i,m)=>{i.on("BeforeGetContent",p=>{const v=E=>{p.preventDefault(),Nl(E).each(D=>{const I=p.format==="text"?vd(i,D):op(i,D);p.content=I})};if(p.selection===!0){const E=Zy(i);E.length>=1&&v(E)}}),i.on("BeforeSetContent",p=>{if(p.selection===!0&&p.paste===!0){const v=Ts(i);xe(v).each(E=>{_a(E).each(D=>{const I=ho(K2(p.content),te=>os(te)!=="meta"),Z=hs("table");if(ua(i)&&I.length===1&&Z(I[0])){p.preventDefault();const te=ge.fromDom(i.getDoc()),fe=Rl(te),Ae=np(E,I[0],fe);m.pasteCells(D,Ae).each(()=>{i.focus()})}})})}})},kv=(i,m)=>({element:i,offset:m}),d_=(i,m,p)=>i.property().isText(m)&&i.property().getText(m).trim().length===0||i.property().isComment(m)?p(m).bind(v=>d_(i,v,p).orThunk(()=>ue.some(v))):ue.none(),sS=(i,m)=>i.property().isText(m)?i.property().getText(m).length:i.property().children(m).length,Nu=(i,m)=>{const p=d_(i,m,i.query().prevSibling).getOr(m);if(i.property().isText(p))return kv(p,sS(i,p));const v=i.property().children(p);return v.length>0?Nu(i,v[v.length-1]):kv(p,sS(i,p))},yd=Nu,pl=Hm(),sp=i=>yd(pl,i),_v=(i,m)=>{Xs(i)||Ke(i).each(v=>{const E=v.value/2;as(i,E,v.unit),as(m,E,v.unit)})},Av=i=>cn(i,ee(0)),rp=(i,m,p,v,E)=>E(i.slice(0,m)).concat(v).concat(E(i.slice(p))),Bf=i=>(m,p,v,E)=>{if(i(v)){const D=Math.max(E,m[p]-Math.abs(v)),I=Math.abs(D-m[p]);return v>=0?I:-I}else return v},sm=Bf(i=>i<0),cp=Bf(Oe),$f=()=>{const i=(Z,te,fe,Ae,mt)=>{const Pt=sm(Z,te,Ae,mt);return rp(Z,te,fe+1,[Pt,0],Av)},m=(Z,te,fe,Ae)=>{const mt=(100+fe)/100,Pt=Math.max(Ae,(Z[te]+fe)/mt);return cn(Z,(Rt,Tt)=>(Tt===te?Pt:Rt/mt)-Rt)},p=(Z,te,fe,Ae,mt,Pt)=>Pt?m(Z,te,Ae,mt):i(Z,te,fe,Ae,mt);return{resizeTable:(Z,te)=>Z(te),clampTableDelta:sm,calcLeftEdgeDeltas:p,calcMiddleDeltas:(Z,te,fe,Ae,mt,Pt,Rt)=>p(Z,fe,Ae,mt,Pt,Rt),calcRightEdgeDeltas:(Z,te,fe,Ae,mt,Pt)=>{if(Pt)return m(Z,fe,Ae,mt);{const Rt=sm(Z,fe,Ae,mt);return Av(Z.slice(0,fe)).concat([Rt])}},calcRedestributedWidths:(Z,te,fe,Ae)=>{if(Ae){const Pt=(te+fe)/te,Rt=cn(Z,Tt=>Tt/Pt);return{delta:Pt*100-100,newSizes:Rt}}else return{delta:fe,newSizes:Z}}}},Um=()=>{const i=(I,Z,te,fe,Ae)=>{const mt=fe>=0?te:Z,Pt=cp(I,mt,fe,Ae);return rp(I,Z,te+1,[Pt,-Pt],Av)};return{resizeTable:(I,Z,te)=>{te&&I(Z)},clampTableDelta:(I,Z,te,fe,Ae)=>{if(Ae){if(te>=0)return te;{const mt=je(I,(Pt,Rt)=>Pt+Rt-fe,0);return Math.max(-mt,te)}}else return sm(I,Z,te,fe)},calcLeftEdgeDeltas:i,calcMiddleDeltas:(I,Z,te,fe,Ae,mt)=>i(I,te,fe,Ae,mt),calcRightEdgeDeltas:(I,Z,te,fe,Ae,mt)=>{if(mt)return Av(I);{const Pt=fe/I.length;return cn(I,ee(Pt))}},calcRedestributedWidths:(I,Z,te,fe)=>({delta:0,newSizes:I})}},zg=i=>To.fromTable(i).grid,P1=hs("th"),Ov=i=>Go(i,m=>P1(m.element)),rS=(i,m)=>i&&m?"sectionCells":i?"section":"cells",jy=i=>{const m=i.section==="thead",p=vs(ap(i.cells),"th");return i.section==="tfoot"?{type:"footer"}:m||p?{type:"header",subType:rS(m,p)}:{type:"body"}},ap=i=>{const m=ho(i,p=>P1(p.element));return m.length===0?ue.some("td"):m.length===i.length?ue.some("th"):ue.none()},cS=i=>{const m=cn(i,E=>jy(E).type),p=Bo(m,"header"),v=Bo(m,"footer");if(!p&&!v)return ue.some("body");{const E=Bo(m,"body");return p&&!E&&!v?ue.some("header"):!p&&!E&&v?ue.some("footer"):ue.none()}},m_=i=>Ht(i.all,m=>{const p=jy(m);return p.type==="header"?ue.from(p.subType):ue.none()}),Dv=(i,m,p)=>sc(p(i.element,m),!0,i.isLocked),Gy=(i,m)=>i.section!==m?Cc(i.element,i.cells,m,i.isNew):i,B1=()=>({transformRow:Gy,transformCell:(i,m,p)=>{const v=p(i.element,m),E=os(v)!=="td"?oi(v,"td"):v;return sc(E,i.isNew,i.isLocked)}}),qy=()=>({transformRow:Gy,transformCell:Dv}),lp=()=>({transformRow:(i,m)=>Gy(i,m==="thead"?"tbody":m),transformCell:Dv}),ip={getTableSectionType:(i,m)=>{const p=To.fromTable(i);switch(m_(p).getOr(m)){case"section":return B1();case"sectionCells":return qy();case"cells":return lp()}},section:B1,sectionCells:qy,cells:lp,fallback:()=>({transformRow:Xe,transformCell:Dv})},Pu=(i,m,p,v)=>{p===v?re(i,m):Ns(i,m,p)},$1=(i,m,p)=>{zn(co(i,m)).fold(()=>Ar(i,p),v=>Dc(v,p))},aS=(i,m)=>{const p=ka(i,m).getOrThunk(()=>{const v=ge.fromTag(m,zr(i).dom);return m==="thead"?$1(i,"caption,colgroup",v):m==="colgroup"?$1(i,"caption",v):Os(i,v),v});return oc(p),p},lS=(i,m)=>{const p=[],v=[],E=Rt=>cn(Rt,Tt=>{Tt.isNew&&p.push(Tt.element);const rn=Tt.element;return oc(rn),Je(Tt.cells,at=>{at.isNew&&v.push(at.element),Pu(at.element,"colspan",at.colspan,1),Pu(at.element,"rowspan",at.rowspan,1),Os(rn,at.element)}),rn}),D=Rt=>ds(Rt,Tt=>cn(Tt.cells,rn=>(Pu(rn.element,"span",rn.colspan,1),rn.element))),I=(Rt,Tt)=>{const rn=aS(i,Tt),Et=(Tt==="colgroup"?D:E)(Rt);nc(rn,Et)},Z=Rt=>{ka(i,Rt).each(Or)},te=(Rt,Tt)=>{Rt.length>0?I(Rt,Tt):Z(Tt)},fe=[],Ae=[],mt=[],Pt=[];return Je(m,Rt=>{switch(Rt.section){case"thead":fe.push(Rt);break;case"tbody":Ae.push(Rt);break;case"tfoot":mt.push(Rt);break;case"colgroup":Pt.push(Rt);break}}),te(Pt,"colgroup"),te(fe,"thead"),te(Ae,"tbody"),te(mt,"tfoot"),{newRows:p,newCells:v}},iS=i=>cn(i,m=>{const p=yc(m.element);return Je(m.cells,v=>{const E=Ea(v.element);Pu(E,"colspan",v.colspan,1),Pu(E,"rowspan",v.rowspan,1),Os(p,E)}),p}),Ug=(i,m)=>cn(i,p=>fl(p,m)),GR=(i,m)=>i[m],Wg=(i,m)=>{if(i.length===0)return 0;const p=i[0];return dc(i,E=>!m(p.element,E.element)).getOr(i.length)},up=(i,m,p,v)=>{const E=GR(i,m),D=E.section==="colgroup",I=Wg(E.cells.slice(p),v),Z=D?1:Wg(Ug(i.slice(m),p),v);return{colspan:I,rowspan:Z}},uS=(i,m)=>{const p=cn(i,E=>cn(E.cells,dn)),v=(E,D,I,Z)=>{for(let te=E;te<E+I;te++)for(let fe=D;fe<D+Z;fe++)p[te][fe]=!0};return cn(i,(E,D)=>{const I=ds(E.cells,(Z,te)=>{if(p[D][te]===!1){const fe=up(i,D,te,m);return v(D,te,fe.rowspan,fe.colspan),[Ci(Z.element,fe.rowspan,fe.colspan,Z.isNew)]}else return[]});return sa(E.element,I,E.section,E.isNew)})},dp=(i,m,p)=>{const v=[];Je(i.colgroups,E=>{const D=[];for(let I=0;I<i.grid.columns;I++){const Z=To.getColumnAt(i,I).map(te=>sc(te.element,p,!1)).getOrThunk(()=>sc(m.colGap(),!0,!1));D.push(Z)}v.push(Cc(E.element,D,"colgroup",p))});for(let E=0;E<i.grid.rows;E++){const D=[];for(let te=0;te<i.grid.columns;te++){const fe=To.getAt(i,E,te).map(Ae=>sc(Ae.element,p,Ae.isLocked)).getOrThunk(()=>sc(m.gap(),!0,!1));D.push(fe)}const I=i.all[E],Z=Cc(I.element,D,I.section,p);v.push(Z)}return v},f_=(i,m)=>dp(i,m,!1),Ky=i=>uS(i,ss),dS=(i,m)=>Ht(i.all,p=>F(p.cells,v=>ss(m,v.element))),mS=(i,m,p)=>{const v=cn(m.selection,D=>vu(D).bind(I=>dS(i,I)).filter(p)),E=_l(v);return Hd(E.length>0,E)},Va=(i,m,p,v,E)=>(D,I,Z,te)=>{const fe=To.fromTable(D),Ae=ue.from(te==null?void 0:te.section).getOrThunk(ip.fallback);return m(fe,I).map(Pt=>{const Rt=f_(fe,Z),Tt=i(Rt,Pt,ss,E(Z),Ae),rn=ci(Tt.grid),at=Ky(Tt.grid);return{info:Pt,grid:at,cursor:Tt.cursor,lockedColumns:rn}}).bind(Pt=>{const Rt=lS(D,Pt.grid),Tt=ue.from(te==null?void 0:te.sizing).getOrThunk(()=>_.getTableSize(D)),rn=ue.from(te==null?void 0:te.resize).getOrThunk(Um);return p(D,Pt.grid,Pt.info,{sizing:Tt,resize:rn,section:Ae}),v(D),re(D,ud),Pt.lockedColumns.length>0&&Ns(D,ud,Pt.lockedColumns.join(",")),ue.some({cursor:Pt.cursor,newRows:Rt.newRows,newCells:Rt.newCells})})},qR=(i,m)=>vu(m.element).bind(p=>dS(i,p).map(v=>({...v,generators:m.generators,clipboard:m.clipboard}))),If=(i,m)=>mS(i,m,Oe).map(p=>({cells:p,generators:m.generators,clipboard:m.clipboard})),g_=(i,m)=>m.mergable,Wm=(i,m)=>m.unmergable,ui=(i,m)=>mS(i,m,Oe),Cd=(i,m)=>mS(i,m,p=>!p.isLocked),Zg=(i,m)=>dS(i,m).exists(p=>!p.isLocked),fS=(i,m)=>Go(m,p=>Zg(i,p)),I1=(i,m)=>g_(i,m).filter(p=>fS(i,p.cells)),Rv=(i,m)=>Wm(i,m).filter(p=>fS(i,p)),Lf=(i,m,p,v)=>{const E=Ds(i).rows;if(E.length===0)return i;for(let D=m.startRow;D<=m.finishRow;D++)for(let I=m.startCol;I<=m.finishCol;I++){const Z=E[D],te=fl(Z,I).isLocked;Lr(Z,I,sc(v(),!1,te))}return i},Yy=(i,m,p,v)=>{const E=Ds(i).rows;let D=!0;for(let I=0;I<E.length;I++)for(let Z=0;Z<Ol(E[0]);Z++){const te=E[I],fe=fl(te,Z),Ae=fe.element,mt=p(Ae,m);mt&&!D?Lr(te,Z,sc(v(),!0,fe.isLocked)):mt&&(D=!1)}return i},wd=(i,m)=>je(i,(p,v)=>tt(p,E=>m(E.element,v.element))?p:p.concat([v]),[]),rm=(i,m,p,v)=>(m>0&&m<i[0].cells.length&&Je(i,E=>{const D=E.cells[m-1];let I=0;const Z=v();for(;E.cells.length>m+I&&p(D.element,E.cells[m+I].element);)Lr(E,m+I,sc(Z,!0,E.cells[m+I].isLocked)),I++}),i),h_=(i,m,p,v)=>{const E=Ds(i).rows;if(m>0&&m<E.length){const D=E[m-1].cells,I=wd(D,p);Je(I,Z=>{let te=ue.none();for(let fe=m;fe<E.length;fe++)for(let Ae=0;Ae<Ol(E[0]);Ae++){const mt=E[fe],Pt=fl(mt,Ae);p(Pt.element,Z.element)&&(te.isNone()&&(te=ue.some(v())),te.each(Tt=>{Lr(mt,Ae,sc(Tt,!0,Pt.isLocked))}))}})}return i},Kc=i=>{const m=D=>D(i),p=ee(i),v=()=>E,E={tag:!0,inner:i,fold:(D,I)=>I(i),isValue:Oe,isError:dn,map:D=>Mv.value(D(i)),mapError:v,bind:m,exists:m,forall:m,getOr:p,or:v,getOrThunk:p,orThunk:v,getOrDie:p,each:D=>{D(i)},toOptional:()=>ue.some(i)};return E},L1=i=>{const m=()=>p,p={tag:!1,inner:i,fold:(v,E)=>v(i),isValue:dn,isError:Oe,map:m,mapError:v=>Mv.error(v(i)),bind:m,exists:dn,forall:Oe,getOr:Xe,or:Xe,getOrThunk:gn,orThunk:gn,getOrDie:xt(String(i)),each:ct,toOptional:ue.none};return p},Mv={value:Kc,error:L1,fromOption:(i,m)=>i.fold(()=>L1(m),Kc)},Xy=(i,m,p)=>{if(i.row>=m.length||i.column>Ol(m[0]))return Mv.error("invalid start address out of table bounds, row: "+i.row+", column: "+i.column);const v=m.slice(i.row),E=v[0].cells.slice(i.column),D=Ol(p[0]),I=p.length;return Mv.value({rowDelta:v.length-I,colDelta:E.length-D})},jg=(i,m)=>{const p=Ol(i[0]),v=Ol(m[0]);return{rowDelta:0,colDelta:p-v}},Ff=(i,m)=>{const p=i.length,v=m.length;return{rowDelta:p-v,colDelta:0}},Bu=(i,m,p,v)=>{const E=m.section==="colgroup"?p.col:p.cell;return Wo(i,D=>sc(E(),!0,v(D)))},tu=(i,m,p,v)=>{const E=i[i.length-1];return i.concat(Wo(m,()=>{const D=E.section==="colgroup"?p.colgroup:p.row,I=Gl(E,D,Xe),Z=Bu(I.cells.length,I,p,te=>Ao(v,te.toString()));return Eu(I,Z)}))},gS=(i,m,p,v)=>cn(i,E=>{const D=Bu(m,E,p,dn);return xg(E,v,D)}),p_=(i,m,p)=>cn(i,v=>je(p,(E,D)=>{const I=Bu(1,v,m,Oe)[0];return ao(E,D,I)},v)),cm=(i,m,p)=>{const v=m.colDelta<0?gS:Xe,E=m.rowDelta<0?tu:Xe,D=ci(i),I=Ol(i[0]),Z=tt(D,Ae=>Ae===I-1),te=v(i,Math.abs(m.colDelta),p,Z?I-1:I),fe=ci(te);return E(te,Math.abs(m.rowDelta),p,Cn(fe,Oe))},Zm=(i,m,p,v)=>{const E=fl(i[m],p),D=Qe(v,E.element),I=i[m];return i.length>1&&Ol(I)>1&&(p>0&&D(Ya(I,p-1))||p<I.cells.length-1&&D(Ya(I,p+1))||m>0&&D(Ya(i[m-1],p))||m<i.length-1&&D(Ya(i[m+1],p)))},Nv=(i,m,p,v,E,D)=>{const I=i.row,Z=i.column,te=p.length,fe=Ol(p[0]),Ae=I+te,mt=Z+fe+D.length,Pt=Cn(D,Oe);for(let Rt=I;Rt<Ae;Rt++){let Tt=0;for(let rn=Z;rn<mt;rn++){if(Pt[rn]){Tt++;continue}Zm(m,Rt,rn,E)&&Yy(m,Ya(m[Rt],rn),E,v.cell);const at=rn-Z-Tt,Et=fl(p[Rt-I],at),_t=Et.element,Un=v.replace(_t);Lr(m[Rt],rn,sc(Un,!0,Et.isLocked))}}return m},Lo=(i,m,p)=>{const v=Ol(m[0]),E=Ds(m).cols.length+i.row,D=Wo(v-i.column,Z=>Z+i.column),I=F(D,Z=>Go(p,te=>te!==Z)).getOr(v-1);return{row:E,column:I}},tl=(i,m,p)=>ho(p,v=>v>=i.column&&v<=Ol(m[0])+i.column),Gg=(i,m,p,v,E)=>{const D=ci(m),I=Lo(i,m,D),Z=Ds(p).rows,te=tl(I,Z,D);return Xy(I,m,Z).map(Ae=>{const mt={...Ae,colDelta:Ae.colDelta-te.length},Pt=cm(m,mt,v),Rt=ci(Pt),Tt=tl(I,Z,Rt);return Nv(I,Pt,Z,v,E,Tt)})},mp=(i,m,p,v,E)=>{rm(m,i,E,v.cell);const D=Ff(p,m),I=cm(p,D,v),Z=Ff(m,I),te=cm(m,Z,v);return cn(te,(fe,Ae)=>xg(fe,i,I[Ae].cells))},Qs=(i,m,p,v,E)=>{h_(m,i,E,v.cell);const D=ci(m),I=jg(m,p),Z={...I,colDelta:I.colDelta-D.length},te=cm(m,Z,v),{cols:fe,rows:Ae}=Ds(te),mt=ci(te),Pt=jg(p,m),Rt={...Pt,colDelta:Pt.colDelta+mt.length},Tt=p_(p,v,mt),rn=cm(Tt,Rt,v);return[...fe,...Ae.slice(0,i),...rn,...Ae.slice(i,Ae.length)]},qg=(i,m,p,v)=>Gl(i,E=>v(E,p),m),jm=(i,m,p,v,E)=>{const{rows:D,cols:I}=Ds(i),Z=D.slice(0,m),te=D.slice(m),fe=qg(D[p],(Ae,mt)=>m>0&&m<D.length&&v(Ya(D[m-1],mt),Ya(D[m],mt))?fl(D[m],mt):sc(E(Ae.element,v),!0,Ae.isLocked),v,E);return[...I,...Z,fe,...te]},hS=(i,m,p,v,E,D,I)=>{if(p==="colgroup"||!v){const Z=fl(i,E);return sc(I(Z.element,D),!0,!1)}else return fl(i,m)},b_=(i,m,p,v,E)=>cn(i,D=>{const I=m>0&&m<Ol(D)&&v(Ya(D,m-1),Ya(D,m)),Z=hS(D,m,D.section,I,p,v,E);return ao(D,m,Z)}),pS=(i,m)=>ds(i,p=>{const v=p.cells,E=Us(m,(D,I)=>I>=0&&I<D.length?D.slice(0,I).concat(D.slice(I+1)):D,v);return E.length>0?[Cc(p.element,E,p.section,p.isNew)]:[]}),er=(i,m,p)=>{const{rows:v,cols:E}=Ds(i);return[...E,...v.slice(0,m),...v.slice(p+1)]},F1=(i,m,p,v)=>Ya(i[m],p)!==void 0&&m>0&&v(Ya(i[m-1],p),Ya(i[m],p)),v_=(i,m,p)=>m>0&&p(Ya(i,m-1),Ya(i,m)),bS=(i,m,p,v)=>F1(i,m,p,v)||v_(i[m],p,v),Kg=(i,m)=>Go(m,Xe)&&Ov(i.cells)?Oe:(v,E,D)=>!(os(v.element)==="th"&&m[D]),$u=(i,m)=>Go(m,Xe)&&Ov(i)?Oe:(v,E,D)=>!(os(v.element)==="th"&&m[E]),H1=(i,m,p,v)=>{const E=I=>I==="row"?wr(m):Xs(m),D=I=>E(I)?`${I}group`:I;return i?P1(m)?D(p):null:v&&P1(m)?D(p==="row"?"col":"row"):null},Gm=(i,m)=>(p,v,E)=>ue.some(H1(i,p.element,"col",m[E])),Qt=(i,m)=>(p,v)=>ue.some(H1(i,p.element,"row",m[v])),vS=(i,m,p)=>sc(p(i.element,m),!0,i.isLocked),Pv=(i,m,p,v,E,D,I)=>{const Z=te=>tt(m,fe=>p(te.element,fe.element));return cn(i,(te,fe)=>ku(te,(Ae,mt)=>{if(Z(Ae)){const Pt=I(Ae,fe,mt)?E(Ae,p,v):Ae;return D(Pt,fe,mt).each(Rt=>{Fa(Pt.element,{scope:ue.from(Rt)})}),Pt}else return Ae}))},yS=(i,m,p)=>ds(i,(v,E)=>bS(i,E,m,p)?[]:[fl(v,m)]),CS=(i,m,p)=>{const v=i[m];return ds(v.cells,(E,D)=>bS(i,m,D,p)?[]:[E])},Jy=(i,m,p,v,E)=>{const D=Ds(i).rows,I=ds(m,Ae=>yS(D,Ae,v)),Z=cn(D,Ae=>Ov(Ae.cells)),te=$u(I,Z),fe=Qt(p,Z);return Pv(i,I,v,E,vS,fe,te)},Qy=(i,m,p,v,E,D,I)=>{const{cols:Z,rows:te}=Ds(i),fe=te[m[0]],Ae=ds(m,at=>CS(te,at,E)),mt=cn(fe.cells,(at,Et)=>Ov(yS(te,Et,E))),Pt=[...te];Je(m,at=>{Pt[at]=I.transformRow(te[at],p)});const Rt=[...Z,...Pt],Tt=Kg(fe,mt),rn=Gm(v,mt);return Pv(Rt,Ae,E,D,I.transformCell,rn,Tt)},fp=(i,m,p,v)=>{const E=Ds(i).rows,D=cn(m,I=>fl(E[I.row],I.column));return Pv(i,D,p,v,vS,ue.none,Oe)},Yg={generate:i=>{if(!Yt(i))throw new Error("cases must be an array");if(i.length===0)throw new Error("there must be at least one case");const m=[],p={};return Je(i,(v,E)=>{const D=Lt(v);if(D.length!==1)throw new Error("one and only one name per case");const I=D[0],Z=v[I];if(p[I]!==void 0)throw new Error("duplicate key detected:"+I);if(I==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Yt(Z))throw new Error("case arguments must be an array");m.push(I),p[I]=(...te)=>{const fe=te.length;if(fe!==Z.length)throw new Error("Wrong number of arguments to case "+I+". Expected "+Z.length+" ("+Z+"), got "+fe);return{fold:(...mt)=>{if(mt.length!==i.length)throw new Error("Wrong number of arguments to fold. Expected "+i.length+", got "+mt.length);return mt[E].apply(null,te)},match:mt=>{const Pt=Lt(mt);if(m.length!==Pt.length)throw new Error("Wrong number of arguments to match. Expected: "+m.join(",")+`
Actual: `+Pt.join(","));if(!Go(m,Tt=>Bo(Pt,Tt)))throw new Error("Not all branches were specified when using match. Specified: "+Pt.join(", ")+`
Required: `+m.join(", "));return mt[I].apply(null,te)},log:mt=>{console.log(mt,{constructors:m,constructor:I,params:te})}}}}),p}},gp={...Yg.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},$v=(i,m)=>i.length===0?gp.none():i.length===1?gp.only(0):m===0?gp.left(0,1):m===i.length-1?gp.right(m-1,m):m>0&&m<i.length-1?gp.middle(m-1,m,m+1):gp.none(),Iu=(i,m,p,v,E)=>{const D=i.slice(0),I=$v(i,m),Z=ee(cn(D,ee(0))),te=Pt=>v.singleColumnWidth(D[Pt],p),fe=(Pt,Rt)=>E.calcLeftEdgeDeltas(D,Pt,Rt,p,v.minCellWidth(),v.isRelative),Ae=(Pt,Rt,Tt)=>E.calcMiddleDeltas(D,Pt,Rt,Tt,p,v.minCellWidth(),v.isRelative),mt=(Pt,Rt)=>E.calcRightEdgeDeltas(D,Pt,Rt,p,v.minCellWidth(),v.isRelative);return I.fold(Z,te,fe,Ae,mt)},y_=(i,m,p)=>{let v=0;for(let E=i;E<m;E++)v+=p[E]!==void 0?p[E]:0;return v},Iv=(i,m)=>{const p=To.justCells(i);return cn(p,v=>{const E=y_(v.column,v.column+v.colspan,m);return{element:v.element,width:E,colspan:v.colspan}})},Lv=(i,m)=>{const p=To.justColumns(i);return cn(p,(v,E)=>({element:v.element,width:m[E],colspan:v.colspan}))},C_=(i,m)=>cn(i.all,(p,v)=>({element:p.element,height:m[v]})),w_=i=>Us(i,(m,p)=>m+p,0),wS=(i,m)=>To.hasColumns(i)?Lv(i,m):Iv(i,m),z1=(i,m,p)=>{const v=wS(i,m);Je(v,E=>{p.setElementWidth(E.element,E.width)})},SS=(i,m,p,v,E)=>{const D=To.fromTable(i),I=E.getCellDelta(m),Z=E.getWidths(D,E),te=p===D.grid.columns-1,fe=v.clampTableDelta(Z,p,I,E.minCellWidth(),te),Ae=Iu(Z,p,fe,E,v),mt=cn(Ae,(Pt,Rt)=>Pt+Z[Rt]);z1(D,mt,E),v.resizeTable(E.adjustTableWidth,fe,te)},eC=(i,m,p)=>{const v=To.fromTable(i),E=jh(v,i),D=cn(E,(te,fe)=>p===fe?Math.max(m+te,Vd()):te),I=C_(v,D);Je(I,te=>{dd(te.element,te.height)}),Je(To.justCells(v),te=>{_g(te.element)});const Z=w_(D);dd(i,Z)},S_=(i,m,p,v,E)=>{const D=To.generate(m),I=v.getWidths(D,v),Z=v.pixelWidth(),{newSizes:te,delta:fe}=E.calcRedestributedWidths(I,Z,p.pixelDelta,v.isRelative);z1(D,te,v),v.adjustTableWidth(fe)},U1=(i,m,p,v)=>{const E=To.generate(m),D=v.getWidths(E,v);z1(E,D,v)},hp=i=>je(i,(p,v)=>tt(p,D=>D.column===v.column)?p:p.concat([v]),[]).sort((p,v)=>p.column-v.column),Hf=hs("col"),Fv=hs("colgroup"),tC=i=>os(i)==="tr"||Fv(i),Hv=i=>{const m=Xr(i,"colspan",1),p=Xr(i,"rowspan",1);return{element:i,colspan:m,rowspan:p}},nC=(i,m=Hv)=>{const p=Z=>Hf(Z.element)?i.col(Z):i.cell(Z),v=Z=>Fv(Z.element)?i.colgroup(Z):i.row(Z),E=Z=>{if(tC(Z))return v({element:Z});{const te=Z,fe=p(m(te));return D=ue.some({item:te,replacement:fe}),fe}};let D=ue.none();return{getOrInit:(Z,te)=>D.fold(()=>E(Z),fe=>te(Z,fe.item)?fe.replacement:E(Z))}},oC=i=>m=>{const p=[],v=(I,Z)=>F(p,te=>Z(te.item,I)),E=I=>{const Z=i==="td"?{scope:null}:{},te=m.replace(I,i,Z);return p.push({item:I,sub:te}),te};return{replaceOrInit:(I,Z)=>{if(tC(I)||Hf(I))return I;{const te=I;return v(te,Z).fold(()=>E(te),fe=>Z(I,fe.item)?fe.sub:E(te))}}}},sC=i=>le(i,"scope").map(m=>m.substr(0,3)),di={modification:nC,transform:oC,merging:i=>({unmerge:v=>{const E=sC(v);return E.each(D=>Ns(v,"scope",D)),()=>{const D=i.cell({element:v,colspan:1,rowspan:1});return yr(D,"width"),yr(v,"width"),E.each(I=>Ns(D,"scope",I)),D}},merge:v=>{const E=()=>{const D=_l(cn(v,sC));if(D.length===0)return ue.none();{const I=D[0],Z=["row","col"];return tt(D,fe=>fe!==I&&Bo(Z,fe))?ue.none():ue.from(I)}};return yr(v[0],"width"),E().fold(()=>re(v[0],"scope"),D=>Ns(v[0],"scope",D+"group")),ee(v[0])}})},Xg=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],TS=(i,m)=>{const p=i.property().name(m);return Bo(["ol","ul"],p)},Vf=(i,m)=>{const p=i.property().name(m);return Bo(Xg,p)},Jg=(i,m)=>Bo(["br","img","hr","input"],i.property().name(m)),rC=Hm(),He=i=>Vf(rC,i),Lu=i=>TS(rC,i),Qg=i=>Jg(rC,i),x_=i=>{const m=hs("br"),p=te=>Go(te,fe=>m(fe)||bc(fe)&&dr(fe).trim().length===0),v=te=>os(te)==="li"||it(te,Lu).isSome(),E=te=>xa(te).map(fe=>He(fe)?!0:Qg(fe)?os(fe)!=="img":!1).getOr(!1),D=te=>Mg(te).bind(fe=>{const Ae=E(fe);return tc(fe).map(mt=>Ae===!0||v(mt)||m(fe)||He(mt)&&!ss(te,mt)?[]:[ge.fromTag("br")])}).getOr([]),Z=(()=>{const te=ds(i,fe=>{const Ae=xo(fe);return p(Ae)?[]:Ae.concat(D(fe))});return te.length===0?[ge.fromTag("br")]:te})();oc(i[0]),nc(i[0],Z)},W1=i=>Rf(i,!0),nu=i=>{yu(i).length===0&&Or(i)},pp=(i,m)=>({grid:i,cursor:m}),ES=i=>Ht(i,m=>Ht(m.cells,p=>{const v=p.element;return Hd(W1(v),v)})),kS=(i,m,p)=>{var v,E;const D=Ds(i).rows;return ue.from((E=(v=D[m])===null||v===void 0?void 0:v.cells[p])===null||E===void 0?void 0:E.element).filter(W1).orThunk(()=>ES(D))},nl=(i,m,p)=>{const v=kS(i,m,p);return pp(i,v)},Vv=i=>je(i,(p,v)=>tt(p,D=>D.row===v.row)?p:p.concat([v]),[]).sort((p,v)=>p.row-v.row),_S=(i,m,p,v)=>{const E=m[0].row,D=Vv(m),I=Us(D,(Z,te)=>({grid:jm(Z.grid,E,te.row+Z.delta,p,v.getOrInit),delta:Z.delta+1}),{grid:i,delta:0}).grid;return nl(I,E,m[0].column)},T_=(i,m,p,v)=>{const E=Vv(m),D=E[E.length-1],I=D.row+D.rowspan,Z=Us(E,(te,fe)=>jm(te,I,fe.row,p,v.getOrInit),i);return nl(Z,I,m[0].column)},AS=(i,m,p,v)=>{const E=m.details,D=hp(E),I=D[0].column,Z=Us(D,(te,fe)=>({grid:b_(te.grid,I,fe.column+te.delta,p,v.getOrInit),delta:te.delta+1}),{grid:i,delta:0}).grid;return nl(Z,E[0].row,I)},E_=(i,m,p,v)=>{const E=m.details,D=E[E.length-1],I=D.column+D.colspan,Z=hp(E),te=Us(Z,(fe,Ae)=>b_(fe,I,Ae.column,p,v.getOrInit),i);return nl(te,E[0].row,I)},OS=(i,m,p,v)=>{const E=hp(m),D=cn(E,Z=>Z.column),I=Jy(i,D,!0,p,v.replaceOrInit);return nl(I,m[0].row,m[0].column)},k_=(i,m,p,v)=>{const E=fp(i,m,p,v.replaceOrInit);return nl(E,m[0].row,m[0].column)},__=(i,m,p,v)=>{const E=hp(m),D=cn(E,Z=>Z.column),I=Jy(i,D,!1,p,v.replaceOrInit);return nl(I,m[0].row,m[0].column)},DS=(i,m,p,v)=>{const E=fp(i,m,p,v.replaceOrInit);return nl(E,m[0].row,m[0].column)},bp=(i,m)=>(p,v,E,D,I)=>{const Z=Vv(v),te=cn(Z,Ae=>Ae.row),fe=Qy(p,te,i,m,E,D.replaceOrInit,I);return nl(fe,v[0].row,v[0].column)},A_=bp("thead",!0),RS=bp("tbody",!1),O_=bp("tfoot",!1),Nr=(i,m,p,v)=>{const E=hp(m.details),D=pS(i,cn(E,Z=>Z.column)),I=D.length>0?D[0].cells.length-1:0;return nl(D,E[0].row,Math.min(E[0].column,I))},cC=(i,m,p,v)=>{const E=Vv(m),D=er(i,E[0].row,E[E.length-1].row),I=Math.max(Ds(D).rows.length-1,0);return nl(D,Math.min(m[0].row,I),m[0].column)},MS=(i,m,p,v)=>{const E=m.cells;x_(E);const D=Lf(i,m.bounds,p,v.merge(E));return pp(D,ue.from(E[0]))},NS=(i,m,p,v)=>{const D=Us(m,(I,Z)=>Yy(I,Z,p,v.unmerge(Z)),i);return pp(D,ue.from(m[0]))},aC=(i,m,p,v)=>{const D=((te,fe)=>{const Ae=To.fromTable(te);return dp(Ae,fe,!0)})(m.clipboard,m.generators),I=Wl(m.row,m.column);return Gg(I,i,D,m.generators,p).fold(()=>pp(i,ue.some(m.element)),te=>nl(te,m.row,m.column))},Yc=(i,m,p)=>{const v=Om(i,p.section),E=To.generate(v);return dp(E,m,!0)},Oi=(i,m,p,v)=>{const E=Ds(i).rows,D=m.cells[0].column,I=E[m.cells[0].row],Z=Yc(m.clipboard,m.generators,I),te=mp(D,i,Z,m.generators,p);return nl(te,m.cells[0].row,m.cells[0].column)},PS=(i,m,p,v)=>{const E=Ds(i).rows,D=m.cells[m.cells.length-1].column+m.cells[m.cells.length-1].colspan,I=E[m.cells[0].row],Z=Yc(m.clipboard,m.generators,I),te=mp(D,i,Z,m.generators,p);return nl(te,m.cells[0].row,D)},lC=(i,m,p,v)=>{const E=Ds(i).rows,D=m.cells[0].row,I=E[D],Z=Yc(m.clipboard,m.generators,I),te=Qs(D,i,Z,m.generators,p);return nl(te,m.cells[0].row,m.cells[0].column)},iC=(i,m,p,v)=>{const E=Ds(i).rows,D=m.cells[m.cells.length-1].row+m.cells[m.cells.length-1].rowspan,I=E[m.cells[0].row],Z=Yc(m.clipboard,m.generators,I),te=Qs(D,i,Z,m.generators,p);return nl(te,D,m.cells[0].column)},D_=(i,m)=>{const p=To.fromTable(i);return ui(p,m).bind(E=>{const D=E[E.length-1],I=E[0].column,Z=D.column+D.colspan,te=uo(cn(p.all,fe=>ho(fe.cells,Ae=>Ae.column>=I&&Ae.column<Z)));return ap(te)}).getOr("")},zv=(i,m)=>{const p=To.fromTable(i);return ui(p,m).bind(ap).getOr("")},BS=(i,m)=>{const p=To.fromTable(i);return ui(p,m).bind(E=>{const D=E[E.length-1],I=E[0].row,Z=D.row+D.rowspan,te=p.all.slice(I,Z);return cS(te)}).getOr("")},Z1=(i,m,p,v)=>U1(i,m,p,v.sizing),$S=(i,m,p,v)=>S_(i,m,p,v.sizing,v.resize),Fc=(i,m)=>tt(m,p=>p.column===0&&p.isLocked),R_=(i,m)=>tt(m,p=>p.column+p.colspan>=i.grid.columns&&p.isLocked),ou=(i,m)=>{const p=Yd(i),v=hp(m);return je(v,(E,D)=>{const Z=p[D.column].map(Tu).getOr(0);return E+Z},0)},gr=i=>(m,p)=>ui(m,p).filter(v=>!(i?Fc:R_)(m,v)).map(v=>({details:v,pixelDelta:ou(m,v)})),am=(i,m)=>Cd(i,m).map(p=>({details:p,pixelDelta:-ou(i,p)})),vp=i=>(m,p)=>If(m,p).filter(v=>!(i?Fc:R_)(m,v.cells)),uC=di.transform("th"),j1=di.transform("td"),IS=Va(_S,ui,ct,ct,di.modification),zf=Va(T_,ui,ct,ct,di.modification),za=Va(AS,gr(!0),$S,ct,di.modification),lm=Va(E_,gr(!1),$S,ct,di.modification),LS=Va(Nr,am,$S,nu,di.modification),M_=Va(cC,ui,ct,nu,di.modification),dC=Va(OS,Cd,ct,ct,uC),Uv=Va(__,Cd,ct,ct,j1),mC=Va(A_,Cd,ct,ct,uC),fC=Va(RS,Cd,ct,ct,j1),Wv=Va(O_,Cd,ct,ct,j1),en=Va(k_,Cd,ct,ct,uC),G1=Va(DS,Cd,ct,ct,j1),gC=Va(MS,I1,Z1,ct,di.merging),FS=Va(NS,Rv,Z1,ct,di.merging),N_=Va(aC,qR,Z1,ct,di.modification),Ua=Va(Oi,vp(!0),ct,ct,di.modification),HS=Va(PS,vp(!1),ct,ct,di.modification),Uf=Va(lC,If,ct,ct,di.modification),VS=Va(iC,If,ct,ct,di.modification),hC=D_,zS=zv,Wa=BS,Wf=(i,m)=>i.dispatch("NewRow",{node:m}),pC=(i,m)=>i.dispatch("NewCell",{node:m}),eh=(i,m,p)=>{i.dispatch("TableModified",{...p,table:m})},P_=(i,m,p,v,E)=>{i.dispatch("TableSelectionChange",{cells:m,start:p,finish:v,otherCells:E})},Hc=i=>{i.dispatch("TableSelectionClear")},Vc=(i,m,p,v,E)=>{i.dispatch("ObjectResizeStart",{target:m,width:p,height:v,origin:E})},Pa=(i,m,p,v,E)=>{i.dispatch("ObjectResized",{target:m,width:p,height:v,origin:E})},zc={structure:!1,style:!0},ys={structure:!0,style:!1},Ec={structure:!0,style:!0},Zv=(i,m)=>pd(i)?_.percentageSize(m):Na(i)?_.pixelSize(m):_.getTableSize(m),bC=(i,m,p)=>{const v=Uc=>os(Xl(Uc))==="table",E=Uc=>!v(i)||zg(Uc).rows>1,D=Uc=>!v(i)||zg(Uc).columns>1,I=Af(i),Z=Bg(i)?ct:_v,te=Uc=>{switch(ac(i)){case"section":return ip.section();case"sectionCells":return ip.sectionCells();case"cells":return ip.cells();default:return ip.getTableSectionType(Uc,"section")}},fe=(Uc,N0)=>N0.cursor.fold(()=>{const Qm=yu(Uc);return xe(Qm).filter(Hn).map(Co=>{p.clearSelectedCells(Uc.dom);const sl=i.dom.createRng();return sl.selectNode(Co.dom),i.selection.setRng(sl),Ns(Co,"data-mce-selected","1"),sl})},Qm=>{const Co=sp(Qm),sl=i.dom.createRng();return sl.setStart(Co.element.dom,Co.offset),sl.setEnd(Co.element.dom,Co.offset),i.selection.setRng(sl),p.clearSelectedCells(Uc.dom),ue.some(sl)}),Ae=(Uc,N0,Qm,Co)=>(sl,P0,B0=!1)=>{Ai(sl);const Jx=ge.fromDom(i.getDoc()),sg=Dl(Qm,Jx,I),Ch={sizing:Zv(i,sl),resize:Bg(i)?$f():Um(),section:te(sl)};return N0(sl)?Uc(sl,P0,sg,Ch).bind($0=>{m.refresh(sl.dom),Je($0.newRows,Sb=>{Wf(i,Sb.dom)}),Je($0.newCells,Sb=>{pC(i,Sb.dom)});const PA=fe(sl,$0);return Hn(sl)&&(Ai(sl),B0||eh(i,sl.dom,Co)),PA.map(Sb=>({rng:Sb,effect:Co}))}):ue.none()},mt=Ae(M_,E,ct,ys),Pt=Ae(LS,D,ct,ys),Rt=Ae(IS,Oe,ct,ys),Tt=Ae(zf,Oe,ct,ys),rn=Ae(za,Oe,Z,ys),at=Ae(lm,Oe,Z,ys),Et=Ae(gC,Oe,ct,ys),_t=Ae(FS,Oe,ct,ys),Un=Ae(Ua,Oe,ct,ys),Io=Ae(HS,Oe,ct,ys),Es=Ae(Uf,Oe,ct,ys),tr=Ae(VS,Oe,ct,ys),Tr=Ae(N_,Oe,ct,Ec),Bi=Ae(en,Oe,ct,ys),kd=Ae(G1,Oe,ct,ys),yh=Ae(dC,Oe,ct,ys),mm=Ae(Uv,Oe,ct,ys),zs=Ae(mC,Oe,ct,ys),Bl=Ae(fC,Oe,ct,ys),$l=Ae(Wv,Oe,ct,ys);return{deleteRow:mt,deleteColumn:Pt,insertRowsBefore:Rt,insertRowsAfter:Tt,insertColumnsBefore:rn,insertColumnsAfter:at,mergeCells:Et,unmergeCells:_t,pasteColsBefore:Un,pasteColsAfter:Io,pasteRowsBefore:Es,pasteRowsAfter:tr,pasteCells:Tr,makeCellsHeader:Bi,unmakeCellsHeader:kd,makeColumnsHeader:yh,unmakeColumnsHeader:mm,makeRowsHeader:zs,makeRowsBody:Bl,makeRowsFooter:$l,getTableRowType:Wa,getTableCellType:zS,getTableColType:hC}},vC=(i,m,p)=>{const v=Xr(i,m,1);p===1||v<=1?re(i,m):Ns(i,m,Math.min(p,v))},yC=(i,m)=>p=>{const v=p.column+p.colspan-1,E=p.column;return v>=i&&E<m},US=(i,m,p)=>{if(To.hasColumns(i)){const v=ho(To.justColumns(i),yC(m,p)),E=cn(v,I=>{const Z=Ea(I.element);return vC(Z,"span",p-m),Z}),D=ge.fromTag("colgroup");return nc(D,E),[D]}else return[]},WS=(i,m,p)=>cn(i.all,v=>{const E=ho(v.cells,yC(m,p)),D=cn(E,Z=>{const te=Ea(Z.element);return vC(te,"colspan",p-m),te}),I=ge.fromTag("tr");return nc(I,D),I}),q1=(i,m)=>{const p=To.fromTable(i);return Cd(p,m).map(E=>{const D=E[E.length-1],I=E[0].column,Z=D.column+D.colspan,te=US(p,I,Z),fe=WS(p,I,Z);return[...te,...fe]})},jv=(i,m,p)=>{const v=To.fromTable(i);return ui(v,m).bind(D=>{const I=dp(v,p,!1),te=Ds(I).rows.slice(D[0].row,D[D.length-1].row+D[D.length-1].rowspan),fe=ds(te,mt=>{const Pt=ho(mt.cells,Rt=>!Rt.isLocked);return Pt.length>0?[{...mt,cells:Pt}]:[]}),Ae=Ky(fe);return Hd(Ae.length>0,Ae)}).map(D=>iS(D))},K1=Yg.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),ZS=(i,m,p)=>{const v=p.substring(0,p.length-i.length),E=parseFloat(v);return v===E.toString()?m(E):K1.invalid(p)},th={...K1,from:i=>ra(i,"%")?ZS("%",K1.percent,i):ra(i,"px")?ZS("px",K1.pixels,i):K1.invalid(i)},mi=(i,m)=>cn(i,p=>th.from(p).fold(()=>p,E=>E/m*100+"%",E=>E+"%")),B_=(i,m,p)=>{const v=p/m;return cn(i,E=>th.from(E).fold(()=>E,I=>I*v+"px",I=>I/100*p+"px"))},$_=(i,m)=>{const p=i.fold(()=>ee(""),v=>{const E=v/m;return ee(E+"px")},()=>{const v=100/m;return ee(v+"%")});return Wo(m,p)},su=(i,m,p)=>i.fold(()=>m,v=>B_(m,p,v),v=>mi(m,p)),yp=(i,m,p)=>{const v=th.from(p),E=Go(i,D=>D==="0px")?$_(v,i.length):su(v,i,m);return CC(E)},Cp=(i,m)=>i.length===0?m:Us(i,(p,v)=>th.from(v).fold(ee(0),Xe,Xe)+p,0),im=(i,m)=>{const p=Math.floor(i);return{value:p+m,remainder:i-p}},bl=(i,m)=>th.from(i).fold(ee(i),p=>p+m+"px",p=>p+m+"%"),CC=i=>{if(i.length===0)return i;const m=Us(i,(v,E)=>{const D=th.from(E).fold(()=>({value:E,remainder:0}),I=>im(I,"px"),I=>({value:I+"%",remainder:0}));return{output:[D.value].concat(v.output),remainder:v.remainder+D.remainder}},{output:[],remainder:0}),p=m.output;return p.slice(0,p.length-1).concat([bl(p[p.length-1],Math.round(m.remainder))])},Zf=th.from,jS=(i,m,p)=>{Je(m,v=>{const E=i.slice(v.column,v.colspan+v.column),D=Cp(E,si());mo(v.element,"width",D+p)})},Gv=(i,m,p)=>{Je(m,(v,E)=>{const D=Cp([i[E]],si());mo(v.element,"width",D+p)})},wC=(i,m,p)=>{Je(p,v=>{yr(v.element,"height")}),Je(m,(v,E)=>{mo(v.element,"height",i[E])})},Y1=i=>Zf(i).fold(ee("px"),ee("px"),ee("%")),qv=(i,m,p)=>{const v=To.fromTable(i),E=v.all,D=To.justCells(v),I=To.justColumns(v);m.each(Z=>{const te=Y1(Z),fe=Yo(i),Ae=Lc(v,i),mt=yp(Ae,fe,Z);To.hasColumns(v)?Gv(mt,I,te):jS(mt,D,te),mo(i,"width",Z)}),p.each(Z=>{const te=ot(i),fe=Qr(v,i),Ae=yp(fe,te,Z);wC(Ae,E,D),mo(i,"height",Z)})},GS=li,qS=k1,KS=Xd,X1=i=>{re(i,"width"),re(i,"height")},nh=i=>{const m=Ra(i);qv(i,ue.some(m),ue.none()),X1(i)},J1=i=>{const m=Og(i);qv(i,ue.some(m),ue.none()),X1(i)},I_=i=>{const m=Sc(i);qv(i,ue.none(),ue.some(m)),X1(i)},SC=i=>{yr(i,"width");const m=dl(i),p=m.length>0?m:yu(i);Je(p,v=>{yr(v,"width"),X1(v)}),X1(i)},L_={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},Kv=()=>ge.fromTag("th"),F_=()=>ge.fromTag("td"),YS=()=>ge.fromTag("col"),H_=(i,m,p,v)=>{const E=ge.fromTag("tr");for(let D=0;D<i;D++){const I=v<m||D<p?Kv():F_();D<p&&Ns(I,"scope","row"),v<m&&Ns(I,"scope","col"),Os(I,ge.fromTag("br")),Os(E,I)}return E},XS=i=>{const m=ge.fromTag("colgroup");return Wo(i,()=>Os(m,YS())),m},Q1=(i,m,p,v)=>Wo(i,E=>H_(m,p,v,E)),JS=(i,m,p,v,E,D=L_)=>{const I=ge.fromTag("table"),Z=E!=="cells";ws(I,D.styles),mc(I,D.attributes),D.colGroups&&Os(I,XS(m));const te=Math.min(i,p);if(Z&&p>0){const Rt=ge.fromTag("thead");Os(I,Rt);const rn=Q1(p,m,E==="sectionCells"?te:0,v);nc(Rt,rn)}const fe=ge.fromTag("tbody");Os(I,fe);const Ae=Z?i-te:i,Pt=Q1(Ae,m,Z?0:p,v);return nc(fe,Pt),I},Pl=i=>i.dom.innerHTML,xC=i=>{const m=ge.fromTag("div"),p=ge.fromDom(i.dom.cloneNode(!0));return Os(m,p),Pl(m)},QS=(i,m)=>{i.selection.select(m.dom,!0),i.selection.collapse(!0)},TC=(i,m)=>{qa(m,"td,th").each(Qe(QS,i))},eb=(i,m)=>{Je(Jo(m,"tr"),p=>{Wf(i,p.dom),Je(Jo(p,"th,td"),v=>{pC(i,v.dom)})})},V_=i=>Jn(i)&&i.indexOf("%")!==-1,z_=(i,m,p,v,E)=>{const D=yv(i),I={styles:D,attributes:vv(i),colGroups:c_(i)};return i.undoManager.ignore(()=>{const Z=JS(p,m,E,v,ac(i),I);Ns(Z,"data-mce-id","__mce");const te=xC(Z);i.insertContent(te),i.addVisual()}),qa(Xl(i),'table[data-mce-id="__mce"]').map(Z=>(Na(i)?J1(Z):Of(i)?SC(Z):(pd(i)||V_(D.width))&&nh(Z),Ai(Z),re(Z,"data-mce-id"),eb(i,Z),TC(i,Z),Z.dom)).getOrNull()},U_=(i,m,p,v={})=>{const E=D=>et(D)&&D>0;if(E(m)&&E(p)){const D=v.headerRows||0,I=v.headerColumns||0;return z_(i,p,m,I,D)}else return console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table."),null};var Yv=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const ex="x-tinymce/dom-table-",EC=ex+"rows",kC=ex+"columns",tb=i=>{const m=Yv.FakeClipboardItem(i);Yv.write([m])},_C=i=>{var m;const p=(m=Yv.read())!==null&&m!==void 0?m:[];return Ht(p,v=>ue.from(v.getType(i)))},tx=i=>{_C(i).isSome()&&Yv.clear()},nx=i=>{i.fold(W_,m=>tb({[EC]:m}))},ox=()=>_C(EC),W_=()=>tx(EC),sx=i=>{i.fold(rx,m=>tb({[kC]:m}))},AC=()=>_C(kC),rx=()=>tx(kC),jf=i=>hc(D1(i),_i(i)).filter(Eo),cx=i=>Ev(D1(i),_i(i)).filter(Eo),Z_=(i,m)=>{const p=_i(i),v=()=>jf(i).each(at=>{_a(at,p).filter(W(p)).each(Et=>{const _t=ge.fromText("");if(Dc(Et,_t),Or(Et),i.dom.isEmpty(i.getBody()))i.setContent(""),i.selection.setCursorLocation();else{const Un=i.dom.createRng();Un.setStart(_t.dom,0),Un.setEnd(_t.dom,0),i.selection.setRng(Un),i.nodeChanged()}})}),E=at=>jf(i).each(Et=>{Of(i)||Na(i)||pd(i)||_a(Et,p).each(Un=>{at==="relative"&&!GS(Un)?nh(Un):at==="fixed"&&!qS(Un)?J1(Un):at==="responsive"&&!KS(Un)&&SC(Un),Ai(Un),eh(i,Un.dom,ys)})}),D=at=>_a(at,p),I=at=>cx(i).bind(Et=>D(Et).map(_t=>at(_t,Et))),Z=(at,Et)=>{I(_t=>{i.formatter.toggle("tableclass",{value:Et},_t.dom),eh(i,_t.dom,zc)})},te=(at,Et)=>{I(_t=>{const Un=Ts(i),Es=Go(Un,tr=>i.formatter.match("tablecellclass",{value:Et},tr.dom))?i.formatter.remove:i.formatter.apply;Je(Un,tr=>Es("tablecellclass",{value:Et},tr.dom)),eh(i,_t.dom,zc)})},fe=()=>{jf(i).each(at=>{_a(at,p).each(Et=>{ka(Et,"caption").fold(()=>{const _t=ge.fromTag("caption");Os(_t,ge.fromText("Caption")),ed(Et,_t,0),i.selection.setCursorLocation(_t.dom,0)},_t=>{hs("caption")(at)&&vc("td",Et).each(Un=>i.selection.setCursorLocation(Un.dom,0)),Or(_t)}),eh(i,Et.dom,ys)})})},Ae=at=>{i.focus()},mt=(at,Et=!1)=>I((_t,Un)=>{const Io=zm(Ts(i),_t,Un);at(_t,Io,Et).each(Ae)}),Pt=()=>I((at,Et)=>{const _t=zm(Ts(i),at,Et),Un=Dl(ct,ge.fromDom(i.getDoc()),ue.none());return jv(at,_t,Un)}),Rt=()=>I((at,Et)=>{const _t=zm(Ts(i),at,Et);return q1(at,_t)}),Tt=(at,Et)=>Et().each(_t=>{const Un=cn(_t,Io=>Ea(Io));I((Io,Es)=>{const tr=Rl(ge.fromDom(i.getDoc())),Tr=Wy(Ts(i),Es,Un,tr);at(Io,Tr).each(Ae)})}),rn=at=>(Et,_t)=>Mo(_t,"type").each(Un=>{mt(at(Un),_t.no_events)});Ho({mceTableSplitCells:()=>mt(m.unmergeCells),mceTableMergeCells:()=>mt(m.mergeCells),mceTableInsertRowBefore:()=>mt(m.insertRowsBefore),mceTableInsertRowAfter:()=>mt(m.insertRowsAfter),mceTableInsertColBefore:()=>mt(m.insertColumnsBefore),mceTableInsertColAfter:()=>mt(m.insertColumnsAfter),mceTableDeleteCol:()=>mt(m.deleteColumn),mceTableDeleteRow:()=>mt(m.deleteRow),mceTableCutCol:()=>Rt().each(at=>{sx(at),mt(m.deleteColumn)}),mceTableCutRow:()=>Pt().each(at=>{nx(at),mt(m.deleteRow)}),mceTableCopyCol:()=>Rt().each(at=>sx(at)),mceTableCopyRow:()=>Pt().each(at=>nx(at)),mceTablePasteColBefore:()=>Tt(m.pasteColsBefore,AC),mceTablePasteColAfter:()=>Tt(m.pasteColsAfter,AC),mceTablePasteRowBefore:()=>Tt(m.pasteRowsBefore,ox),mceTablePasteRowAfter:()=>Tt(m.pasteRowsAfter,ox),mceTableDelete:v,mceTableCellToggleClass:te,mceTableToggleClass:Z,mceTableToggleCaption:fe,mceTableSizingMode:(at,Et)=>E(Et),mceTableCellType:rn(at=>at==="th"?m.makeCellsHeader:m.unmakeCellsHeader),mceTableColType:rn(at=>at==="th"?m.makeColumnsHeader:m.unmakeColumnsHeader),mceTableRowType:rn(at=>{switch(at){case"header":return m.makeRowsHeader;case"footer":return m.makeRowsFooter;default:return m.makeRowsBody}})},(at,Et)=>i.addCommand(Et,at)),i.addCommand("mceInsertTable",(at,Et)=>{U_(i,Et.rows,Et.columns,Et.options)}),i.addCommand("mceTableApplyCellStyle",(at,Et)=>{const _t=Es=>"tablecell"+Es.toLowerCase().replace("-","");if(!Dt(Et))return;const Un=ho(Ts(i),Eo);if(Un.length===0)return;const Io=lt(Et,(Es,tr)=>i.formatter.has(_t(tr))&&Jn(Es));jc(Io)||(Ho(Io,(Es,tr)=>{const Tr=_t(tr);Je(Un,Bi=>{Es===""?i.formatter.remove(Tr,{value:null},Bi.dom,!0):i.formatter.apply(Tr,{value:Es},Bi.dom)})}),D(Un[0]).each(Es=>eh(i,Es.dom,zc)))})},j_=(i,m)=>{const p=_i(i),v=E=>Ev(D1(i)).bind(D=>_a(D,p).map(I=>{const Z=zm(Ts(i),I,D);return E(I,Z)})).getOr("");Ho({mceTableRowType:()=>v(m.getTableRowType),mceTableCellType:()=>v(m.getTableCellType),mceTableColType:()=>v(m.getTableColType)},(E,D)=>i.addQueryValueHandler(D,E))},Xv=Yg.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Fu=(i,m,p,v)=>i.fold(m,p,v),Jv=i=>i.fold(Xe,Xe,Xe),Qv=Xv.before,OC=Xv.on,ax=Xv.after,kc={before:Qv,on:OC,after:ax,cata:Fu,getStart:Jv},wp={create:(i,m)=>({selection:i,kill:m})},Gf=(i,m)=>{const p=i.document.createRange();return p.selectNode(m.dom),p},e0=(i,m)=>{const p=i.document.createRange();return ix(p,m),p},ix=(i,m)=>i.selectNodeContents(m.dom),G_=(i,m)=>{m.fold(p=>{i.setStartBefore(p.dom)},(p,v)=>{i.setStart(p.dom,v)},p=>{i.setStartAfter(p.dom)})},q_=(i,m)=>{m.fold(p=>{i.setEndBefore(p.dom)},(p,v)=>{i.setEnd(p.dom,v)},p=>{i.setEndAfter(p.dom)})},ux=(i,m,p)=>{const v=i.document.createRange();return G_(v,m),q_(v,p),v},nb=(i,m,p,v,E)=>{const D=i.document.createRange();return D.setStart(m.dom,p),D.setEnd(v.dom,E),D},DC=i=>({left:i.left,top:i.top,right:i.right,bottom:i.bottom,width:i.width,height:i.height}),K_=i=>{const m=i.getClientRects(),p=m.length>0?m[0]:i.getBoundingClientRect();return p.width>0||p.height>0?ue.some(p).map(DC):ue.none()},Sp=Yg.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),dx=(i,m,p)=>m(ge.fromDom(p.startContainer),p.startOffset,ge.fromDom(p.endContainer),p.endOffset),mx=(i,m)=>m.match({domRange:p=>({ltr:ee(p),rtl:ue.none}),relative:(p,v)=>({ltr:cd(()=>ux(i,p,v)),rtl:cd(()=>ue.some(ux(i,v,p)))}),exact:(p,v,E,D)=>({ltr:cd(()=>nb(i,p,v,E,D)),rtl:cd(()=>ue.some(nb(i,E,D,p,v)))})}),fx=(i,m)=>{const p=m.ltr();return p.collapsed?m.rtl().filter(E=>E.collapsed===!1).map(E=>Sp.rtl(ge.fromDom(E.endContainer),E.endOffset,ge.fromDom(E.startContainer),E.startOffset)).getOrThunk(()=>dx(i,Sp.ltr,p)):dx(i,Sp.ltr,p)},RC=(i,m)=>{const p=mx(i,m);return fx(i,p)},t0=(i,m)=>RC(i,m).match({ltr:(v,E,D,I)=>{const Z=i.document.createRange();return Z.setStart(v.dom,E),Z.setEnd(D.dom,I),Z},rtl:(v,E,D,I)=>{const Z=i.document.createRange();return Z.setStart(D.dom,I),Z.setEnd(v.dom,E),Z}});Sp.ltr,Sp.rtl;const qf={create:(i,m,p,v)=>({start:i,soffset:m,finish:p,foffset:v})},hx={create:(i,m,p,v)=>({start:kc.on(i,m),finish:kc.on(p,v)})},px=(i,m)=>{const p=t0(i,m);return qf.create(ge.fromDom(p.startContainer),p.startOffset,ge.fromDom(p.endContainer),p.endOffset)},n0=hx.create,X_=(i,m,p,v,E,D,I)=>ss(p,E)&&v===D?ue.none():Wr(p,"td,th",m).bind(Z=>Wr(E,"td,th",m).bind(te=>oh(i,m,Z,te,I))),oh=(i,m,p,v,E)=>ss(p,v)?ue.none():Ml(p,v,m).bind(D=>{const I=D.boxes.getOr([]);return I.length>1?(E(i,I,D.start,D.finish),ue.some(wp.create(ue.some(n0(p,0,p,ia(p))),!0))):ue.none()}),o0=(i,m,p,v,E)=>{const D=I=>(E.clearBeforeUpdate(p),E.selectRange(p,I.boxes,I.start,I.finish),I.boxes);return Hg(v,i,m,E.firstSelectedSelector,E.lastSelectedSelector).map(D)},ob=(i,m)=>({item:i,mode:m}),bx=(i,m,p,v=xp)=>i.property().parent(m).map(E=>ob(E,v)),xp=(i,m,p,v=Tp)=>p.sibling(i,m).map(E=>ob(E,v)),Tp=(i,m,p,v=Tp)=>{const E=i.property().children(m);return p.first(E).map(I=>ob(I,v))},J_=[{current:bx,next:xp,fallback:ue.none()},{current:xp,next:Tp,fallback:ue.some(bx)},{current:Tp,next:Tp,fallback:ue.some(xp)}],vx=(i,m,p,v,E=J_)=>F(E,I=>I.current===p).bind(I=>I.current(i,m,v,I.next).orThunk(()=>I.fallback.bind(Z=>vx(i,m,Z,v)))),Ep={left:()=>({sibling:(p,v)=>p.query().prevSibling(v),first:p=>p.length>0?ue.some(p[p.length-1]):ue.none()}),right:()=>({sibling:(p,v)=>p.query().nextSibling(v),first:p=>p.length>0?ue.some(p[0]):ue.none()})},MC=(i,m,p,v,E,D)=>vx(i,m,v,E).bind(Z=>D(Z.item)?ue.none():p(Z.item)?ue.some(Z.item):MC(i,Z.item,p,Z.mode,E,D)),NC=(i,m,p,v)=>MC(i,m,p,xp,Ep.left(),v),eA=(i,m,p,v)=>MC(i,m,p,xp,Ep.right(),v),PC=i=>m=>i.property().children(m).length===0,yx=(i,m,p)=>kp(i,m,PC(i),p),Cx=(i,m,p)=>wx(i,m,PC(i),p),kp=NC,wx=eA,s0=Hm(),Kf=(i,m)=>yx(s0,i,m),qm=(i,m)=>Cx(s0,i,m),sb=(i,m,p)=>kp(s0,i,m,p),rb=(i,m,p)=>wx(s0,i,m,p),tA=(i,m,p)=>it(i,m,p).isSome(),fi=Yg.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),Sd=(i,m,p)=>{const v=i.getRect(m),E=i.getRect(p);return E.right>v.left&&E.left<v.right},BC=i=>Wr(i,"tr"),Yf={...fi,verify:(i,m,p,v,E,D,I)=>Wr(v,"td,th",I).bind(Z=>Wr(m,"td,th",I).map(te=>ss(Z,te)?ss(v,Z)&&ia(Z)===E?D(te):fi.none("in same cell"):Fg(BC,[Z,te]).fold(()=>Sd(i,te,Z)?fi.success():D(te),fe=>D(te)))).getOr(fi.none("default")),cata:(i,m,p,v,E)=>i.fold(m,p,v,E)},_p=(i,m,p,v)=>({parent:i,children:m,element:p,index:v}),Ba=i=>tc(i).bind(m=>{const p=xo(m);return $C(p,i).map(v=>_p(m,p,i,v))}),$C=(i,m)=>dc(i,Qe(ss,m)),r0=hs("br"),rh=(i,m,p)=>m(i,p).bind(v=>bc(v)&&dr(v).trim().length===0?rh(v,m,p):ue.some(v)),cb=(i,m,p)=>p.traverse(m).orThunk(()=>rh(m,p.gather,i)).map(p.relative),oA=(i,m)=>Kr(i,m).filter(r0).orThunk(()=>Kr(i,m-1).filter(r0)),IC=(i,m,p,v)=>oA(m,p).bind(E=>v.traverse(E).fold(()=>rh(E,v.gather,i).map(v.relative),D=>Ba(D).map(I=>kc.on(I.parent,I.index)))),ab=(i,m,p,v)=>(r0(m)?cb(i,m,v):IC(i,m,p,v)).map(D=>({start:D,finish:D})),$a=i=>Yf.cata(i,m=>ue.none(),()=>ue.none(),m=>ue.some(kv(m,0)),m=>ue.some(kv(m,ia(m)))),LC=(i,m)=>({left:i.left,top:i.top+m,right:i.right,bottom:i.bottom+m}),ru=(i,m)=>({left:i.left,top:i.top-m,right:i.right,bottom:i.bottom-m}),FC=(i,m,p)=>({left:i.left+m,top:i.top+p,right:i.right+m,bottom:i.bottom+p}),Ap=i=>i.top,Op=i=>i.bottom,HC=(i,m,p)=>p>=0&&p<ia(m)?i.getRangedRect(m,p,m,p+1):p>0?i.getRangedRect(m,p-1,m,p):ue.none(),Km=i=>({left:i.left,top:i.top,right:i.right,bottom:i.bottom}),VC=(i,m)=>ue.some(i.getRect(m)),zC=(i,m,p)=>Ls(m)?VC(i,m).map(Km):bc(m)?HC(i,m,p).map(Km):ue.none(),UC=(i,m)=>Ls(m)?VC(i,m).map(Km):bc(m)?i.getRangedRect(m,0,m,ia(m)).map(Km):ue.none(),um=5,c0=100,Za=Yg.generate([{none:[]},{retry:["caret"]}]),Sx=(i,m)=>i.left<m.left||Math.abs(m.right-i.left)<1||i.left>m.right,WC=(i,m,p)=>bs(m,He).fold(dn,v=>UC(i,v).exists(E=>Sx(p,E))),ZC=(i,m,p,v,E)=>{const D=LC(E,um);return Math.abs(p.bottom-v.bottom)<1||p.top>E.bottom?Za.retry(D):p.top===E.bottom?Za.retry(LC(E,1)):WC(i,m,E)?Za.retry(FC(D,um,0)):Za.none()},jC={point:Ap,adjuster:(i,m,p,v,E)=>{const D=ru(E,um);return Math.abs(p.top-v.top)<1||p.bottom<E.top?Za.retry(D):p.bottom===E.top?Za.retry(ru(E,1)):WC(i,m,E)?Za.retry(FC(D,um,0)):Za.none()},move:ru,gather:Kf},Tx={point:Op,adjuster:ZC,move:LC,gather:qm},Ex=(i,m,p)=>i.elementFromPoint(m,p).filter(v=>os(v)==="table").isSome(),Di=(i,m,p,v,E)=>Xf(i,m,p,m.move(v,um),E),Xf=(i,m,p,v,E)=>E===0?ue.some(v):Ex(i,v.left,m.point(v))?Di(i,m,p,v,E-1):i.situsFromPoint(v.left,m.point(v)).bind(D=>D.start.fold(ue.none,I=>UC(i,I).bind(Z=>m.adjuster(i,I,Z,p,v).fold(ue.none,te=>Xf(i,m,p,te,E-1))).orThunk(()=>ue.some(v)),ue.none)),kx=(i,m,p)=>i.point(m)>p.getInnerHeight()?ue.some(i.point(m)-p.getInnerHeight()):i.point(m)<0?ue.some(-i.point(m)):ue.none(),ch=(i,m,p)=>{const v=i.move(p,um),E=Xf(m,i,p,v,c0).getOr(v);return kx(i,E,m).fold(()=>m.situsFromPoint(E.left,i.point(E)),D=>(m.scrollBy(0,D),m.situsFromPoint(E.left,i.point(E)-D)))},vl={tryUp:Qe(ch,jC),tryDown:Qe(ch,Tx),getJumpSize:ee(um)},gi=20,yl=(i,m,p)=>i.getSelection().bind(v=>ab(m,v.finish,v.foffset,p).fold(()=>ue.some(kv(v.finish,v.foffset)),E=>{const D=i.fromSitus(E),I=Yf.verify(i,v.finish,v.foffset,D.finish,D.foffset,p.failure,m);return $a(I)})),Ri=(i,m,p,v,E,D)=>D===0?ue.none():ah(i,m,p,v,E).bind(I=>{const Z=i.fromSitus(I),te=Yf.verify(i,p,v,Z.finish,Z.foffset,E.failure,m);return Yf.cata(te,()=>ue.none(),()=>ue.some(I),fe=>ss(p,fe)&&v===0?a0(i,p,v,ru,E):Ri(i,m,fe,0,E,D-1),fe=>ss(p,fe)&&v===ia(fe)?a0(i,p,v,LC,E):Ri(i,m,fe,ia(fe),E,D-1))}),a0=(i,m,p,v,E)=>zC(i,m,p).bind(D=>Mi(i,E,v(D,vl.getJumpSize()))),Mi=(i,m,p)=>{const v=lr().browser;return v.isChromium()||v.isSafari()||v.isFirefox()?m.retry(i,p):ue.none()},ah=(i,m,p,v,E)=>zC(i,p,v).bind(D=>Mi(i,E,D)),_x=(i,m,p)=>yl(i,m,p).bind(v=>Ri(i,m,v.element,v.offset,p,gi).map(i.fromSitus)),XR=(i,m)=>tA(i,p=>tc(p).exists(v=>ss(v,m))),sA=(i,m,p,v,E)=>Wr(v,"td,th",m).bind(D=>Wr(D,"table",m).bind(I=>XR(E,I)?_x(i,m,p).bind(Z=>Wr(Z.finish,"td,th",m).map(te=>({start:D,finish:te,range:Z}))):ue.none())),GC=(i,m,p,v,E,D)=>D(v,m).orThunk(()=>sA(i,m,p,v,E).map(I=>{const Z=I.range;return wp.create(ue.some(n0(Z.start,Z.soffset,Z.finish,Z.foffset)),!0)})),rA=(i,m)=>Wr(i,"tr",m).bind(p=>Wr(p,"table",m).bind(v=>{const E=Jo(v,"tr");return ss(p,E[0])?sb(v,D=>Mg(D).isSome(),m).map(D=>{const I=ia(D);return wp.create(ue.some(n0(D,I,D,I)),!0)}):ue.none()})),l0=(i,m)=>Wr(i,"tr",m).bind(p=>Wr(p,"table",m).bind(v=>{const E=Jo(v,"tr");return ss(p,E[E.length-1])?rb(v,D=>_f(D).isSome(),m).map(D=>wp.create(ue.some(n0(D,0,D,0)),!0)):ue.none()})),Ia=(i,m,p,v,E,D,I)=>sA(i,p,v,E,D).bind(Z=>oh(m,p,Z.start,Z.finish,I)),lb=i=>{let m=i;return{get:()=>m,set:E=>{m=E}}},ib=i=>{const m=lb(ue.none()),p=()=>m.get().each(i);return{clear:()=>{p(),m.set(ue.none())},isSet:()=>m.get().isSome(),get:()=>m.get(),set:Z=>{p(),m.set(ue.some(Z))}}},Jf=()=>{const i=ib(ct);return{...i,on:p=>i.get().each(p)}},qC=(i,m)=>Wr(i,"td,th",m),i0=i=>Ur(i).exists(Rf),KC=(i,m,p,v)=>{const E=Jf(),D=E.clear,I=Ae=>{E.on(mt=>{v.clearBeforeUpdate(m),qC(Ae.target,p).each(Pt=>{Ml(mt,Pt,p).each(Rt=>{const Tt=Rt.boxes.getOr([]);if(Tt.length===1){const rn=Tt[0],at=$g(rn)==="false",Et=vs(Y2(Ae.target),rn,ss);at&&Et&&v.selectRange(m,Tt,rn,rn)}else Tt.length>1&&(v.selectRange(m,Tt,Rt.start,Rt.finish),i.selectContents(Pt))})})})};return{clearstate:D,mousedown:Ae=>{v.clear(m),qC(Ae.target,p).filter(i0).each(E.set)},mouseover:Ae=>{I(Ae)},mouseup:Ae=>{I(Ae),D()}}},u0={traverse:xa,gather:qm,relative:kc.before,retry:vl.tryDown,failure:Yf.failedDown},YC={traverse:Ga,gather:Kf,relative:kc.before,retry:vl.tryUp,failure:Yf.failedUp},Dp=i=>m=>m===i,Ym=Dp(38),ub=Dp(40),lh=i=>i>=37&&i<=40,Xm={isBackward:Dp(37),isForward:Dp(39)},Ax={isBackward:Dp(39),isForward:Dp(37)},hi=i=>{const m=i!==void 0?i.dom:document,p=m.body.scrollLeft||m.documentElement.scrollLeft,v=m.body.scrollTop||m.documentElement.scrollTop;return pn(p,v)},XC=(i,m,p)=>{const E=(p!==void 0?p.dom:document).defaultView;E&&E.scrollBy(i,m)},Qf=Yg.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),ih=i=>Qf.exact(i.start,i.soffset,i.finish,i.foffset),d0=i=>i.match({domRange:m=>ge.fromDom(m.startContainer),relative:(m,p)=>kc.getStart(m),exact:(m,p,v,E)=>m}),m0=Qf.domRange,cA=Qf.relative,aA=Qf.exact,Ox=i=>{const m=d0(i);return ms(m)},Dx=qf.create,uh={domRange:m0,relative:cA,exact:aA,exactFromRange:ih,getWin:Ox,range:Dx},Rp=(i,m,p)=>{var v;return ue.from((v=i.caretPositionFromPoint)===null||v===void 0?void 0:v.call(i,m,p)).bind(E=>{if(E.offsetNode===null)return ue.none();const D=i.createRange();return D.setStart(E.offsetNode,E.offset),D.collapse(),ue.some(D)})},db=(i,m,p)=>{var v;return ue.from((v=i.caretRangeFromPoint)===null||v===void 0?void 0:v.call(i,m,p))},lA=(i,m,p)=>i.caretPositionFromPoint?Rp(i,m,p):i.caretRangeFromPoint?db(i,m,p):ue.none(),Rx=(i,m,p)=>{const v=i.document;return lA(v,m,p).map(E=>qf.create(ge.fromDom(E.startContainer),E.startOffset,ge.fromDom(E.endContainer),E.endOffset))},mb=(i,m)=>{const p=os(i);return p==="input"?kc.after(i):Bo(["br","img"],p)?m===0?kc.before(i):kc.after(i):kc.on(i,m)},f0=(i,m)=>{const p=i.fold(kc.before,mb,kc.after),v=m.fold(kc.before,mb,kc.after);return uh.relative(p,v)},JC=(i,m,p,v)=>{const E=mb(i,m),D=mb(p,v);return uh.relative(E,D)},Mx=(i,m,p,v)=>{const D=zr(i).dom.createRange();return D.setStart(i.dom,m),D.setEnd(p.dom,v),D},g0=(i,m,p,v)=>{const E=Mx(i,m,p,v),D=ss(i,p)&&m===v;return E.collapsed&&!D},Mp=i=>ue.from(i.getSelection()),Nx=(i,m)=>{Mp(i).each(p=>{p.removeAllRanges(),p.addRange(m)})},dh=(i,m,p,v,E)=>{const D=nb(i,m,p,v,E);Nx(i,D)},Uo=(i,m,p,v,E,D)=>{m.collapse(p.dom,v),m.extend(E.dom,D)},Jm=(i,m)=>RC(i,m).match({ltr:(p,v,E,D)=>{dh(i,p,v,E,D)},rtl:(p,v,E,D)=>{Mp(i).each(I=>{if(I.setBaseAndExtent)I.setBaseAndExtent(p.dom,v,E.dom,D);else if(I.extend)try{Uo(i,I,p,v,E,D)}catch{dh(i,E,D,p,v)}else dh(i,E,D,p,v)})}}),eg=(i,m,p,v,E)=>{const D=JC(m,p,v,E);Jm(i,D)},h0=(i,m,p)=>{const v=f0(m,p);Jm(i,v)},QC=i=>{if(i.rangeCount>0){const m=i.getRangeAt(0),p=i.getRangeAt(i.rangeCount-1);return ue.some(qf.create(ge.fromDom(m.startContainer),m.startOffset,ge.fromDom(p.endContainer),p.endOffset))}else return ue.none()},fb=i=>{if(i.anchorNode===null||i.focusNode===null)return QC(i);{const m=ge.fromDom(i.anchorNode),p=ge.fromDom(i.focusNode);return g0(m,i.anchorOffset,p,i.focusOffset)?ue.some(qf.create(m,i.anchorOffset,p,i.focusOffset)):QC(i)}},mh=(i,m,p=!0)=>{const E=(p?e0:Gf)(i,m);Nx(i,E)},gb=i=>Mp(i).filter(m=>m.rangeCount>0).bind(fb),p0=i=>gb(i).map(m=>uh.exact(m.start,m.soffset,m.finish,m.foffset)),Px=(i,m)=>{const p=t0(i,m);return K_(p)},iA=(i,m,p)=>Rx(i,m,p),fh=i=>{Mp(i).each(m=>m.removeAllRanges())},b0=i=>({elementFromPoint:(at,Et)=>ge.fromPoint(ge.fromDom(i.document),at,Et),getRect:at=>at.dom.getBoundingClientRect(),getRangedRect:(at,Et,_t,Un)=>{const Io=uh.exact(at,Et,_t,Un);return Px(i,Io)},getSelection:()=>p0(i).map(at=>px(i,at)),fromSitus:at=>{const Et=uh.relative(at.start,at.finish);return px(i,Et)},situsFromPoint:(at,Et)=>iA(i,at,Et).map(_t=>hx.create(_t.start,_t.soffset,_t.finish,_t.foffset)),clearSelection:()=>{fh(i)},collapseSelection:(at=!1)=>{p0(i).each(Et=>Et.fold(_t=>_t.collapse(at),(_t,Un)=>{const Io=at?_t:Un;h0(i,Io,Io)},(_t,Un,Io,Es)=>{const tr=at?_t:Io,Tr=at?Un:Es;eg(i,tr,Tr,tr,Tr)}))},setSelection:at=>{eg(i,at.start,at.soffset,at.finish,at.foffset)},setRelativeSelection:(at,Et)=>{h0(i,at,Et)},selectNode:at=>{mh(i,at,!1)},selectContents:at=>{mh(i,at)},getInnerHeight:()=>i.innerHeight,getScrollY:()=>hi(ge.fromDom(i.document)).top,scrollBy:(at,Et)=>{XC(at,Et,ge.fromDom(i.document))}}),tg=(i,m)=>({rows:i,cols:m}),ew=(i,m,p,v)=>{const E=b0(i),D=KC(E,m,p,v);return{clearstate:D.clearstate,mousedown:D.mousedown,mouseover:D.mouseover,mouseup:D.mouseup}},tw=i=>bs(i,yn).exists(Rf),gh=(i,m)=>tw(i)||tw(m),nw=(i,m,p,v)=>{const E=b0(i),D=()=>(v.clear(m),ue.none());return{keydown:(te,fe,Ae,mt,Pt,Rt)=>{const Tt=te.raw,rn=Tt.which,at=Tt.shiftKey===!0;return ep(m,v.selectedSelector).fold(()=>(lh(rn)&&!at&&v.clearBeforeUpdate(m),lh(rn)&&at&&!gh(fe,mt)?ue.none:ub(rn)&&at?Qe(Ia,E,m,p,u0,mt,fe,v.selectRange):Ym(rn)&&at?Qe(Ia,E,m,p,YC,mt,fe,v.selectRange):ub(rn)?Qe(GC,E,p,u0,mt,fe,l0):Ym(rn)?Qe(GC,E,p,YC,mt,fe,rA):ue.none),_t=>{const Un=Io=>()=>Ht(Io,tr=>o0(tr.rows,tr.cols,m,_t,v)).fold(()=>Pf(m,v.firstSelectedSelector,v.lastSelectedSelector).map(tr=>{const Tr=ub(rn)||Rt.isForward(rn)?kc.after:kc.before;return E.setRelativeSelection(kc.on(tr.first,0),Tr(tr.table)),v.clear(m),wp.create(ue.none(),!0)}),tr=>ue.some(wp.create(ue.none(),!0)));return lh(rn)&&at&&!gh(fe,mt)?ue.none:ub(rn)&&at?Un([tg(1,0)]):Ym(rn)&&at?Un([tg(-1,0)]):Rt.isBackward(rn)&&at?Un([tg(0,-1),tg(-1,0)]):Rt.isForward(rn)&&at?Un([tg(0,1),tg(1,0)]):lh(rn)&&!at?D:ue.none})()},keyup:(te,fe,Ae,mt,Pt)=>ep(m,v.selectedSelector).fold(()=>{const Rt=te.raw,Tt=Rt.which;return Rt.shiftKey===!0&&lh(Tt)&&gh(fe,mt)?X_(m,p,fe,Ae,mt,Pt,v.selectRange):ue.none()},ue.none)}},Bx=(i,m,p,v)=>{const E=b0(i);return(D,I)=>{v.clearBeforeUpdate(m),Ml(D,I,p).each(Z=>{const te=Z.boxes.getOr([]);v.selectRange(m,te,Z.start,Z.finish),E.selectContents(I),E.collapseSelection()})}},$x=(i,m)=>{const p=_r(i,m);return p===void 0||p===""?[]:p.split(" ")},dm=(i,m,p)=>{const E=$x(i,m).concat([p]);return Ns(i,m,E.join(" ")),!0},Ix=(i,m,p)=>{const v=ho($x(i,m),E=>E!==p);return v.length>0?Ns(i,m,v.join(" ")):re(i,m),!1},v0=i=>i.dom.classList!==void 0,cu=i=>$x(i,"class"),ma=(i,m)=>dm(i,"class",m),uA=(i,m)=>Ix(i,"class",m),xd=(i,m)=>{v0(i)?i.dom.classList.add(m):ma(i,m)},dA=i=>{(v0(i)?i.dom.classList:cu(i)).length===0&&re(i,"class")},Lx=(i,m)=>{v0(i)?i.dom.classList.remove(m):uA(i,m),dA(i)},hb=(i,m)=>v0(i)&&i.dom.classList.contains(m),Np=(i,m)=>{Je(m,p=>{Lx(i,p)})},Fx=i=>m=>{xd(m,i)},Hx=i=>m=>{Np(m,i)},Vx={byClass:i=>{const m=Fx(i.selected),p=Hx([i.selected,i.lastSelected,i.firstSelected]),v=D=>{const I=Jo(D,i.selectedSelector);Je(I,p)};return{clearBeforeUpdate:v,clear:v,selectRange:(D,I,Z,te)=>{v(D),Je(I,m),xd(Z,i.firstSelected),xd(te,i.lastSelected)},selectedSelector:i.selectedSelector,firstSelectedSelector:i.firstSelectedSelector,lastSelectedSelector:i.lastSelectedSelector}},byAttr:(i,m,p)=>{const v=te=>{re(te,i.selected),re(te,i.firstSelected),re(te,i.lastSelected)},E=te=>{Ns(te,i.selected,"1")},D=te=>{I(te),p()},I=te=>{const fe=Jo(te,`${i.selectedSelector},${i.firstSelectedSelector},${i.lastSelectedSelector}`);Je(fe,v)};return{clearBeforeUpdate:I,clear:D,selectRange:(te,fe,Ae,mt)=>{D(te),Je(fe,E),Ns(Ae,i.firstSelected,"1"),Ns(mt,i.lastSelected,"1"),m(fe,Ae,mt)},selectedSelector:i.selectedSelector,firstSelectedSelector:i.firstSelectedSelector,lastSelectedSelector:i.lastSelectedSelector}}},Ut=(i,m,p,v)=>{switch(i.tag){case"none":return m();case"single":return v(i.element);case"multiple":return p(i.elements)}},fa=()=>({tag:"none"}),y0=i=>({tag:"multiple",elements:i}),ga=i=>({tag:"single",element:i}),au=(i,m,p)=>({get:()=>Tv(i(),p).fold(()=>m().fold(fa,ga),y0)}),ow=(i,m)=>{const p=i.slice(0,m[m.length-1].row+1),v=Ky(p);return ds(v,E=>{const D=E.cells.slice(0,m[m.length-1].column+1);return cn(D,I=>I.element)})},pb=(i,m)=>{const p=i.slice(m[0].row+m[0].rowspan-1,i.length),v=Ky(p);return ds(v,E=>{const D=E.cells.slice(m[0].column+m[0].colspan-1,E.cells.length);return cn(D,I=>I.element)})},Pp=(i,m,p)=>{const v=To.fromTable(i);return ui(v,m).map(D=>{const I=dp(v,p,!1),{rows:Z}=Ds(I),te=ow(Z,D),fe=pb(Z,D);return{upOrLeftCells:te,downOrRightCells:fe}})},zx=(i,m,p,v,E,D,I)=>({target:i,x:m,y:p,stop:v,prevent:E,kill:D,raw:I}),ng=i=>{const m=ge.fromDom(Vo(i).getOr(i.target)),p=()=>i.stopPropagation(),v=()=>i.preventDefault(),E=Qn(v,p);return zx(m,i.clientX,i.clientY,p,v,E,i)},Bp=(i,m)=>p=>{i(p)&&m(ng(p))},mA=(i,m,p,v,E)=>{const D=Bp(p,v);return i.dom.addEventListener(m,D,E),{unbind:Qe(gA,i,m,D,E)}},fA=(i,m,p,v)=>mA(i,m,p,v,!1),gA=(i,m,p,v)=>{i.dom.removeEventListener(m,p,v)},Ux=Oe,hh=(i,m,p)=>fA(i,m,Ux,p),$p=ng,ph=i=>!hb(ge.fromDom(i.target),"ephox-snooker-resizer-bar"),C0=(i,m)=>{const p=au(()=>ge.fromDom(i.getBody()),()=>Ev(D1(i),_i(i)),Vg.selectedSelector),v=(te,fe,Ae)=>{_a(fe).each(Pt=>{const Rt=cn(te,_t=>_t.dom),Tt=Af(i),rn=Dl(ct,ge.fromDom(i.getDoc()),Tt),at=Ts(i),Et=Pp(Pt,{selection:at},rn).map(_t=>pr(_t,Un=>cn(Un,Io=>Io.dom))).getOrUndefined();P_(i,Rt,fe.dom,Ae.dom,Et)})},E=()=>Hc(i),D=Vx.byAttr(Vg,v,E);return i.on("init",te=>{const fe=i.getWin(),Ae=Xl(i),mt=_i(i),Pt=()=>{const zs=i.selection,Bl=ge.fromDom(zs.getStart()),$l=ge.fromDom(zs.getEnd());Fg(_a,[Bl,$l]).fold(()=>D.clear(Ae),ct)},Rt=ew(fe,Ae,mt,D),Tt=nw(fe,Ae,mt,D),rn=Bx(fe,Ae,mt,D),at=zs=>zs.raw.shiftKey===!0;i.on("TableSelectorChange",zs=>rn(zs.start,zs.finish));const Et=(zs,Bl)=>{at(zs)&&(Bl.kill&&zs.kill(),Bl.selection.each($l=>{const iu=uh.relative($l.start,$l.finish),fo=t0(fe,iu);i.selection.setRng(fo)}))},_t=zs=>{const Bl=$p(zs);if(Bl.raw.shiftKey&&lh(Bl.raw.which)){const $l=i.selection.getRng(),iu=ge.fromDom($l.startContainer),fo=ge.fromDom($l.endContainer);Tt.keyup(Bl,iu,$l.startOffset,fo,$l.endOffset).each(Jl=>{Et(Bl,Jl)})}},Un=zs=>{const Bl=$p(zs);m.hide();const $l=i.selection.getRng(),iu=ge.fromDom($l.startContainer),fo=ge.fromDom($l.endContainer),Jl=H(Xm,Ax)(ge.fromDom(i.selection.getStart()));Tt.keydown(Bl,iu,$l.startOffset,fo,$l.endOffset,Jl).each(Uc=>{Et(Bl,Uc)}),m.show()},Io=zs=>zs.button===0,Es=zs=>zs.buttons===void 0?!0:(zs.buttons&1)!==0,tr=zs=>{Rt.clearstate()},Tr=zs=>{Io(zs)&&ph(zs)&&Rt.mousedown($p(zs))},Bi=zs=>{Es(zs)&&ph(zs)&&Rt.mouseover($p(zs))},kd=zs=>{Io(zs)&&ph(zs)&&Rt.mouseup($p(zs))},mm=(()=>{const zs=lb(ge.fromDom(Ae)),Bl=lb(0);return{touchEnd:iu=>{const fo=ge.fromDom(iu.target);if(hs("td")(fo)||hs("th")(fo)){const Jl=zs.get(),Uc=Bl.get();ss(Jl,fo)&&iu.timeStamp-Uc<300&&(iu.preventDefault(),rn(fo,fo))}zs.set(fo),Bl.set(iu.timeStamp)}}})();i.on("dragstart",tr),i.on("mousedown",Tr),i.on("mouseover",Bi),i.on("mouseup",kd),i.on("touchend",mm.touchEnd),i.on("keyup",_t),i.on("keydown",Un),i.on("NodeChange",Pt)}),i.on("PreInit",()=>{i.serializer.addTempAttr(Vg.firstSelected),i.serializer.addTempAttr(Vg.lastSelected)}),{getSelectedCells:()=>Ut(p.get(),ee([]),te=>cn(te,fe=>fe.dom),te=>[te.dom]),clearSelectedCells:te=>D.clear(ge.fromDom(te))}},Ni=i=>{let m=[];return{bind:D=>{if(D===void 0)throw new Error("Event bind error: undefined handler");m.push(D)},unbind:D=>{m=ho(m,I=>I!==D)},trigger:(...D)=>{const I={};Je(i,(Z,te)=>{I[Z]=D[te]}),Je(m,Z=>{Z(I)})}}},Td=i=>{const m=pr(i,v=>({bind:v.bind,unbind:v.unbind})),p=pr(i,v=>v.trigger);return{registry:m,trigger:p}},bh=(i,m)=>{let p=null;const v=()=>{io(p)||(clearTimeout(p),p=null)};return{cancel:v,throttle:(...D)=>{v(),p=setTimeout(()=>{p=null,i.apply(null,D)},m)}}},Ip=i=>i.slice(0).sort(),w0=(i,m)=>{throw new Error("All required keys ("+Ip(i).join(", ")+") were not specified. Specified keys were: "+Ip(m).join(", ")+".")},S0=i=>{throw new Error("Unsupported keys for object: "+Ip(i).join(", "))},hA=(i,m)=>{if(!Yt(m))throw new Error("The "+i+" fields must be an array. Was: "+m+".");Je(m,p=>{if(!Jn(p))throw new Error("The value "+p+" in the "+i+" fields was not a string.")})},pA=(i,m)=>{throw new Error("All values need to be of type: "+m+". Keys ("+Ip(i).join(", ")+") were not.")},bA=i=>{const m=Ip(i);F(m,(v,E)=>E<m.length-1&&v===m[E+1]).each(v=>{throw new Error("The field: "+v+" occurs more than once in the combined fields: ["+m.join(", ")+"].")})},vA=(i,m)=>Wx(i,m,{validate:ft,label:"function"}),Wx=(i,m,p)=>{if(m.length===0)throw new Error("You must specify at least one required field.");return hA("required",m),bA(m),v=>{const E=Lt(v);Go(m,Z=>Bo(E,Z))||w0(m,E),i(m,E);const I=ho(m,Z=>!p.validate(v[Z],Z));return I.length>0&&pA(I,p.label),v}},Zx=(i,m)=>{const p=ho(m,v=>!Bo(i,v));p.length>0&&S0(p)},sw=i=>vA(Zx,i),x0=sw(["compare","extract","mutate","sink"]),ol=sw(["element","start","stop","destroy"]),lu=sw(["forceDrop","drop","move","delayDrop"]),Pi=()=>{let i=ue.none();const m=()=>{i=ue.none()},p=(D,I)=>{const Z=i.map(te=>D.compare(te,I));return i=ue.some(I),Z},v=(D,I)=>{I.extract(D).each(te=>{p(I,te).each(Ae=>{E.trigger.move(Ae)})})},E=Td({move:Ni(["info"])});return{onEvent:v,reset:m,events:E.registry}},bb=()=>{const i=Td({move:Ni(["info"])});return{onEvent:ct,reset:ct,events:i.registry}},rw=()=>{const i=bb(),m=Pi();let p=i;return{on:()=>{p.reset(),p=m},off:()=>{p.reset(),p=i},isOn:()=>p===m,onEvent:(Z,te)=>{p.onEvent(Z,te)},events:m.events}},jx=(i,m,p)=>{let v=!1;const E=Td({start:Ni([]),stop:Ni([])}),D=rw(),I=()=>{Tt.stop(),D.isOn()&&(D.off(),E.trigger.stop())},Z=bh(I,200),te=at=>{Tt.start(at),D.on(),E.trigger.start()},fe=at=>{Z.cancel(),D.onEvent(at,m)};D.events.move.bind(at=>{m.mutate(i,at.info)});const Ae=()=>{v=!0},mt=()=>{v=!1},Pt=()=>v,Rt=at=>(...Et)=>{v&&at.apply(null,Et)},Tt=m.sink(lu({forceDrop:I,drop:Rt(I),move:Rt(fe),delayDrop:Rt(Z.throttle)}),p),rn=()=>{Tt.destroy()};return{element:Tt.element,go:te,on:Ae,off:mt,isActive:Pt,destroy:rn,events:E.registry}},T0=i=>{const m=i.replace(/\./g,"-");return{resolve:v=>m+"-"+v}},E0=T0("ephox-dragster").resolve,CA=i=>{const m={layerClass:E0("blocker"),...i},p=ge.fromTag("div");return Ns(p,"role","presentation"),ws(p,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),xd(p,E0("blocker")),xd(p,m.layerClass),{element:ee(p),destroy:()=>{Or(p)}}};var _0=x0({compare:(i,m)=>pn(m.left-i.left,m.top-i.top),extract:i=>ue.some(pn(i.x,i.y)),sink:(i,m)=>{const p=CA(m),v=hh(p.element(),"mousedown",i.forceDrop),E=hh(p.element(),"mouseup",i.drop),D=hh(p.element(),"mousemove",i.move),I=hh(p.element(),"mouseout",i.delayDrop),Z=()=>{p.destroy(),E.unbind(),D.unbind(),I.unbind(),v.unbind()},te=Ae=>{Os(Ae,p.element())},fe=()=>{Or(p.element())};return ol({element:p.element,start:te,stop:fe,destroy:Z})},mutate:(i,m)=>{i.mutate(m.left,m.top)}});const Vs=(i,m={})=>{var p;const v=(p=m.mode)!==null&&p!==void 0?p:_0;return jx(i,v,m)},Ed=T0("ephox-snooker").resolve,qx=()=>{const i=Td({drag:Ni(["xDelta","yDelta"])});return{mutate:(p,v)=>{i.trigger.drag(p,v)},events:i.registry}},cw=()=>{const i=Td({drag:Ni(["xDelta","yDelta","target"])});let m=ue.none();const p=qx();return p.events.drag.bind(D=>{m.each(I=>{i.trigger.drag(D.xDelta,D.yDelta,I)})}),{assign:D=>{m=ue.some(D)},get:()=>m,mutate:p.mutate,events:i.registry}},Lp=(i,m,p,v,E)=>{const D=ge.fromTag("div");return ws(D,{position:"absolute",left:m-v/2+"px",top:p+"px",height:E+"px",width:v+"px"}),mc(D,{"data-column":i,role:"presentation"}),D},A0=(i,m,p,v,E)=>{const D=ge.fromTag("div");return ws(D,{position:"absolute",left:m+"px",top:p-E/2+"px",height:E+"px",width:v+"px"}),mc(D,{"data-row":i,role:"presentation"}),D},vb=Ed("resizer-bar"),aw=Ed("resizer-rows"),Kx=Ed("resizer-cols"),lw=7,Yx=(i,m)=>ds(i.all,(p,v)=>m(p.element)?[v]:[]),yb=(i,m)=>{const p=[];return Wo(i.grid.columns,v=>{To.getColumnAt(i,v).map(D=>D.element).forall(m)&&p.push(v)}),ho(p,v=>{const E=To.filterItems(i,D=>D.column===v);return Go(E,D=>m(D.element))})},vh=i=>{const m=Jo(i.parent(),"."+vb);Je(m,Or)},O0=(i,m,p)=>{const v=i.origin();Je(m,E=>{E.each(D=>{const I=p(v,D);xd(I,vb),Os(i.parent(),I)})})},xA=(i,m,p,v)=>{O0(i,m,(E,D)=>{const I=Lp(D.col,D.x-E.left,p.top-E.top,lw,v);return xd(I,Kx),I})},TA=(i,m,p,v)=>{O0(i,m,(E,D)=>{const I=A0(D.row,p.left-E.left,D.y-E.top,v,lw);return xd(I,aw),I})},EA=(i,m,p,v,E)=>{const D=Da(p),I=m.isResizable,Z=v.length>0?An.positions(v,p):[],te=Z.length>0?Yx(i,I):[],fe=ho(Z,(Rt,Tt)=>tt(te,rn=>Tt===rn));TA(m,fe,D,Tu(p));const Ae=E.length>0?$m.positions(E,p):[],mt=Ae.length>0?yb(i,I):[],Pt=ho(Ae,(Rt,Tt)=>tt(mt,rn=>Tt===rn));xA(m,Pt,D,On(p))},pi=(i,m)=>{if(vh(i),i.isResizable(m)){const p=To.fromTable(m),v=x(p),E=Yd(p);EA(p,i,m,v,E)}},ja=(i,m)=>{const p=Jo(i.parent(),"."+vb);Je(p,m)},Fp=i=>{ja(i,m=>{mo(m,"display","none")})},eM=i=>{ja(i,m=>{mo(m,"display","block")})},kA=i=>hb(i,aw),_A=i=>hb(i,Kx),$o=Ed("resizer-bar-dragging"),AA=i=>{const m=cw(),p=Vs(m,{});let v=ue.none();const E=(Tt,rn)=>ue.from(_r(Tt,rn));m.events.drag.bind(Tt=>{E(Tt.target,"data-row").each(rn=>{const at=Zs(Tt.target,"top");mo(Tt.target,"top",at+Tt.yDelta+"px")}),E(Tt.target,"data-column").each(rn=>{const at=Zs(Tt.target,"left");mo(Tt.target,"left",at+Tt.xDelta+"px")})});const D=(Tt,rn)=>{const at=Zs(Tt,rn),Et=Xr(Tt,"data-initial-"+rn,0);return at-Et};p.events.stop.bind(()=>{m.get().each(Tt=>{v.each(rn=>{E(Tt,"data-row").each(at=>{const Et=D(Tt,"top");re(Tt,"data-initial-top"),Rt.trigger.adjustHeight(rn,Et,parseInt(at,10))}),E(Tt,"data-column").each(at=>{const Et=D(Tt,"left");re(Tt,"data-initial-left"),Rt.trigger.adjustWidth(rn,Et,parseInt(at,10))}),pi(i,rn)})})});const I=(Tt,rn)=>{Rt.trigger.startAdjust(),m.assign(Tt),Ns(Tt,"data-initial-"+rn,Zs(Tt,rn)),xd(Tt,$o),mo(Tt,"opacity","0.2"),p.go(i.parent())},Z=hh(i.parent(),"mousedown",Tt=>{kA(Tt.target)&&I(Tt.target,"top"),_A(Tt.target)&&I(Tt.target,"left")}),te=Tt=>ss(Tt,i.view()),fe=Tt=>Wr(Tt,"table",te).filter(Rf),Ae=hh(i.view(),"mouseover",Tt=>{fe(Tt.target).fold(()=>{Hn(Tt.target)&&vh(i)},rn=>{p.isActive()&&(v=ue.some(rn),pi(i,rn))})}),mt=()=>{Z.unbind(),Ae.unbind(),p.destroy(),vh(i)},Pt=Tt=>{pi(i,Tt)},Rt=Td({adjustHeight:Ni(["table","delta","row"]),adjustWidth:Ni(["table","delta","column"]),startAdjust:Ni([])});return{destroy:mt,refresh:Pt,on:p.on,off:p.off,hideBars:Qe(Fp,i),showBars:Qe(eM,i),events:Rt.registry}},iw={create:(i,m,p)=>{const v=An,E=$m,D=AA(i),I=Td({beforeResize:Ni(["table","type"]),afterResize:Ni(["table","type"]),startDrag:Ni([])});return D.events.adjustHeight.bind(Z=>{const te=Z.table;I.trigger.beforeResize(te,"row");const fe=v.delta(Z.delta,te);eC(te,fe,Z.row),I.trigger.afterResize(te,"row")}),D.events.startAdjust.bind(Z=>{I.trigger.startDrag()}),D.events.adjustWidth.bind(Z=>{const te=Z.table;I.trigger.beforeResize(te,"col");const fe=E.delta(Z.delta,te),Ae=p(te);SS(te,fe,Z.column,m,Ae),I.trigger.afterResize(te,"col")}),{on:D.on,off:D.off,refreshBars:D.refresh,hideBars:D.hideBars,showBars:D.showBars,destroy:D.destroy,events:I.registry}}},Cb={only:(i,m)=>{const p=Vl(i)?rs(i):i;return{parent:ee(p),view:ee(i),origin:ee(pn(0,0)),isResizable:m}},detached:(i,m,p)=>{const v=()=>Da(m);return{parent:ee(m),view:ee(i),origin:v,isResizable:p}},body:(i,m,p)=>({parent:ee(m),view:ee(i),origin:ee(pn(0,0)),isResizable:p})},DA=()=>{const i=ge.fromTag("div");return ws(i,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),Os(Fs(),i),i},RA=(i,m)=>i.inline?Cb.body(ge.fromDom(i.getBody()),DA(),m):Cb.only(ge.fromDom(i.getDoc()),m),uw=(i,m)=>{i.inline&&Or(m.parent())},D0=i=>zt(i)&&i.nodeName==="TABLE",R0="bar-",oM=i=>_r(i,"data-mce-resize")!=="false",MA=i=>{const m=To.fromTable(i);To.hasColumns(m)||Je(yu(i),p=>{const v=Rr(p,"width");mo(p,"width",v),re(p,"width")})},wb=i=>ul(i,"corner-"),dw=i=>il(i,"corner-"),NA=i=>{const m=Jf(),p=Jf(),v=Jf();let E,D,I,Z;const te=Et=>Zv(i,Et),fe=()=>hd(i)?Um():$f(),Ae=Et=>zg(Et).columns,mt=Et=>zg(Et).rows,Pt=(Et,_t,Un,Io)=>{const Es=dw(_t),tr=ra(Es,"e"),Tr=ul(Es,"n");if(D===""&&nh(Et),Z===""&&I_(Et),Un!==E&&D!==""){mo(Et,"width",D);const Bi=fe(),kd=te(Et),yh=hd(i)||tr?Ae(Et)-1:0;SS(Et,Un-E,yh,Bi,kd)}else if(Py(D)){const Bi=parseFloat(D.replace("%","")),kd=Un*Bi/E;mo(Et,"width",kd+"%")}if(Jh(D)&&MA(Et),Io!==I&&Z!==""){mo(Et,"height",Z);const Bi=Tr?0:mt(Et)-1;eC(Et,Io-I,Bi)}},Rt=()=>{p.on(Et=>{Et.destroy()}),v.on(Et=>{uw(i,Et)})};return i.on("init",()=>{const Et=RA(i,oM);if(v.set(Et),r_(i)&&bv(i)){const _t=fe(),Un=iw.create(Et,_t,te);i.mode.isReadOnly()||Un.on(),Un.events.startDrag.bind(Io=>{m.set(i.selection.getRng())}),Un.events.beforeResize.bind(Io=>{const Es=Io.table.dom;Vc(i,Es,R1(Es),Xh(Es),R0+Io.type)}),Un.events.afterResize.bind(Io=>{const Es=Io.table,tr=Es.dom;Ai(Es),m.on(Tr=>{i.selection.setRng(Tr),i.focus()}),Pa(i,tr,R1(tr),Xh(tr),R0+Io.type),i.undoManager.add()}),p.set(Un)}}),i.on("ObjectResizeStart",Et=>{const _t=Et.target;if(D0(_t)&&!i.mode.isReadOnly()){const Un=ge.fromDom(_t);Je(i.dom.select(".mce-clonedresizable"),Io=>{i.dom.addClass(Io,"mce-"+pv(i)+"-columns")}),!qS(Un)&&Na(i)?J1(Un):!GS(Un)&&pd(i)&&nh(Un),KS(Un)&&ul(Et.origin,R0)&&nh(Un),E=Et.width,D=Of(i)?"":X2(i,_t).getOr(""),I=Et.height,Z=J2(i,_t).getOr("")}}),i.on("ObjectResized",Et=>{const _t=Et.target;if(D0(_t)){const Un=ge.fromDom(_t),Io=Et.origin;wb(Io)&&Pt(Un,Io,Et.width,Et.height),Ai(Un),eh(i,Un.dom,zc)}}),i.on("SwitchMode",()=>{p.on(Et=>{i.mode.isReadOnly()?(Et.off(),Et.hideBars()):(Et.on(),Et.showBars())})}),i.on("dragstart dragend",Et=>{p.on(_t=>{Et.type==="dragstart"?(_t.hideBars(),_t.off()):(_t.on(),_t.showBars())})}),i.on("remove",()=>{Rt()}),{refresh:Et=>{p.on(_t=>_t.refreshBars(ge.fromDom(Et)))},hide:()=>{p.on(Et=>Et.hideBars())},show:()=>{p.on(Et=>Et.showBars())}}},Xx=i=>{A1(i);const m=NA(i),p=C0(i,m),v=bC(i,m,p);return Z_(i,v),j_(i,v),WR(i,v),{getSelectedCells:p.getSelectedCells,clearSelectedCells:p.clearSelectedCells}},$n=i=>({table:Xx(i)});var M0=()=>{ht.add("dom",$n)};M0()})();(function(){const ht=Re=>{let ee=Re;return{get:()=>ee,set:Qe=>{ee=Qe}}};var _n=tinymce.util.Tools.resolve("tinymce.PluginManager"),jt=tinymce.util.Tools.resolve("tinymce.Env");const un=Re=>Re.dispatch("ResizeEditor"),Ct=Re=>ee=>ee.options.get(Re),Gt=Re=>{const ee=Re.options.register;ee("autoresize_overflow_padding",{processor:"number",default:1}),ee("autoresize_bottom_margin",{processor:"number",default:50})},Jn=Ct("min_height"),Dt=Ct("max_height"),Yt=Ct("autoresize_overflow_padding"),io=Ct("autoresize_bottom_margin"),xn=Re=>Re.plugins.fullscreen&&Re.plugins.fullscreen.isFullscreen(),Xt=(Re,ee)=>{const Xe=Re.getBody();Xe&&(Xe.style.overflowY=ee?"":"hidden",ee||(Xe.scrollTop=0))},Mn=(Re,ee,Xe,Zn)=>{var Qe;const W=parseInt((Qe=Re.getStyle(ee,Xe,Zn))!==null&&Qe!==void 0?Qe:"",10);return isNaN(W)?0:W},zt=Re=>{if((Re==null?void 0:Re.type.toLowerCase())==="setcontent"){const ee=Re;return ee.selection===!0||ee.paste===!0}else return!1},ft=(Re,ee,Xe,Zn)=>{var Qe;const W=Re.dom,xt=Re.getDoc();if(!xt)return;if(xn(Re)){Xt(Re,!0);return}const gn=xt.documentElement,dn=Zn?Zn():Yt(Re),Oe=(Qe=Jn(Re))!==null&&Qe!==void 0?Qe:Re.getElement().offsetHeight;let ue=Oe;const ts=Mn(W,gn,"margin-top",!0),no=Mn(W,gn,"margin-bottom",!0);let Mt=gn.offsetHeight+ts+no+dn;Mt<0&&(Mt=0);const A=Re.getContainer().offsetHeight,Bo=Re.getContentAreaContainer().offsetHeight,tt=A-Bo;Mt+tt>Oe&&(ue=Mt+tt);const Wo=Dt(Re);Wo&&ue>Wo?(ue=Wo,Xt(Re,!0)):Xt(Re,!1);const cn=ee.get();if(cn.set&&(Re.dom.setStyles(Re.getDoc().documentElement,{"min-height":0}),Re.dom.setStyles(Re.getBody(),{"min-height":"inherit"})),ue!==cn.totalHeight&&(Mt-dn!==cn.contentHeight||!cn.set)){const Je=ue-cn.totalHeight;if(W.setStyle(Re.getContainer(),"height",ue+"px"),ee.set({totalHeight:ue,contentHeight:Mt,set:!0}),un(Re),jt.browser.isSafari()&&(jt.os.isMacOS()||jt.os.isiOS())){const vo=Re.getWin();vo.scrollTo(vo.pageXOffset,vo.pageYOffset)}Re.hasFocus()&&zt(Xe)&&Re.selection.scrollIntoView(),(jt.browser.isSafari()||jt.browser.isChromium())&&Je<0&&ft(Re,ee,Xe,Zn)}},et=(Re,ee)=>{const Xe=()=>io(Re);Re.on("init",Zn=>{const Qe=Yt(Re),W=Re.dom;W.setStyles(Re.getDoc().documentElement,{height:"auto"}),jt.browser.isEdge()||jt.browser.isIE()?W.setStyles(Re.getBody(),{paddingLeft:Qe,paddingRight:Qe,"min-height":0}):W.setStyles(Re.getBody(),{paddingLeft:Qe,paddingRight:Qe}),ft(Re,ee,Zn,Xe)}),Re.on("NodeChange SetContent keyup FullscreenStateChanged ResizeContent",Zn=>{ft(Re,ee,Zn,Xe)})},ct=(Re,ee)=>{Re.addCommand("mceAutoResize",()=>{ft(Re,ee)})};var Qn=()=>{_n.add("autoresize",Re=>{if(Gt(Re),Re.options.isSet("resize")||Re.options.set("resize",!1),!Re.inline){const ee=ht({totalHeight:0,contentHeight:0,set:!1});ct(Re,ee),et(Re,ee)}})};Qn()})();(function(){var ht=tinymce.util.Tools.resolve("tinymce.PluginManager");const _n=(Dt,Yt)=>{Dt.focus(),Dt.undoManager.transact(()=>{Dt.setContent(Yt)}),Dt.selection.setCursorLocation(),Dt.nodeChanged()},jt=Dt=>Dt.getContent({source_view:!0}),un=Dt=>{const Yt=jt(Dt);Dt.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:Yt},onSubmit:io=>{_n(Dt,io.getData().code),io.close()}})},Ct=Dt=>{Dt.addCommand("mceCodeEditor",()=>{un(Dt)})},Gt=Dt=>{const Yt=()=>Dt.execCommand("mceCodeEditor");Dt.ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:Yt}),Dt.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:Yt})};var Jn=()=>{ht.add("code",Dt=>(Ct(Dt),Gt(Dt),{}))};Jn()})();(function(){var ht=tinymce.util.Tools.resolve("tinymce.PluginManager");const _n=(st,lt,tn)=>{var mn;return tn(st,lt.prototype)?!0:((mn=st.constructor)===null||mn===void 0?void 0:mn.name)===lt.name},jt=st=>{const lt=typeof st;return st===null?"null":lt==="object"&&Array.isArray(st)?"array":lt==="object"&&_n(st,String,(tn,mn)=>mn.isPrototypeOf(tn))?"string":lt},un=st=>lt=>jt(lt)===st,Ct=st=>lt=>typeof lt===st,Gt=un("string"),Jn=Ct("boolean"),Dt=st=>st==null,Yt=st=>!Dt(st),io=Ct("function"),xn=Ct("number"),Xt=(st,lt)=>tn=>st(lt(tn)),zt=(st=>()=>st)(!1);class ft{constructor(lt,tn){this.tag=lt,this.value=tn}static some(lt){return new ft(!0,lt)}static none(){return ft.singletonNone}fold(lt,tn){return this.tag?tn(this.value):lt()}isSome(){return this.tag}isNone(){return!this.tag}map(lt){return this.tag?ft.some(lt(this.value)):ft.none()}bind(lt){return this.tag?lt(this.value):ft.none()}exists(lt){return this.tag&&lt(this.value)}forall(lt){return!this.tag||lt(this.value)}filter(lt){return!this.tag||lt(this.value)?this:ft.none()}getOr(lt){return this.tag?this.value:lt}or(lt){return this.tag?this:lt}getOrThunk(lt){return this.tag?this.value:lt()}orThunk(lt){return this.tag?this:lt()}getOrDie(lt){if(this.tag)return this.value;throw new Error(lt??"Called getOrDie on None")}static from(lt){return Yt(lt)?ft.some(lt):ft.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(lt){this.tag&&lt(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}ft.singletonNone=new ft(!1);const et=(st,lt)=>{const tn=st.length,mn=new Array(tn);for(let Mo=0;Mo<tn;Mo++){const Ao=st[Mo];mn[Mo]=lt(Ao,Mo)}return mn},ct=(st,lt)=>{for(let tn=0,mn=st.length;tn<mn;tn++){const Mo=st[tn];lt(Mo,tn)}},Qn=(st,lt)=>{const tn=[];for(let mn=0,Mo=st.length;mn<Mo;mn++){const Ao=st[mn];lt(Ao,mn)&&tn.push(Ao)}return tn},Re=11,ee=1,Xe=3,Zn=(st,lt)=>{const mn=(lt||document).createElement("div");if(mn.innerHTML=st,!mn.hasChildNodes()||mn.childNodes.length>1){const Mo="HTML does not have a single root node";throw console.error(Mo,st),new Error(Mo)}return xt(mn.childNodes[0])},Qe=(st,lt)=>{const mn=(lt||document).createElement(st);return xt(mn)},W=(st,lt)=>{const mn=(lt||document).createTextNode(st);return xt(mn)},xt=st=>{if(st==null)throw new Error("Node cannot be null or undefined");return{dom:st}},dn={fromHtml:Zn,fromTag:Qe,fromText:W,fromDom:xt,fromPoint:(st,lt,tn)=>ft.from(st.dom.elementFromPoint(lt,tn)).map(xt)},Oe=(st,lt)=>{const tn=st.dom;if(tn.nodeType!==ee)return!1;{const mn=tn;if(mn.matches!==void 0)return mn.matches(lt);if(mn.msMatchesSelector!==void 0)return mn.msMatchesSelector(lt);if(mn.webkitMatchesSelector!==void 0)return mn.webkitMatchesSelector(lt);if(mn.mozMatchesSelector!==void 0)return mn.mozMatchesSelector(lt);throw new Error("Browser lacks native selectors")}};typeof window<"u"||Function("return this;")();const ue=st=>st.dom.nodeName.toLowerCase(),ts=st=>st.dom.nodeType,no=st=>lt=>ts(lt)===st,Mt=no(ee),A=no(Xe),Bo=no(Re),tt=st=>lt=>Mt(lt)&&ue(lt)===st,Wo=st=>ft.from(st.dom.parentNode).map(dn.fromDom),cn=st=>et(st.dom.childNodes,dn.fromDom),Je=(st,lt,tn)=>{if(Gt(tn)||Jn(tn)||xn(tn))st.setAttribute(lt,tn+"");else throw console.error("Invalid call to Attribute.set. Key ",lt,":: Value ",tn,":: Element ",st),new Error("Attribute value was not simple")},vo=(st,lt,tn)=>{Je(st.dom,lt,tn)},Ms=(st,lt)=>{st.dom.removeAttribute(lt)},ho=st=>Bo(st)&&Yt(st.dom.host),Us=st=>dn.fromDom(st.dom.getRootNode()),je=st=>{const lt=Us(st);return ho(lt)?ft.some(lt):ft.none()},gt=st=>dn.fromDom(st.dom.host),F=st=>{const lt=A(st)?st.dom.parentNode:st.dom;if(lt==null||lt.ownerDocument===null)return!1;const tn=lt.ownerDocument;return je(dn.fromDom(lt)).fold(()=>tn.body.contains(lt),Xt(F,gt))},dc=(st,lt,tn)=>{let mn=st.dom;const Mo=io(tn)?tn:zt;for(;mn.parentNode;){mn=mn.parentNode;const Ao=dn.fromDom(mn);if(lt(Ao))return ft.some(Ao);if(Mo(Ao))break}return ft.none()},uo=(st,lt,tn)=>dc(st,mn=>Oe(mn,lt),tn),ds=st=>st.style!==void 0&&io(st.style.getPropertyValue),Go=(st,lt)=>{const tn=st.dom,Mo=window.getComputedStyle(tn).getPropertyValue(lt);return Mo===""&&!F(st)?wa(tn,lt):Mo},wa=(st,lt)=>ds(st)?st.style.getPropertyValue(lt):"",Cn=st=>Go(st,"direction")==="rtl"?"rtl":"ltr",So=(st,lt)=>Qn(cn(st),lt),Rn=(st,lt)=>So(st,tn=>Oe(tn,lt)),xe=st=>Wo(st).filter(Mt),zn=(st,lt)=>(lt?uo(st,"ol,ul"):ft.some(st)).getOr(st),Ht=tt("li"),Lt=(st,lt,tn)=>{ct(lt,mn=>{const Mo=dn.fromDom(mn),Ao=Ht(Mo),jn=zn(Mo,Ao);xe(jn).each(ro=>{if(st.setStyle(jn.dom,"direction",null),Cn(ro)===tn?Ms(jn,"dir"):vo(jn,"dir",tn),Cn(jn)!==tn&&st.setStyle(jn.dom,"direction",tn),Ao){const cr=Rn(jn,"li[dir],li[style]");ct(cr,Br=>{Ms(Br,"dir"),st.setStyle(Br.dom,"direction",null)})}})})},Zo=(st,lt)=>{st.selection.isEditable()&&(Lt(st.dom,st.selection.getSelectedBlocks(),lt),st.nodeChanged())},Ho=st=>{st.addCommand("mceDirectionLTR",()=>{Zo(st,"ltr")}),st.addCommand("mceDirectionRTL",()=>{Zo(st,"rtl")})},pr=(st,lt)=>tn=>{const mn=Mo=>{const Ao=dn.fromDom(Mo.element);tn.setActive(Cn(Ao)===lt),tn.setEnabled(st.selection.isEditable())};return st.on("NodeChange",mn),tn.setEnabled(st.selection.isEditable()),()=>st.off("NodeChange",mn)},qo=st=>{st.ui.registry.addToggleButton("ltr",{tooltip:"Left to right",icon:"ltr",onAction:()=>st.execCommand("mceDirectionLTR"),onSetup:pr(st,"ltr")}),st.ui.registry.addToggleButton("rtl",{tooltip:"Right to left",icon:"rtl",onAction:()=>st.execCommand("mceDirectionRTL"),onSetup:pr(st,"rtl")})};var qs=()=>{ht.add("directionality",st=>{Ho(st),qo(st)})};qs()})();(function(){const ht=G=>{let Q=G;return{get:()=>Q,set:wn=>{Q=wn}}};var _n=tinymce.util.Tools.resolve("tinymce.PluginManager");const jt=G=>({isFullscreen:()=>G.get()!==null}),un=(G,Q,ke)=>{var Ue;return ke(G,Q.prototype)?!0:((Ue=G.constructor)===null||Ue===void 0?void 0:Ue.name)===Q.name},Ct=G=>{const Q=typeof G;return G===null?"null":Q==="object"&&Array.isArray(G)?"array":Q==="object"&&un(G,String,(ke,Ue)=>Ue.isPrototypeOf(ke))?"string":Q},Gt=G=>Q=>Ct(Q)===G,Jn=G=>Q=>typeof Q===G,Dt=G=>Q=>G===Q,Yt=Gt("string"),io=Gt("object"),xn=Gt("array"),Xt=Dt(null),Mn=Jn("boolean"),zt=Dt(void 0),ft=G=>G==null,et=G=>!ft(G),ct=Jn("function"),Qn=Jn("number"),Re=()=>{},ee=(G,Q)=>(...ke)=>G(Q.apply(null,ke)),Xe=(G,Q)=>ke=>G(Q(ke)),Zn=G=>()=>G;function Qe(G,...Q){return(...ke)=>{const Ue=Q.concat(ke);return G.apply(null,Ue)}}const W=Zn(!1),xt=Zn(!0);class gn{constructor(Q,ke){this.tag=Q,this.value=ke}static some(Q){return new gn(!0,Q)}static none(){return gn.singletonNone}fold(Q,ke){return this.tag?ke(this.value):Q()}isSome(){return this.tag}isNone(){return!this.tag}map(Q){return this.tag?gn.some(Q(this.value)):gn.none()}bind(Q){return this.tag?Q(this.value):gn.none()}exists(Q){return this.tag&&Q(this.value)}forall(Q){return!this.tag||Q(this.value)}filter(Q){return!this.tag||Q(this.value)?this:gn.none()}getOr(Q){return this.tag?this.value:Q}or(Q){return this.tag?this:Q}getOrThunk(Q){return this.tag?this.value:Q()}orThunk(Q){return this.tag?this:Q()}getOrDie(Q){if(this.tag)return this.value;throw new Error(Q??"Called getOrDie on None")}static from(Q){return et(Q)?gn.some(Q):gn.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Q){this.tag&&Q(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}gn.singletonNone=new gn(!1);const dn=Array.prototype.push,Oe=(G,Q)=>{const ke=G.length,Ue=new Array(ke);for(let wn=0;wn<ke;wn++){const Oo=G[wn];Ue[wn]=Q(Oo,wn)}return Ue},ue=(G,Q)=>{for(let ke=0,Ue=G.length;ke<Ue;ke++){const wn=G[ke];Q(wn,ke)}},ts=(G,Q)=>{const ke=[];for(let Ue=0,wn=G.length;Ue<wn;Ue++){const Oo=G[Ue];Q(Oo,Ue)&&ke.push(Oo)}return ke},no=(G,Q,ke)=>{for(let Ue=0,wn=G.length;Ue<wn;Ue++){const Oo=G[Ue];if(Q(Oo,Ue))return gn.some(Oo);if(ke(Oo,Ue))break}return gn.none()},Mt=(G,Q)=>no(G,Q,W),A=G=>{const Q=[];for(let ke=0,Ue=G.length;ke<Ue;++ke){if(!xn(G[ke]))throw new Error("Arr.flatten item "+ke+" was not an array, input: "+G);dn.apply(Q,G[ke])}return Q},Bo=(G,Q)=>A(Oe(G,Q)),tt=(G,Q)=>Q>=0&&Q<G.length?gn.some(G[Q]):gn.none(),Wo=G=>tt(G,0),cn=(G,Q)=>{for(let ke=0;ke<G.length;ke++){const Ue=Q(G[ke],ke);if(Ue.isSome())return Ue}return gn.none()},Je=(G,Q,ke)=>G.isSome()&&Q.isSome()?gn.some(ke(G.getOrDie(),Q.getOrDie())):gn.none(),vo=G=>{const Q=ht(gn.none()),ke=()=>Q.get().each(G);return{clear:()=>{ke(),Q.set(gn.none())},isSet:()=>Q.get().isSome(),get:()=>Q.get(),set:ws=>{ke(),Q.set(gn.some(ws))}}},Ms=()=>vo(G=>G.unbind()),ho=()=>{const G=vo(Re);return{...G,on:ke=>G.get().each(ke)}},Us=(G,Q)=>{let ke=null;return{cancel:()=>{Xt(ke)||(clearTimeout(ke),ke=null)},throttle:(...Oo)=>{Xt(ke)&&(ke=setTimeout(()=>{ke=null,G.apply(null,Oo)},Q))}}},je=Object.keys,gt=(G,Q)=>{const ke=je(G);for(let Ue=0,wn=ke.length;Ue<wn;Ue++){const Oo=ke[Ue],mo=G[Oo];Q(mo,Oo)}},F=typeof window<"u"?window:Function("return this;")(),dc=(G,Q)=>{let ke=Q??F;for(let Ue=0;Ue<G.length&&ke!==void 0&&ke!==null;++Ue)ke=ke[G[Ue]];return ke},uo=(G,Q)=>{const ke=G.split(".");return dc(ke,Q)},ds=(G,Q)=>uo(G,Q),Go=(G,Q)=>{const ke=ds(G,Q);if(ke==null)throw new Error(G+" not available on this browser");return ke},wa=Object.getPrototypeOf,Cn=G=>Go("HTMLElement",G),So=G=>{const Q=uo("ownerDocument.defaultView",G);return io(G)&&(Cn(Q).prototype.isPrototypeOf(G)||/^HTML\w*Element$/.test(wa(G).constructor.name))},Rn=9,xe=11,zn=1,Ht=3,Lt=G=>G.dom.nodeType,Zo=G=>Q=>Lt(Q)===G,Ho=G=>pr(G)&&So(G.dom),pr=Zo(zn),qo=Zo(Ht),qs=Zo(xe),st=(G,Q,ke)=>{if(Yt(ke)||Mn(ke)||Qn(ke))G.setAttribute(Q,ke+"");else throw console.error("Invalid call to Attribute.set. Key ",Q,":: Value ",ke,":: Element ",G),new Error("Attribute value was not simple")},lt=(G,Q,ke)=>{st(G.dom,Q,ke)},tn=(G,Q)=>{const ke=G.dom.getAttribute(Q);return ke===null?void 0:ke},mn=(G,Q)=>{G.dom.removeAttribute(Q)},Mo=G=>G.dom.classList!==void 0,Ao=(G,Q)=>Mo(G)&&G.dom.classList.contains(Q),jn=(G,Q,ke=0,Ue)=>{const wn=G.indexOf(Q,ke);return wn!==-1?zt(Ue)?!0:wn+Q.length<=Ue:!1},jc=G=>G.style!==void 0&&ct(G.style.getPropertyValue),ro=(G,Q)=>{const Ue=(Q||document).createElement("div");if(Ue.innerHTML=G,!Ue.hasChildNodes()||Ue.childNodes.length>1){const wn="HTML does not have a single root node";throw console.error(wn,G),new Error(wn)}return Br(Ue.childNodes[0])},ns=(G,Q)=>{const Ue=(Q||document).createElement(G);return Br(Ue)},cr=(G,Q)=>{const Ue=(Q||document).createTextNode(G);return Br(Ue)},Br=G=>{if(G==null)throw new Error("Node cannot be null or undefined");return{dom:G}},Vt={fromHtml:ro,fromTag:ns,fromText:cr,fromDom:Br,fromPoint:(G,Q,ke)=>gn.from(G.dom.elementFromPoint(Q,ke)).map(Br)},cl=(G,Q)=>{const ke=G.dom;if(ke.nodeType!==zn)return!1;{const Ue=ke;if(Ue.matches!==void 0)return Ue.matches(Q);if(Ue.msMatchesSelector!==void 0)return Ue.msMatchesSelector(Q);if(Ue.webkitMatchesSelector!==void 0)return Ue.webkitMatchesSelector(Q);if(Ue.mozMatchesSelector!==void 0)return Ue.mozMatchesSelector(Q);throw new Error("Browser lacks native selectors")}},pt=G=>G.nodeType!==zn&&G.nodeType!==Rn&&G.nodeType!==xe||G.childElementCount===0,yo=(G,Q)=>{const ke=document;return pt(ke)?[]:Oe(ke.querySelectorAll(G),Vt.fromDom)},Vr=(G,Q)=>G.dom===Q.dom,br=G=>Vt.fromDom(G.dom.ownerDocument),Oc=G=>gn.from(G.dom.parentNode).map(Vt.fromDom),Gc=(G,Q)=>{const ke=ct(Q)?Q:W;let Ue=G.dom;const wn=[];for(;Ue.parentNode!==null&&Ue.parentNode!==void 0;){const Oo=Ue.parentNode,mo=Vt.fromDom(Oo);if(wn.push(mo),ke(mo)===!0)break;Ue=Oo}return wn},os=G=>{const Q=ke=>ts(ke,Ue=>!Vr(G,Ue));return Oc(G).map(Sa).map(Q).getOr([])},ta=G=>gn.from(G.dom.nextSibling).map(Vt.fromDom),Sa=G=>Oe(G.dom.childNodes,Vt.fromDom),Xo=G=>qs(G)&&et(G.dom.host),yn=G=>Vt.fromDom(G.dom.getRootNode()),Ls=G=>{const Q=yn(G);return Xo(Q)?gn.some(Q):gn.none()},bc=G=>Vt.fromDom(G.dom.host),Vl=G=>{if(et(G.target)){const Q=Vt.fromDom(G.target);if(pr(Q)&&zl(Q)&&G.composed&&G.composedPath){const ke=G.composedPath();if(ke)return Wo(ke)}}return gn.from(G.target)},zl=G=>et(G.dom.shadowRoot),hs=G=>{const Q=qo(G)?G.dom.parentNode:G.dom;if(Q==null||Q.ownerDocument===null)return!1;const ke=Q.ownerDocument;return Ls(Vt.fromDom(Q)).fold(()=>ke.body.contains(Q),Xe(hs,bc))},kr=G=>{const Q=G.dom.body;if(Q==null)throw new Error("Body is not available yet");return Vt.fromDom(Q)},Ns=(G,Q,ke)=>{if(!Yt(ke))throw console.error("Invalid call to CSS.set. Property ",Q,":: Value ",ke,":: Element ",G),new Error("CSS value must be a string: "+ke);jc(G)&&G.style.setProperty(Q,ke)},mc=(G,Q,ke)=>{const Ue=G.dom;Ns(Ue,Q,ke)},Fa=(G,Q)=>{const ke=G.dom;gt(Q,(Ue,wn)=>{Ns(ke,wn,Ue)})},_r=(G,Q)=>{const ke=G.dom,wn=window.getComputedStyle(ke).getPropertyValue(Q);return wn===""&&!hs(G)?le(ke,Q):wn},le=(G,Q)=>jc(G)?G.style.getPropertyValue(Q):"",re=(G,Q,ke,Ue,wn,Oo,mo)=>({target:G,x:Q,y:ke,stop:Ue,prevent:wn,kill:Oo,raw:mo}),De=G=>{const Q=Vt.fromDom(Vl(G).getOr(G.target)),ke=()=>G.stopPropagation(),Ue=()=>G.preventDefault(),wn=ee(Ue,ke);return re(Q,G.clientX,G.clientY,ke,Ue,wn,G)},Fe=(G,Q)=>ke=>{G(ke)&&Q(De(ke))},fn=(G,Q,ke,Ue,wn)=>{const Oo=Fe(ke,Ue);return G.dom.addEventListener(Q,Oo,wn),{unbind:Qe(Kn,G,Q,Oo,wn)}},Pn=(G,Q,ke,Ue)=>fn(G,Q,ke,Ue,!1),Kn=(G,Q,ke,Ue)=>{G.dom.removeEventListener(Q,ke,Ue)},ar=xt,ge=(G,Q,ke)=>Pn(G,Q,ar,ke),Yn=G=>{let Q=!1,ke;return(...Ue)=>(Q||(Q=!0,ke=G.apply(null,Ue)),ke)},Ks=(G,Q,ke,Ue)=>{const wn=G.isiOS()&&/ipad/i.test(ke)===!0,Oo=G.isiOS()&&!wn,mo=G.isiOS()||G.isAndroid(),ws=mo||Ue("(pointer:coarse)"),Rr=wn||!Oo&&mo&&Ue("(min-device-width:768px)"),ca=Oo||mo&&!Rr,Mc=Q.isSafari()&&G.isiOS()&&/safari/i.test(ke)===!1,yr=!ca&&!Rr&&!Mc;return{isiPad:Zn(wn),isiPhone:Zn(Oo),isTablet:Zn(Rr),isPhone:Zn(ca),isTouch:Zn(ws),isAndroid:G.isAndroid,isiOS:G.isiOS,isWebView:Zn(Mc),isDesktop:Zn(yr)}},vr=(G,Q)=>{for(let ke=0;ke<G.length;ke++){const Ue=G[ke];if(Ue.test(Q))return Ue}},vc=(G,Q)=>{const ke=vr(G,Q);if(!ke)return{major:0,minor:0};const Ue=wn=>Number(Q.replace(ke,"$"+wn));return $r(Ue(1),Ue(2))},ss=(G,Q)=>{const ke=String(Q).toLowerCase();return G.length===0?al():vc(G,ke)},al=()=>$r(0,0),$r=(G,Q)=>({major:G,minor:Q}),zr={nu:$r,detect:ss,unknown:al},As=(G,Q)=>cn(Q.brands,ke=>{const Ue=ke.brand.toLowerCase();return Mt(G,wn=>{var Oo;return Ue===((Oo=wn.brand)===null||Oo===void 0?void 0:Oo.toLowerCase())}).map(wn=>({current:wn.name,version:zr.nu(parseInt(ke.version,10),0)}))}),rs=(G,Q)=>{const ke=String(Q).toLowerCase();return Mt(G,Ue=>Ue.search(ke))},ms=(G,Q)=>rs(G,Q).map(ke=>{const Ue=zr.detect(ke.versionRegexes,Q);return{current:ke.name,version:Ue}}),tc=(G,Q)=>rs(G,Q).map(ke=>{const Ue=zr.detect(ke.versionRegexes,Q);return{current:ke.name,version:Ue}}),Ur=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Ps=G=>Q=>jn(Q,G),Ga=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:G=>jn(G,"edge/")&&jn(G,"chrome")&&jn(G,"safari")&&jn(G,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ur],search:G=>jn(G,"chrome")&&!jn(G,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:G=>jn(G,"msie")||jn(G,"trident")},{name:"Opera",versionRegexes:[Ur,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Ps("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Ps("firefox")},{name:"Safari",versionRegexes:[Ur,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:G=>(jn(G,"safari")||jn(G,"mobile/"))&&jn(G,"applewebkit")}],xa=[{name:"Windows",search:Ps("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:G=>jn(G,"iphone")||jn(G,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Ps("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Ps("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Ps("linux"),versionRegexes:[]},{name:"Solaris",search:Ps("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Ps("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Ps("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],xo={browsers:Zn(Ga),oses:Zn(xa)},Kr="Edge",Ir="Chromium",Ha="IE",Dc="Opera",Ar="Firefox",Os="Safari",ed=()=>Ta({current:void 0,version:zr.unknown()}),Ta=G=>{const Q=G.current,ke=G.version,Ue=wn=>()=>Q===wn;return{current:Q,version:ke,isEdge:Ue(Kr),isChromium:Ue(Ir),isIE:Ue(Ha),isOpera:Ue(Dc),isFirefox:Ue(Ar),isSafari:Ue(Os)}},Ko={unknown:ed,nu:Ta,edge:Zn(Kr),chromium:Zn(Ir),ie:Zn(Ha),opera:Zn(Dc),firefox:Zn(Ar),safari:Zn(Os)},nc="Windows",oc="iOS",Or="Android",Ul="Linux",Rc="macOS",yc="Solaris",Ea="FreeBSD",na="ChromeOS",ni=()=>oi({current:void 0,version:zr.unknown()}),oi=G=>{const Q=G.current,ke=G.version,Ue=wn=>()=>Q===wn;return{current:Q,version:ke,isWindows:Ue(nc),isiOS:Ue(oc),isAndroid:Ue(Or),isMacOS:Ue(Rc),isLinux:Ue(Ul),isSolaris:Ue(yc),isFreeBSD:Ue(Ea),isChromeOS:Ue(na)}},El={unknown:ni,nu:oi,windows:Zn(nc),ios:Zn(oc),android:Zn(Or),linux:Zn(Ul),macos:Zn(Rc),solaris:Zn(yc),freebsd:Zn(Ea),chromeos:Zn(na)},Yr={detect:(G,Q,ke)=>{const Ue=xo.browsers(),wn=xo.oses(),Oo=Q.bind(Rr=>As(Ue,Rr)).orThunk(()=>ms(Ue,G)).fold(Ko.unknown,Ko.nu),mo=tc(wn,G).fold(El.unknown,El.nu),ws=Ks(mo,Oo,G,ke);return{browser:Oo,os:mo,deviceType:ws}}},Wl=G=>window.matchMedia(G).matches;let Zl=Yn(()=>Yr.detect(window.navigator.userAgent,gn.from(window.navigator.userAgentData),Wl));const Ci=()=>Zl(),ll=(G,Q)=>({left:G,top:Q,translate:(Ue,wn)=>ll(G+Ue,Q+wn)}),Dr=ll,sa=G=>{const Q=G!==void 0?G.dom:document,ke=Q.body.scrollLeft||Q.documentElement.scrollLeft,Ue=Q.body.scrollTop||Q.documentElement.scrollTop;return Dr(ke,Ue)},sc=G=>{const Q=G===void 0?window:G;return Ci().browser.isFirefox()?gn.none():gn.from(Q.visualViewport)},Cc=(G,Q,ke,Ue)=>({x:G,y:Q,width:ke,height:Ue,right:G+ke,bottom:Q+Ue}),wi=G=>{const Q=G===void 0?window:G,ke=Q.document,Ue=sa(Vt.fromDom(ke));return sc(Q).fold(()=>{const wn=Q.document.documentElement,Oo=wn.clientWidth,mo=wn.clientHeight;return Cc(Ue.left,Ue.top,Oo,mo)},wn=>Cc(Math.max(wn.pageLeft,Ue.left),Math.max(wn.pageTop,Ue.top),wn.width,wn.height))},Si=(G,Q,ke)=>sc(ke).map(Ue=>{const wn=Oo=>Q(De(Oo));return Ue.addEventListener(G,wn),{unbind:()=>Ue.removeEventListener(G,wn)}}).getOrThunk(()=>({unbind:Re}));var U=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),se=tinymce.util.Tools.resolve("tinymce.Env");const be=(G,Q)=>{G.dispatch("FullscreenStateChanged",{state:Q}),G.dispatch("ResizeEditor")},ze=G=>Q=>Q.options.get(G),bt=G=>{const Q=G.options.register;Q("fullscreen_native",{processor:"boolean",default:!1})},Ve=ze("fullscreen_native"),Vo=G=>{const Q=Vt.fromDom(G.getElement());return Ls(Q).map(bc).getOrThunk(()=>kr(br(Q)))},nn=G=>G.fullscreenElement!==void 0?G.fullscreenElement:G.msFullscreenElement!==void 0?G.msFullscreenElement:G.webkitFullscreenElement!==void 0?G.webkitFullscreenElement:null,Hn=()=>document.fullscreenElement!==void 0?"fullscreenchange":document.msFullscreenElement!==void 0?"MSFullscreenChange":document.webkitFullscreenElement!==void 0?"webkitfullscreenchange":"fullscreenchange",Fs=G=>{const Q=G.dom;Q.requestFullscreen?Q.requestFullscreen():Q.msRequestFullscreen?Q.msRequestFullscreen():Q.webkitRequestFullScreen&&Q.webkitRequestFullScreen()},B=G=>{const Q=G.dom;Q.exitFullscreen?Q.exitFullscreen():Q.msExitFullscreen?Q.msExitFullscreen():Q.webkitCancelFullScreen&&Q.webkitCancelFullScreen()},K=G=>G.dom===nn(br(G).dom),ie=(G,Q,ke)=>ts(Gc(G,ke),Q),Ee=(G,Q)=>ts(os(G),Q),qe=G=>yo(G),co=(G,Q,ke)=>ie(G,Ue=>cl(Ue,Q),ke),Jo=(G,Q)=>Ee(G,ke=>cl(ke,Q)),fs="data-ephox-mobile-fullscreen-style",it="display:none!important;",bs="position:absolute!important;",rc="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",kl="background-color:rgb(255,255,255)!important;",Gn=se.os.isAndroid(),ka=G=>{const Q=_r(G,"background-color");return Q!==void 0&&Q!==""?"background-color:"+Q+"!important":kl},qa=(G,Q,ke)=>{const Ue=ca=>Jo(ca,"*:not(.tox-silver-sink)"),wn=ca=>Mc=>{const yr=tn(Mc,"style"),Cr=yr===void 0?"no-styles":yr.trim();Cr!==ca&&(lt(Mc,fs,Cr),Fa(Mc,G.parseStyle(ca)))},Oo=co(Q,"*"),mo=Bo(Oo,Ue),ws=ka(ke);ue(mo,wn(it)),ue(Oo,wn(bs+rc+ws)),wn((Gn===!0?"":bs)+rc+ws)(Q)},Wr=G=>{const Q=qe("["+fs+"]");ue(Q,ke=>{const Ue=tn(ke,fs);Ue&&Ue!=="no-styles"?Fa(ke,G.parseStyle(Ue)):mn(ke,"style"),mn(ke,fs)})},vs=U.DOM,_l=()=>wi(window),bf=G=>window.scrollTo(G.x,G.y),Hd=sc().fold(()=>({bind:Re,unbind:Re}),G=>{const Q=ho(),ke=Ms(),Ue=Ms(),wn=()=>{document.body.scrollTop=0,document.documentElement.scrollTop=0},Oo=()=>{window.requestAnimationFrame(()=>{Q.on(ca=>Fa(ca,{top:G.offsetTop+"px",left:G.offsetLeft+"px",height:G.height+"px",width:G.width+"px"}))})},mo=Us(()=>{wn(),Oo()},50);return{bind:ca=>{Q.set(ca),mo.throttle(),ke.set(Si("resize",mo.throttle)),Ue.set(Si("scroll",mo.throttle))},unbind:()=>{Q.on(()=>{ke.clear(),Ue.clear()}),Q.clear()}}}),Ys=(G,Q)=>{const ke=document.body,Ue=document.documentElement,wn=G.getContainer(),Oo=Vt.fromDom(wn),mo=ta(Oo).filter(wr=>Ho(wr)&&Ao(wr,"tox-silver-sink")),ws=Vo(G),Rr=Q.get(),ca=Vt.fromDom(G.getBody()),Mc=se.deviceType.isTouch(),yr=wn.style,Cr=G.iframeElement,Xr=Cr==null?void 0:Cr.style,Nc=wr=>{wr(ke,"tox-fullscreen"),wr(Ue,"tox-fullscreen"),wr(wn,"tox-fullscreen"),Ls(Oo).map(Zs=>bc(Zs).dom).each(Zs=>{wr(Zs,"tox-fullscreen"),wr(Zs,"tox-shadowhost")})},Xs=()=>{Mc&&Wr(G.dom),Nc(vs.removeClass),Hd.unbind(),gn.from(Q.get()).each(wr=>wr.fullscreenChangeHandler.unbind())};if(Rr)Rr.fullscreenChangeHandler.unbind(),Ve(G)&&K(ws)&&B(br(ws)),Xr.width=Rr.iframeWidth,Xr.height=Rr.iframeHeight,yr.width=Rr.containerWidth,yr.height=Rr.containerHeight,yr.top=Rr.containerTop,yr.left=Rr.containerLeft,Je(mo,Rr.sinkCssPosition,(wr,Zs)=>{mc(wr,"position",Zs)}),Xs(),bf(Rr.scrollPos),Q.set(null),be(G,!1),G.off("remove",Xs);else{const wr=ge(br(ws),Hn(),si=>{Ve(G)&&!K(ws)&&Q.get()!==null&&Ys(G,Q)}),Zs={scrollPos:_l(),containerWidth:yr.width,containerHeight:yr.height,containerTop:yr.top,containerLeft:yr.left,iframeWidth:Xr.width,iframeHeight:Xr.height,fullscreenChangeHandler:wr,sinkCssPosition:mo.map(si=>_r(si,"position"))};Mc&&qa(G.dom,Oo,ca),Xr.width=Xr.height="100%",yr.width=yr.height="",Nc(vs.addClass),mo.each(si=>{mc(si,"position","fixed")}),Hd.bind(Oo),G.on("remove",Xs),Q.set(Zs),Ve(G)&&Fs(ws),be(G,!0)}},td=(G,Q)=>{G.addCommand("mceFullScreen",()=>{Ys(G,Q)})};var il=tinymce.util.Tools.resolve("tinymce.util.VK");const Ws=(G,Q)=>{G.on("init",()=>{G.on("keydown",ke=>{ke.keyCode===il.TAB&&!(ke.metaKey||ke.ctrlKey)&&Q.get()&&ke.preventDefault()})})},ul=(G,Q)=>ke=>{ke.setActive(Q.get()!==null);const Ue=wn=>ke.setActive(wn.state);return G.on("FullscreenStateChanged",Ue),()=>G.off("FullscreenStateChanged",Ue)},ra=(G,Q)=>{const ke=()=>G.execCommand("mceFullScreen");G.ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:ke,onSetup:ul(G,Q),context:"any"}),G.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:ke,onSetup:ul(G,Q),shortcut:"Meta+Shift+F",context:"any"})};var nd=()=>{_n.add("fullscreen",G=>{const Q=ht(null);return G.inline||(bt(G),td(G,Q),ra(G,Q),Ws(G,Q),G.addShortcut("Meta+Shift+F","","mceFullScreen")),jt(Q)})};nd()})();(function(){var ht=tinymce.util.Tools.resolve("tinymce.PluginManager");const _n=Object.getPrototypeOf,jt=(B,K,ie)=>{var Ee;return ie(B,K.prototype)?!0:((Ee=B.constructor)===null||Ee===void 0?void 0:Ee.name)===K.name},un=B=>{const K=typeof B;return B===null?"null":K==="object"&&Array.isArray(B)?"array":K==="object"&&jt(B,String,(ie,Ee)=>Ee.isPrototypeOf(ie))?"string":K},Ct=B=>K=>un(K)===B,Gt=B=>K=>typeof K===B,Jn=B=>K=>B===K,Dt=(B,K)=>io(B)&&jt(B,K,(ie,Ee)=>_n(ie)===Ee),Yt=Ct("string"),io=Ct("object"),xn=B=>Dt(B,Object),Xt=Ct("array"),Mn=Jn(null),zt=Gt("boolean"),ft=B=>B==null,et=B=>!ft(B),ct=Gt("function"),Qn=Gt("number"),Re=(B,K)=>{if(Xt(B)){for(let ie=0,Ee=B.length;ie<Ee;++ie)if(!K(B[ie]))return!1;return!0}return!1},ee=()=>{};class Xe{constructor(K,ie){this.tag=K,this.value=ie}static some(K){return new Xe(!0,K)}static none(){return Xe.singletonNone}fold(K,ie){return this.tag?ie(this.value):K()}isSome(){return this.tag}isNone(){return!this.tag}map(K){return this.tag?Xe.some(K(this.value)):Xe.none()}bind(K){return this.tag?K(this.value):Xe.none()}exists(K){return this.tag&&K(this.value)}forall(K){return!this.tag||K(this.value)}filter(K){return!this.tag||K(this.value)?this:Xe.none()}getOr(K){return this.tag?this.value:K}or(K){return this.tag?this:K}getOrThunk(K){return this.tag?this.value:K()}orThunk(K){return this.tag?this:K()}getOrDie(K){if(this.tag)return this.value;throw new Error(K??"Called getOrDie on None")}static from(K){return et(K)?Xe.some(K):Xe.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(K){this.tag&&K(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Xe.singletonNone=new Xe(!1);const Zn=Object.keys,Qe=Object.hasOwnProperty,W=(B,K)=>{const ie=Zn(B);for(let Ee=0,qe=ie.length;Ee<qe;Ee++){const co=ie[Ee],Jo=B[co];K(Jo,co)}},xt=B=>(K,ie)=>{B[ie]=K},gn=(B,K,ie,Ee)=>{W(B,(qe,co)=>{(K(qe,co)?ie:Ee)(qe,co)})},dn=(B,K)=>{const ie={};return gn(B,K,xt(ie),ee),ie},Oe=(B,K)=>Qe.call(B,K),ue=(B,K)=>Oe(B,K)&&B[K]!==void 0&&B[K]!==null,ts=Array.prototype.push,no=B=>{const K=[];for(let ie=0,Ee=B.length;ie<Ee;++ie){if(!Xt(B[ie]))throw new Error("Arr.flatten item "+ie+" was not an array, input: "+B);ts.apply(K,B[ie])}return K},Mt=(B,K)=>K>=0&&K<B.length?Xe.some(B[K]):Xe.none(),A=B=>Mt(B,0),Bo=(B,K)=>{for(let ie=0;ie<B.length;ie++){const Ee=K(B[ie],ie);if(Ee.isSome())return Ee}return Xe.none()};typeof window<"u"||Function("return this;")();const tt=(B,K,ie)=>{if(Yt(ie)||zt(ie)||Qn(ie))B.setAttribute(K,ie+"");else throw console.error("Invalid call to Attribute.set. Key ",K,":: Value ",ie,":: Element ",B),new Error("Attribute value was not simple")},Wo=(B,K,ie)=>{tt(B.dom,K,ie)},cn=(B,K)=>{B.dom.removeAttribute(K)},Je=(B,K)=>{const Ee=(K||document).createElement("div");if(Ee.innerHTML=B,!Ee.hasChildNodes()||Ee.childNodes.length>1){const qe="HTML does not have a single root node";throw console.error(qe,B),new Error(qe)}return ho(Ee.childNodes[0])},vo=(B,K)=>{const Ee=(K||document).createElement(B);return ho(Ee)},Ms=(B,K)=>{const Ee=(K||document).createTextNode(B);return ho(Ee)},ho=B=>{if(B==null)throw new Error("Node cannot be null or undefined");return{dom:B}},je={fromHtml:Je,fromTag:vo,fromText:Ms,fromDom:ho,fromPoint:(B,K,ie)=>Xe.from(B.dom.elementFromPoint(K,ie)).map(ho)};var gt=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),F=tinymce.util.Tools.resolve("tinymce.util.URI");const dc=B=>B.length>0,uo=B=>K=>K.options.get(B),ds=B=>{const K=B.options.register;K("image_dimensions",{processor:"boolean",default:!0}),K("image_advtab",{processor:"boolean",default:!1}),K("image_uploadtab",{processor:"boolean",default:!0}),K("image_prepend_url",{processor:"string",default:""}),K("image_class_list",{processor:"object[]"}),K("image_description",{processor:"boolean",default:!0}),K("image_title",{processor:"boolean",default:!1}),K("image_caption",{processor:"boolean",default:!1}),K("image_list",{processor:ie=>{const Ee=ie===!1||Yt(ie)||Re(ie,io)||ct(ie);return Ee?{value:ie,valid:Ee}:{valid:!1,message:"Must be false, a string, an array or a function."}},default:!1})},Go=uo("image_dimensions"),wa=uo("image_advtab"),Cn=uo("image_uploadtab"),So=uo("image_prepend_url"),Rn=uo("image_class_list"),xe=uo("image_description"),zn=uo("image_title"),Ht=uo("image_caption"),Lt=uo("image_list"),Zo=uo("a11y_advanced_options"),Ho=uo("automatic_uploads"),pr=B=>dc(B.options.get("images_upload_url")),qo=B=>et(B.options.get("images_upload_handler")),qs=(B,K)=>Math.max(parseInt(B,10),parseInt(K,10)),st=B=>new Promise(K=>{const ie=document.createElement("img"),Ee=co=>{ie.onload=ie.onerror=null,ie.parentNode&&ie.parentNode.removeChild(ie),K(co)};ie.onload=()=>{const co=qs(ie.width,ie.clientWidth),Jo=qs(ie.height,ie.clientHeight),fs={width:co,height:Jo};Ee(Promise.resolve(fs))},ie.onerror=()=>{Ee(Promise.reject(`Failed to get image dimensions for: ${B}`))};const qe=ie.style;qe.visibility="hidden",qe.position="fixed",qe.bottom=qe.left="0px",qe.width=qe.height="auto",document.body.appendChild(ie),ie.src=B}),lt=B=>(B&&(B=B.replace(/px$/,"")),B),tn=B=>(B.length>0&&/^[0-9]+$/.test(B)&&(B+="px"),B),mn=B=>{if(B.margin){const K=String(B.margin).split(" ");switch(K.length){case 1:B["margin-top"]=B["margin-top"]||K[0],B["margin-right"]=B["margin-right"]||K[0],B["margin-bottom"]=B["margin-bottom"]||K[0],B["margin-left"]=B["margin-left"]||K[0];break;case 2:B["margin-top"]=B["margin-top"]||K[0],B["margin-right"]=B["margin-right"]||K[1],B["margin-bottom"]=B["margin-bottom"]||K[0],B["margin-left"]=B["margin-left"]||K[1];break;case 3:B["margin-top"]=B["margin-top"]||K[0],B["margin-right"]=B["margin-right"]||K[1],B["margin-bottom"]=B["margin-bottom"]||K[2],B["margin-left"]=B["margin-left"]||K[1];break;case 4:B["margin-top"]=B["margin-top"]||K[0],B["margin-right"]=B["margin-right"]||K[1],B["margin-bottom"]=B["margin-bottom"]||K[2],B["margin-left"]=B["margin-left"]||K[3]}delete B.margin}return B},Mo=(B,K)=>{const ie=Lt(B);Yt(ie)?fetch(ie).then(Ee=>{Ee.ok&&Ee.json().then(K)}):ct(ie)?ie(K):K(ie)},Ao=(B,K,ie)=>{const Ee=()=>{ie.onload=ie.onerror=null,B.selection&&(B.selection.select(ie),B.nodeChanged())};ie.onload=()=>{!K.width&&!K.height&&Go(B)&&B.dom.setAttribs(ie,{width:String(ie.clientWidth),height:String(ie.clientHeight)}),Ee()},ie.onerror=Ee},jn=B=>new Promise((K,ie)=>{const Ee=new FileReader;Ee.onload=()=>{K(Ee.result)},Ee.onerror=()=>{var qe;ie((qe=Ee.error)===null||qe===void 0?void 0:qe.message)},Ee.readAsDataURL(B)}),jc=B=>B.nodeName==="IMG"&&(B.hasAttribute("data-mce-object")||B.hasAttribute("data-mce-placeholder")),ro=(B,K)=>{const ie=B.options.get;return F.isDomSafe(K,"img",{allow_html_data_urls:ie("allow_html_data_urls"),allow_script_urls:ie("allow_script_urls"),allow_svg_data_urls:ie("allow_svg_data_urls")})},ns=gt.DOM,cr=B=>B.style.marginLeft&&B.style.marginRight&&B.style.marginLeft===B.style.marginRight?lt(B.style.marginLeft):"",Br=B=>B.style.marginTop&&B.style.marginBottom&&B.style.marginTop===B.style.marginBottom?lt(B.style.marginTop):"",ea=B=>B.style.borderWidth?lt(B.style.borderWidth):"",Vt=(B,K)=>{var ie;return B.hasAttribute(K)&&(ie=B.getAttribute(K))!==null&&ie!==void 0?ie:""},cl=B=>B.parentNode!==null&&B.parentNode.nodeName==="FIGURE",pt=(B,K,ie)=>{ie===""||ie===null?B.removeAttribute(K):B.setAttribute(K,ie)},yo=B=>{const K=ns.create("figure",{class:"image"});ns.insertAfter(K,B),K.appendChild(B),K.appendChild(ns.create("figcaption",{contentEditable:"true"},"Caption")),K.contentEditable="false"},Vr=B=>{const K=B.parentNode;et(K)&&(ns.insertAfter(B,K),ns.remove(K))},br=B=>{cl(B)?Vr(B):yo(B)},Oc=(B,K)=>{const ie=B.getAttribute("style"),Ee=K(ie!==null?ie:"");Ee.length>0?(B.setAttribute("style",Ee),B.setAttribute("data-mce-style",Ee)):B.removeAttribute("style")},Gc=(B,K)=>(ie,Ee,qe)=>{const co=ie.style;co[Ee]?(co[Ee]=tn(qe),Oc(ie,K)):pt(ie,Ee,qe)},os=(B,K)=>B.style[K]?lt(B.style[K]):Vt(B,K),ta=(B,K)=>{const ie=tn(K);B.style.marginLeft=ie,B.style.marginRight=ie},Sa=(B,K)=>{const ie=tn(K);B.style.marginTop=ie,B.style.marginBottom=ie},Xo=(B,K)=>{const ie=tn(K);B.style.borderWidth=ie},yn=(B,K)=>{B.style.borderStyle=K},Ls=B=>{var K;return(K=B.style.borderStyle)!==null&&K!==void 0?K:""},bc=B=>et(B)&&B.nodeName==="FIGURE",Vl=B=>B.nodeName==="IMG",zl=B=>ns.getAttrib(B,"alt").length===0&&ns.getAttrib(B,"role")==="presentation",hs=B=>zl(B)?"":Vt(B,"alt"),kr=()=>({src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}),Ns=(B,K)=>{var ie;const Ee=document.createElement("img");return pt(Ee,"style",K.style),(cr(Ee)||K.hspace!=="")&&ta(Ee,K.hspace),(Br(Ee)||K.vspace!=="")&&Sa(Ee,K.vspace),(ea(Ee)||K.border!=="")&&Xo(Ee,K.border),(Ls(Ee)||K.borderStyle!=="")&&yn(Ee,K.borderStyle),B((ie=Ee.getAttribute("style"))!==null&&ie!==void 0?ie:"")},mc=(B,K)=>{const ie=document.createElement("img");if(Fe(B,{...K,caption:!1},ie),le(ie,K.alt,K.isDecorative),K.caption){const Ee=ns.create("figure",{class:"image"});return Ee.appendChild(ie),Ee.appendChild(ns.create("figcaption",{contentEditable:"true"},"Caption")),Ee.contentEditable="false",Ee}else return ie},Fa=(B,K)=>({src:Vt(K,"src"),alt:hs(K),title:Vt(K,"title"),width:os(K,"width"),height:os(K,"height"),class:Vt(K,"class"),style:B(Vt(K,"style")),caption:cl(K),hspace:cr(K),vspace:Br(K),border:ea(K),borderStyle:Ls(K),isDecorative:zl(K)}),_r=(B,K,ie,Ee,qe)=>{ie[Ee]!==K[Ee]&&qe(B,Ee,String(ie[Ee]))},le=(B,K,ie)=>{if(ie){ns.setAttrib(B,"role","presentation");const Ee=je.fromDom(B);Wo(Ee,"alt","")}else{if(Mn(K)){const Ee=je.fromDom(B);cn(Ee,"alt")}else{const Ee=je.fromDom(B);Wo(Ee,"alt",K)}ns.getAttrib(B,"role")==="presentation"&&ns.setAttrib(B,"role","")}},re=(B,K,ie)=>{(ie.alt!==K.alt||ie.isDecorative!==K.isDecorative)&&le(B,ie.alt,ie.isDecorative)},De=(B,K)=>(ie,Ee,qe)=>{B(ie,qe),Oc(ie,K)},Fe=(B,K,ie)=>{const Ee=Fa(B,ie);_r(ie,Ee,K,"caption",(qe,co,Jo)=>br(qe)),_r(ie,Ee,K,"src",pt),_r(ie,Ee,K,"title",pt),_r(ie,Ee,K,"width",Gc("width",B)),_r(ie,Ee,K,"height",Gc("height",B)),_r(ie,Ee,K,"class",pt),_r(ie,Ee,K,"style",De((qe,co)=>pt(qe,"style",co),B)),_r(ie,Ee,K,"hspace",De(ta,B)),_r(ie,Ee,K,"vspace",De(Sa,B)),_r(ie,Ee,K,"border",De(Xo,B)),_r(ie,Ee,K,"borderStyle",De(yn,B)),re(ie,Ee,K)},fn=(B,K)=>{const ie=B.dom.styles.parse(K),Ee=mn(ie),qe=B.dom.styles.parse(B.dom.styles.serialize(Ee));return B.dom.styles.serialize(qe)},Pn=B=>{const K=B.selection.getNode(),ie=B.dom.getParent(K,"figure.image");return ie?B.dom.select("img",ie)[0]:K&&(K.nodeName!=="IMG"||jc(K))?null:K},Kn=(B,K)=>{var ie;const Ee=B.dom,qe=dn(B.schema.getTextBlockElements(),(Jo,fs)=>!B.schema.isValidChild(fs,"figure")),co=Ee.getParent(K.parentNode,Jo=>ue(qe,Jo.nodeName),B.getBody());return co&&(ie=Ee.split(co,K))!==null&&ie!==void 0?ie:K},ar=B=>{const K=Pn(B);return K?Fa(ie=>fn(B,ie),K):kr()},ge=(B,K)=>{const ie=mc(qe=>fn(B,qe),K);B.dom.setAttrib(ie,"data-mce-id","__mcenew"),B.focus(),B.selection.setContent(ie.outerHTML);const Ee=B.dom.select('*[data-mce-id="__mcenew"]')[0];if(B.dom.setAttrib(Ee,"data-mce-id",null),bc(Ee)){const qe=Kn(B,Ee);B.selection.select(qe)}else B.selection.select(Ee)},Yn=(B,K)=>{B.dom.setAttrib(K,"src",K.getAttribute("src"))},Ks=(B,K)=>{if(K){const ie=B.dom.is(K.parentNode,"figure.image")?K.parentNode:K;B.dom.remove(ie),B.focus(),B.nodeChanged(),B.dom.isEmpty(B.getBody())&&(B.setContent(""),B.selection.setCursorLocation())}},vr=(B,K)=>{const ie=Pn(B);if(ie)if(Fe(Ee=>fn(B,Ee),K,ie),Yn(B,ie),bc(ie.parentNode)){const Ee=ie.parentNode;Kn(B,Ee),B.selection.select(ie.parentNode)}else B.selection.select(ie),Ao(B,K,ie)},vc=(B,K)=>{const ie=K.src;return{...K,src:ro(B,ie)?ie:""}},ss=(B,K)=>{const ie=Pn(B);if(ie){const qe={...Fa(Jo=>fn(B,Jo),ie),...K},co=vc(B,qe);qe.src?vr(B,co):Ks(B,ie)}else K.src&&ge(B,{...kr(),...K})},zr=(B=>(...K)=>{if(K.length===0)throw new Error("Can't merge zero objects");const ie={};for(let Ee=0;Ee<K.length;Ee++){const qe=K[Ee];for(const co in qe)Oe(qe,co)&&(ie[co]=B(ie[co],qe[co]))}return ie})((B,K)=>xn(B)&&xn(K)?zr(B,K):K);var As=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),rs=tinymce.util.Tools.resolve("tinymce.util.Tools");const ms=B=>Yt(B.value)?B.value:"",tc=B=>Yt(B.text)?B.text:Yt(B.title)?B.title:"",Ur=(B,K)=>{const ie=[];return rs.each(B,Ee=>{const qe=tc(Ee);if(Ee.menu!==void 0){const co=Ur(Ee.menu,K);ie.push({text:qe,items:co})}else{const co=K(Ee);ie.push({text:qe,value:co})}}),ie},Ps=(B=ms)=>K=>K?Xe.from(K).map(ie=>Ur(ie,B)):Xe.none(),Ga=B=>Ps(ms)(B),xa=B=>Oe(B,"items"),xo=(B,K)=>Bo(B,ie=>xa(ie)?xo(ie.items,K):ie.value===K?Xe.some(ie):Xe.none()),Ir={sanitizer:Ps,sanitize:Ga,findEntry:(B,K)=>B.bind(ie=>xo(ie,K))},Dc={makeTab:B=>({title:"Advanced",name:"advanced",items:[{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]})},Ar=B=>{const K=Ir.sanitizer(vs=>B.convertURL(vs.value||vs.url||"","src")),ie=new Promise(vs=>{Mo(B,_l=>{vs(K(_l).map(bf=>no([[{text:"None",value:""}],bf])))})}),Ee=Ir.sanitize(Rn(B)),qe=wa(B),co=Cn(B),Jo=pr(B),fs=qo(B),it=ar(B),bs=xe(B),rc=zn(B),kl=Go(B),Gn=Ht(B),ka=Zo(B),qa=Ho(B),Wr=Xe.some(So(B)).filter(vs=>Yt(vs)&&vs.length>0);return ie.then(vs=>({image:it,imageList:vs,classList:Ee,hasAdvTab:qe,hasUploadTab:co,hasUploadUrl:Jo,hasUploadHandler:fs,hasDescription:bs,hasImageTitle:rc,hasDimensions:kl,hasImageCaption:Gn,prependURL:Wr,hasAccessibilityOptions:ka,automaticUploads:qa}))},Os=B=>{const K={name:"src",type:"urlinput",filetype:"image",label:"Source",picker_text:"Browse files"},ie=B.imageList.map(rc=>({name:"images",type:"listbox",label:"Image list",items:rc})),Ee={name:"alt",type:"input",label:"Alternative description",enabled:!(B.hasAccessibilityOptions&&B.image.isDecorative)},qe={name:"title",type:"input",label:"Image title"},co={name:"dimensions",type:"sizeinput"},Jo={type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]},fs=B.classList.map(rc=>({name:"classes",type:"listbox",label:"Class",items:rc})),it={type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]},bs=rc=>rc?{type:"grid",columns:2}:{type:"panel"};return no([[K],ie.toArray(),B.hasAccessibilityOptions&&B.hasDescription?[Jo]:[],B.hasDescription?[Ee]:[],B.hasImageTitle?[qe]:[],B.hasDimensions?[co]:[],[{...bs(B.classList.isSome()&&B.hasImageCaption),items:no([fs.toArray(),B.hasImageCaption?[it]:[]])}]])},Ta={makeTab:B=>({title:"General",name:"general",items:Os(B)}),makeItems:Os},nc={makeTab:B=>({title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput"}]})},oc=B=>({prevImage:Ir.findEntry(B.imageList,B.image.src),prevAlt:B.image.alt,open:!0}),Or=B=>({src:{value:B.src,meta:{}},images:B.src,alt:B.alt,title:B.title,dimensions:{width:B.width,height:B.height},classes:B.class,caption:B.caption,style:B.style,vspace:B.vspace,border:B.border,hspace:B.hspace,borderstyle:B.borderStyle,fileinput:[],isDecorative:B.isDecorative}),Ul=(B,K)=>({src:B.src.value,alt:(B.alt===null||B.alt.length===0)&&K?null:B.alt,title:B.title,width:B.dimensions.width,height:B.dimensions.height,class:B.classes,style:B.style,caption:B.caption,hspace:B.hspace,vspace:B.vspace,border:B.border,borderStyle:B.borderstyle,isDecorative:B.isDecorative}),Rc=(B,K)=>/^(?:[a-zA-Z]+:)?\/\//.test(K)?Xe.none():B.prependURL.bind(ie=>K.substring(0,ie.length)!==ie?Xe.some(ie+K):Xe.none()),yc=(B,K)=>{const ie=K.getData();Rc(B,ie.src.value).each(Ee=>{K.setData({src:{value:Ee,meta:ie.src.meta}})})},Ea=(B,K,ie)=>{B.hasDescription&&Yt(ie.alt)&&(K.alt=ie.alt),B.hasAccessibilityOptions&&(K.isDecorative=ie.isDecorative||K.isDecorative||!1),B.hasImageTitle&&Yt(ie.title)&&(K.title=ie.title),B.hasDimensions&&(Yt(ie.width)&&(K.dimensions.width=ie.width),Yt(ie.height)&&(K.dimensions.height=ie.height)),Yt(ie.class)&&Ir.findEntry(B.classList,ie.class).each(Ee=>{K.classes=Ee.value}),B.hasImageCaption&&zt(ie.caption)&&(K.caption=ie.caption),B.hasAdvTab&&(Yt(ie.style)&&(K.style=ie.style),Yt(ie.vspace)&&(K.vspace=ie.vspace),Yt(ie.border)&&(K.border=ie.border),Yt(ie.hspace)&&(K.hspace=ie.hspace),Yt(ie.borderstyle)&&(K.borderstyle=ie.borderstyle))},na=(B,K)=>{const ie=K.getData(),Ee=ie.src.meta;if(Ee!==void 0){const qe=zr({},ie);Ea(B,qe,Ee),K.setData(qe)}},ni=(B,K,ie,Ee)=>{const qe=Ee.getData(),co=qe.src.value,Jo=qe.src.meta||{};!Jo.width&&!Jo.height&&K.hasDimensions&&(dc(co)?B.imageSize(co).then(fs=>{ie.open&&Ee.setData({dimensions:fs})}).catch(fs=>console.error(fs)):Ee.setData({dimensions:{width:"",height:""}}))},oi=(B,K,ie)=>{const Ee=ie.getData(),qe=Ir.findEntry(B.imageList,Ee.src.value);K.prevImage=qe,ie.setData({images:qe.map(co=>co.value).getOr("")})},El=(B,K,ie,Ee)=>{yc(K,Ee),na(K,Ee),ni(B,K,ie,Ee),oi(K,ie,Ee)},oa=(B,K,ie,Ee)=>{const qe=Ee.getData(),co=Ir.findEntry(K.imageList,qe.images);co.each(Jo=>{qe.alt===""||ie.prevImage.map(it=>it.text===qe.alt).getOr(!1)?Jo.value===""?Ee.setData({src:Jo,alt:ie.prevAlt}):Ee.setData({src:Jo,alt:Jo.text}):Ee.setData({src:Jo})}),ie.prevImage=co,El(B,K,ie,Ee)},Yr=(B,K,ie,Ee)=>{const qe=Ee.getData();Ee.block("Uploading image"),A(qe.fileinput).fold(()=>{Ee.unblock()},co=>{const Jo=URL.createObjectURL(co),fs=()=>{Ee.unblock(),URL.revokeObjectURL(Jo)},it=bs=>{Ee.setData({src:{value:bs,meta:{}}}),Ee.showTab("general"),El(B,K,ie,Ee),Ee.focus("src")};jn(co).then(bs=>{const rc=B.createBlobCache(co,Jo,bs);K.automaticUploads?B.uploadImage(rc).then(kl=>{it(kl.url),fs()}).catch(kl=>{fs(),B.alertErr(kl,()=>{Ee.focus("fileinput")})}):(B.addToBlobCache(rc),it(rc.blobUri()),Ee.unblock())})})},Wl=(B,K,ie)=>(Ee,qe)=>{qe.name==="src"?El(B,K,ie,Ee):qe.name==="images"?oa(B,K,ie,Ee):qe.name==="alt"?ie.prevAlt=Ee.getData().alt:qe.name==="fileinput"?Yr(B,K,ie,Ee):qe.name==="isDecorative"&&Ee.setEnabled("alt",!Ee.getData().isDecorative)},Zl=B=>()=>{B.open=!1},Ci=B=>B.hasAdvTab||B.hasUploadUrl||B.hasUploadHandler?{type:"tabpanel",tabs:no([[Ta.makeTab(B)],B.hasAdvTab?[Dc.makeTab(B)]:[],B.hasUploadTab&&(B.hasUploadUrl||B.hasUploadHandler)?[nc.makeTab(B)]:[]])}:{type:"panel",items:Ta.makeItems(B)},ll=(B,K,ie)=>Ee=>{const qe=zr(Or(K.image),Ee.getData()),co={...qe,style:Ns(ie.normalizeCss,Ul(qe,!1))};B.execCommand("mceUpdateImage",!1,Ul(co,K.hasAccessibilityOptions)),B.editorUpload.uploadImagesAuto(),Ee.close()},Dr=B=>K=>ro(B,K)?st(B.documentBaseURI.toAbsolute(K)).then(ie=>({width:String(ie.width),height:String(ie.height)})):Promise.resolve({width:"",height:""}),sa=B=>(K,ie,Ee)=>{var qe;return B.editorUpload.blobCache.create({blob:K,blobUri:ie,name:(qe=K.name)===null||qe===void 0?void 0:qe.replace(/\.[^\.]+$/,""),filename:K.name,base64:Ee.split(",")[1]})},sc=B=>K=>{B.editorUpload.blobCache.add(K)},Cc=B=>(K,ie)=>{B.windowManager.alert(K,ie)},wi=B=>K=>fn(B,K),Si=B=>K=>B.dom.parseStyle(K),U=B=>(K,ie)=>B.dom.serializeStyle(K,ie),se=B=>K=>As(B).upload([K],!1).then(ie=>{var Ee;return ie.length===0?Promise.reject("Failed to upload image"):ie[0].status===!1?Promise.reject((Ee=ie[0].error)===null||Ee===void 0?void 0:Ee.message):ie[0]}),be=B=>{const K={imageSize:Dr(B),addToBlobCache:sc(B),createBlobCache:sa(B),alertErr:Cc(B),normalizeCss:wi(B),parseStyle:Si(B),serializeStyle:U(B),uploadImage:se(B)};return{open:()=>{Ar(B).then(Ee=>{const qe=oc(Ee);return{title:"Insert/Edit Image",size:"normal",body:Ci(Ee),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Or(Ee.image),onSubmit:ll(B,Ee,K),onChange:Wl(K,Ee,qe),onClose:Zl(qe)}}).then(B.windowManager.open)}}},ze=B=>{B.addCommand("mceImage",be(B).open),B.addCommand("mceUpdateImage",(K,ie)=>{B.undoManager.transact(()=>ss(B,ie))})},bt=B=>{const K=B.attr("class");return et(K)&&/\bimage\b/.test(K)},Ve=B=>K=>{let ie=K.length;const Ee=qe=>{qe.attr("contenteditable",B?"true":null)};for(;ie--;){const qe=K[ie];bt(qe)&&(qe.attr("contenteditable",B?"false":null),rs.each(qe.getAll("figcaption"),Ee))}},Vo=B=>{B.on("PreInit",()=>{B.parser.addNodeFilter("figure",Ve(!0)),B.serializer.addNodeFilter("figure",Ve(!1))})},nn=B=>K=>{const ie=()=>{K.setEnabled(B.selection.isEditable())};return B.on("NodeChange",ie),ie(),()=>{B.off("NodeChange",ie)}},Hn=B=>{B.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:be(B).open,onSetup:K=>{K.setActive(et(Pn(B)));const ie=B.selection.selectorChangedWithUnbind("img:not([data-mce-object]):not([data-mce-placeholder]),figure.image",K.setActive).unbind,Ee=nn(B)(K);return()=>{ie(),Ee()}}}),B.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:be(B).open,onSetup:nn(B)}),B.ui.registry.addContextMenu("image",{update:K=>B.selection.isEditable()&&(bc(K)||Vl(K)&&!jc(K))?["image"]:[]})};var Fs=()=>{ht.add("image",B=>{ds(B),Vo(B),Hn(B),ze(B)})};Fs()})();(function(){var ht=tinymce.util.Tools.resolve("tinymce.PluginManager");const _n=Qe=>W=>W.options.get(Qe),jt=Qe=>{const W=Qe.options.register;W("insertdatetime_dateformat",{processor:"string",default:Qe.translate("%Y-%m-%d")}),W("insertdatetime_timeformat",{processor:"string",default:Qe.translate("%H:%M:%S")}),W("insertdatetime_formats",{processor:"string[]",default:["%H:%M:%S","%Y-%m-%d","%I:%M:%S %p","%D"]}),W("insertdatetime_element",{processor:"boolean",default:!1})},un=_n("insertdatetime_dateformat"),Ct=_n("insertdatetime_timeformat"),Gt=_n("insertdatetime_formats"),Jn=_n("insertdatetime_element"),Dt=Qe=>{const W=Gt(Qe);return W.length>0?W[0]:Ct(Qe)},Yt="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),io="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),xn="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Xt="January February March April May June July August September October November December".split(" "),Mn=(Qe,W)=>{if(Qe=""+Qe,Qe.length<W)for(let xt=0;xt<W-Qe.length;xt++)Qe="0"+Qe;return Qe},zt=(Qe,W,xt=new Date)=>(W=W.replace("%D","%m/%d/%Y"),W=W.replace("%r","%I:%M:%S %p"),W=W.replace("%Y",""+xt.getFullYear()),W=W.replace("%y",""+xt.getYear()),W=W.replace("%m",Mn(xt.getMonth()+1,2)),W=W.replace("%d",Mn(xt.getDate(),2)),W=W.replace("%H",""+Mn(xt.getHours(),2)),W=W.replace("%M",""+Mn(xt.getMinutes(),2)),W=W.replace("%S",""+Mn(xt.getSeconds(),2)),W=W.replace("%I",""+((xt.getHours()+11)%12+1)),W=W.replace("%p",xt.getHours()<12?"AM":"PM"),W=W.replace("%B",""+Qe.translate(Xt[xt.getMonth()])),W=W.replace("%b",""+Qe.translate(xn[xt.getMonth()])),W=W.replace("%A",""+Qe.translate(io[xt.getDay()])),W=W.replace("%a",""+Qe.translate(Yt[xt.getDay()])),W=W.replace("%%","%"),W),ft=(Qe,W,xt,gn)=>{const dn=Qe.dom.create("time",{datetime:xt},gn);Qe.dom.replace(dn,W),Qe.selection.select(dn,!0),Qe.selection.collapse(!1)},et=(Qe,W)=>{if(Jn(Qe)&&Qe.selection.isEditable()){const xt=zt(Qe,W);let gn;/%[HMSIp]/.test(W)?gn=zt(Qe,"%Y-%m-%dT%H:%M"):gn=zt(Qe,"%Y-%m-%d");const dn=Qe.dom.getParent(Qe.selection.getStart(),"time");dn?ft(Qe,dn,gn,xt):Qe.insertContent('<time datetime="'+gn+'">'+xt+"</time>")}else Qe.insertContent(zt(Qe,W))},ct=Qe=>{Qe.addCommand("mceInsertDate",(W,xt)=>{et(Qe,xt??un(Qe))}),Qe.addCommand("mceInsertTime",(W,xt)=>{et(Qe,xt??Ct(Qe))})},Qn=Qe=>{let W=Qe;return{get:()=>W,set:dn=>{W=dn}}};var Re=tinymce.util.Tools.resolve("tinymce.util.Tools");const ee=Qe=>W=>{const xt=()=>{W.setEnabled(Qe.selection.isEditable())};return Qe.on("NodeChange",xt),xt(),()=>{Qe.off("NodeChange",xt)}},Xe=Qe=>{const W=Gt(Qe),xt=Qn(Dt(Qe)),gn=Oe=>Qe.execCommand("mceInsertDate",!1,Oe);Qe.ui.registry.addSplitButton("insertdatetime",{icon:"insert-time",tooltip:"Insert date/time",select:Oe=>Oe===xt.get(),fetch:Oe=>{Oe(Re.map(W,ue=>({type:"choiceitem",text:zt(Qe,ue),value:ue})))},onAction:Oe=>{gn(xt.get())},onItemAction:(Oe,ue)=>{xt.set(ue),gn(ue)},onSetup:ee(Qe)});const dn=Oe=>()=>{xt.set(Oe),gn(Oe)};Qe.ui.registry.addNestedMenuItem("insertdatetime",{icon:"insert-time",text:"Date/time",getSubmenuItems:()=>Re.map(W,Oe=>({type:"menuitem",text:zt(Qe,Oe),onAction:dn(Oe)})),onSetup:ee(Qe)})};var Zn=()=>{ht.add("insertdatetime",Qe=>{jt(Qe),ct(Qe),Xe(Qe)})};Zn()})();(function(){var ht=tinymce.util.Tools.resolve("tinymce.PluginManager");const _n=(U,se,be)=>{var ze;return be(U,se.prototype)?!0:((ze=U.constructor)===null||ze===void 0?void 0:ze.name)===se.name},jt=U=>{const se=typeof U;return U===null?"null":se==="object"&&Array.isArray(U)?"array":se==="object"&&_n(U,String,(be,ze)=>ze.isPrototypeOf(be))?"string":se},un=U=>se=>jt(se)===U,Ct=U=>se=>typeof se===U,Gt=U=>se=>U===se,Jn=un("string"),Dt=un("object"),Yt=un("array"),io=Gt(null),xn=Ct("boolean"),Xt=U=>U==null,Mn=U=>!Xt(U),zt=Ct("function"),ft=(U,se)=>{if(Yt(U)){for(let be=0,ze=U.length;be<ze;++be)if(!se(U[be]))return!1;return!0}return!1},et=()=>{},ct=U=>()=>U,Qn=(U,se)=>U===se;class Re{constructor(se,be){this.tag=se,this.value=be}static some(se){return new Re(!0,se)}static none(){return Re.singletonNone}fold(se,be){return this.tag?be(this.value):se()}isSome(){return this.tag}isNone(){return!this.tag}map(se){return this.tag?Re.some(se(this.value)):Re.none()}bind(se){return this.tag?se(this.value):Re.none()}exists(se){return this.tag&&se(this.value)}forall(se){return!this.tag||se(this.value)}filter(se){return!this.tag||se(this.value)?this:Re.none()}getOr(se){return this.tag?this.value:se}or(se){return this.tag?this:se}getOrThunk(se){return this.tag?this.value:se()}orThunk(se){return this.tag?this:se()}getOrDie(se){if(this.tag)return this.value;throw new Error(se??"Called getOrDie on None")}static from(se){return Mn(se)?Re.some(se):Re.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(se){this.tag&&se(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Re.singletonNone=new Re(!1);const ee=Array.prototype.indexOf,Xe=Array.prototype.push,Zn=(U,se)=>ee.call(U,se),Qe=(U,se)=>Zn(U,se)>-1,W=(U,se)=>{const be=U.length,ze=new Array(be);for(let bt=0;bt<be;bt++){const Ve=U[bt];ze[bt]=se(Ve,bt)}return ze},xt=(U,se)=>{for(let be=0,ze=U.length;be<ze;be++){const bt=U[be];se(bt,be)}},gn=(U,se,be)=>(xt(U,(ze,bt)=>{be=se(be,ze,bt)}),be),dn=U=>{const se=[];for(let be=0,ze=U.length;be<ze;++be){if(!Yt(U[be]))throw new Error("Arr.flatten item "+be+" was not an array, input: "+U);Xe.apply(se,U[be])}return se},Oe=(U,se)=>dn(W(U,se)),ue=(U,se)=>{for(let be=0;be<U.length;be++){const ze=se(U[be],be);if(ze.isSome())return ze}return Re.none()},ts=(U,se,be=Qn)=>U.exists(ze=>be(ze,se)),no=U=>{const se=[],be=ze=>{se.push(ze)};for(let ze=0;ze<U.length;ze++)U[ze].each(be);return se},Mt=(U,se)=>U?Re.some(se):Re.none(),A=U=>se=>se.options.get(U),Bo=U=>{const se=U.options.register;se("link_assume_external_targets",{processor:be=>{const ze=Jn(be)||xn(be);return ze?be===!0?{value:1,valid:ze}:be==="http"||be==="https"?{value:be,valid:ze}:{value:0,valid:ze}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),se("link_context_toolbar",{processor:"boolean",default:!1}),se("link_list",{processor:be=>Jn(be)||zt(be)||ft(be,Dt)}),se("link_default_target",{processor:"string"}),se("link_default_protocol",{processor:"string",default:"https"}),se("link_target_list",{processor:be=>xn(be)||ft(be,Dt),default:!0}),se("link_rel_list",{processor:"object[]",default:[]}),se("link_class_list",{processor:"object[]",default:[]}),se("link_title",{processor:"boolean",default:!0}),se("allow_unsafe_link_target",{processor:"boolean",default:!1}),se("link_quicklink",{processor:"boolean",default:!1})},tt=A("link_assume_external_targets"),Wo=A("link_context_toolbar"),cn=A("link_list"),Je=A("link_default_target"),vo=A("link_default_protocol"),Ms=A("link_target_list"),ho=A("link_rel_list"),Us=A("link_class_list"),je=A("link_title"),gt=A("allow_unsafe_link_target"),F=A("link_quicklink"),dc=Object.keys,uo=Object.hasOwnProperty,ds=(U,se)=>{const be=dc(U);for(let ze=0,bt=be.length;ze<bt;ze++){const Ve=be[ze],Vo=U[Ve];se(Vo,Ve)}},Go=U=>(se,be)=>{U[be]=se},wa=(U,se,be,ze)=>{ds(U,(bt,Ve)=>{(se(bt,Ve)?be:ze)(bt,Ve)})},Cn=(U,se)=>{const be={};return wa(U,se,Go(be),et),be},So=(U,se)=>uo.call(U,se),Rn=(U,se)=>So(U,se)&&U[se]!==void 0&&U[se]!==null;var xe=tinymce.util.Tools.resolve("tinymce.util.URI"),zn=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Ht=tinymce.util.Tools.resolve("tinymce.util.Tools");const Lt=U=>Mn(U)&&U.nodeName.toLowerCase()==="a",Zo=U=>Lt(U)&&!!qo(U),Ho=(U,se)=>{if(U.collapsed)return[];{const be=U.cloneContents(),ze=be.firstChild,bt=new zn(ze,be),Ve=[];let Vo=ze;do se(Vo)&&Ve.push(Vo);while(Vo=bt.next());return Ve}},pr=U=>/^\w+:/i.test(U),qo=U=>{var se,be;return(be=(se=U.getAttribute("data-mce-href"))!==null&&se!==void 0?se:U.getAttribute("href"))!==null&&be!==void 0?be:""},qs=(U,se)=>{const be=["noopener"],ze=U?U.split(/\s+/):[],bt=Hn=>Ht.trim(Hn.sort().join(" ")),Ve=Hn=>(Hn=Vo(Hn),Hn.length>0?Hn.concat(be):be),Vo=Hn=>Hn.filter(Fs=>Ht.inArray(be,Fs)===-1),nn=se?Ve(ze):Vo(ze);return nn.length>0?bt(nn):""},st=U=>U.replace(/\uFEFF/g,""),lt=(U,se)=>(se=se||Mo(U.selection.getRng())[0]||U.selection.getNode(),ns(se)?Re.from(U.dom.select("a[href]",se)[0]):Re.from(U.dom.getParent(se,"a[href]"))),tn=(U,se)=>lt(U,se).isSome(),mn=(U,se)=>{const be=se.fold(()=>U.getContent({format:"text"}),ze=>ze.innerText||ze.textContent||"");return st(be)},Mo=U=>Ho(U,Zo),Ao=U=>Ht.grep(U,Zo),jn=U=>Ao(U).length>0,jc=U=>Mo(U).length>0,ro=U=>{const se=U.schema.getTextInlineElements(),be=Ve=>Ve.nodeType===1&&!Lt(Ve)&&!So(se,Ve.nodeName.toLowerCase());if(lt(U).exists(Ve=>Ve.hasAttribute("data-mce-block")))return!1;const bt=U.selection.getRng();return bt.collapsed?!0:Ho(bt,be).length===0},ns=U=>Mn(U)&&U.nodeName==="FIGURE"&&/\bimage\b/i.test(U.className),cr=U=>gn(["title","rel","class","target"],(be,ze)=>(U[ze].each(bt=>{be[ze]=bt.length>0?bt:null}),be),{href:U.href}),Br=(U,se)=>(se==="http"||se==="https")&&!pr(U)?se+"://"+U:U,ea=(U,se)=>{const be={...se};if(ho(U).length===0&&!gt(U)){const ze=qs(be.rel,be.target==="_blank");be.rel=ze||null}return Re.from(be.target).isNone()&&Ms(U)===!1&&(be.target=Je(U)),be.href=Br(be.href,tt(U)),be},Vt=(U,se,be,ze)=>{be.each(bt=>{So(se,"innerText")?se.innerText=bt:se.textContent=bt}),U.dom.setAttribs(se,ze),U.selection.select(se)},cl=(U,se,be,ze)=>{const bt=U.dom;ns(se)?Sa(bt,se,ze):be.fold(()=>{U.execCommand("mceInsertLink",!1,ze)},Ve=>{U.insertContent(bt.createHTML("a",ze,bt.encode(Ve)))})},pt=(U,se,be)=>{const ze=U.selection.getNode(),bt=lt(U,ze),Ve=ea(U,cr(be));U.undoManager.transact(()=>{be.href===se.href&&se.attach(),bt.fold(()=>{cl(U,ze,be.text,Ve)},Vo=>{U.focus(),Vt(U,Vo,be.text,Ve)})})},yo=U=>{const se=U.dom,be=U.selection,ze=be.getBookmark(),bt=be.getRng().cloneRange(),Ve=se.getParent(bt.startContainer,"a[href]",U.getBody()),Vo=se.getParent(bt.endContainer,"a[href]",U.getBody());Ve&&bt.setStartBefore(Ve),Vo&&bt.setEndAfter(Vo),be.setRng(bt),U.execCommand("unlink"),be.moveToBookmark(ze)},Vr=U=>{U.undoManager.transact(()=>{const se=U.selection.getNode();ns(se)?ta(U,se):yo(U),U.focus()})},br=U=>{const{class:se,href:be,rel:ze,target:bt,text:Ve,title:Vo}=U;return Cn({class:se.getOrNull(),href:be,rel:ze.getOrNull(),target:bt.getOrNull(),text:Ve.getOrNull(),title:Vo.getOrNull()},(nn,Hn)=>io(nn)===!1)},Oc=(U,se)=>{const be=U.options.get,ze={allow_html_data_urls:be("allow_html_data_urls"),allow_script_urls:be("allow_script_urls"),allow_svg_data_urls:be("allow_svg_data_urls")},bt=se.href;return{...se,href:xe.isDomSafe(bt,"a",ze)?bt:""}},Gc=(U,se,be)=>{const ze=Oc(U,be);U.hasPlugin("rtc",!0)?U.execCommand("createlink",!1,br(ze)):pt(U,se,ze)},os=U=>{U.hasPlugin("rtc",!0)?U.execCommand("unlink"):Vr(U)},ta=(U,se)=>{var be;const ze=U.dom.select("img",se)[0];if(ze){const bt=U.dom.getParents(ze,"a[href]",se)[0];bt&&((be=bt.parentNode)===null||be===void 0||be.insertBefore(ze,bt),U.dom.remove(bt))}},Sa=(U,se,be)=>{var ze;const bt=U.select("img",se)[0];if(bt){const Ve=U.create("a",be);(ze=bt.parentNode)===null||ze===void 0||ze.insertBefore(Ve,bt),Ve.appendChild(bt)}},Xo=U=>Jn(U.value)?U.value:"",yn=U=>Jn(U.text)?U.text:Jn(U.title)?U.title:"",Ls=(U,se)=>{const be=[];return Ht.each(U,ze=>{const bt=yn(ze);if(ze.menu!==void 0){const Ve=Ls(ze.menu,se);be.push({text:bt,items:Ve})}else{const Ve=se(ze);be.push({text:bt,value:Ve})}}),be},bc=(U=Xo)=>se=>Re.from(se).map(be=>Ls(be,U)),hs={sanitize:U=>bc(Xo)(U),sanitizeWith:bc,createUi:(U,se)=>be=>({name:U,type:"listbox",label:se,items:be}),getValue:Xo},kr=U=>Rn(U,"items"),Ns=(U,se)=>ue(se,be=>kr(be)?Ns(U,be.items):Mt(be.value===U,be)),mc=(U,se,be,ze)=>{const bt=ze[se],Ve=U.length>0;return bt!==void 0?Ns(bt,be).map(Vo=>({url:{value:Vo.value,meta:{text:Ve?U:Vo.text,attach:et}},text:Ve?U:Vo.text})):Re.none()},Fa=(U,se)=>se==="link"?U.link:se==="anchor"?U.anchor:Re.none(),le={init:(U,se)=>{const be={text:U.text,title:U.title},ze=Hn=>{var Fs;return Mt(be.title.length<=0,Re.from((Fs=Hn.meta)===null||Fs===void 0?void 0:Fs.title).getOr(""))},bt=Hn=>{var Fs;return Mt(be.text.length<=0,Re.from((Fs=Hn.meta)===null||Fs===void 0?void 0:Fs.text).getOr(Hn.value))},Ve=Hn=>{const Fs=bt(Hn.url),B=ze(Hn.url);return Fs.isSome()||B.isSome()?Re.some({...Fs.map(K=>({text:K})).getOr({}),...B.map(K=>({title:K})).getOr({})}):Re.none()},Vo=(Hn,Fs)=>{const B=Fa(se,Fs).getOr([]);return mc(be.text,Fs,B,Hn)};return{onChange:(Hn,Fs)=>{const B=Fs.name;return B==="url"?Ve(Hn()):Qe(["anchor","link"],B)?Vo(Hn(),B):((B==="text"||B==="title")&&(be[B]=Hn()[B]),Re.none())}}},getDelta:mc};var re=tinymce.util.Tools.resolve("tinymce.util.Delay");const De=(U,se,be)=>{const ze=U.selection.getRng();re.setEditorTimeout(U,()=>{U.windowManager.confirm(se,bt=>{U.selection.setRng(ze),be(bt)})})},Fe=U=>{const se=U.href;return se.indexOf("@")>0&&se.indexOf("/")===-1&&se.indexOf("mailto:")===-1?Re.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:ze=>({...ze,href:"mailto:"+se})}):Re.none()},fn=(U,se)=>be=>{const ze=be.href;return U===1&&!pr(ze)||U===0&&/^\s*www(\.|\d\.)/i.test(ze)?Re.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${se}:// prefix?`,preprocess:Ve=>({...Ve,href:se+"://"+ze})}):Re.none()},Kn={preprocess:(U,se)=>ue([Fe,fn(tt(U),vo(U))],be=>be(se)).fold(()=>Promise.resolve(se),be=>new Promise(ze=>{De(U,be.message,bt=>{ze(bt?be.preprocess(se):se)})}))},ge={getAnchors:U=>{const se=U.dom.select("a:not([href])"),be=Oe(se,ze=>{const bt=ze.name||ze.id;return bt?[{text:bt,value:"#"+bt}]:[]});return be.length>0?Re.some([{text:"None",value:""}].concat(be)):Re.none()}},Ks={getClasses:U=>{const se=Us(U);return se.length>0?hs.sanitize(se):Re.none()}},vr=U=>{try{return Re.some(JSON.parse(U))}catch{return Re.none()}},ss={getLinks:U=>{const se=ze=>U.convertURL(ze.value||ze.url||"","href"),be=cn(U);return new Promise(ze=>{Jn(be)?fetch(be).then(bt=>bt.ok?bt.text().then(vr):Promise.reject()).then(ze,()=>ze(Re.none())):zt(be)?be(bt=>ze(Re.some(bt))):ze(Re.from(be))}).then(ze=>ze.bind(hs.sanitizeWith(se)).map(bt=>bt.length>0?[{text:"None",value:""}].concat(bt):bt))}},$r={getRels:(U,se)=>{const be=ho(U);if(be.length>0){const ze=ts(se,"_blank"),bt=gt(U)===!1,Ve=nn=>qs(hs.getValue(nn),ze);return(bt?hs.sanitizeWith(Ve):hs.sanitize)(be)}return Re.none()}},zr=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],rs={getTargets:U=>{const se=Ms(U);return Yt(se)?hs.sanitize(se).orThunk(()=>Re.some(zr)):se===!1?Re.none():Re.some(zr)}},ms=(U,se,be)=>{const ze=U.getAttrib(se,be);return ze!==null&&ze.length>0?Re.some(ze):Re.none()},tc=(U,se)=>{const be=U.dom,bt=ro(U)?Re.some(mn(U.selection,se)):Re.none(),Ve=se.bind(B=>Re.from(be.getAttrib(B,"href"))),Vo=se.bind(B=>Re.from(be.getAttrib(B,"target"))),nn=se.bind(B=>ms(be,B,"rel")),Hn=se.bind(B=>ms(be,B,"class")),Fs=se.bind(B=>ms(be,B,"title"));return{url:Ve,text:bt,title:Fs,target:Vo,rel:nn,linkClass:Hn}},Ps={collect:(U,se)=>ss.getLinks(U).then(be=>{const ze=tc(U,se);return{anchor:ze,catalogs:{targets:rs.getTargets(U),rels:$r.getRels(U,ze.target),classes:Ks.getClasses(U),anchor:ge.getAnchors(U),link:be},optNode:se,flags:{titleEnabled:je(U)}}})},Ga=(U,se)=>be=>{const ze=be.getData();if(!ze.url.value){os(U),be.close();return}const bt=nn=>Re.from(ze[nn]).filter(Hn=>!ts(se.anchor[nn],Hn)),Ve={href:ze.url.value,text:bt("text"),target:bt("target"),rel:bt("rel"),class:bt("linkClass"),title:bt("title")},Vo={href:ze.url.value,attach:ze.url.meta!==void 0&&ze.url.meta.attach?ze.url.meta.attach:et};Kn.preprocess(U,Ve).then(nn=>{Gc(U,Vo,nn)}),be.close()},xa=U=>{const se=lt(U);return Ps.collect(U,se)},xo=(U,se)=>{const be=U.anchor,ze=be.url.getOr("");return{url:{value:ze,meta:{original:{value:ze}}},text:be.text.getOr(""),title:be.title.getOr(""),anchor:ze,link:ze,rel:be.rel.getOr(""),target:be.target.or(se).getOr(""),linkClass:be.linkClass.getOr("")}},Kr=(U,se,be)=>{const ze=[{name:"url",type:"urlinput",filetype:"file",label:"URL",picker_text:"Browse links"}],bt=U.anchor.text.map(()=>({name:"text",type:"input",label:"Text to display"})).toArray(),Ve=U.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],Vo=Re.from(Je(be)),nn=xo(U,Vo),Hn=U.catalogs,Fs=le.init(nn,Hn);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:dn([ze,bt,Ve,no([Hn.anchor.map(hs.createUi("anchor","Anchors")),Hn.rels.map(hs.createUi("rel","Rel")),Hn.targets.map(hs.createUi("target","Open link in...")),Hn.link.map(hs.createUi("link","Link list")),Hn.classes.map(hs.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:nn,onChange:(K,{name:ie})=>{Fs.onChange(K.getData,{name:ie}).each(Ee=>{K.setData(Ee)})},onSubmit:se}},Ir=U=>{xa(U).then(be=>{const ze=Ga(U,be);return Kr(be,ze,U)}).then(be=>{U.windowManager.open(be)})},Ha=U=>{U.addCommand("mceLink",(se,be)=>{(be==null?void 0:be.dialog)===!0||!F(U)?Ir(U):U.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"})})},Dc=U=>{U.addShortcut("Meta+K","",()=>{U.execCommand("mceLink")})},Ar=U=>{let se=U;return{get:()=>se,set:bt=>{se=bt}}},Os=U=>{const se=Ar(Re.none()),be=()=>se.get().each(U);return{clear:()=>{be(),se.set(Re.none())},isSet:()=>se.get().isSome(),get:()=>se.get(),set:nn=>{be(),se.set(Re.some(nn))}}},ed=()=>{const U=Os(et);return{...U,on:be=>U.get().each(be)}},Ta=(U,se)=>U.substring(se),Ko=(U,se,be)=>se===""||U.length>=se.length&&U.substr(be,be+se.length)===se,nc=(U,se)=>oc(U,se)?Ta(U,se.length):U,oc=(U,se)=>Ko(U,se,0);var Or=tinymce.util.Tools.resolve("tinymce.util.VK");const Ul=(U,se)=>{document.body.appendChild(U),U.dispatchEvent(se),document.body.removeChild(U)},Rc=U=>{const se=document.createElement("a");se.target="_blank",se.href=U,se.rel="noreferrer noopener";const be=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});document.dispatchEvent(be),Ul(se,be)},yc=U=>U.altKey===!0&&U.shiftKey===!1&&U.ctrlKey===!1&&U.metaKey===!1,Ea=(U,se)=>{if(se){const be=qo(se);if(/^#/.test(be)){const ze=U.dom.select(`${be},[name="${nc(be,"#")}"]`);ze.length&&U.selection.scrollIntoView(ze[0],!0)}else Rc(se.href)}},na=U=>{const se=U.selection.getRng(),be=se.startContainer;return Zo(be)&&se.startContainer===se.endContainer&&U.dom.select("img",be).length===1},ni=(U,se)=>{const be=Ao(U.dom.getParents(se));return Mt(be.length===1,be[0])},oi=U=>{const se=Mo(U.selection.getRng());return Mt(se.length>0,se[0]).or(ni(U,U.selection.getNode()))},El=U=>U.selection.isCollapsed()||na(U)?ni(U,U.selection.getStart()):oi(U),oa=U=>{const se=ed(),be=()=>se.get().or(El(U)),ze=()=>be().each(bt=>Ea(U,bt));return U.on("contextmenu",bt=>{ni(U,bt.target).each(se.set)}),U.on("SelectionChange",()=>{se.isSet()||El(U).each(se.set)}),U.on("click",bt=>{se.clear();const Ve=Ao(U.dom.getParents(bt.target));Ve.length===1&&Or.metaKeyPressed(bt)&&(bt.preventDefault(),Ea(U,Ve[0]))}),U.on("keydown",bt=>{se.clear(),!bt.isDefaultPrevented()&&bt.keyCode===13&&yc(bt)&&be().each(Ve=>{bt.preventDefault(),Ea(U,Ve)})}),{gotoSelectedLink:ze}},Yr=U=>()=>{U.execCommand("mceLink",!1,{dialog:!0})},Wl=(U,se)=>(U.on("NodeChange",se),()=>U.off("NodeChange",se)),Zl=U=>se=>{const be=()=>{se.setActive(!U.mode.isReadOnly()&&tn(U,U.selection.getNode())),se.setEnabled(U.selection.isEditable())};return be(),Wl(U,be)},Ci=U=>se=>{const be=()=>{se.setEnabled(U.selection.isEditable())};return be(),Wl(U,be)},ll=U=>se=>{const be=Ve=>jn(Ve)||jc(U.selection.getRng()),ze=U.dom.getParents(U.selection.getStart()),bt=Ve=>{se.setEnabled(be(Ve)&&U.selection.isEditable())};return bt(ze),Wl(U,Ve=>bt(Ve.parents))},Dr=(U,se)=>{U.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",shortcut:"Meta+K",onAction:Yr(U),onSetup:Zl(U)}),U.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:se.gotoSelectedLink,onSetup:ll(U)}),U.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>os(U),onSetup:ll(U)})},sa=(U,se)=>{U.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:se.gotoSelectedLink,onSetup:ll(U)}),U.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:Yr(U),onSetup:Ci(U)}),U.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>os(U),onSetup:ll(U)})},sc=U=>{const se="link unlink openlink",be="link";U.ui.registry.addContextMenu("link",{update:ze=>U.dom.isEditable(ze)?jn(U.dom.getParents(ze,"a"))?se:be:""})},Cc=(U,se)=>{const be=Ve=>{Ve.selection.collapse(!1)},ze=Ve=>{const Vo=U.selection.getNode();return Ve.setEnabled(tn(U,Vo)&&U.selection.isEditable()),et},bt=Ve=>{const Vo=lt(U),nn=ro(U);if(Vo.isNone()&&nn){const Hn=mn(U.selection,Vo);return Mt(Hn.length===0,Ve)}else return Re.none()};U.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:Zl(U)},label:"Link",predicate:Ve=>Wo(U)&&tn(U,Ve),initValue:()=>lt(U).fold(ct(""),qo),commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:Ve=>{const Vo=U.selection.getNode();return Ve.setActive(tn(U,Vo)),Zl(U)(Ve)},onAction:Ve=>{const Vo=Ve.getValue(),nn=bt(Vo);Gc(U,{href:Vo,attach:et},{href:Vo,text:nn,title:Re.none(),rel:Re.none(),target:Re.from(Je(U)),class:Re.none()}),be(U),Ve.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:ze,onAction:Ve=>{os(U),Ve.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:ze,onAction:Ve=>{se.gotoSelectedLink(),Ve.hide()}}]})},wi=U=>{const se=oa(U);Dr(U,se),sa(U,se),sc(U),Cc(U,se)};var Si=()=>{ht.add("link",U=>{Bo(U),Ha(U),wi(U),Dc(U)})};Si()})();(function(){var ht=tinymce.util.Tools.resolve("tinymce.PluginManager");const _n=(x,R,H)=>{var ce;return H(x,R.prototype)?!0:((ce=x.constructor)===null||ce===void 0?void 0:ce.name)===R.name},jt=x=>{const R=typeof x;return x===null?"null":R==="object"&&Array.isArray(x)?"array":R==="object"&&_n(x,String,(H,ce)=>ce.isPrototypeOf(H))?"string":R},un=x=>R=>jt(R)===x,Ct=x=>R=>typeof R===x,Gt=un("string"),Jn=un("object"),Dt=un("array"),Yt=Ct("boolean"),io=x=>x==null,xn=x=>!io(x),Xt=Ct("function"),Mn=Ct("number"),zt=()=>{},ft=(x,R)=>H=>x(R(H)),et=x=>()=>x,ct=(x,R)=>x===R;function Qn(x,...R){return(...H)=>{const ce=R.concat(H);return x.apply(null,ce)}}const Re=x=>R=>!x(R),ee=et(!1);class Xe{constructor(R,H){this.tag=R,this.value=H}static some(R){return new Xe(!0,R)}static none(){return Xe.singletonNone}fold(R,H){return this.tag?H(this.value):R()}isSome(){return this.tag}isNone(){return!this.tag}map(R){return this.tag?Xe.some(R(this.value)):Xe.none()}bind(R){return this.tag?R(this.value):Xe.none()}exists(R){return this.tag&&R(this.value)}forall(R){return!this.tag||R(this.value)}filter(R){return!this.tag||R(this.value)?this:Xe.none()}getOr(R){return this.tag?this.value:R}or(R){return this.tag?this:R}getOrThunk(R){return this.tag?this.value:R()}orThunk(R){return this.tag?this:R()}getOrDie(R){if(this.tag)return this.value;throw new Error(R??"Called getOrDie on None")}static from(R){return xn(R)?Xe.some(R):Xe.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(R){this.tag&&R(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Xe.singletonNone=new Xe(!1);const Zn=Array.prototype.slice,Qe=Array.prototype.indexOf,W=Array.prototype.push,xt=(x,R)=>Qe.call(x,R),gn=(x,R)=>xt(x,R)>-1,dn=(x,R)=>{for(let H=0,ce=x.length;H<ce;H++){const he=x[H];if(R(he,H))return!0}return!1},Oe=(x,R)=>{const H=x.length,ce=new Array(H);for(let he=0;he<H;he++){const ot=x[he];ce[he]=R(ot,he)}return ce},ue=(x,R)=>{for(let H=0,ce=x.length;H<ce;H++){const he=x[H];R(he,H)}},ts=(x,R)=>{const H=[];for(let ce=0,he=x.length;ce<he;ce++){const ot=x[ce];R(ot,ce)&&H.push(ot)}return H},no=(x,R)=>{if(x.length===0)return[];{let H=R(x[0]);const ce=[];let he=[];for(let ot=0,On=x.length;ot<On;ot++){const so=x[ot],qn=R(so);qn!==H&&(ce.push(he),he=[]),H=qn,he.push(so)}return he.length!==0&&ce.push(he),ce}},Mt=(x,R,H)=>(ue(x,(ce,he)=>{H=R(H,ce,he)}),H),A=(x,R,H)=>{for(let ce=0,he=x.length;ce<he;ce++){const ot=x[ce];if(R(ot,ce))return Xe.some(ot);if(H(ot,ce))break}return Xe.none()},Bo=(x,R)=>A(x,R,ee),tt=x=>{const R=[];for(let H=0,ce=x.length;H<ce;++H){if(!Dt(x[H]))throw new Error("Arr.flatten item "+H+" was not an array, input: "+x);W.apply(R,x[H])}return R},Wo=(x,R)=>tt(Oe(x,R)),cn=x=>{const R=Zn.call(x,0);return R.reverse(),R},Je=(x,R)=>R>=0&&R<x.length?Xe.some(x[R]):Xe.none(),vo=x=>Je(x,0),Ms=x=>Je(x,x.length-1),ho=(x,R)=>{const H=[],ce=Xt(R)?he=>dn(H,ot=>R(ot,he)):he=>gn(H,he);for(let he=0,ot=x.length;he<ot;he++){const On=x[he];ce(On)||H.push(On)}return H},Us=(x,R,H=ct)=>x.exists(ce=>H(ce,R)),je=(x,R,H=ct)=>gt(x,R,H).getOr(x.isNone()&&R.isNone()),gt=(x,R,H)=>x.isSome()&&R.isSome()?Xe.some(H(x.getOrDie(),R.getOrDie())):Xe.none(),F=8,dc=11,uo=1,ds=3,Go=(x,R)=>{const ce=(R||document).createElement("div");if(ce.innerHTML=x,!ce.hasChildNodes()||ce.childNodes.length>1){const he="HTML does not have a single root node";throw console.error(he,x),new Error(he)}return So(ce.childNodes[0])},wa=(x,R)=>{const ce=(R||document).createElement(x);return So(ce)},Cn=(x,R)=>{const ce=(R||document).createTextNode(x);return So(ce)},So=x=>{if(x==null)throw new Error("Node cannot be null or undefined");return{dom:x}},xe={fromHtml:Go,fromTag:wa,fromText:Cn,fromDom:So,fromPoint:(x,R,H)=>Xe.from(x.dom.elementFromPoint(R,H)).map(So)},zn=(x,R)=>{const H=x.dom;if(H.nodeType!==uo)return!1;{const ce=H;if(ce.matches!==void 0)return ce.matches(R);if(ce.msMatchesSelector!==void 0)return ce.msMatchesSelector(R);if(ce.webkitMatchesSelector!==void 0)return ce.webkitMatchesSelector(R);if(ce.mozMatchesSelector!==void 0)return ce.mozMatchesSelector(R);throw new Error("Browser lacks native selectors")}},Ht=(x,R)=>x.dom===R.dom,Lt=(x,R)=>{const H=x.dom,ce=R.dom;return H===ce?!1:H.contains(ce)},Zo=zn,Ho=typeof window<"u"?window:Function("return this;")(),pr=(x,R)=>{let H=R??Ho;for(let ce=0;ce<x.length&&H!==void 0&&H!==null;++ce)H=H[x[ce]];return H},qo=(x,R)=>{const H=x.split(".");return pr(H,R)},qs=(x,R)=>qo(x,R),st=(x,R)=>{const H=qs(x,R);if(H==null)throw new Error(x+" not available on this browser");return H},lt=Object.getPrototypeOf,tn=x=>st("HTMLElement",x),mn=x=>{const R=qo("ownerDocument.defaultView",x);return Jn(x)&&(tn(R).prototype.isPrototypeOf(x)||/^HTML\w*Element$/.test(lt(x).constructor.name))},Mo=x=>x.dom.nodeName.toLowerCase(),Ao=x=>x.dom.nodeType,jn=x=>R=>Ao(R)===x,jc=x=>Ao(x)===F||Mo(x)==="#comment",ro=x=>ns(x)&&mn(x.dom),ns=jn(uo),cr=jn(ds),Br=jn(dc),ea=x=>R=>ns(R)&&Mo(R)===x,Vt=x=>Xe.from(x.dom.parentNode).map(xe.fromDom),cl=x=>Xe.from(x.dom.parentElement).map(xe.fromDom),pt=x=>Xe.from(x.dom.nextSibling).map(xe.fromDom),yo=x=>Oe(x.dom.childNodes,xe.fromDom),Vr=(x,R)=>{const H=x.dom.childNodes;return Xe.from(H[R]).map(xe.fromDom)},br=x=>Vr(x,0),Oc=x=>Vr(x,x.dom.childNodes.length-1),Gc=x=>Br(x)&&xn(x.dom.host),os=x=>xe.fromDom(x.dom.getRootNode()),ta=x=>{const R=os(x);return Gc(R)?Xe.some(R):Xe.none()},Sa=x=>xe.fromDom(x.dom.host),Xo=x=>{const R=cr(x)?x.dom.parentNode:x.dom;if(R==null||R.ownerDocument===null)return!1;const H=R.ownerDocument;return ta(xe.fromDom(R)).fold(()=>H.body.contains(R),ft(Xo,Sa))};var yn=(x,R,H,ce,he)=>x(H,ce)?Xe.some(H):Xt(he)&&he(H)?Xe.none():R(H,ce,he);const Ls=(x,R,H)=>{let ce=x.dom;const he=Xt(H)?H:ee;for(;ce.parentNode;){ce=ce.parentNode;const ot=xe.fromDom(ce);if(R(ot))return Xe.some(ot);if(he(ot))break}return Xe.none()},bc=(x,R,H)=>yn((he,ot)=>ot(he),Ls,x,R,H),Vl=(x,R,H)=>Ls(x,ce=>zn(ce,R),H),zl=(x,R,H)=>yn((he,ot)=>zn(he,ot),Vl,x,R,H),hs=x=>zl(x,"[contenteditable]"),kr=(x,R=!1)=>Xo(x)?x.dom.isContentEditable:hs(x).fold(et(R),H=>Ns(H)==="true"),Ns=x=>x.dom.contentEditable,mc=(x,R)=>{Vt(x).each(ce=>{ce.dom.insertBefore(R.dom,x.dom)})},Fa=(x,R)=>{pt(x).fold(()=>{Vt(x).each(he=>{le(he,R)})},ce=>{mc(ce,R)})},_r=(x,R)=>{br(x).fold(()=>{le(x,R)},ce=>{x.dom.insertBefore(R.dom,ce.dom)})},le=(x,R)=>{x.dom.appendChild(R.dom)},re=(x,R)=>{ue(R,H=>{mc(x,H)})},De=(x,R)=>{ue(R,H=>{le(x,H)})},Fe=x=>{x.dom.textContent="",ue(yo(x),R=>{fn(R)})},fn=x=>{const R=x.dom;R.parentNode!==null&&R.parentNode.removeChild(R)};var Pn=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),Kn=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),ar=tinymce.util.Tools.resolve("tinymce.util.VK");const ge=x=>Oe(x,xe.fromDom),Yn=Object.keys,Ks=(x,R)=>{const H=Yn(x);for(let ce=0,he=H.length;ce<he;ce++){const ot=H[ce],On=x[ot];R(On,ot)}},vr=x=>(R,H)=>{x[H]=R},vc=(x,R,H,ce)=>{Ks(x,(he,ot)=>{(R(he,ot)?H:ce)(he,ot)})},ss=(x,R)=>{const H={};return vc(x,R,vr(H),zt),H},al=(x,R,H)=>{if(Gt(H)||Yt(H)||Mn(H))x.setAttribute(R,H+"");else throw console.error("Invalid call to Attribute.set. Key ",R,":: Value ",H,":: Element ",x),new Error("Attribute value was not simple")},$r=(x,R)=>{const H=x.dom;Ks(R,(ce,he)=>{al(H,he,ce)})},zr=x=>Mt(x.dom.attributes,(R,H)=>(R[H.name]=H.value,R),{}),As=(x,R)=>xe.fromDom(x.dom.cloneNode(R)),rs=x=>As(x,!0),ms=(x,R)=>{const H=xe.fromTag(R),ce=zr(x);return $r(H,ce),H},tc=(x,R)=>{const H=ms(x,R);Fa(x,H);const ce=yo(x);return De(H,ce),fn(x),H};var Ur=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Ps=tinymce.util.Tools.resolve("tinymce.util.Tools");const Ga=x=>R=>xn(R)&&R.nodeName.toLowerCase()===x,xa=x=>R=>xn(R)&&x.test(R.nodeName),xo=x=>xn(x)&&x.nodeType===3,Kr=x=>xn(x)&&x.nodeType===1,Ir=xa(/^(OL|UL|DL)$/),Ha=xa(/^(OL|UL)$/),Dc=Ga("ol"),Ar=xa(/^(LI|DT|DD)$/),Os=xa(/^(DT|DD)$/),ed=xa(/^(TH|TD)$/),Ta=Ga("br"),Ko=x=>{var R;return((R=x.parentNode)===null||R===void 0?void 0:R.firstChild)===x},nc=(x,R)=>xn(R)&&R.nodeName in x.schema.getTextBlockElements(),oc=(x,R)=>xn(x)&&x.nodeName in R,Or=(x,R)=>xn(R)&&R.nodeName in x.schema.getVoidElements(),Ul=(x,R)=>Ta(R)?x.isBlock(R.nextSibling)&&!Ta(R.previousSibling):!1,Rc=(x,R,H)=>{const ce=x.isEmpty(R);return H&&x.select("span[data-mce-type=bookmark]",R).length>0?!1:ce},yc=(x,R)=>x.isChildOf(R,x.getRoot()),Ea=x=>R=>R.options.get(x),na=x=>{const R=x.options.register;R("lists_indent_on_tab",{processor:"boolean",default:!0})},ni=Ea("lists_indent_on_tab"),oi=Ea("forced_root_block"),El=Ea("forced_root_block_attrs"),oa=(x,R,H={})=>{const ce=x.dom,he=x.schema.getBlockElements(),ot=ce.createFragment(),On=oi(x),so=El(x);let qn,pn,ur=!1;for(pn=ce.create(On,{...so,...H.style?{style:H.style}:{}}),oc(R.firstChild,he)||ot.appendChild(pn);qn=R.firstChild;){const Jr=qn.nodeName;!ur&&(Jr!=="SPAN"||qn.getAttribute("data-mce-type")!=="bookmark")&&(ur=!0),oc(qn,he)?(ot.appendChild(qn),pn=null):(pn||(pn=ce.create(On,so),ot.appendChild(pn)),pn.appendChild(qn))}return!ur&&pn&&pn.appendChild(ce.create("br",{"data-mce-bogus":"1"})),ot},Yr=Ur.DOM,Wl=(x,R,H)=>{const ce=pn=>{const ur=pn.parentNode;ur&&Ps.each(he,Jr=>{ur.insertBefore(Jr,H.parentNode)}),Yr.remove(pn)},he=Yr.select('span[data-mce-type="bookmark"]',R),ot=oa(x,H),On=Yr.createRng();On.setStartAfter(H),On.setEndAfter(R);const so=On.extractContents();for(let pn=so.firstChild;pn;pn=pn.firstChild)if(pn.nodeName==="LI"&&x.dom.isEmpty(pn)){Yr.remove(pn);break}x.dom.isEmpty(so)||Yr.insertAfter(so,R),Yr.insertAfter(ot,R);const qn=H.parentElement;qn&&Rc(x.dom,qn)&&ce(qn),Yr.remove(H),Rc(x.dom,R)&&Yr.remove(R)},Zl=ea("dd"),Ci=ea("dt"),ll=(x,R)=>{Zl(R)?tc(R,"dt"):Ci(R)&&cl(R).each(H=>Wl(x,H.dom,R.dom))},Dr=x=>{Ci(x)&&tc(x,"dd")},sa=(x,R,H)=>{R==="Indent"?ue(H,Dr):ue(H,ce=>ll(x,ce))},sc=(x,R)=>{if(xo(x))return{container:x,offset:R};const H=Pn.getNode(x,R);return xo(H)?{container:H,offset:R>=x.childNodes.length?H.data.length:0}:H.previousSibling&&xo(H.previousSibling)?{container:H.previousSibling,offset:H.previousSibling.data.length}:H.nextSibling&&xo(H.nextSibling)?{container:H.nextSibling,offset:0}:{container:x,offset:R}},Cc=x=>{const R=x.cloneRange(),H=sc(x.startContainer,x.startOffset);R.setStart(H.container,H.offset);const ce=sc(x.endContainer,x.endOffset);return R.setEnd(ce.container,ce.offset),R},wi=["OL","UL","DL"],Si=wi.join(","),U=(x,R)=>{const H=R||x.selection.getStart(!0);return x.dom.getParent(H,Si,Fs(x,H))},se=(x,R)=>xn(x)&&R.length===1&&R[0]===x,be=x=>ts(x.querySelectorAll(Si),Ir),ze=x=>{const R=U(x),H=x.selection.getSelectedBlocks();return se(R,H)?be(R):ts(H,ce=>Ir(ce)&&R!==ce)},bt=(x,R)=>{const H=Ps.map(R,ce=>{const he=x.dom.getParent(ce,"li,dd,dt",Fs(x,ce));return he||ce});return ho(H)},Ve=x=>{const R=x.selection.getSelectedBlocks();return ts(bt(x,R),Ar)},Vo=x=>ts(Ve(x),Os),nn=(x,R)=>{const H=x.dom.getParents(R,"TD,TH");return H.length>0?H[0]:x.getBody()},Hn=(x,R)=>!Ir(R)&&!Ar(R)&&dn(wi,H=>x.isValidChild(R.nodeName,H)),Fs=(x,R)=>{const H=x.dom.getParents(R,x.dom.isBlock),ce=ot=>ot.nodeName.toLowerCase()!==oi(x);return Bo(H,ot=>ce(ot)&&Hn(x.schema,ot)).getOr(x.getBody())},B=x=>Vt(x).exists(R=>Ar(R.dom)&&br(R).exists(H=>!Ir(H.dom))&&Oc(R).exists(H=>!Ir(H.dom))),K=(x,R)=>{const H=x.dom.getParents(R,"ol,ul",Fs(x,R));return Ms(H)},ie=x=>{const R=K(x,x.selection.getStart()),H=ts(x.selection.getSelectedBlocks(),Ha);return R.toArray().concat(H)},Ee=x=>{const R=x.selection.getStart();return x.dom.getParents(R,"ol,ul",Fs(x,R))},qe=x=>{const R=ie(x),H=Ee(x);return Bo(H,ce=>B(xe.fromDom(ce))).fold(()=>co(x,R),ce=>[ce])},co=(x,R)=>{const H=Oe(R,ce=>K(x,ce).getOr(ce));return ho(H)},Jo=x=>/\btox\-/.test(x.className),fs=(x,R)=>A(x,Ir,ed).exists(H=>H.nodeName===R&&!Jo(H)),it=(x,R)=>R!==null&&!x.dom.isEditable(R),bs=x=>{const R=U(x);return it(x,R)||!x.selection.isEditable()},rc=(x,R)=>{const H=x.dom.getParent(R,"ol,ul,dl");return it(x,H)||!x.selection.isEditable()},kl=(x,R)=>{const H=x.selection.getNode();return R({parents:x.dom.getParents(H),element:H}),x.on("NodeChange",R),()=>x.off("NodeChange",R)},Gn=(x,R)=>{const ce=document.createDocumentFragment();return ue(x,he=>{ce.appendChild(he.dom)}),xe.fromDom(ce)},ka=(x,R,H)=>x.dispatch("ListMutation",{action:R,element:H}),Wr=(x=>R=>R.replace(x,""))(/^\s+|\s+$/g),vs=x=>x.length>0,_l=x=>!vs(x),bf=x=>x.style!==void 0&&Xt(x.style.getPropertyValue),Hd=(x,R,H)=>{if(!Gt(H))throw console.error("Invalid call to CSS.set. Property ",R,":: Value ",H,":: Element ",x),new Error("CSS value must be a string: "+H);bf(x)&&x.style.setProperty(R,H)},Ys=(x,R,H)=>{const ce=x.dom;Hd(ce,R,H)},td=x=>Zo(x,"OL,UL"),il=x=>Zo(x,"LI"),Ws=x=>br(x).exists(td),ul=x=>Oc(x).exists(td),ra=x=>"listAttributes"in x,nd=x=>"isComment"in x,G=x=>"isFragment"in x,Q=x=>x.depth>0,ke=x=>x.isSelected,Ue=x=>{const R=yo(x),H=ul(x)?R.slice(0,-1):R;return Oe(H,rs)},wn=(x,R,H)=>Vt(x).filter(ns).map(ce=>({depth:R,dirty:!1,isSelected:H,content:Ue(x),itemAttributes:zr(x),listAttributes:zr(ce),listType:Mo(ce),isInPreviousLi:!1})),Oo=(x,R)=>{le(x.item,R.list)},mo=x=>{for(let R=1;R<x.length;R++)Oo(x[R-1],x[R])},ws=(x,R)=>{gt(Ms(x),vo(R),Oo)},Rr=(x,R)=>{const H={list:xe.fromTag(R,x),item:xe.fromTag("li",x)};return le(H.list,H.item),H},ca=(x,R,H)=>{const ce=[];for(let he=0;he<H;he++)ce.push(Rr(x,ra(R)?R.listType:R.parentListType));return ce},Mc=(x,R)=>{for(let H=0;H<x.length-1;H++)Ys(x[H].item,"list-style-type","none");Ms(x).each(H=>{ra(R)&&($r(H.list,R.listAttributes),$r(H.item,R.itemAttributes)),De(H.item,R.content)})},yr=(x,R)=>{Mo(x.list)!==R.listType&&(x.list=tc(x.list,R.listType)),$r(x.list,R.listAttributes)},Cr=(x,R,H)=>{const ce=xe.fromTag("li",x);return $r(ce,R),De(ce,H),ce},Xr=(x,R)=>{le(x.list,R),x.item=R},Nc=(x,R,H)=>{const ce=R.slice(0,H.depth);return Ms(ce).each(he=>{if(ra(H)){const ot=Cr(x,H.itemAttributes,H.content);Xr(he,ot),yr(he,H)}else if(G(H))De(he.item,H.content);else{const ot=xe.fromHtml(`<!--${H.content}-->`);le(he.list,ot)}}),ce},Xs=(x,R,H)=>{const ce=ca(x,H,H.depth-R.length);return mo(ce),Mc(ce,H),ws(R,ce),R.concat(ce)},wr=(x,R)=>{let H=Xe.none();const ce=Mt(R,(he,ot,On)=>nd(ot)?On===0?(H=Xe.some(ot),he):Nc(x,he,ot):ot.depth>he.length?Xs(x,he,ot):Nc(x,he,ot),[]);return H.each(he=>{const ot=xe.fromHtml(`<!--${he.content}-->`);vo(ce).each(On=>{_r(On.list,ot)})}),vo(ce).map(he=>he.list)},Zs=(x,R)=>{switch(x){case"Indent":R.depth++;break;case"Outdent":R.depth--;break;case"Flatten":R.depth=0}R.dirty=!0},si=(x,R)=>{ra(x)&&ra(R)&&(x.listType=R.listType,x.listAttributes={...R.listAttributes})},Vd=x=>{x.listAttributes=ss(x.listAttributes,(R,H)=>H!=="start")},Zi=(x,R)=>{const H=x[R].depth,ce=ot=>ot.depth===H&&!ot.dirty,he=ot=>ot.depth<H;return A(cn(x.slice(0,R)),ce,he).orThunk(()=>A(x.slice(R+1),ce,he))},od=x=>(ue(x,(R,H)=>{Zi(x,H).fold(()=>{R.dirty&&ra(R)&&Vd(R)},ce=>si(R,ce))}),x),sd=x=>{let R=x;return{get:()=>R,set:he=>{R=he}}},vu=(x,R,H,ce)=>{var he;if(jc(ce))return[{depth:x+1,content:(he=ce.dom.nodeValue)!==null&&he!==void 0?he:"",dirty:!1,isSelected:!1,isComment:!0}];R.each(so=>{Ht(so.start,ce)&&H.set(!0)});const ot=wn(ce,x,H.get());R.each(so=>{Ht(so.end,ce)&&H.set(!1)});const On=Oc(ce).filter(td).map(so=>dl(x,R,H,so)).getOr([]);return ot.toArray().concat(On)},yu=(x,R,H,ce)=>br(ce).filter(td).fold(()=>vu(x,R,H,ce),he=>{const ot=Mt(yo(ce),(On,so,qn)=>{if(qn===0)return On;if(il(so))return On.concat(vu(x,R,H,so));{const pn={isFragment:!0,depth:x,content:[so],isSelected:!1,dirty:!1,parentListType:Mo(he)};return On.concat(pn)}},[]);return dl(x,R,H,he).concat(ot)}),dl=(x,R,H,ce)=>Wo(yo(ce),he=>{const ot=td(he)?dl:yu,On=x+1;return ot(On,R,H,he)}),_a=(x,R)=>{const H=sd(!1),ce=0;return Oe(x,he=>({sourceList:he,entries:dl(ce,R,H,he)}))},pg=(x,R)=>{const H=od(R);return Oe(H,ce=>{const he=nd(ce)?Gn([xe.fromHtml(`<!--${ce.content}-->`)]):Gn(ce.content),ot=ra(ce)?ce.itemAttributes:{};return xe.fromDom(oa(x,he.dom,ot))})},xi=(x,R)=>{const H=od(R);return wr(x.contentDocument,H).toArray()},vf=(x,R)=>Wo(no(R,Q),H=>vo(H).exists(Q)?xi(x,H):pg(x,H)),rd=(x,R)=>{ue(ts(x,ke),H=>Zs(R,H))},yf=x=>{const R=Oe(Ve(x),xe.fromDom);return gt(Bo(R,Re(Ws)),Bo(cn(R),Re(Ws)),(H,ce)=>({start:H,end:ce}))},Om=(x,R,H)=>{const ce=_a(R,yf(x));ue(ce,he=>{rd(he.entries,H);const ot=vf(x,he.entries);ue(ot,On=>{ka(x,H==="Indent"?"IndentList":"OutdentList",On.dom)}),re(he.sourceList,ot),fn(he.sourceList)})},cd=(x,R)=>{const H=ge(qe(x)),ce=ge(Vo(x));let he=!1;if(H.length||ce.length){const ot=x.selection.getBookmark();Om(x,H,R),sa(x,R,ce),x.selection.moveToBookmark(ot),x.selection.setRng(Cc(x.selection.getRng())),x.nodeChanged(),he=!0}return he},Dm=(x,R)=>!bs(x)&&cd(x,R),Cf=x=>Dm(x,"Indent"),Cu=x=>Dm(x,"Outdent"),bg=x=>Dm(x,"Flatten"),de="\uFEFF",ad=x=>x===de,ml=(x,R,H)=>Ls(x,R,H).isSome(),Ih=(x,R)=>ml(x,Qn(Ht,R));var Lh=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");const wu=Ur.DOM,po=x=>{const R={},H=ce=>{let he=x[ce?"startContainer":"endContainer"],ot=x[ce?"startOffset":"endOffset"];if(Kr(he)){const On=wu.create("span",{"data-mce-type":"bookmark"});he.hasChildNodes()?(ot=Math.min(ot,he.childNodes.length-1),ce?he.insertBefore(On,he.childNodes[ot]):wu.insertAfter(On,he.childNodes[ot])):he.appendChild(On),he=On,ot=0}R[ce?"startContainer":"endContainer"]=he,R[ce?"startOffset":"endOffset"]=ot};return H(!0),x.collapsed||H(),R},aa=x=>{const R=ce=>{const he=so=>{var qn;let pn=(qn=so.parentNode)===null||qn===void 0?void 0:qn.firstChild,ur=0;for(;pn;){if(pn===so)return ur;(!Kr(pn)||pn.getAttribute("data-mce-type")!=="bookmark")&&ur++,pn=pn.nextSibling}return-1};let ot=x[ce?"startContainer":"endContainer"],On=x[ce?"startOffset":"endOffset"];if(ot){if(Kr(ot)&&ot.parentNode){const so=ot;On=he(ot),ot=ot.parentNode,wu.remove(so),!ot.hasChildNodes()&&wu.isBlock(ot)&&ot.appendChild(wu.create("br"))}x[ce?"startContainer":"endContainer"]=ot,x[ce?"startOffset":"endOffset"]=On}};R(!0),R();const H=wu.createRng();return H.setStart(x.startContainer,x.startOffset),x.endContainer&&H.setEnd(x.endContainer,x.endOffset),Cc(H)},Pc=x=>{switch(x){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},Su=(x,R,H)=>{const ce=H["list-style-type"]?H["list-style-type"]:null;x.setStyle(R,"list-style-type",ce)},wf=(x,R)=>{Ps.each(R,(H,ce)=>{x.setAttribute(ce,H)})},zd=(x,R,H)=>{wf(R,H["list-attributes"]),Ps.each(x.select("li",R),ce=>{wf(ce,H["list-item-attributes"])})},la=(x,R,H)=>{Su(x,R,H),zd(x,R,H)},Rm=(x,R,H)=>{Ps.each(H,ce=>x.setStyle(R,ce,""))},ji=(x,R)=>xn(R)&&!oc(R,x.schema.getBlockElements()),Mm=(x,R,H,ce)=>{let he=R[H?"startContainer":"endContainer"];const ot=R[H?"startOffset":"endOffset"];Kr(he)&&(he=he.childNodes[Math.min(ot,he.childNodes.length-1)]||he),!H&&Ta(he.nextSibling)&&(he=he.nextSibling);const On=qn=>{for(;!x.dom.isBlock(qn)&&qn.parentNode&&ce!==qn;)qn=qn.parentNode;return qn},so=(qn,pn)=>{var ur;const Jr=new Kn(qn,On(qn)),Da=pn?"next":"prev";let Ou;for(;Ou=Jr[Da]();)if(!(Or(x,Ou)||ad(Ou.textContent)||((ur=Ou.textContent)===null||ur===void 0?void 0:ur.length)===0))return Xe.some(Ou);return Xe.none()};if(H&&xo(he))if(ad(he.textContent))he=so(he,!1).getOr(he);else for(he.parentNode!==null&&ji(x,he.parentNode)&&(he=he.parentNode);he.previousSibling!==null&&(ji(x,he.previousSibling)||xo(he.previousSibling));)he=he.previousSibling;if(!H&&xo(he))if(ad(he.textContent))he=so(he,!0).getOr(he);else for(he.parentNode!==null&&ji(x,he.parentNode)&&(he=he.parentNode);he.nextSibling!==null&&(ji(x,he.nextSibling)||xo(he.nextSibling));)he=he.nextSibling;for(;he.parentNode!==ce;){const qn=he.parentNode;if(nc(x,he)||/^(TD|TH)$/.test(qn.nodeName))return he;he=qn}return he},Gi=(x,R,H)=>{const ce=[],he=x.dom,ot=Mm(x,R,!0,H),On=Mm(x,R,!1,H);let so;const qn=[];for(let pn=ot;pn&&(qn.push(pn),pn!==On);pn=pn.nextSibling);return Ps.each(qn,pn=>{var ur;if(nc(x,pn)){ce.push(pn),so=null;return}if(he.isBlock(pn)||Ta(pn)){Ta(pn)&&he.remove(pn),so=null;return}const Jr=pn.nextSibling;if(Lh.isBookmarkNode(pn)&&(Ir(Jr)||nc(x,Jr)||!Jr&&pn.parentNode===H)){so=null;return}so||(so=he.create("p"),(ur=pn.parentNode)===null||ur===void 0||ur.insertBefore(so,pn),ce.push(so)),so.appendChild(pn)}),ce},Aa=(x,R,H)=>{const ce=x.getStyle(R,"list-style-type");let he=H?H["list-style-type"]:"";return he=he===null?"":he,ce===he},Fh=(x,R)=>{const H=x.selection.getStart(!0),ce=Mm(x,R,!0,x.getBody());return Ih(xe.fromDom(ce),xe.fromDom(R.commonAncestorContainer))?R.commonAncestorContainer:H},Ud=(x,R,H)=>{const ce=x.selection.getRng();let he="LI";const ot=Fs(x,Fh(x,ce)),On=x.dom;if(On.getContentEditable(x.selection.getNode())==="false")return;R=R.toUpperCase(),R==="DL"&&(he="DT");const so=po(ce),qn=ts(Gi(x,ce,ot),x.dom.isEditable);Ps.each(qn,pn=>{let ur;const Jr=pn.previousSibling,Da=pn.parentNode;Ar(Da)||(Jr&&Ir(Jr)&&Jr.nodeName===R&&Aa(On,Jr,H)?(ur=Jr,pn=On.rename(pn,he),Jr.appendChild(pn)):(ur=On.create(R),Da.insertBefore(ur,pn),ur.appendChild(pn),pn=On.rename(pn,he)),Rm(On,pn,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),la(On,ur,H),Wd(x.dom,ur))}),x.selection.setRng(aa(so))},wc=(x,R)=>Ir(x)&&x.nodeName===(R==null?void 0:R.nodeName),Ka=(x,R,H)=>{const ce=x.getStyle(R,"list-style-type",!0),he=x.getStyle(H,"list-style-type",!0);return ce===he},Oa=(x,R)=>x.className===R.className,ld=(x,R,H)=>wc(R,H)&&Ka(x,R,H)&&Oa(R,H),Wd=(x,R)=>{let H,ce=R.nextSibling;if(ld(x,R,ce)){const he=ce;for(;H=he.firstChild;)R.appendChild(H);x.remove(he)}if(ce=R.previousSibling,ld(x,R,ce)){const he=ce;for(;H=he.lastChild;)R.insertBefore(H,R.firstChild);x.remove(he)}},vg=(x,R,H,ce)=>{if(R.nodeName!==H){const he=x.dom.rename(R,H);la(x.dom,he,ce),ka(x,Pc(H),he)}else la(x.dom,R,ce),ka(x,Pc(H),R)},Zd=(x,R,H,ce)=>{if(R.classList.forEach((he,ot,On)=>{he.startsWith("tox-")&&(On.remove(he),On.length===0&&R.removeAttribute("class"))}),R.nodeName!==H){const he=x.dom.rename(R,H);la(x.dom,he,ce),ka(x,Pc(H),he)}else la(x.dom,R,ce),ka(x,Pc(H),R)},ri=(x,R,H,ce,he)=>{const ot=Ir(R);if(ot&&R.nodeName===ce&&!jd(he)&&!Jo(R))bg(x);else{Ud(x,ce,he);const On=po(x.selection.getRng()),so=ot?[R,...H]:H,qn=ot&&Jo(R)?Zd:vg;Ps.each(so,pn=>{qn(x,pn,ce,he)}),x.selection.setRng(aa(On))}},jd=x=>"list-style-type"in x,S1=(x,R,H,ce)=>{if(R!==x.getBody())if(R)if(R.nodeName===H&&!jd(ce)&&!Jo(R))bg(x);else{const he=po(x.selection.getRng());Jo(R)&&R.classList.forEach((On,so,qn)=>{On.startsWith("tox-")&&(qn.remove(On),qn.length===0&&R.removeAttribute("class"))}),la(x.dom,R,ce);const ot=x.dom.rename(R,H);Wd(x.dom,ot),x.selection.setRng(aa(he)),Ud(x,H,ce),ka(x,Pc(H),ot)}else Ud(x,H,ce),ka(x,Pc(H),R)},yg=(x,R,H)=>{const ce=U(x);if(rc(x,ce))return;const he=ze(x),ot=Jn(H)?H:{};he.length>0?ri(x,ce,he,R,ot):S1(x,ce,R,ot)},Hh=Ur.DOM,Cg=(x,R)=>{const H=R.parentElement;if(H&&H.nodeName==="LI"&&H.firstChild===R){const ce=H.previousSibling;ce&&ce.nodeName==="LI"?(ce.appendChild(R),Rc(x,H)&&Hh.remove(H)):Hh.setStyle(H,"listStyleType","none")}if(Ir(H)){const ce=H.previousSibling;ce&&ce.nodeName==="LI"&&ce.appendChild(R)}},Gd=(x,R)=>{const H=Ps.grep(x.select("ol,ul",R));Ps.each(H,ce=>{Cg(x,ce)})},id=(x,R,H,ce)=>{let he=R.startContainer;const ot=R.startOffset;if(xo(he)&&(H?ot<he.data.length:ot>0))return he;const On=x.schema.getNonEmptyElements();Kr(he)&&(he=Pn.getNode(he,ot));const so=new Kn(he,ce);H&&Ul(x.dom,he)&&so.next();const qn=H?so.next.bind(so):so.prev2.bind(so);for(;he=qn();)if(he.nodeName==="LI"&&!he.hasChildNodes()||On[he.nodeName]||xo(he)&&he.data.length>0)return he;return null},Nm=(x,R)=>{const H=R.childNodes;return H.length===1&&!Ir(H[0])&&x.isBlock(H[0])},lr=x=>Xe.from(x).map(xe.fromDom).filter(ro).exists(R=>kr(R)&&!gn(["details"],Mo(R))),ir=(x,R)=>{Nm(x,R)&&lr(R.firstChild)&&x.remove(R.firstChild,!0)},xu=(x,R,H)=>{let ce;const he=Nm(x,H)?H.firstChild:H;if(ir(x,R),!Rc(x,R,!0))for(;ce=R.firstChild;)he.appendChild(ce)},jl=(x,R,H)=>{let ce;const he=R.parentNode;if(!yc(x,R)||!yc(x,H))return;Ir(H.lastChild)&&(ce=H.lastChild),he===H.lastChild&&Ta(he.previousSibling)&&x.remove(he.previousSibling);const ot=H.lastChild;ot&&Ta(ot)&&R.hasChildNodes()&&x.remove(ot),Rc(x,H,!0)&&Fe(xe.fromDom(H)),xu(x,R,H),ce&&H.appendChild(ce);const so=Lt(xe.fromDom(H),xe.fromDom(R))?x.getParents(R,Ir,H):[];x.remove(R),ue(so,qn=>{Rc(x,qn)&&qn!==x.getRoot()&&x.remove(qn)})},wg=(x,R,H)=>{Fe(xe.fromDom(H)),jl(x.dom,R,H),x.selection.setCursorLocation(H,0)},cc=(x,R,H,ce)=>{const he=x.dom;if(he.isEmpty(ce))wg(x,H,ce);else{const ot=po(R);jl(he,H,ce),x.selection.setRng(aa(ot))}},hn=(x,R,H,ce)=>{const he=po(R);jl(x.dom,H,ce);const ot=aa(he);x.selection.setRng(ot)},qi=(x,R)=>{const H=x.dom,ce=x.selection,he=ce.getStart(),ot=nn(x,he),On=H.getParent(ce.getStart(),"LI",ot);if(On){const so=On.parentElement;if(so===x.getBody()&&Rc(H,so))return!0;const qn=Cc(ce.getRng()),pn=H.getParent(id(x,qn,R,ot),"LI",ot),ur=pn&&(R?H.isChildOf(On,pn):H.isChildOf(pn,On));if(pn&&pn!==On&&!ur)return x.undoManager.transact(()=>{R?cc(x,qn,pn,On):Ko(On)?Cu(x):hn(x,qn,On,pn)}),!0;if(ur&&!R&&pn!==On)return x.undoManager.transact(()=>{if(qn.commonAncestorContainer.parentElement){const Jr=po(qn),Da=qn.commonAncestorContainer.parentElement;xu(H,qn.commonAncestorContainer.parentElement,pn),Da.remove();const Ou=aa(Jr);x.selection.setRng(Ou)}}),!0;if(!pn&&!R&&qn.startOffset===0&&qn.endOffset===0)return x.undoManager.transact(()=>{bg(x)}),!0}return!1},Sg=(x,R,H)=>{const ce=x.getParent(R.parentNode,x.isBlock,H);x.remove(R),ce&&x.isEmpty(ce)&&x.remove(ce)},Al=(x,R)=>{const H=x.dom,ce=x.selection.getStart(),he=nn(x,ce),ot=H.getParent(ce,H.isBlock,he);if(ot&&H.isEmpty(ot,void 0,{checkRootAsContent:!0})){const On=Cc(x.selection.getRng()),so=H.getParent(id(x,On,R,he),"LI",he);if(so){const qn=Da=>gn(["td","th","caption"],Mo(Da)),pn=Da=>Da.dom===he,ur=bc(xe.fromDom(so),qn,pn),Jr=bc(xe.fromDom(On.startContainer),qn,pn);return je(ur,Jr,Ht)?(x.undoManager.transact(()=>{const Da=so.parentNode;Sg(H,ot,he),Wd(H,Da),x.selection.select(so,!0),x.selection.collapse(R)}),!0):!1}}return!1},Yo=(x,R)=>qi(x,R)||Al(x,R),Tu=x=>{const R=x.selection.getStart(),H=nn(x,R);return x.dom.getParent(R,"LI,DT,DD",H)||Ve(x).length>0},Pm=x=>Tu(x)?(x.undoManager.transact(()=>{let R=!0;const H=()=>R=!1;x.on("input",H),x.execCommand("Delete"),x.off("input",H),R&&x.dispatch("input"),Gd(x.dom,x.getBody())}),!0):!1,Sf=(x,R)=>{const H=x.selection;return!rc(x,H.getNode())&&(H.isCollapsed()?Yo(x,R):Pm(x))},xg=x=>{x.on("ExecCommand",R=>{const H=R.command.toLowerCase();(H==="delete"||H==="forwarddelete")&&Tu(x)&&Gd(x.dom,x.getBody())}),x.on("keydown",R=>{R.keyCode===ar.BACKSPACE?Sf(x,!1)&&R.preventDefault():R.keyCode===ar.DELETE&&Sf(x,!0)&&R.preventDefault()})},ao=x=>({backspaceDelete:R=>{Sf(x,R)}}),Lr=(x,R)=>{const H=U(x);H===null||rc(x,H)||x.undoManager.transact(()=>{Jn(R.styles)&&x.dom.setStyles(H,R.styles),Jn(R.attrs)&&Ks(R.attrs,(ce,he)=>x.dom.setAttrib(H,he,ce))})},Eu=x=>{const R=cn(Wr(x).split("")),H=Oe(R,(ce,he)=>{const ot=ce.toUpperCase().charCodeAt(0)-65+1;return Math.pow(26,he)*ot});return Mt(H,(ce,he)=>ce+he,0)},ku=x=>{if(x--,x<0)return"";{const R=x%26,H=Math.floor(x/26),ce=ku(H),he=String.fromCharCode(65+R);return ce+he}},fl=x=>/^[A-Z]+$/.test(x),Ya=x=>/^[a-z]+$/.test(x),Ol=x=>/^[0-9]+$/.test(x),Ds=x=>Ol(x)?2:fl(x)?0:Ya(x)?1:_l(x)?3:4,Gl=x=>{switch(Ds(x)){case 2:return Xe.some({listStyleType:Xe.none(),start:x});case 0:return Xe.some({listStyleType:Xe.some("upper-alpha"),start:Eu(x).toString()});case 1:return Xe.some({listStyleType:Xe.some("lower-alpha"),start:Eu(x).toString()});case 3:return Xe.some({listStyleType:Xe.none(),start:""});case 4:return Xe.none()}},ud=x=>{const R=parseInt(x.start,10);return Us(x.listStyleType,"upper-alpha")?ku(R):Us(x.listStyleType,"lower-alpha")?ku(R).toLowerCase():x.start},fc=x=>{const R=U(x);!Dc(R)||rc(x,R)||x.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:ud({start:x.dom.getAttrib(R,"start","1"),listStyleType:Xe.from(x.dom.getStyle(R,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:H=>{const ce=H.getData();Gl(ce.start).each(he=>{x.execCommand("mceListUpdate",!1,{attrs:{start:he.start==="1"?"":he.start},styles:{"list-style-type":he.listStyleType.getOr("")}})}),H.close()}})},ci=(x,R)=>()=>{const H=U(x);return xn(H)&&H.nodeName===R},Sr=x=>{x.addCommand("mceListProps",()=>{fc(x)})},_u=x=>{x.on("BeforeExecCommand",R=>{const H=R.command.toLowerCase();H==="indent"?Cf(x):H==="outdent"&&Cu(x)}),x.addCommand("InsertUnorderedList",(R,H)=>{yg(x,"UL",H)}),x.addCommand("InsertOrderedList",(R,H)=>{yg(x,"OL",H)}),x.addCommand("InsertDefinitionList",(R,H)=>{yg(x,"DL",H)}),x.addCommand("RemoveList",()=>{bg(x)}),Sr(x),x.addCommand("mceListUpdate",(R,H)=>{Jn(H)&&Lr(x,H)}),x.addQueryStateHandler("InsertUnorderedList",ci(x,"UL")),x.addQueryStateHandler("InsertOrderedList",ci(x,"OL")),x.addQueryStateHandler("InsertDefinitionList",ci(x,"DL"))};var qd=tinymce.util.Tools.resolve("tinymce.html.Node");const Ss=x=>x.type===3,ai=x=>x.length===0,xf=x=>{const R=(he,ot)=>{const On=qd.create("li");ue(he,so=>On.append(so)),ot?x.insert(On,ot,!0):x.append(On)},H=(he,ot)=>Ss(ot)?[...he,ot]:!ai(he)&&!Ss(ot)?(R(he,ot),[]):he,ce=Mt(x.children(),H,[]);ai(ce)||R(ce)},Ki=x=>{x.on("PreInit",()=>{const{parser:R}=x;R.addNodeFilter("ul,ol",H=>ue(H,xf))})},Hs=x=>{x.on("keydown",R=>{R.keyCode!==ar.TAB||ar.metaKeyPressed(R)||x.undoManager.transact(()=>{(R.shiftKey?Cu(x):Cf(x))&&R.preventDefault()})})},Au=x=>{ni(x)&&Hs(x),xg(x)},Xa=(x,R)=>H=>{const ce=he=>{H.setActive(fs(he.parents,R)),H.setEnabled(!rc(x,he.element)&&x.selection.isEditable())};return H.setEnabled(x.selection.isEditable()),kl(x,ce)},Kd=x=>{const R=H=>()=>x.execCommand(H);x.hasPlugin("advlist")||(x.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:R("InsertOrderedList"),onSetup:Xa(x,"OL")}),x.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:R("InsertUnorderedList"),onSetup:Xa(x,"UL")}))},To=(x,R)=>H=>kl(x,he=>H.setEnabled(fs(he.parents,R)&&!rc(x,he.element))),Yd=x=>{const R={text:"List properties...",icon:"ordered-list",onAction:()=>x.execCommand("mceListProps"),onSetup:To(x,"OL")};x.ui.registry.addMenuItem("listprops",R),x.ui.registry.addContextMenu("lists",{update:H=>{const ce=U(x,H);return Dc(ce)?["listprops"]:[]}})};var Tf=()=>{ht.add("lists",x=>(na(x),Ki(x),x.hasPlugin("rtc",!0)?Sr(x):(Au(x),_u(x)),Kd(x),Yd(x),ao(x)))};Tf()})();(function(){var ht=tinymce.util.Tools.resolve("tinymce.PluginManager");const _n=(le,re,De)=>{var Fe;return De(le,re.prototype)?!0:((Fe=le.constructor)===null||Fe===void 0?void 0:Fe.name)===re.name},jt=le=>{const re=typeof le;return le===null?"null":re==="object"&&Array.isArray(le)?"array":re==="object"&&_n(le,String,(De,Fe)=>Fe.isPrototypeOf(De))?"string":re},un=le=>re=>jt(re)===le,Ct=un("string"),Gt=un("object"),Jn=un("array"),Dt=le=>le==null,Yt=le=>!Dt(le);class io{constructor(re,De){this.tag=re,this.value=De}static some(re){return new io(!0,re)}static none(){return io.singletonNone}fold(re,De){return this.tag?De(this.value):re()}isSome(){return this.tag}isNone(){return!this.tag}map(re){return this.tag?io.some(re(this.value)):io.none()}bind(re){return this.tag?re(this.value):io.none()}exists(re){return this.tag&&re(this.value)}forall(re){return!this.tag||re(this.value)}filter(re){return!this.tag||re(this.value)?this:io.none()}getOr(re){return this.tag?this.value:re}or(re){return this.tag?this:re}getOrThunk(re){return this.tag?this.value:re()}orThunk(re){return this.tag?this:re()}getOrDie(re){if(this.tag)return this.value;throw new Error(re??"Called getOrDie on None")}static from(re){return Yt(re)?io.some(re):io.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(re){this.tag&&re(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}io.singletonNone=new io(!1);const xn=Array.prototype.push,Xt=(le,re)=>{for(let De=0,Fe=le.length;De<Fe;De++){const fn=le[De];re(fn,De)}},Mn=le=>{const re=[];for(let De=0,Fe=le.length;De<Fe;++De){if(!Jn(le[De]))throw new Error("Arr.flatten item "+De+" was not an array, input: "+le);xn.apply(re,le[De])}return re},zt=le=>{let re=le;return{get:()=>re,set:fn=>{re=fn}}},ft=Object.keys,et=Object.hasOwnProperty,ct=(le,re)=>{const De=ft(le);for(let Fe=0,fn=De.length;Fe<fn;Fe++){const Pn=De[Fe],Kn=le[Pn];re(Kn,Pn)}},Qn=(le,re)=>Re(le,re)?io.from(le[re]):io.none(),Re=(le,re)=>et.call(le,re),ee=le=>re=>re.options.get(le),Xe=le=>{const re=le.options.register;re("audio_template_callback",{processor:"function"}),re("video_template_callback",{processor:"function"}),re("iframe_template_callback",{processor:"function"}),re("media_live_embeds",{processor:"boolean",default:!0}),re("media_filter_html",{processor:"boolean",default:!0}),re("media_url_resolver",{processor:"function"}),re("media_alt_source",{processor:"boolean",default:!0}),re("media_poster",{processor:"boolean",default:!0}),re("media_dimensions",{processor:"boolean",default:!0})},Zn=ee("audio_template_callback"),Qe=ee("video_template_callback"),W=ee("iframe_template_callback"),xt=ee("media_live_embeds"),gn=ee("media_filter_html"),dn=ee("media_url_resolver"),Oe=ee("media_alt_source"),ue=ee("media_poster"),ts=ee("media_dimensions");var no=tinymce.util.Tools.resolve("tinymce.util.Tools"),Mt=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),A=tinymce.util.Tools.resolve("tinymce.html.DomParser");const Bo=Mt.DOM,tt=le=>le.replace(/px$/,""),Wo=le=>{const re=le.attr("style"),De=re?Bo.parseStyle(re):{};return{type:"ephox-embed-iri",source:le.attr("data-ephox-embed-iri"),altsource:"",poster:"",width:Qn(De,"max-width").map(tt).getOr(""),height:Qn(De,"max-height").map(tt).getOr("")}},cn=(le,re)=>{let De={};const fn=A({validate:!1,forced_root_block:!1},re).parse(le);for(let Pn=fn;Pn;Pn=Pn.walk())if(Pn.type===1){const Kn=Pn.name;if(Pn.attr("data-ephox-embed-iri")){De=Wo(Pn);break}else!De.source&&Kn==="param"&&(De.source=Pn.attr("movie")),(Kn==="iframe"||Kn==="object"||Kn==="embed"||Kn==="video"||Kn==="audio")&&(De.type||(De.type=Kn),De=no.extend(Pn.attributes.map,De)),Kn==="source"&&(De.source?De.altsource||(De.altsource=Pn.attr("src")):De.source=Pn.attr("src")),Kn==="img"&&!De.poster&&(De.poster=Pn.attr("src"))}return De.source=De.source||De.src||"",De.altsource=De.altsource||"",De.poster=De.poster||"",De},Je=le=>{var re;const De={mp3:"audio/mpeg",m4a:"audio/x-m4a",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"},Fe=(re=le.toLowerCase().split(".").pop())!==null&&re!==void 0?re:"";return Qn(De,Fe).getOr("")};var vo=tinymce.util.Tools.resolve("tinymce.html.Node"),Ms=tinymce.util.Tools.resolve("tinymce.html.Serializer");const ho=(le,re={})=>A({forced_root_block:!1,validate:!1,allow_conditional_comments:!0,...re},le),Us=Mt.DOM,je=le=>/^[0-9.]+$/.test(le)?le+"px":le,gt=(le,re)=>{const De=re.attr("style"),Fe=De?Us.parseStyle(De):{};Yt(le.width)&&(Fe["max-width"]=je(le.width)),Yt(le.height)&&(Fe["max-height"]=je(le.height)),re.attr("style",Us.serializeStyle(Fe))},F=["source","altsource"],dc=(le,re,De,Fe)=>{let fn=0,Pn=0;const Kn=ho(Fe);Kn.addNodeFilter("source",ge=>fn=ge.length);const ar=Kn.parse(le);for(let ge=ar;ge;ge=ge.walk())if(ge.type===1){const Yn=ge.name;if(ge.attr("data-ephox-embed-iri")){gt(re,ge);break}else{switch(Yn){case"video":case"object":case"embed":case"img":case"iframe":re.height!==void 0&&re.width!==void 0&&(ge.attr("width",re.width),ge.attr("height",re.height));break}if(De)switch(Yn){case"video":ge.attr("poster",re.poster),ge.attr("src",null);for(let vr=fn;vr<2;vr++)if(re[F[vr]]){const vc=new vo("source",1);vc.attr("src",re[F[vr]]),vc.attr("type",re[F[vr]+"mime"]||null),ge.append(vc)}break;case"iframe":ge.attr("src",re.source);break;case"object":const Ks=ge.getAll("img").length>0;if(re.poster&&!Ks){ge.attr("src",re.poster);const vr=new vo("img",1);vr.attr("src",re.poster),vr.attr("width",re.width),vr.attr("height",re.height),ge.append(vr)}break;case"source":if(Pn<2&&(ge.attr("src",re[F[Pn]]),ge.attr("type",re[F[Pn]+"mime"]||null),!re[F[Pn]])){ge.remove();continue}Pn++;break;case"img":re.poster||ge.remove();break}}}return Ms({},Fe).serialize(ar)},uo=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)\?h=(\w+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?h=$2&title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)\?h=(\w+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?h=$3&title=0&amp;byline=0",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],ds=le=>{const re=le.match(/^(https?:\/\/|www\.)(.+)$/i);return re&&re.length>1?re[1]==="www."?"https://":re[1]:"https://"},Go=(le,re)=>{const De=ds(re),Fe=le.regex.exec(re);let fn=De+le.url;if(Yt(Fe))for(let Pn=0;Pn<Fe.length;Pn++)fn=fn.replace("$"+Pn,()=>Fe[Pn]?Fe[Pn]:"");return fn.replace(/\?$/,"")},wa=le=>{const re=uo.filter(De=>De.regex.test(le));return re.length>0?no.extend({},re[0],{url:Go(re[0],le)}):null},Cn=(le,re)=>{if(re)return re(le);{const De=le.allowfullscreen?' allowFullscreen="1"':"";return'<iframe src="'+le.source+'" width="'+le.width+'" height="'+le.height+'"'+De+"></iframe>"}},So=le=>{let re='<object data="'+le.source+'" width="'+le.width+'" height="'+le.height+'" type="application/x-shockwave-flash">';return le.poster&&(re+='<img src="'+le.poster+'" width="'+le.width+'" height="'+le.height+'" />'),re+="</object>",re},Rn=(le,re)=>re?re(le):'<audio controls="controls" src="'+le.source+'">'+(le.altsource?`
<source src="`+le.altsource+'"'+(le.altsourcemime?' type="'+le.altsourcemime+'"':"")+` />
`:"")+"</audio>",xe=(le,re)=>re?re(le):'<video width="'+le.width+'" height="'+le.height+'"'+(le.poster?' poster="'+le.poster+'"':"")+` controls="controls">
<source src="`+le.source+'"'+(le.sourcemime?' type="'+le.sourcemime+'"':"")+` />
`+(le.altsource?'<source src="'+le.altsource+'"'+(le.altsourcemime?' type="'+le.altsourcemime+'"':"")+` />
`:"")+"</video>",zn=(le,re)=>{var De;const Fe=no.extend({},re);if(!Fe.source&&(no.extend(Fe,cn((De=Fe.embed)!==null&&De!==void 0?De:"",le.schema)),!Fe.source))return"";Fe.altsource||(Fe.altsource=""),Fe.poster||(Fe.poster=""),Fe.source=le.convertURL(Fe.source,"source"),Fe.altsource=le.convertURL(Fe.altsource,"source"),Fe.sourcemime=Je(Fe.source),Fe.altsourcemime=Je(Fe.altsource),Fe.poster=le.convertURL(Fe.poster,"poster");const fn=wa(Fe.source);if(fn&&(Fe.source=fn.url,Fe.type=fn.type,Fe.allowfullscreen=fn.allowFullscreen,Fe.width=Fe.width||String(fn.w),Fe.height=Fe.height||String(fn.h)),Fe.embed)return dc(Fe.embed,Fe,!0,le.schema);{const Pn=Zn(le),Kn=Qe(le),ar=W(le);return Fe.width=Fe.width||"300",Fe.height=Fe.height||"150",no.each(Fe,(ge,Yn)=>{Fe[Yn]=le.dom.encode(""+ge)}),Fe.type==="iframe"?Cn(Fe,ar):Fe.sourcemime==="application/x-shockwave-flash"?So(Fe):Fe.sourcemime.indexOf("audio")!==-1?Rn(Fe,Pn):xe(Fe,Kn)}},Ht=le=>le.hasAttribute("data-mce-object")||le.hasAttribute("data-ephox-embed-iri"),Lt=le=>{le.on("mousedown",re=>{const De=le.dom.getParent(re.target,".mce-preview-object");De&&le.dom.getAttrib(De,"data-mce-selected")==="2"&&re.stopImmediatePropagation()}),le.on("click keyup touchend",()=>{const re=le.selection.getNode();re&&le.dom.hasClass(re,"mce-preview-object")&&le.dom.getAttrib(re,"data-mce-selected")&&re.setAttribute("data-mce-selected","2")}),le.on("ObjectResized",re=>{const De=re.target;if(De.getAttribute("data-mce-object")){let Fe=De.getAttribute("data-mce-html");Fe&&(Fe=unescape(Fe),De.setAttribute("data-mce-html",escape(dc(Fe,{width:String(re.width),height:String(re.height)},!1,le.schema))))}})},Zo={},Ho=(le,re,De)=>new Promise((Fe,fn)=>{const Pn=Kn=>(Kn.html&&(Zo[le.source]=Kn),Fe({url:le.source,html:Kn.html?Kn.html:re(le)}));Zo[le.source]?Pn(Zo[le.source]):De({url:le.source}).then(Pn).catch(fn)}),pr=(le,re)=>Promise.resolve({html:re(le),url:le.source}),qo=le=>re=>zn(le,re),qs=(le,re)=>{const De=dn(le);return De?Ho(re,qo(le),De):pr(re,qo(le))},st=le=>Re(Zo,le),lt=(le,re)=>Qn(re,le).bind(De=>Qn(De,"meta")),tn=(le,re,De)=>Fe=>{const fn=()=>Qn(le,Fe),Pn=()=>Qn(re,Fe),Kn=Yn=>Qn(Yn,"value").bind(Ks=>Ks.length>0?io.some(Ks):io.none()),ar=()=>fn().bind(Yn=>Gt(Yn)?Kn(Yn).orThunk(Pn):Pn().orThunk(()=>io.from(Yn))),ge=()=>Pn().orThunk(()=>fn().bind(Yn=>Gt(Yn)?Kn(Yn):io.from(Yn)));return{[Fe]:(Fe===De?ar():ge()).getOr("")}},mn=(le,re)=>{const De={};return Qn(le,"dimensions").each(Fe=>{Xt(["width","height"],fn=>{Qn(re,fn).orThunk(()=>Qn(Fe,fn)).each(Pn=>De[fn]=Pn)})}),De},Mo=(le,re)=>{const De=re&&re!=="dimensions"?lt(re,le).getOr({}):{},Fe=tn(le,De,re);return{...Fe("source"),...Fe("altsource"),...Fe("poster"),...Fe("embed"),...mn(le,De)}},Ao=le=>{const re={...le,source:{value:Qn(le,"source").getOr("")},altsource:{value:Qn(le,"altsource").getOr("")},poster:{value:Qn(le,"poster").getOr("")}};return Xt(["width","height"],De=>{Qn(le,De).each(Fe=>{const fn=re.dimensions||{};fn[De]=Fe,re.dimensions=fn})}),re},jn=le=>re=>{const De=re&&re.msg?"Media embed handler error: "+re.msg:"Media embed handler threw unknown error.";le.notificationManager.open({type:"error",text:De})},jc=le=>{const re=le.selection.getNode(),De=Ht(re)?le.serializer.serialize(re,{selection:!0}):"",Fe=cn(De,le.schema),Pn=(()=>{if(Br(Fe.source,Fe.type)){const Kn=le.dom.getRect(re);return{width:Kn.w.toString().replace(/px$/,""),height:Kn.h.toString().replace(/px$/,"")}}else return{}})();return{embed:De,...Fe,...Pn}},ro=(le,re)=>De=>{if(Ct(De.url)&&De.url.trim().length>0){const Fe=De.html,Pn={...cn(Fe,re.schema),source:De.url,embed:Fe};le.setData(Ao(Pn))}},ns=(le,re)=>{const De=le.dom.select("*[data-mce-object]");for(let Fe=0;Fe<re.length;Fe++)for(let fn=De.length-1;fn>=0;fn--)re[Fe]===De[fn]&&De.splice(fn,1);le.selection.select(De[0])},cr=(le,re)=>{const De=le.dom.select("*[data-mce-object]");le.insertContent(re),ns(le,De),le.nodeChanged()},Br=(le,re)=>Yt(re)&&re==="ephox-embed-iri"&&Yt(wa(le)),ea=(le,re)=>((Fe,fn)=>Fe.width!==fn.width||Fe.height!==fn.height)(le,re)&&Br(re.source,le.type),Vt=(le,re,De)=>{var Fe;re.embed=ea(le,re)&&ts(De)?zn(De,{...re,embed:""}):dc((Fe=re.embed)!==null&&Fe!==void 0?Fe:"",re,!1,De.schema),re.embed&&(le.source===re.source||st(re.source))?cr(De,re.embed):qs(De,re).then(fn=>{cr(De,fn.html)}).catch(jn(De))},cl=le=>{const re=jc(le),De=zt(re),Fe=Ao(re),fn=(As,rs)=>{const ms=Mo(rs.getData(),"source");As.source!==ms.source&&(ro(zr,le)({url:ms.source,html:""}),qs(le,ms).then(ro(zr,le)).catch(jn(le)))},Pn=As=>{var rs;const ms=Mo(As.getData()),tc=cn((rs=ms.embed)!==null&&rs!==void 0?rs:"",le.schema);As.setData(Ao(tc))},Kn=(As,rs,ms)=>{const tc=Mo(As.getData(),rs),Ur=ea(ms,tc)&&ts(le)?{...tc,embed:""}:tc,Ps=zn(le,Ur);As.setData(Ao({...Ur,embed:Ps}))},ar=[{name:"source",type:"urlinput",filetype:"media",label:"Source",picker_text:"Browse files"}],ge=ts(le)?[{type:"sizeinput",name:"dimensions",label:"Constrain proportions",constrain:!0}]:[],Yn={title:"General",name:"general",items:Mn([ar,ge])},vr={title:"Embed",items:[{type:"textarea",name:"embed",label:"Paste your embed code below:"}]},vc=[];Oe(le)&&vc.push({name:"altsource",type:"urlinput",filetype:"media",label:"Alternative source URL"}),ue(le)&&vc.push({name:"poster",type:"urlinput",filetype:"image",label:"Media poster (Image URL)"});const ss={title:"Advanced",name:"advanced",items:vc},al=[Yn,vr];vc.length>0&&al.push(ss);const $r={type:"tabpanel",tabs:al},zr=le.windowManager.open({title:"Insert/Edit Media",size:"normal",body:$r,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:As=>{const rs=Mo(As.getData());Vt(De.get(),rs,le),As.close()},onChange:(As,rs)=>{switch(rs.name){case"source":fn(De.get(),As);break;case"embed":Pn(As);break;case"dimensions":case"altsource":case"poster":Kn(As,rs.name,De.get());break}De.set(Mo(As.getData()))},initialData:Fe})},pt=le=>({showDialog:()=>{cl(le)}}),yo=le=>{const re=()=>{cl(le)};le.addCommand("mceMedia",re)},Vr=(le,re,De)=>le.length>=re.length&&le.substr(De,De+re.length)===re,br=(le,re)=>Vr(le,re,0);var Oc=tinymce.util.Tools.resolve("tinymce.Env");const Gc=le=>{const re=le.name;return re==="iframe"||re==="video"||re==="audio"},os=(le,re,De,Fe=null)=>{const fn=le.attr(De);return Yt(fn)?fn:Re(re,De)?null:Fe},ta=(le,re,De)=>{const Fe=re.name==="img"||le.name==="video",fn=Fe?"300":null,Pn=le.name==="audio"?"30":"150",Kn=Fe?Pn:null;re.attr({width:os(le,De,"width",fn),height:os(le,De,"height",Kn)})},Sa=(le,re,De,Fe)=>{const fn=ho(le.schema).parse(Fe,{context:re});for(;fn.firstChild;)De.append(fn.firstChild)},Xo=(le,re)=>{const De=re.name,Fe=new vo("img",1);return Ls(le,re,Fe),ta(re,Fe,{}),Fe.attr({style:re.attr("style"),src:Oc.transparentSrc,"data-mce-object":De,class:"mce-object mce-object-"+De}),Fe},yn=(le,re)=>{var De;const Fe=re.name,fn=new vo("span",1);fn.attr({contentEditable:"false",style:re.attr("style"),"data-mce-object":Fe,class:"mce-preview-object mce-object-"+Fe}),Ls(le,re,fn);const Pn=le.dom.parseStyle((De=re.attr("style"))!==null&&De!==void 0?De:""),Kn=new vo(Fe,1);if(ta(re,Kn,Pn),Kn.attr({src:re.attr("src"),style:re.attr("style"),class:re.attr("class")}),Fe==="iframe")Kn.attr({allowfullscreen:re.attr("allowfullscreen"),frameborder:"0",sandbox:re.attr("sandbox"),referrerpolicy:re.attr("referrerpolicy")});else{Xt(["controls","crossorigin","currentTime","loop","muted","poster","preload"],Ks=>{Kn.attr(Ks,re.attr(Ks))});const Yn=fn.attr("data-mce-html");Yt(Yn)&&Sa(le,Fe,Kn,unescape(Yn))}const ar=new vo("span",1);return ar.attr("class","mce-shim"),fn.append(Kn),fn.append(ar),fn},Ls=(le,re,De)=>{var Fe;const fn=(Fe=re.attributes)!==null&&Fe!==void 0?Fe:[];let Pn=fn.length;for(;Pn--;){const Yn=fn[Pn].name;let Ks=fn[Pn].value;Yn!=="width"&&Yn!=="height"&&Yn!=="style"&&!br(Yn,"data-mce-")&&((Yn==="data"||Yn==="src")&&(Ks=le.convertURL(Ks,Yn)),De.attr("data-mce-p-"+Yn,Ks))}const Kn=Ms({inner:!0},le.schema),ar=new vo("div",1);Xt(re.children(),Yn=>ar.append(Yn));const ge=Kn.serialize(ar);ge&&(De.attr("data-mce-html",escape(ge)),De.empty())},bc=le=>{const re=le.attr("class");return Ct(re)&&/\btiny-pageembed\b/.test(re)},Vl=le=>{let re=le;for(;re=re.parent;)if(re.attr("data-ephox-embed-iri")||bc(re))return!0;return!1},zl=le=>re=>{let De=re.length,Fe;for(;De--;)Fe=re[De],Fe.parent&&(Fe.parent.attr("data-mce-object")||(Gc(Fe)&&xt(le)?Vl(Fe)||Fe.replace(yn(le,Fe)):Vl(Fe)||Fe.replace(Xo(le,Fe))))},hs=(le,re,De)=>{const Fe=le.options.get,fn=Fe("xss_sanitization"),Pn=gn(le);return ho(le.schema,{sanitize:fn,validate:Pn}).parse(De,{context:re})},kr=le=>{le.on("PreInit",()=>{const{schema:re,serializer:De,parser:Fe}=le,fn=re.getBoolAttrs();Xt("webkitallowfullscreen mozallowfullscreen".split(" "),Pn=>{fn[Pn]={}}),ct({embed:["wmode"]},(Pn,Kn)=>{const ar=re.getElementRule(Kn);ar&&Xt(Pn,ge=>{ar.attributes[ge]={},ar.attributesOrder.push(ge)})}),Fe.addNodeFilter("iframe,video,audio,object,embed",zl(le)),De.addAttributeFilter("data-mce-object",(Pn,Kn)=>{var ar;let ge=Pn.length;for(;ge--;){const Yn=Pn[ge];if(!Yn.parent)continue;const Ks=Yn.attr(Kn),vr=new vo(Ks,1);if(Ks!=="audio"){const $r=Yn.attr("class");$r&&$r.indexOf("mce-preview-object")!==-1&&Yn.firstChild?vr.attr({width:Yn.firstChild.attr("width"),height:Yn.firstChild.attr("height")}):vr.attr({width:Yn.attr("width"),height:Yn.attr("height")})}vr.attr({style:Yn.attr("style")});const vc=(ar=Yn.attributes)!==null&&ar!==void 0?ar:[];let ss=vc.length;for(;ss--;){const $r=vc[ss].name;$r.indexOf("data-mce-p-")===0&&vr.attr($r.substr(11),vc[ss].value)}const al=Yn.attr("data-mce-html");if(al){const $r=hs(le,Ks,unescape(al));Xt($r.children(),zr=>vr.append(zr))}Yn.replace(vr)}})}),le.on("SetContent",()=>{const re=le.dom;Xt(re.select("span.mce-preview-object"),De=>{re.select("span.mce-shim",De).length===0&&re.add(De,"span",{class:"mce-shim"})})})},Ns=le=>{le.on("ResolveName",re=>{let De;re.target.nodeType===1&&(De=re.target.getAttribute("data-mce-object"))&&(re.name=De)})},mc=le=>re=>{const De=()=>{re.setEnabled(le.selection.isEditable())};return le.on("NodeChange",De),De(),()=>{le.off("NodeChange",De)}},Fa=le=>{const re=()=>le.execCommand("mceMedia");le.ui.registry.addToggleButton("media",{tooltip:"Insert/edit media",icon:"embed",onAction:re,onSetup:De=>{const Fe=le.selection;De.setActive(Ht(Fe.getNode()));const fn=Fe.selectorChangedWithUnbind("img[data-mce-object],span[data-mce-object],div[data-ephox-embed-iri]",De.setActive).unbind,Pn=mc(le)(De);return()=>{fn(),Pn()}}}),le.ui.registry.addMenuItem("media",{icon:"embed",text:"Media...",onAction:re,onSetup:mc(le)})};var _r=()=>{ht.add("media",le=>(Xe(le),yo(le),Fa(le),Ns(le),kr(le),Lt(le),pt(le)))};_r()})();(function(){var ht=tinymce.util.Tools.resolve("tinymce.PluginManager"),_n=tinymce.util.Tools.resolve("tinymce.Env");const jt=ft=>et=>et.options.get(ft),un=ft=>{const et=ft.options.register;et("pagebreak_separator",{processor:"string",default:"<!-- pagebreak -->"}),et("pagebreak_split_block",{processor:"boolean",default:!1})},Ct=jt("pagebreak_separator"),Gt=jt("pagebreak_split_block"),Jn="mce-pagebreak",Dt=ft=>{const et=`<img src="${_n.transparentSrc}" class="${Jn}" data-mce-resize="false" data-mce-placeholder />`;return ft?`<p>${et}</p>`:et},Yt=ft=>{const et=Ct(ft),ct=()=>Gt(ft),Qn=new RegExp(et.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,Re=>"\\"+Re),"gi");ft.on("BeforeSetContent",Re=>{Re.content=Re.content.replace(Qn,Dt(ct()))}),ft.on("PreInit",()=>{ft.serializer.addNodeFilter("img",Re=>{let ee=Re.length,Xe,Zn;for(;ee--;)if(Xe=Re[ee],Zn=Xe.attr("class"),Zn&&Zn.indexOf(Jn)!==-1){const Qe=Xe.parent;if(Qe&&ft.schema.getBlockElements()[Qe.name]&&ct()){Qe.type=3,Qe.value=et,Qe.raw=!0,Xe.remove();continue}Xe.type=3,Xe.value=et,Xe.raw=!0}})})},io=ft=>{ft.addCommand("mcePageBreak",()=>{ft.insertContent(Dt(Gt(ft)))})},xn=ft=>{ft.on("ResolveName",et=>{et.target.nodeName==="IMG"&&ft.dom.hasClass(et.target,Jn)&&(et.name="pagebreak")})},Xt=ft=>et=>{const ct=()=>{et.setEnabled(ft.selection.isEditable())};return ft.on("NodeChange",ct),ct(),()=>{ft.off("NodeChange",ct)}},Mn=ft=>{const et=()=>ft.execCommand("mcePageBreak");ft.ui.registry.addButton("pagebreak",{icon:"page-break",tooltip:"Page break",onAction:et,onSetup:Xt(ft)}),ft.ui.registry.addMenuItem("pagebreak",{text:"Page break",icon:"page-break",onAction:et,onSetup:Xt(ft)})};var zt=()=>{ht.add("pagebreak",ft=>{un(ft),io(ft),Mn(ft),Yt(ft),xn(ft)})};zt()})();(function(){var ht=tinymce.util.Tools.resolve("tinymce.PluginManager"),_n=tinymce.util.Tools.resolve("tinymce.Env"),jt=tinymce.util.Tools.resolve("tinymce.util.Tools");const un=zt=>ft=>ft.options.get(zt),Ct=un("content_style"),Gt=un("content_css_cors"),Jn=un("body_class"),Dt=un("body_id"),Yt=zt=>{var ft;let et="";const ct=zt.dom.encode,Qn=(ft=Ct(zt))!==null&&ft!==void 0?ft:"";et+='<base href="'+ct(zt.documentBaseURI.getURI())+'">';const Re=Gt(zt)?' crossorigin="anonymous"':"";jt.each(zt.contentCSS,dn=>{et+='<link type="text/css" rel="stylesheet" href="'+ct(zt.documentBaseURI.toAbsolute(dn))+'"'+Re+">"}),Qn&&(et+='<style type="text/css">'+Qn+"</style>");const ee=Dt(zt),Xe=Jn(zt),Qe='<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A" && !('+(_n.os.isMacOS()||_n.os.isiOS()?"e.metaKey":"e.ctrlKey && !e.altKey")+")) {e.preventDefault();}}}, false);<\/script> ",W=zt.getBody().dir,xt=W?' dir="'+ct(W)+'"':"";return"<!DOCTYPE html><html><head>"+et+'</head><body id="'+ct(ee)+'" class="mce-content-body '+ct(Xe)+'"'+xt+">"+zt.getContent()+Qe+"</body></html>"},io=zt=>{const ft=Yt(zt);zt.windowManager.open({title:"Preview",size:"large",body:{type:"panel",items:[{name:"preview",type:"iframe",sandboxed:!0,transparent:!1}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{preview:ft}}).focus("close")},xn=zt=>{zt.addCommand("mcePreview",()=>{io(zt)})},Xt=zt=>{const ft=()=>zt.execCommand("mcePreview");zt.ui.registry.addButton("preview",{icon:"preview",tooltip:"Preview",onAction:ft,context:"any"}),zt.ui.registry.addMenuItem("preview",{icon:"preview",text:"Preview",onAction:ft,context:"any"})};var Mn=()=>{ht.add("preview",zt=>{xn(zt),Xt(zt)})};Mn()})();(function(){var ht=tinymce.util.Tools.resolve("tinymce.PluginManager");const _n=(w,_,L)=>{var Y;return L(w,_.prototype)?!0:((Y=w.constructor)===null||Y===void 0?void 0:Y.name)===_.name},jt=w=>{const _=typeof w;return w===null?"null":_==="object"&&Array.isArray(w)?"array":_==="object"&&_n(w,String,(L,Y)=>Y.isPrototypeOf(L))?"string":_},un=w=>_=>jt(_)===w,Ct=w=>_=>typeof _===w,Gt=w=>_=>w===_,Jn=un("string"),Dt=un("array"),Yt=Ct("boolean"),io=Gt(void 0),xn=w=>w==null,Xt=w=>!xn(w),Mn=Ct("function"),zt=Ct("number"),ft=()=>{},et=(w,_)=>L=>w(_(L)),ct=w=>()=>w,Qn=w=>w,Re=(w,_)=>w===_;function ee(w,..._){return(...L)=>{const Y=_.concat(L);return w.apply(null,Y)}}const Xe=w=>{w()},Zn=ct(!1),Qe=ct(!0);class W{constructor(_,L){this.tag=_,this.value=L}static some(_){return new W(!0,_)}static none(){return W.singletonNone}fold(_,L){return this.tag?L(this.value):_()}isSome(){return this.tag}isNone(){return!this.tag}map(_){return this.tag?W.some(_(this.value)):W.none()}bind(_){return this.tag?_(this.value):W.none()}exists(_){return this.tag&&_(this.value)}forall(_){return!this.tag||_(this.value)}filter(_){return!this.tag||_(this.value)?this:W.none()}getOr(_){return this.tag?this.value:_}or(_){return this.tag?this:_}getOrThunk(_){return this.tag?this.value:_()}orThunk(_){return this.tag?this:_()}getOrDie(_){if(this.tag)return this.value;throw new Error(_??"Called getOrDie on None")}static from(_){return Xt(_)?W.some(_):W.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(_){this.tag&&_(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}W.singletonNone=new W(!1);const xt=Object.keys,gn=Object.hasOwnProperty,dn=(w,_)=>{const L=xt(w);for(let Y=0,pe=L.length;Y<pe;Y++){const Ge=L[Y],St=w[Ge];_(St,Ge)}},Oe=w=>(_,L)=>{w[L]=_},ue=(w,_,L,Y)=>{dn(w,(pe,Ge)=>{(_(pe,Ge)?L:Y)(pe,Ge)})},ts=(w,_)=>{const L={};return ue(w,_,Oe(L),ft),L},no=(w,_)=>{const L=[];return dn(w,(Y,pe)=>{L.push(_(Y,pe))}),L},Mt=w=>no(w,Qn),A=w=>xt(w).length,Bo=(w,_)=>tt(w,_)?W.from(w[_]):W.none(),tt=(w,_)=>gn.call(w,_),Wo=(w,_)=>tt(w,_)&&w[_]!==void 0&&w[_]!==null,cn=w=>{for(const _ in w)if(gn.call(w,_))return!1;return!0},Je=Array.prototype.indexOf,vo=Array.prototype.push,Ms=(w,_)=>Je.call(w,_),ho=(w,_)=>Ms(w,_)>-1,Us=(w,_)=>{for(let L=0,Y=w.length;L<Y;L++){const pe=w[L];if(_(pe,L))return!0}return!1},je=(w,_)=>{const L=[];for(let Y=0;Y<w;Y++)L.push(_(Y));return L},gt=(w,_)=>{const L=w.length,Y=new Array(L);for(let pe=0;pe<L;pe++){const Ge=w[pe];Y[pe]=_(Ge,pe)}return Y},F=(w,_)=>{for(let L=0,Y=w.length;L<Y;L++){const pe=w[L];_(pe,L)}},dc=(w,_)=>{for(let L=w.length-1;L>=0;L--){const Y=w[L];_(Y,L)}},uo=(w,_)=>{const L=[],Y=[];for(let pe=0,Ge=w.length;pe<Ge;pe++){const St=w[pe];(_(St,pe)?L:Y).push(St)}return{pass:L,fail:Y}},ds=(w,_)=>{const L=[];for(let Y=0,pe=w.length;Y<pe;Y++){const Ge=w[Y];_(Ge,Y)&&L.push(Ge)}return L},Go=(w,_,L)=>(dc(w,(Y,pe)=>{L=_(L,Y,pe)}),L),wa=(w,_,L)=>(F(w,(Y,pe)=>{L=_(L,Y,pe)}),L),Cn=(w,_,L)=>{for(let Y=0,pe=w.length;Y<pe;Y++){const Ge=w[Y];if(_(Ge,Y))return W.some(Ge);if(L(Ge,Y))break}return W.none()},So=(w,_)=>Cn(w,_,Zn),Rn=w=>{const _=[];for(let L=0,Y=w.length;L<Y;++L){if(!Dt(w[L]))throw new Error("Arr.flatten item "+L+" was not an array, input: "+w);vo.apply(_,w[L])}return _},xe=(w,_)=>Rn(gt(w,_)),zn=(w,_)=>{for(let L=0,Y=w.length;L<Y;++L){const pe=w[L];if(_(pe,L)!==!0)return!1}return!0},Ht=(w,_)=>{const L={};for(let Y=0,pe=w.length;Y<pe;Y++){const Ge=w[Y];L[String(Ge)]=_(Ge,Y)}return L},Lt=(w,_)=>_>=0&&_<w.length?W.some(w[_]):W.none(),Zo=w=>Lt(w,0),Ho=w=>Lt(w,w.length-1),pr=(w,_)=>{for(let L=0;L<w.length;L++){const Y=_(w[L],L);if(Y.isSome())return Y}return W.none()},qo=8,qs=9,st=11,lt=1,tn=3,mn=(w,_)=>{const Y=(_||document).createElement("div");if(Y.innerHTML=w,!Y.hasChildNodes()||Y.childNodes.length>1){const pe="HTML does not have a single root node";throw console.error(pe,w),new Error(pe)}return jn(Y.childNodes[0])},Mo=(w,_)=>{const Y=(_||document).createElement(w);return jn(Y)},Ao=(w,_)=>{const Y=(_||document).createTextNode(w);return jn(Y)},jn=w=>{if(w==null)throw new Error("Node cannot be null or undefined");return{dom:w}},ro={fromHtml:mn,fromTag:Mo,fromText:Ao,fromDom:jn,fromPoint:(w,_,L)=>W.from(w.dom.elementFromPoint(_,L)).map(jn)},ns=(w,_)=>{const L=w.dom;if(L.nodeType!==lt)return!1;{const Y=L;if(Y.matches!==void 0)return Y.matches(_);if(Y.msMatchesSelector!==void 0)return Y.msMatchesSelector(_);if(Y.webkitMatchesSelector!==void 0)return Y.webkitMatchesSelector(_);if(Y.mozMatchesSelector!==void 0)return Y.mozMatchesSelector(_);throw new Error("Browser lacks native selectors")}},cr=w=>w.nodeType!==lt&&w.nodeType!==qs&&w.nodeType!==st||w.childElementCount===0,Br=(w,_)=>{const L=_===void 0?document:_.dom;return cr(L)?[]:gt(L.querySelectorAll(w),ro.fromDom)},ea=(w,_)=>{const L=_===void 0?document:_.dom;return cr(L)?W.none():W.from(L.querySelector(w)).map(ro.fromDom)},Vt=(w,_)=>w.dom===_.dom,cl=ns;typeof window<"u"||Function("return this;")();const pt=w=>w.dom.nodeName.toLowerCase(),yo=w=>w.dom.nodeType,Vr=w=>_=>yo(_)===w,br=w=>yo(w)===qo||pt(w)==="#comment",Oc=Vr(lt),Gc=Vr(tn),os=Vr(qs),ta=Vr(st),Sa=w=>_=>Oc(_)&&pt(_)===w,Xo=w=>ro.fromDom(w.dom.ownerDocument),yn=w=>os(w)?w:Xo(w),Ls=w=>W.from(w.dom.parentNode).map(ro.fromDom),bc=(w,_)=>{const L=Mn(_)?_:Zn;let Y=w.dom;const pe=[];for(;Y.parentNode!==null&&Y.parentNode!==void 0;){const Ge=Y.parentNode,St=ro.fromDom(Ge);if(pe.push(St),L(St)===!0)break;Y=Ge}return pe},Vl=w=>W.from(w.dom.previousSibling).map(ro.fromDom),zl=w=>W.from(w.dom.nextSibling).map(ro.fromDom),hs=w=>gt(w.dom.childNodes,ro.fromDom),kr=(w,_)=>{const L=w.dom.childNodes;return W.from(L[_]).map(ro.fromDom)},Ns=w=>kr(w,0),mc=w=>ta(w)&&Xt(w.dom.host),Fa=w=>ro.fromDom(w.dom.getRootNode()),_r=w=>{const _=Fa(w);return mc(_)?W.some(_):W.none()},le=w=>ro.fromDom(w.dom.host),re=w=>{const _=Gc(w)?w.dom.parentNode:w.dom;if(_==null||_.ownerDocument===null)return!1;const L=_.ownerDocument;return _r(ro.fromDom(_)).fold(()=>L.body.contains(_),et(re,le))};var De=(w,_,L,Y,pe)=>w(L,Y)?W.some(L):Mn(pe)&&pe(L)?W.none():_(L,Y,pe);const Fe=(w,_,L)=>{let Y=w.dom;const pe=Mn(L)?L:Zn;for(;Y.parentNode;){Y=Y.parentNode;const Ge=ro.fromDom(Y);if(_(Ge))return W.some(Ge);if(pe(Ge))break}return W.none()},fn=(w,_,L)=>De((pe,Ge)=>Ge(pe),Fe,w,_,L),Pn=(w,_)=>{const L=pe=>_(ro.fromDom(pe));return So(w.dom.childNodes,L).map(ro.fromDom)},Kn=(w,_,L)=>Fe(w,Y=>ns(Y,_),L),ar=(w,_)=>Pn(w,L=>ns(L,_)),ge=(w,_)=>ea(_,w),Yn=(w,_,L)=>De((pe,Ge)=>ns(pe,Ge),Kn,w,_,L),Ks=w=>Yn(w,"[contenteditable]"),vr=(w,_=!1)=>re(w)?w.dom.isContentEditable:Ks(w).fold(ct(_),L=>vc(L)==="true"),vc=w=>w.dom.contentEditable,ss=w=>w.nodeName.toLowerCase(),al=w=>ro.fromDom(w.getBody()),$r=w=>_=>Vt(_,al(w)),zr=w=>w?w.replace(/px$/,""):"",As=w=>/^\d+(\.\d+)?$/.test(w)?w+"px":w,rs=w=>ro.fromDom(w.selection.getStart()),ms=w=>ro.fromDom(w.selection.getEnd()),tc=w=>fn(w,Sa("table")).forall(vr),Ur=(w,_)=>ds(hs(w),_),Ps=(w,_)=>{let L=[];return F(hs(w),Y=>{_(Y)&&(L=L.concat([Y])),L=L.concat(Ps(Y,_))}),L},Ga=(w,_)=>Ur(w,L=>ns(L,_)),xa=(w,_)=>Br(_,w),xo=(w,_,L)=>{if(Jn(L)||Yt(L)||zt(L))w.setAttribute(_,L+"");else throw console.error("Invalid call to Attribute.set. Key ",_,":: Value ",L,":: Element ",w),new Error("Attribute value was not simple")},Kr=(w,_,L)=>{xo(w.dom,_,L)},Ir=(w,_)=>{const L=w.dom;dn(_,(Y,pe)=>{xo(L,pe,Y)})},Ha=(w,_)=>{const L=w.dom.getAttribute(_);return L===null?void 0:L},Dc=(w,_)=>W.from(Ha(w,_)),Ar=(w,_)=>{w.dom.removeAttribute(_)},Os=w=>wa(w.dom.attributes,(_,L)=>(_[L.name]=L.value,_),{}),ed=(w,_,L=Re)=>w.exists(Y=>L(Y,_)),Ta=w=>{const _=[],L=Y=>{_.push(Y)};for(let Y=0;Y<w.length;Y++)w[Y].each(L);return _},Ko=(w,_,L)=>w.isSome()&&_.isSome()?W.some(L(w.getOrDie(),_.getOrDie())):W.none(),nc=w=>w.bind(Qn),oc=(w,_)=>w?W.some(_):W.none(),Or=(w,_)=>w.substring(_),Ul=(w,_,L)=>_===""||w.length>=_.length&&w.substr(L,L+_.length)===_,Rc=(w,_)=>yc(w,_)?Or(w,_.length):w,yc=(w,_)=>Ul(w,_,0),na=(w=>_=>_.replace(w,""))(/^\s+|\s+$/g),ni=w=>w.length>0,oi=w=>!ni(w),El=(w,_=10)=>{const L=parseInt(w,_);return isNaN(L)?W.none():W.some(L)},oa=w=>{const _=parseFloat(w);return isNaN(_)?W.none():W.some(_)},Yr=w=>w.style!==void 0&&Mn(w.style.getPropertyValue),Wl=(w,_,L)=>{if(!Jn(L))throw console.error("Invalid call to CSS.set. Property ",_,":: Value ",L,":: Element ",w),new Error("CSS value must be a string: "+L);Yr(w)&&w.style.setProperty(_,L)},Zl=(w,_)=>{Yr(w)&&w.style.removeProperty(_)},Ci=(w,_,L)=>{const Y=w.dom;Wl(Y,_,L)},ll=(w,_)=>{const L=w.dom,pe=window.getComputedStyle(L).getPropertyValue(_);return pe===""&&!re(w)?Dr(L,_):pe},Dr=(w,_)=>Yr(w)?w.style.getPropertyValue(_):"",sa=(w,_)=>{const L=w.dom,Y=Dr(L,_);return W.from(Y).filter(pe=>pe.length>0)},sc=(w,_)=>{const L=w.dom;Zl(L,_),ed(Dc(w,"style").map(na),"")&&Ar(w,"style")},Cc=(w,_,L=0)=>Dc(w,_).map(Y=>parseInt(Y,10)).getOr(L),wi=(w,_)=>Si(w,_,Qe),Si=(w,_,L)=>xe(hs(w),Y=>ns(Y,_)?L(Y)?[Y]:[]:Si(Y,_,L)),U=["tfoot","thead","tbody","colgroup"],se=w=>ho(U,w),be=(w,_)=>({rows:w,columns:_}),ze=(w,_,L)=>({element:w,rowspan:_,colspan:L}),bt=(w,_,L,Y,pe,Ge)=>({element:w,rowspan:_,colspan:L,row:Y,column:pe,isLocked:Ge}),Ve=(w,_,L)=>({element:w,cells:_,section:L}),Vo=(w,_,L,Y)=>({startRow:w,startCol:_,finishRow:L,finishCol:Y}),nn=(w,_,L)=>({element:w,colspan:_,column:L}),Hn=(w,_)=>({element:w,columns:_}),Fs=(w,_,L=Zn)=>{if(L(_))return W.none();if(ho(w,pt(_)))return W.some(_);const Y=pe=>ns(pe,"table")||L(pe);return Kn(_,w.join(","),Y)},B=(w,_)=>Fs(["td","th"],w,_),K=w=>wi(w,"th,td"),ie=w=>ns(w,"colgroup")?Ga(w,"col"):xe(co(w),_=>Ga(_,"col")),Ee=(w,_)=>Yn(w,"table",_),qe=w=>wi(w,"tr"),co=w=>Ee(w).fold(ct([]),_=>Ga(_,"colgroup")),Jo=(w,_)=>gt(w,L=>{if(pt(L)==="colgroup"){const Y=gt(ie(L),pe=>{const Ge=Cc(pe,"span",1);return ze(pe,1,Ge)});return Ve(L,Y,"colgroup")}else{const Y=gt(K(L),pe=>{const Ge=Cc(pe,"rowspan",1),St=Cc(pe,"colspan",1);return ze(pe,Ge,St)});return Ve(L,Y,_(L))}}),fs=w=>Ls(w).map(_=>{const L=pt(_);return se(L)?L:"tbody"}).getOr("tbody"),it=w=>{const _=qe(w),Y=[...co(w),..._];return Jo(Y,fs)},bs="data-snooker-locked-cols",rc=w=>Dc(w,bs).bind(_=>W.from(_.match(/\d+/g))).map(_=>Ht(_,Qe)),kl=(w,_)=>w+","+_,Gn=(w,_,L)=>W.from(w.access[kl(_,L)]),ka=(w,_,L)=>{const Y=qa(w,pe=>L(_,pe.element));return Y.length>0?W.some(Y[0]):W.none()},qa=(w,_)=>{const L=xe(w.all,Y=>Y.cells);return ds(L,_)},Wr=w=>{const _={};let L=0;return F(w.cells,Y=>{const pe=Y.colspan;je(pe,Ge=>{const St=L+Ge;_[St]=nn(Y.element,pe,St)}),L+=pe}),_},vs=w=>{const _={},L=[],pe=Zo(w).map(gl=>gl.element).bind(Ee).bind(rc).getOr({});let Ge=0,St=0,on=0;const{pass:Fn,fail:lo}=uo(w,gl=>gl.section==="colgroup");F(lo,gl=>{const ii=[];F(gl.cells,ia=>{let Mu=0;for(;_[kl(on,Mu)]!==void 0;)Mu++;const md=Wo(pe,Mu.toString()),fd=bt(ia.element,ia.rowspan,ia.colspan,on,Mu,md);for(let Qd=0;Qd<ia.colspan;Qd++)for(let _f=0;_f<ia.rowspan;_f++){const Mg=on+_f,qh=Mu+Qd,gc=kl(Mg,qh);_[gc]=fd,St=Math.max(St,qh+1)}ii.push(fd)}),Ge++,L.push(Ve(gl.element,ii,gl.section)),on++});const{columns:js,colgroups:gs}=Ho(Fn).map(gl=>{const ii=Wr(gl);return{colgroups:[Hn(gl.element,Mt(ii))],columns:ii}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:be(Ge,St),access:_,all:L,columns:js,colgroups:gs}},il={fromTable:w=>{const _=it(w);return vs(_)},generate:vs,getAt:Gn,findItem:ka,filterItems:qa,justCells:w=>xe(w.all,_=>_.cells),justColumns:w=>Mt(w.columns),hasColumns:w=>xt(w.columns).length>0,getColumnAt:(w,_)=>W.from(w.columns[_])};var Ws=tinymce.util.Tools.resolve("tinymce.util.Tools");const ul=(w,_,L)=>{const Y=w.select("td,th",_);let pe;for(let Ge=0;Ge<Y.length;Ge++){const St=w.getStyle(Y[Ge],L);if(io(pe)&&(pe=St),pe!==St)return""}return pe},ra=(w,_,L)=>{Ws.each("left center right".split(" "),Y=>{Y!==L&&w.formatter.remove("align"+Y,{},_)}),L&&w.formatter.apply("align"+L,{},_)},nd=(w,_,L)=>{Ws.each("top middle bottom".split(" "),Y=>{Y!==L&&w.formatter.remove("valign"+Y,{},_)}),L&&w.formatter.apply("valign"+L,{},_)},G=(w,_,L)=>{w.dispatch("TableModified",{...L,table:_})},Q=(w,_)=>oa(w).getOr(_),ke=(w,_,L)=>Q(ll(w,_),L),Ue=(w,_,L,Y)=>{const pe=ke(w,`padding-${L}`,0),Ge=ke(w,`padding-${Y}`,0),St=ke(w,`border-${L}-width`,0),on=ke(w,`border-${Y}-width`,0);return _-pe-Ge-St-on},wn=(w,_)=>{const L=w.dom,Y=L.getBoundingClientRect().width||L.offsetWidth;return _==="border-box"?Y:Ue(w,Y,"left","right")},mo=w=>wn(w,"content-box");var ws=tinymce.util.Tools.resolve("tinymce.Env");const Rr="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",ca=je(5,w=>{const _=`${w+1}px`;return{title:_,value:_}}),Mc=gt(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],w=>({title:w,value:w.toLowerCase()})),yr="100%",Cr=w=>{var _;const L=w.dom,Y=(_=L.getParent(w.selection.getStart(),L.isBlock))!==null&&_!==void 0?_:w.getBody();return mo(ro.fromDom(Y))+"px"},Xr=(w,_)=>cd(w)||!dl(w)?_:Om(w)?{..._,width:Cr(w)}:{..._,width:yr},Nc=(w,_)=>cd(w)||dl(w)?_:Om(w)?{..._,width:Cr(w)}:{..._,width:yr},Xs=w=>_=>_.options.get(w),wr=w=>{const _=w.options.register;_("table_border_widths",{processor:"object[]",default:ca}),_("table_border_styles",{processor:"object[]",default:Mc}),_("table_cell_advtab",{processor:"boolean",default:!0}),_("table_row_advtab",{processor:"boolean",default:!0}),_("table_advtab",{processor:"boolean",default:!0}),_("table_appearance_options",{processor:"boolean",default:!0}),_("table_grid",{processor:"boolean",default:!ws.deviceType.isTouch()}),_("table_cell_class_list",{processor:"object[]",default:[]}),_("table_row_class_list",{processor:"object[]",default:[]}),_("table_class_list",{processor:"object[]",default:[]}),_("table_toolbar",{processor:"string",default:Rr}),_("table_background_color_map",{processor:"object[]",default:[]}),_("table_border_color_map",{processor:"object[]",default:[]})},Zs=Xs("table_sizing_mode"),si=Xs("table_border_widths"),Vd=Xs("table_border_styles"),Zi=Xs("table_cell_advtab"),od=Xs("table_row_advtab"),sd=Xs("table_advtab"),vu=Xs("table_appearance_options"),yu=Xs("table_grid"),dl=Xs("table_style_by_css"),_a=Xs("table_cell_class_list"),pg=Xs("table_row_class_list"),xi=Xs("table_class_list"),vf=Xs("table_toolbar"),rd=Xs("table_background_color_map"),yf=Xs("table_border_color_map"),Om=w=>Zs(w)==="fixed",cd=w=>Zs(w)==="responsive",Dm=w=>{const _=w.options,L=_.get("table_default_styles");return _.isSet("table_default_styles")?L:Xr(w,L)},Cf=w=>{const _=w.options,L=_.get("table_default_attributes");return _.isSet("table_default_attributes")?L:Nc(w,L)},Cu=(w,_)=>_.column>=w.startCol&&_.column+_.colspan-1<=w.finishCol&&_.row>=w.startRow&&_.row+_.rowspan-1<=w.finishRow,bg=(w,_)=>{let L=!0;const Y=ee(Cu,_);for(let pe=_.startRow;pe<=_.finishRow;pe++)for(let Ge=_.startCol;Ge<=_.finishCol;Ge++)L=L&&il.getAt(w,pe,Ge).exists(Y);return L?W.some(_):W.none()},de=(w,_)=>Vo(Math.min(w.row,_.row),Math.min(w.column,_.column),Math.max(w.row+w.rowspan-1,_.row+_.rowspan-1),Math.max(w.column+w.colspan-1,_.column+_.colspan-1)),ad=(w,_,L)=>{const Y=il.findItem(w,_,Vt),pe=il.findItem(w,L,Vt);return Y.bind(Ge=>pe.map(St=>de(Ge,St)))},ml=(w,_,L)=>ad(w,_,L).bind(Y=>bg(w,Y)),Ih=(w,_,L)=>{const Y=Lh(w);return ml(Y,_,L)},Lh=il.fromTable,wu=(w,_)=>{Ls(w).each(Y=>{Y.dom.insertBefore(_.dom,w.dom)})},po=(w,_)=>{zl(w).fold(()=>{Ls(w).each(pe=>{Pc(pe,_)})},Y=>{wu(Y,_)})},aa=(w,_)=>{Ns(w).fold(()=>{Pc(w,_)},Y=>{w.dom.insertBefore(_.dom,Y.dom)})},Pc=(w,_)=>{w.dom.appendChild(_.dom)},Su=(w,_)=>{wu(w,_),Pc(_,w)},wf=(w,_)=>{F(_,(L,Y)=>{const pe=Y===0?w:_[Y-1];po(pe,L)})},zd=(w,_)=>{F(_,L=>{Pc(w,L)})},la=w=>{const _=w.dom;_.parentNode!==null&&_.parentNode.removeChild(_)},Rm=w=>{const _=hs(w);_.length>0&&wf(w,_),la(w)},Mm=((w,_)=>{const L=Ge=>{if(!w(Ge))throw new Error("Can only get "+_+" value of a "+_+" node");return Y(Ge).getOr("")},Y=Ge=>w(Ge)?W.from(Ge.dom.nodeValue):W.none();return{get:L,getOption:Y,set:(Ge,St)=>{if(!w(Ge))throw new Error("Can only set raw "+_+" value of a "+_+" node");Ge.dom.nodeValue=St}}})(Gc,"text"),Gi=w=>Mm.get(w),Aa=(w,_)=>Mm.set(w,_);var Fh=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Ud=()=>{const w=lo=>ro.fromDom(lo.dom.cloneNode(!1)),_=lo=>yn(lo).dom,L=lo=>Oc(lo)?pt(lo)==="body"?!0:ho(Fh,pt(lo)):!1,Y=lo=>Oc(lo)?ho(["br","img","hr","input"],pt(lo)):!1,pe=lo=>Oc(lo)&&Ha(lo,"contenteditable")==="false",Ge=(lo,js)=>lo.dom.compareDocumentPosition(js.dom),St=(lo,js)=>{const gs=Os(lo);Ir(js,gs)},on=lo=>{const js=pt(lo);return ho(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],js)},Fn=lo=>Oc(lo)?Dc(lo,"lang"):W.none();return{up:ct({selector:Kn,closest:Yn,predicate:Fe,all:bc}),down:ct({selector:xa,predicate:Ps}),styles:ct({get:ll,getRaw:sa,set:Ci,remove:sc}),attrs:ct({get:Ha,set:Kr,remove:Ar,copyTo:St}),insert:ct({before:wu,after:po,afterAll:wf,append:Pc,appendAll:zd,prepend:aa,wrap:Su}),remove:ct({unwrap:Rm,remove:la}),create:ct({nu:ro.fromTag,clone:w,text:ro.fromText}),query:ct({comparePosition:Ge,prevSibling:Vl,nextSibling:zl}),property:ct({children:hs,name:pt,parent:Ls,document:_,isText:Gc,isComment:br,isElement:Oc,isSpecial:on,getLanguage:Fn,getText:Gi,setText:Aa,isBoundary:L,isEmptyTag:Y,isNonEditable:pe}),eq:Vt,is:cl}};const wc=(w,_,L,Y)=>{const pe=L[0],Ge=L.slice(1);return Y(w,_,pe,Ge)},Ka=(w,_,L)=>L.length>0?wc(w,_,L,Oa):W.none(),Oa=(w,_,L,Y)=>{const pe=_(w,L);return Go(Y,(Ge,St)=>{const on=_(w,St);return ld(w,Ge,on)},pe)},ld=(w,_,L)=>_.bind(Y=>L.filter(ee(w.eq,Y))),Wd=Ka,vg=Ud(),Zd=(w,_)=>Wd(vg,(L,Y)=>w(Y),_),ri=w=>Kn(w,"table"),jd=(w,_)=>{const L=xa(w,_);return L.length>0?W.some(L):W.none()},S1=(w,_,L)=>ge(w,_).bind(Y=>ge(w,L).bind(pe=>Zd(ri,[Y,pe]).map(Ge=>({first:Y,last:pe,table:Ge})))),yg=(w,_)=>jd(w,_),Hh=(w,_,L)=>S1(w,_,L).bind(Y=>{const pe=Fn=>Vt(w,Fn),Ge="thead,tfoot,tbody,table",St=Kn(Y.first,Ge,pe),on=Kn(Y.last,Ge,pe);return St.bind(Fn=>on.bind(lo=>Vt(Fn,lo)?Ih(Y.table,Y.first,Y.last):W.none()))}),Cg=w=>gt(w,ro.fromDom),Gd="data-mce-selected",id="td["+Gd+"],th["+Gd+"]",Nm="data-mce-first-selected",lr="td["+Nm+"],th["+Nm+"]",ir="data-mce-last-selected",xu="td["+ir+"],th["+ir+"]",jl={selected:Gd,selectedSelector:id,firstSelected:Nm,firstSelectedSelector:lr,lastSelected:ir,lastSelectedSelector:xu},wg=w=>Ee(w).bind(_=>yg(_,jl.firstSelectedSelector)).fold(ct(w),_=>_[0]),cc=w=>(_,L)=>{const Y=pt(_),pe=Y==="col"||Y==="colgroup"?wg(_):_;return Yn(pe,w,L)},hn=cc("th,td,caption"),qi=cc("th,td"),Sg=w=>Cg(w.model.table.getSelectedCells()),Al=(w,_)=>{const L=qi(w),Y=L.bind(pe=>Ee(pe)).map(pe=>qe(pe));return Ko(L,Y,(pe,Ge)=>ds(Ge,St=>Us(Cg(St.dom.cells),on=>Ha(on,_)==="1"||Vt(on,pe)))).getOr([])},Yo=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],Tu=w=>({value:ao(w)}),Pm=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Sf=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,xg=w=>Pm.test(w)||Sf.test(w),ao=w=>Rc(w,"#").toUpperCase(),Lr=w=>xg(w)?W.some({value:ao(w)}):W.none(),Eu=w=>{const _=w.toString(16);return(_.length===1?"0"+_:_).toUpperCase()},ku=w=>{const _=Eu(w.red)+Eu(w.green)+Eu(w.blue);return Tu(_)},fl=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,Ya=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,Ol=(w,_,L,Y)=>({red:w,green:_,blue:L,alpha:Y}),Ds=(w,_,L,Y)=>{const pe=parseInt(w,10),Ge=parseInt(_,10),St=parseInt(L,10),on=parseFloat(Y);return Ol(pe,Ge,St,on)},Gl=w=>{const _=fl.exec(w);if(_!==null)return W.some(Ds(_[1],_[2],_[3],"1"));const L=Ya.exec(w);return L!==null?W.some(Ds(L[1],L[2],L[3],L[4])):W.none()},ud=w=>Lr(w).orThunk(()=>Gl(w).map(ku)).getOrThunk(()=>{const _=document.createElement("canvas");_.height=1,_.width=1;const L=_.getContext("2d");L.clearRect(0,0,_.width,_.height),L.fillStyle="#FFFFFF",L.fillStyle=w,L.fillRect(0,0,1,1);const Y=L.getImageData(0,0,1,1).data,pe=Y[0],Ge=Y[1],St=Y[2],on=Y[3];return ku(Ol(pe,Ge,St,on))}),fc=w=>Gl(w).map(ku).map(_=>"#"+_.value).getOr(w),ci=w=>{let _=w;return{get:()=>_,set:pe=>{_=pe}}},Sr=w=>{const _=ci(W.none()),L=()=>_.get().each(w);return{clear:()=>{L(),_.set(W.none())},isSet:()=>_.get().isSome(),get:()=>_.get(),set:on=>{L(),_.set(W.some(on))}}},_u=()=>Sr(w=>w.unbind()),qd=(w,_,L)=>Y=>{const pe=_u(),Ge=oi(L),St=()=>{const on=Sg(w),Fn=lo=>w.formatter.match(_,{value:L},lo.dom,Ge);Ge?(Y.setActive(!Us(on,Fn)),pe.set(w.formatter.formatChanged(_,lo=>Y.setActive(!lo),!0))):(Y.setActive(zn(on,Fn)),pe.set(w.formatter.formatChanged(_,Y.setActive,!1,{value:L})))};return w.initialized?St():w.on("init",St),pe.clear},Ss=w=>Wo(w,"menu"),ai=w=>gt(w,_=>{const L=_.text||_.title||"";return Ss(_)?{text:L,items:ai(_.menu)}:{text:L,value:_.value}}),xf=w=>w.length?W.some(ai([{text:"Select...",value:"mce-no-match"},...w])):W.none(),Ki=(w,_,L,Y)=>gt(_,pe=>{const Ge=pe.text||pe.title;return Ss(pe)?{type:"nestedmenuitem",text:Ge,getSubmenuItems:()=>Ki(w,pe.menu,L,Y)}:{text:Ge,type:"togglemenuitem",onAction:()=>Y(pe.value),onSetup:qd(w,L,pe.value)}}),Hs=(w,_)=>L=>{w.execCommand("mceTableApplyCellStyle",!1,{[_]:L})},Au=w=>xe(w,_=>Ss(_)?[{..._,menu:Au(_.menu)}]:ni(_.value)?[_]:[]),Xa=(w,_,L,Y)=>pe=>pe(Ki(w,_,L,Y)),Kd=(w,_,L)=>{const Y=gt(_,pe=>({text:pe.title,value:"#"+ud(pe.value).value,type:"choiceitem"}));return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:Y.length>0?Y:void 0,allowCustomColors:!1},onAction:pe=>{const Ge=pe.value==="remove"?"":pe.value;w.execCommand("mceTableApplyCellStyle",!1,{[L]:Ge})}}]},To=w=>()=>{const L=w.queryCommandValue("mceTableRowType")==="header"?"body":"header";w.execCommand("mceTableRowType",!1,{type:L})},Yd=w=>()=>{const L=w.queryCommandValue("mceTableColType")==="th"?"td":"th";w.execCommand("mceTableColType",!1,{type:L})},Tf=w=>xf(_a(w)).map(_=>({name:"class",type:"listbox",label:"Class",items:_})),x=[{name:"width",type:"input",label:"Width"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:Yo}],R=w=>x.concat(Tf(w).toArray()),H=(w,_)=>{const Y=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(ai(Vd(w)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:_==="cell"?[{name:"borderwidth",type:"input",label:"Border width"}].concat(Y):Y}},he={normal:(w,_)=>{const L=w.dom;return{setAttrib:(St,on)=>{L.setAttrib(_,St,on)},setStyle:(St,on)=>{L.setStyle(_,St,on)},setFormat:(St,on)=>{on===""?w.formatter.remove(St,{value:null},_,!0):w.formatter.apply(St,{value:on},_)}}}},ot=Sa("th"),On=(w,_)=>w&&_?"sectionCells":w?"section":"cells",so=w=>{const _=w.section==="thead",L=ed(qn(w.cells),"th");return w.section==="tfoot"?{type:"footer"}:_||L?{type:"header",subType:On(_,L)}:{type:"body"}},qn=w=>{const _=ds(w,L=>ot(L.element));return _.length===0?W.some("td"):_.length===w.length?W.some("th"):W.none()},pn=w=>{const _=gt(w,pe=>so(pe).type),L=ho(_,"header"),Y=ho(_,"footer");if(!L&&!Y)return W.some("body");{const pe=ho(_,"body");return L&&!pe&&!Y?W.some("header"):!L&&!pe&&Y?W.some("footer"):W.none()}},ur=w=>{let _=!1,L;return(...Y)=>(_||(_=!0,L=w.apply(null,Y)),L)},Jr=(w,_)=>pr(w.all,L=>So(L.cells,Y=>Vt(_,Y.element))),Da=(w,_,L)=>{const Y=gt(_.selection,Ge=>B(Ge).bind(St=>Jr(w,St)).filter(L)),pe=Ta(Y);return oc(pe.length>0,pe)},Ou=(w,_)=>_.mergable,Bm=(w,_)=>_.unmergable,Tg=(w,_)=>Da(w,_,Qe),Ja=(w,_)=>Jr(w,_).exists(L=>!L.isLocked),Eg=(w,_)=>zn(_,L=>Ja(w,L)),gv=(w,_)=>Ou(w,_).filter(L=>Eg(w,L.cells)),x1=(w,_)=>Bm(w,_).filter(L=>Eg(w,L));({...{generate:w=>{if(!Dt(w))throw new Error("cases must be an array");if(w.length===0)throw new Error("there must be at least one case");const _=[],L={};return F(w,(Y,pe)=>{const Ge=xt(Y);if(Ge.length!==1)throw new Error("one and only one name per case");const St=Ge[0],on=Y[St];if(L[St]!==void 0)throw new Error("duplicate key detected:"+St);if(St==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Dt(on))throw new Error("case arguments must be an array");_.push(St),L[St]=(...Fn)=>{const lo=Fn.length;if(lo!==on.length)throw new Error("Wrong number of arguments to case "+St+". Expected "+on.length+" ("+on+"), got "+lo);return{fold:(...gs)=>{if(gs.length!==w.length)throw new Error("Wrong number of arguments to fold. Expected "+w.length+", got "+gs.length);return gs[pe].apply(null,Fn)},match:gs=>{const dr=xt(gs);if(_.length!==dr.length)throw new Error("Wrong number of arguments to match. Expected: "+_.join(",")+`
Actual: `+dr.join(","));if(!zn(_,ii=>ho(dr,ii)))throw new Error("Not all branches were specified when using match. Specified: "+dr.join(", ")+`
Required: `+_.join(", "));return gs[St].apply(null,Fn)},log:gs=>{console.log(gs,{constructors:_,constructor:St,params:Fn})}}}}),L}}.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])});const ql=(w,_)=>{const L=il.fromTable(w);return Tg(L,_).bind(pe=>{const Ge=pe[pe.length-1],St=pe[0].row,on=Ge.row+Ge.rowspan,Fn=L.all.slice(St,on);return pn(Fn)}).getOr("")},An=w=>yc(w,"rgb")?fc(w):w,Kl=w=>{const _=ro.fromDom(w);return{borderwidth:sa(_,"border-width").getOr(""),borderstyle:sa(_,"border-style").getOr(""),bordercolor:sa(_,"border-color").map(An).getOr(""),backgroundcolor:sa(_,"background-color").map(An).getOr("")}},T1=w=>{const _=w[0],L=w.slice(1);return F(L,Y=>{F(xt(_),pe=>{dn(Y,(Ge,St)=>{const on=_[pe];on!==""&&pe===St&&on!==Ge&&(_[pe]=pe==="class"?"mce-no-match":"")})})}),_},Uh=(w,_,L,Y)=>So(w,pe=>!io(L.formatter.matchNode(Y,_+pe))).getOr(""),$m=ee(Uh,["left","center","right"],"align"),E1=ee(Uh,["top","middle","bottom"],"valign"),Ti=(w,_)=>{const L=Dm(w),Y=Cf(w),pe=()=>({borderstyle:Bo(L,"border-style").getOr(""),bordercolor:An(Bo(L,"border-color").getOr("")),backgroundcolor:An(Bo(L,"background-color").getOr(""))}),Ge={height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""},St=()=>{const js=L["border-width"];return dl(w)&&js?{border:js}:Bo(Y,"border").fold(()=>({}),gs=>({border:gs}))},on=_?pe():{},Fn=()=>{const js=Bo(L,"border-spacing").or(Bo(Y,"cellspacing")).fold(()=>({}),dr=>({cellspacing:dr})),gs=Bo(L,"border-padding").or(Bo(Y,"cellpadding")).fold(()=>({}),dr=>({cellpadding:dr}));return{...js,...gs}};return{...Ge,...L,...Y,...on,...St(),...Fn()}},Du=w=>Ee(ro.fromDom(w)).map(_=>{const L={selection:Cg(w.cells)};return ql(_,L)}).getOr(""),Im=(w,_,L)=>{const Y=(on,Fn)=>{const lo=sa(ro.fromDom(Fn),"border-width");return dl(w)&&lo.isSome()?lo.getOr(""):on.getAttrib(Fn,"border")||ul(w.dom,Fn,"border-width")||ul(w.dom,Fn,"border")||""},pe=w.dom,Ge=dl(w)?pe.getStyle(_,"border-spacing")||pe.getAttrib(_,"cellspacing"):pe.getAttrib(_,"cellspacing")||pe.getStyle(_,"border-spacing"),St=dl(w)?ul(pe,_,"padding")||pe.getAttrib(_,"cellpadding"):pe.getAttrib(_,"cellpadding")||ul(pe,_,"padding");return{width:pe.getStyle(_,"width")||pe.getAttrib(_,"width"),height:pe.getStyle(_,"height")||pe.getAttrib(_,"height"),cellspacing:Ge??"",cellpadding:St??"",border:Y(pe,_),caption:!!pe.select("caption",_)[0],class:pe.getAttrib(_,"class",""),align:$m(w,_),...L?Kl(_):{}}},$t=(w,_,L)=>{const Y=w.dom;return{height:Y.getStyle(_,"height")||Y.getAttrib(_,"height"),class:Y.getAttrib(_,"class",""),type:Du(_),align:$m(w,_),...L?Kl(_):{}}},Ei=(w,_,L,Y)=>{const pe=w.dom,Ge=Y.getOr(_);return{width:((on,Fn)=>pe.getStyle(on,Fn)||pe.getAttrib(on,Fn))(Ge,"width"),scope:pe.getAttrib(_,"scope"),celltype:ss(_),class:pe.getAttrib(_,"class",""),halign:$m(w,_),valign:E1(w,_),...L?Kl(_):{}}},Wh=(w,_)=>{const L=il.fromTable(w),Y=il.justCells(L),pe=ds(Y,Ge=>Us(_,St=>Vt(Ge.element,St)));return gt(pe,Ge=>({element:Ge.element.dom,column:il.getColumnAt(L,Ge.column).map(St=>St.element.dom)}))},Ef=(w,_,L,Y)=>{Y("scope")&&w.setAttrib("scope",L.scope),Y("class")&&L.class!=="mce-no-match"&&w.setAttrib("class",L.class),Y("width")&&_.setStyle("width",As(L.width))},ki=(w,_,L)=>{L("backgroundcolor")&&w.setFormat("tablecellbackgroundcolor",_.backgroundcolor),L("bordercolor")&&w.setFormat("tablecellbordercolor",_.bordercolor),L("borderstyle")&&w.setFormat("tablecellborderstyle",_.borderstyle),L("borderwidth")&&w.setFormat("tablecellborderwidth",As(_.borderwidth))},kg=(w,_,L,Y)=>{const pe=_.length===1;F(_,Ge=>{const St=Ge.element,on=pe?Qe:Y,Fn=he.normal(w,St),lo=Ge.column.map(js=>he.normal(w,js)).getOr(Fn);Ef(Fn,lo,L,on),Zi(w)&&ki(Fn,L,on),Y("halign")&&ra(w,St,L.halign),Y("valign")&&nd(w,St,L.valign)})},Lm=(w,_)=>{w.execCommand("mceTableCellType",!1,{type:_.celltype,no_events:!0})},dd=(w,_,L,Y)=>{const pe=ts(Y,(Ge,St)=>L[St]!==Ge);A(pe)>0&&_.length>=1&&Ee(_[0]).each(Ge=>{const St=Wh(Ge,_),on=A(ts(pe,(lo,js)=>js!=="scope"&&js!=="celltype"))>0,Fn=tt(pe,"celltype");(on||tt(pe,"scope"))&&kg(w,St,Y,ee(tt,pe)),Fn&&Lm(w,Y),G(w,Ge.dom,{structure:Fn,style:on})})},_g=(w,_,L,Y)=>{const pe=Y.getData();Y.close(),w.undoManager.transact(()=>{dd(w,_,L,pe),w.focus()})},Yi=(w,_)=>{const L=Ee(_[0]).map(Y=>gt(Wh(Y,_),pe=>Ei(w,pe.element,Zi(w),pe.column)));return T1(L.getOrDie())},hv=w=>{const _=Sg(w);if(_.length===0)return;const L=Yi(w,_),Y={type:"tabpanel",tabs:[{title:"General",name:"general",items:R(w)},H(w,"cell")]},pe={type:"panel",items:[{type:"grid",columns:2,items:R(w)}]};w.windowManager.open({title:"Cell Properties",size:"normal",body:Zi(w)?Y:pe,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:L,onSubmit:ee(_g,w,_,L)})},xr=w=>xf(pg(w)).map(_=>({name:"class",type:"listbox",label:"Class",items:_})),dt=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],Qa=w=>dt.concat(xr(w).toArray()),Fm=(w,_,L)=>{L("class")&&_.class!=="mce-no-match"&&w.setAttrib("class",_.class),L("height")&&w.setStyle("height",As(_.height))},Zr=(w,_,L)=>{L("backgroundcolor")&&w.setStyle("background-color",_.backgroundcolor),L("bordercolor")&&w.setStyle("border-color",_.bordercolor),L("borderstyle")&&w.setStyle("border-style",_.borderstyle)},kf=(w,_,L,Y)=>{const Ge=_.length===1?Qe:Y;F(_,St=>{const on=Ga(ro.fromDom(St),"td,th"),Fn=he.normal(w,St);Fm(Fn,L,Ge),od(w)&&Zr(Fn,L,Ge),Y("height")&&F(on,lo=>{w.dom.setStyle(lo.dom,"height",null)}),Y("align")&&ra(w,St,L.align)})},Ic=(w,_)=>{w.execCommand("mceTableRowType",!1,{type:_.type,no_events:!0})},cs=(w,_,L,Y)=>{const pe=ts(Y,(Ge,St)=>L[St]!==Ge);if(A(pe)>0){const Ge=tt(pe,"type"),St=Ge?A(pe)>1:!0;St&&kf(w,_,Y,ee(tt,pe)),Ge&&Ic(w,Y),Ee(ro.fromDom(_[0])).each(on=>G(w,on.dom,{structure:Ge,style:St}))}},Ag=(w,_,L,Y)=>{const pe=Y.getData();Y.close(),w.undoManager.transact(()=>{cs(w,_,L,pe),w.focus()})},Ke=w=>{const _=Al(rs(w),jl.selected);if(_.length===0)return;const L=gt(_,St=>$t(w,St.dom,od(w))),Y=T1(L),pe={type:"tabpanel",tabs:[{title:"General",name:"general",items:Qa(w)},H(w,"row")]},Ge={type:"panel",items:[{type:"grid",columns:2,items:Qa(w)}]};w.windowManager.open({title:"Row Properties",size:"normal",body:od(w)?pe:Ge,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Y,onSubmit:ee(Ag,w,gt(_,St=>St.dom),Y)})},as=(w,_,L)=>{const Y=L?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],pe=[{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}],Ge=vu(w)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],St=[{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}],on=_.length>0?[{name:"class",type:"listbox",label:"Class",items:_}]:[];return Y.concat(pe).concat(Ge).concat(St).concat(on)},Og=(w,_,L,Y)=>{if(_.tagName==="TD"||_.tagName==="TH")Jn(L)&&Xt(Y)?w.setStyle(_,L,Y):w.setStyles(_,L);else if(_.children)for(let pe=0;pe<_.children.length;pe++)Og(w,_.children[pe],L,Y)},Sc=(w,_,L,Y)=>{const pe=w.dom,Ge={},St={},on=dl(w),Fn=sd(w),lo=parseFloat(L.border)===0;if(!io(L.class)&&L.class!=="mce-no-match"&&(Ge.class=L.class),St.height=As(L.height),on?St.width=As(L.width):pe.getAttrib(_,"width")&&(Ge.width=zr(L.width)),on?(lo?(Ge.border=0,St["border-width"]=""):(St["border-width"]=As(L.border),Ge.border=1),St["border-spacing"]=As(L.cellspacing)):(Ge.border=lo?0:L.border,Ge.cellpadding=L.cellpadding,Ge.cellspacing=L.cellspacing),on&&_.children){const js={};if(lo?js["border-width"]="":Y.border&&(js["border-width"]=As(L.border)),Y.cellpadding&&(js.padding=As(L.cellpadding)),Fn&&Y.bordercolor&&(js["border-color"]=L.bordercolor),!cn(js))for(let gs=0;gs<_.children.length;gs++)Og(pe,_.children[gs],js)}if(Fn){const js=L;St["background-color"]=js.backgroundcolor,St["border-color"]=js.bordercolor,St["border-style"]=js.borderstyle}pe.setStyles(_,{...Dm(w),...St}),pe.setAttribs(_,{...Cf(w),...Ge})},Ra=(w,_,L,Y)=>{const pe=w.dom,Ge=Y.getData(),St=ts(Ge,(on,Fn)=>L[Fn]!==on);Y.close(),w.undoManager.transact(()=>{if(!_){const on=El(Ge.cols).getOr(1),Fn=El(Ge.rows).getOr(1);w.execCommand("mceInsertTable",!1,{rows:Fn,columns:on}),_=qi(rs(w),$r(w)).bind(lo=>Ee(lo,$r(w))).map(lo=>lo.dom).getOrDie()}if(A(St)>0){const on={border:tt(St,"border"),bordercolor:tt(St,"bordercolor"),cellpadding:tt(St,"cellpadding")};Sc(w,_,Ge,on);const Fn=pe.select("caption",_)[0];(Fn&&!Ge.caption||!Fn&&Ge.caption)&&w.execCommand("mceTableToggleCaption"),ra(w,_,Ge.align)}if(w.focus(),w.addVisual(),A(St)>0){const on=tt(St,"caption"),Fn=on?A(St)>1:!0;G(w,_,{structure:on,style:Fn})}})},li=(w,_)=>{const L=w.dom;let Y,pe=Ti(w,sd(w));_?(pe.cols="1",pe.rows="1",sd(w)&&(pe.borderstyle="",pe.bordercolor="",pe.backgroundcolor="")):(Y=L.getParent(w.selection.getStart(),"table",w.getBody()),Y?pe=Im(w,Y,sd(w)):sd(w)&&(pe.borderstyle="",pe.bordercolor="",pe.backgroundcolor=""));const Ge=xf(xi(w));Ge.isSome()&&pe.class&&(pe.class=pe.class.replace(/\s*mce\-item\-table\s*/g,""));const St={type:"grid",columns:2,items:as(w,Ge.getOr([]),_)},on=()=>({type:"panel",items:[St]}),Fn=()=>({type:"tabpanel",tabs:[{title:"General",name:"general",items:[St]},H(w,"table")]}),lo=sd(w)?Fn():on();w.windowManager.open({title:"Table Properties",size:"normal",body:lo,onSubmit:ee(Ra,w,Y,pe),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:pe})},k1=w=>{const _=L=>{tc(rs(w))&&L()};dn({mceTableProps:ee(li,w,!1),mceTableRowProps:ee(Ke,w),mceTableCellProps:ee(hv,w),mceInsertTableDialog:ee(li,w,!0)},(L,Y)=>w.addCommand(Y,()=>_(L)))},Xd=(w,_)=>ar(w,_).isSome(),_1=Qn,Yl=w=>{const _=(Y,pe)=>Dc(Y,pe).exists(Ge=>parseInt(Ge,10)>1),L=Y=>_(Y,"rowspan")||_(Y,"colspan");return w.length>0&&zn(w,L)?W.some(w):W.none()},Qo=(w,_,L)=>_.length<=1?W.none():Hh(w,L.firstSelectedSelector,L.lastSelectedSelector).map(Y=>({bounds:Y,cells:_})),Ru=w=>({element:w,mergable:W.none(),unmergable:W.none(),selection:[w]}),Dg=(w,_,L)=>({element:L,mergable:Qo(_,w,jl),unmergable:Yl(w),selection:_1(w)}),xc=w=>{const _=ci(W.none()),L=ci([]);let Y=W.none();const pe=Sa("caption"),Ge=zo=>Y.forall(fr=>!fr[zo]),St=()=>hn(rs(w),$r(w)),on=()=>hn(ms(w),$r(w)),Fn=()=>St().bind(zo=>nc(Ko(Ee(zo),on().bind(Ee),(fr,Mr)=>Vt(fr,Mr)?pe(zo)?W.some(Ru(zo)):W.some(Dg(Sg(w),fr,zo)):W.none()))),lo=zo=>Ee(zo.element).map(Mr=>{const el=il.fromTable(Mr),Kh=Tg(el,zo).getOr([]),Yh=wa(Kh,(Dl,Rl)=>(Rl.isLocked&&(Dl.onAny=!0,Rl.column===0?Dl.onFirst=!0:Rl.column+Rl.colspan>=el.grid.columns&&(Dl.onLast=!0)),Dl),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:gv(el,zo).isSome(),unmergeable:x1(el,zo).isSome(),locked:Yh}}),js=()=>{_.set(ur(Fn)()),Y=_.get().bind(lo),F(L.get(),Xe)},gs=zo=>(zo(),L.set(L.get().concat([zo])),()=>{L.set(ds(L.get(),fr=>fr!==zo))}),dr=(zo,fr)=>gs(()=>_.get().fold(()=>{zo.setEnabled(!1)},Mr=>{zo.setEnabled(!fr(Mr)&&w.selection.isEditable())})),gl=(zo,fr,Mr)=>gs(()=>_.get().fold(()=>{zo.setEnabled(!1),zo.setActive(!1)},el=>{zo.setEnabled(!fr(el)&&w.selection.isEditable()),zo.setActive(Mr(el))})),ii=zo=>Y.exists(fr=>fr.locked[zo]),ia=zo=>dr(zo,fr=>!1),Mu=zo=>dr(zo,fr=>pe(fr.element)),md=zo=>fr=>dr(fr,Mr=>pe(Mr.element)||ii(zo)),fd=zo=>fr=>dr(fr,Mr=>pe(Mr.element)||zo().isNone()),Qd=(zo,fr)=>Mr=>dr(Mr,el=>pe(el.element)||zo().isNone()||ii(fr)),_f=zo=>dr(zo,fr=>Ge("mergeable")),Mg=zo=>dr(zo,fr=>Ge("unmergeable")),qh=zo=>gl(zo,Zn,fr=>Ee(fr.element,$r(w)).exists(el=>Xd(el,"caption"))),gc=(zo,fr)=>Mr=>gl(Mr,el=>pe(el.element),()=>w.queryCommandValue(zo)===fr),Ji=gc("mceTableRowType","header"),em=gc("mceTableColType","th");return w.on("NodeChange ExecCommand TableSelectorChange",js),{onSetupTable:ia,onSetupCellOrRow:Mu,onSetupColumn:md,onSetupPasteable:fd,onSetupPasteableColumn:Qd,onSetupMergeable:_f,onSetupUnmergeable:Mg,resetTargets:js,onSetupTableWithCaption:qh,onSetupTableRowHeaders:Ji,onSetupTableColumnHeaders:em,targets:_.get}};var Zh=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const Xi="x-tinymce/dom-table-",Rg=Xi+"rows",Lc=Xi+"columns",Ma=w=>{var _;const L=(_=Zh.read())!==null&&_!==void 0?_:[];return pr(L,Y=>W.from(Y.getType(w)))},Te=()=>Ma(Rg),Rs=()=>Ma(Lc),jh=w=>_=>{const L=()=>{_.setEnabled(w.selection.isEditable())};return w.on("NodeChange",L),L(),()=>{w.off("NodeChange",L)}},Qr=(w,_)=>{w.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",onSetup:jh(w),fetch:on=>on("inserttable | cell row column | advtablesort | tableprops deletetable")});const L=on=>()=>w.execCommand(on),Y=(on,Fn)=>{w.queryCommandSupported(Fn.command)&&w.ui.registry.addButton(on,{...Fn,onAction:Mn(Fn.onAction)?Fn.onAction:L(Fn.command)})},pe=(on,Fn)=>{w.queryCommandSupported(Fn.command)&&w.ui.registry.addToggleButton(on,{...Fn,onAction:Mn(Fn.onAction)?Fn.onAction:L(Fn.command)})};Y("tableprops",{tooltip:"Table properties",command:"mceTableProps",icon:"table",onSetup:_.onSetupTable}),Y("tabledelete",{tooltip:"Delete table",command:"mceTableDelete",icon:"table-delete-table",onSetup:_.onSetupTable}),Y("tablecellprops",{tooltip:"Cell properties",command:"mceTableCellProps",icon:"table-cell-properties",onSetup:_.onSetupCellOrRow}),Y("tablemergecells",{tooltip:"Merge cells",command:"mceTableMergeCells",icon:"table-merge-cells",onSetup:_.onSetupMergeable}),Y("tablesplitcells",{tooltip:"Split cell",command:"mceTableSplitCells",icon:"table-split-cells",onSetup:_.onSetupUnmergeable}),Y("tableinsertrowbefore",{tooltip:"Insert row before",command:"mceTableInsertRowBefore",icon:"table-insert-row-above",onSetup:_.onSetupCellOrRow}),Y("tableinsertrowafter",{tooltip:"Insert row after",command:"mceTableInsertRowAfter",icon:"table-insert-row-after",onSetup:_.onSetupCellOrRow}),Y("tabledeleterow",{tooltip:"Delete row",command:"mceTableDeleteRow",icon:"table-delete-row",onSetup:_.onSetupCellOrRow}),Y("tablerowprops",{tooltip:"Row properties",command:"mceTableRowProps",icon:"table-row-properties",onSetup:_.onSetupCellOrRow}),Y("tableinsertcolbefore",{tooltip:"Insert column before",command:"mceTableInsertColBefore",icon:"table-insert-column-before",onSetup:_.onSetupColumn("onFirst")}),Y("tableinsertcolafter",{tooltip:"Insert column after",command:"mceTableInsertColAfter",icon:"table-insert-column-after",onSetup:_.onSetupColumn("onLast")}),Y("tabledeletecol",{tooltip:"Delete column",command:"mceTableDeleteCol",icon:"table-delete-column",onSetup:_.onSetupColumn("onAny")}),Y("tablecutrow",{tooltip:"Cut row",command:"mceTableCutRow",icon:"cut-row",onSetup:_.onSetupCellOrRow}),Y("tablecopyrow",{tooltip:"Copy row",command:"mceTableCopyRow",icon:"duplicate-row",onSetup:_.onSetupCellOrRow}),Y("tablepasterowbefore",{tooltip:"Paste row before",command:"mceTablePasteRowBefore",icon:"paste-row-before",onSetup:_.onSetupPasteable(Te)}),Y("tablepasterowafter",{tooltip:"Paste row after",command:"mceTablePasteRowAfter",icon:"paste-row-after",onSetup:_.onSetupPasteable(Te)}),Y("tablecutcol",{tooltip:"Cut column",command:"mceTableCutCol",icon:"cut-column",onSetup:_.onSetupColumn("onAny")}),Y("tablecopycol",{tooltip:"Copy column",command:"mceTableCopyCol",icon:"duplicate-column",onSetup:_.onSetupColumn("onAny")}),Y("tablepastecolbefore",{tooltip:"Paste column before",command:"mceTablePasteColBefore",icon:"paste-column-before",onSetup:_.onSetupPasteableColumn(Rs,"onFirst")}),Y("tablepastecolafter",{tooltip:"Paste column after",command:"mceTablePasteColAfter",icon:"paste-column-after",onSetup:_.onSetupPasteableColumn(Rs,"onLast")}),Y("tableinsertdialog",{tooltip:"Insert table",command:"mceInsertTableDialog",icon:"table",onSetup:jh(w)});const Ge=Au(xi(w));Ge.length!==0&&w.queryCommandSupported("mceTableToggleClass")&&w.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:Xa(w,Ge,"tableclass",on=>w.execCommand("mceTableToggleClass",!1,on)),onSetup:_.onSetupTable});const St=Au(_a(w));St.length!==0&&w.queryCommandSupported("mceTableCellToggleClass")&&w.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:Xa(w,St,"tablecellclass",on=>w.execCommand("mceTableCellToggleClass",!1,on)),onSetup:_.onSetupCellOrRow}),w.queryCommandSupported("mceTableApplyCellStyle")&&(w.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:Xa(w,Yo,"tablecellverticalalign",Hs(w,"vertical-align")),onSetup:_.onSetupCellOrRow}),w.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:Xa(w,si(w),"tablecellborderwidth",Hs(w,"border-width")),onSetup:_.onSetupCellOrRow}),w.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:Xa(w,Vd(w),"tablecellborderstyle",Hs(w,"border-style")),onSetup:_.onSetupCellOrRow}),w.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:on=>on(Kd(w,rd(w),"background-color")),onSetup:_.onSetupCellOrRow}),w.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:on=>on(Kd(w,yf(w),"border-color")),onSetup:_.onSetupCellOrRow})),pe("tablecaption",{tooltip:"Table caption",icon:"table-caption",command:"mceTableToggleCaption",onSetup:_.onSetupTableWithCaption}),pe("tablerowheader",{tooltip:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:To(w),onSetup:_.onSetupTableRowHeaders}),pe("tablecolheader",{tooltip:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:Yd(w),onSetup:_.onSetupTableColumnHeaders})},qc=w=>{const _=Y=>w.dom.is(Y,"table")&&w.getBody().contains(Y)&&w.dom.isEditable(Y.parentNode),L=vf(w);L.length>0&&w.ui.registry.addContextToolbar("table",{predicate:_,items:L,scope:"node",position:"node"})},Tc=w=>_=>{const L=()=>{_.setEnabled(w.selection.isEditable())};return w.on("NodeChange",L),L(),()=>{w.off("NodeChange",L)}},Js=(w,_)=>{const L=gs=>()=>w.execCommand(gs),Y=(gs,dr)=>w.queryCommandSupported(dr.command)?(w.ui.registry.addMenuItem(gs,{...dr,onAction:Mn(dr.onAction)?dr.onAction:L(dr.command)}),!0):!1,pe=(gs,dr)=>{w.queryCommandSupported(dr.command)&&w.ui.registry.addToggleMenuItem(gs,{...dr,onAction:Mn(dr.onAction)?dr.onAction:L(dr.command)})},Ge=gs=>{w.execCommand("mceInsertTable",!1,{rows:gs.numRows,columns:gs.numColumns})},St=[Y("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",command:"mceTableInsertRowBefore",onSetup:_.onSetupCellOrRow}),Y("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",command:"mceTableInsertRowAfter",onSetup:_.onSetupCellOrRow}),Y("tabledeleterow",{text:"Delete row",icon:"table-delete-row",command:"mceTableDeleteRow",onSetup:_.onSetupCellOrRow}),Y("tablerowprops",{text:"Row properties",icon:"table-row-properties",command:"mceTableRowProps",onSetup:_.onSetupCellOrRow}),Y("tablecutrow",{text:"Cut row",icon:"cut-row",command:"mceTableCutRow",onSetup:_.onSetupCellOrRow}),Y("tablecopyrow",{text:"Copy row",icon:"duplicate-row",command:"mceTableCopyRow",onSetup:_.onSetupCellOrRow}),Y("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",command:"mceTablePasteRowBefore",onSetup:_.onSetupPasteable(Te)}),Y("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",command:"mceTablePasteRowAfter",onSetup:_.onSetupPasteable(Te)})],on=[Y("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",command:"mceTableInsertColBefore",onSetup:_.onSetupColumn("onFirst")}),Y("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",command:"mceTableInsertColAfter",onSetup:_.onSetupColumn("onLast")}),Y("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",command:"mceTableDeleteCol",onSetup:_.onSetupColumn("onAny")}),Y("tablecutcolumn",{text:"Cut column",icon:"cut-column",command:"mceTableCutCol",onSetup:_.onSetupColumn("onAny")}),Y("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",command:"mceTableCopyCol",onSetup:_.onSetupColumn("onAny")}),Y("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",command:"mceTablePasteColBefore",onSetup:_.onSetupPasteableColumn(Rs,"onFirst")}),Y("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",command:"mceTablePasteColAfter",onSetup:_.onSetupPasteableColumn(Rs,"onLast")})],Fn=[Y("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",command:"mceTableCellProps",onSetup:_.onSetupCellOrRow}),Y("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",command:"mceTableMergeCells",onSetup:_.onSetupMergeable}),Y("tablesplitcells",{text:"Split cell",icon:"table-split-cells",command:"mceTableSplitCells",onSetup:_.onSetupUnmergeable})];yu(w)?w.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"inserttable",onAction:Ge}],onSetup:Tc(w)}):w.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:L("mceInsertTableDialog"),onSetup:Tc(w)}),w.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:L("mceInsertTableDialog"),onSetup:Tc(w)}),Y("tableprops",{text:"Table properties",onSetup:_.onSetupTable,command:"mceTableProps"}),Y("deletetable",{text:"Delete table",icon:"table-delete-table",onSetup:_.onSetupTable,command:"mceTableDelete"}),ho(St,!0)&&w.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:ct("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")}),ho(on,!0)&&w.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:ct("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")}),ho(Fn,!0)&&w.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:ct("tablecellprops tablemergecells tablesplitcells")}),w.ui.registry.addContextMenu("table",{update:()=>(_.resetTargets(),_.targets().fold(ct(""),gs=>pt(gs.element)==="caption"?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"))});const lo=Au(xi(w));lo.length!==0&&w.queryCommandSupported("mceTableToggleClass")&&w.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:()=>Ki(w,lo,"tableclass",gs=>w.execCommand("mceTableToggleClass",!1,gs)),onSetup:_.onSetupTable});const js=Au(_a(w));js.length!==0&&w.queryCommandSupported("mceTableCellToggleClass")&&w.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:()=>Ki(w,js,"tablecellclass",gs=>w.execCommand("mceTableCellToggleClass",!1,gs)),onSetup:_.onSetupCellOrRow}),w.queryCommandSupported("mceTableApplyCellStyle")&&(w.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:()=>Ki(w,Yo,"tablecellverticalalign",Hs(w,"vertical-align")),onSetup:_.onSetupCellOrRow}),w.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:()=>Ki(w,si(w),"tablecellborderwidth",Hs(w,"border-width")),onSetup:_.onSetupCellOrRow}),w.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:()=>Ki(w,Vd(w),"tablecellborderstyle",Hs(w,"border-style")),onSetup:_.onSetupCellOrRow}),w.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:()=>Kd(w,rd(w),"background-color"),onSetup:_.onSetupCellOrRow}),w.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:()=>Kd(w,yf(w),"border-color"),onSetup:_.onSetupCellOrRow})),pe("tablecaption",{icon:"table-caption",text:"Table caption",command:"mceTableToggleCaption",onSetup:_.onSetupTableWithCaption}),pe("tablerowheader",{text:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:To(w),onSetup:_.onSetupTableRowHeaders}),pe("tablecolheader",{text:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:Yd(w),onSetup:_.onSetupTableRowHeaders})},Gh=w=>{const _=xc(w);wr(w),k1(w),Js(w,_),Qr(w,_),qc(w)};var Jd=()=>{ht.add("table",Gh)};Jd()})();(function(){const ht=Object.getPrototypeOf,_n=(t,s,c)=>{var l;return c(t,s.prototype)?!0:((l=t.constructor)===null||l===void 0?void 0:l.name)===s.name},jt=t=>{const s=typeof t;return t===null?"null":s==="object"&&Array.isArray(t)?"array":s==="object"&&_n(t,String,(c,l)=>l.isPrototypeOf(c))?"string":s},un=t=>s=>jt(s)===t,Ct=t=>s=>typeof s===t,Gt=t=>s=>t===s,Jn=(t,s)=>Yt(t)&&_n(t,s,(c,l)=>ht(c)===l),Dt=un("string"),Yt=un("object"),io=t=>Jn(t,Object),xn=un("array"),Xt=Gt(null),Mn=Ct("boolean"),zt=Gt(void 0),ft=t=>t==null,et=t=>!ft(t),ct=Ct("function"),Qn=Ct("number"),Re=(t,s)=>{if(xn(t)){for(let c=0,l=t.length;c<l;++c)if(!s(t[c]))return!1;return!0}return!1},ee=()=>{},Xe=t=>()=>t(),Zn=(t,s)=>(...c)=>t(s.apply(null,c)),Qe=(t,s)=>c=>t(s(c)),W=t=>()=>t,xt=t=>t,gn=(t,s)=>t===s;function dn(t,...s){return(...c)=>{const l=s.concat(c);return t.apply(null,l)}}const Oe=t=>s=>!t(s),ue=t=>()=>{throw new Error(t)},ts=t=>t(),no=W(!1),Mt=W(!0);class A{constructor(s,c){this.tag=s,this.value=c}static some(s){return new A(!0,s)}static none(){return A.singletonNone}fold(s,c){return this.tag?c(this.value):s()}isSome(){return this.tag}isNone(){return!this.tag}map(s){return this.tag?A.some(s(this.value)):A.none()}bind(s){return this.tag?s(this.value):A.none()}exists(s){return this.tag&&s(this.value)}forall(s){return!this.tag||s(this.value)}filter(s){return!this.tag||s(this.value)?this:A.none()}getOr(s){return this.tag?this.value:s}or(s){return this.tag?this:s}getOrThunk(s){return this.tag?this.value:s()}orThunk(s){return this.tag?this:s()}getOrDie(s){if(this.tag)return this.value;throw new Error(s??"Called getOrDie on None")}static from(s){return et(s)?A.some(s):A.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(s){this.tag&&s(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}A.singletonNone=new A(!1);const Bo=Array.prototype.slice,tt=Array.prototype.indexOf,Wo=Array.prototype.push,cn=(t,s)=>tt.call(t,s),Je=(t,s)=>{const c=cn(t,s);return c===-1?A.none():A.some(c)},vo=(t,s)=>cn(t,s)>-1,Ms=(t,s)=>{for(let c=0,l=t.length;c<l;c++){const d=t[c];if(s(d,c))return!0}return!1},ho=(t,s)=>{const c=[];for(let l=0;l<t;l++)c.push(s(l));return c},Us=(t,s)=>{const c=[];for(let l=0;l<t.length;l+=s){const d=Bo.call(t,l,l+s);c.push(d)}return c},je=(t,s)=>{const c=t.length,l=new Array(c);for(let d=0;d<c;d++){const g=t[d];l[d]=s(g,d)}return l},gt=(t,s)=>{for(let c=0,l=t.length;c<l;c++){const d=t[c];s(d,c)}},F=(t,s)=>{for(let c=t.length-1;c>=0;c--){const l=t[c];s(l,c)}},dc=(t,s)=>{const c=[],l=[];for(let d=0,g=t.length;d<g;d++){const h=t[d];(s(h,d)?c:l).push(h)}return{pass:c,fail:l}},uo=(t,s)=>{const c=[];for(let l=0,d=t.length;l<d;l++){const g=t[l];s(g,l)&&c.push(g)}return c},ds=(t,s,c)=>(F(t,(l,d)=>{c=s(c,l,d)}),c),Go=(t,s,c)=>(gt(t,(l,d)=>{c=s(c,l,d)}),c),wa=(t,s,c)=>{for(let l=0,d=t.length;l<d;l++){const g=t[l];if(s(g,l))return A.some(g);if(c(g,l))break}return A.none()},Cn=(t,s)=>wa(t,s,no),So=(t,s)=>{for(let c=0,l=t.length;c<l;c++){const d=t[c];if(s(d,c))return A.some(c)}return A.none()},Rn=t=>{const s=[];for(let c=0,l=t.length;c<l;++c){if(!xn(t[c]))throw new Error("Arr.flatten item "+c+" was not an array, input: "+t);Wo.apply(s,t[c])}return s},xe=(t,s)=>Rn(je(t,s)),zn=(t,s)=>{for(let c=0,l=t.length;c<l;++c){const d=t[c];if(s(d,c)!==!0)return!1}return!0},Ht=t=>{const s=Bo.call(t,0);return s.reverse(),s},Lt=(t,s)=>uo(t,c=>!vo(s,c)),Zo=(t,s)=>{const c={};for(let l=0,d=t.length;l<d;l++){const g=t[l];c[String(g)]=s(g,l)}return c},Ho=t=>[t],pr=(t,s)=>{const c=Bo.call(t,0);return c.sort(s),c},qo=(t,s)=>s>=0&&s<t.length?A.some(t[s]):A.none(),qs=t=>qo(t,0),st=t=>qo(t,t.length-1),lt=ct(Array.from)?Array.from:t=>Bo.call(t),tn=(t,s)=>{for(let c=0;c<t.length;c++){const l=s(t[c],c);if(l.isSome())return l}return A.none()},mn=Object.keys,Mo=Object.hasOwnProperty,Ao=(t,s)=>{const c=mn(t);for(let l=0,d=c.length;l<d;l++){const g=c[l],h=t[g];s(h,g)}},jn=(t,s)=>jc(t,(c,l)=>({k:l,v:s(c,l)})),jc=(t,s)=>{const c={};return Ao(t,(l,d)=>{const g=s(l,d);c[g.k]=g.v}),c},ro=t=>(s,c)=>{t[c]=s},ns=(t,s,c,l)=>{Ao(t,(d,g)=>{(s(d,g)?c:l)(d,g)})},cr=(t,s)=>{const c={},l={};return ns(t,s,ro(c),ro(l)),{t:c,f:l}},Br=(t,s)=>{const c={};return ns(t,s,ro(c),ee),c},ea=(t,s)=>{const c=[];return Ao(t,(l,d)=>{c.push(s(l,d))}),c},Vt=(t,s)=>{const c=mn(t);for(let l=0,d=c.length;l<d;l++){const g=c[l],h=t[g];if(s(h,g,t))return A.some(h)}return A.none()},cl=t=>ea(t,xt),pt=(t,s)=>yo(t,s)?A.from(t[s]):A.none(),yo=(t,s)=>Mo.call(t,s),Vr=(t,s)=>yo(t,s)&&t[s]!==void 0&&t[s]!==null,br=(t,s,c=gn)=>t.exists(l=>c(l,s)),Oc=(t,s,c=gn)=>ta(t,s,c).getOr(t.isNone()&&s.isNone()),Gc=t=>{const s=[],c=l=>{s.push(l)};for(let l=0;l<t.length;l++)t[l].each(c);return s},os=t=>{const s=[];for(let c=0;c<t.length;c++){const l=t[c];if(l.isSome())s.push(l.getOrDie());else return A.none()}return A.some(s)},ta=(t,s,c)=>t.isSome()&&s.isSome()?A.some(c(t.getOrDie(),s.getOrDie())):A.none(),Sa=(t,s,c,l)=>t.isSome()&&s.isSome()&&c.isSome()?A.some(l(t.getOrDie(),s.getOrDie(),c.getOrDie())):A.none(),Xo=(t,s)=>t!=null?A.some(s(t)):A.none(),yn=(t,s)=>t?A.some(s):A.none(),Ls=(t,s)=>t+s,bc=(t,s)=>t.substring(s),Vl=(t,s,c)=>s===""||t.length>=s.length&&t.substr(c,c+s.length)===s,zl=(t,s)=>Ns(t,s)?bc(t,s.length):t,hs=(t,s)=>mc(t,s)?t:Ls(t,s),kr=(t,s,c=0,l)=>{const d=t.indexOf(s,c);return d!==-1?zt(l)?!0:d+s.length<=l:!1},Ns=(t,s)=>Vl(t,s,0),mc=(t,s)=>Vl(t,s,t.length-s.length),_r=(t=>s=>s.replace(t,""))(/^\s+|\s+$/g),le=t=>t.length>0,re=t=>!le(t),De=t=>t.style!==void 0&&ct(t.style.getPropertyValue),Fe=(t,s)=>{const l=(s||document).createElement("div");if(l.innerHTML=t,!l.hasChildNodes()||l.childNodes.length>1){const d="HTML does not have a single root node";throw console.error(d,t),new Error(d)}return Kn(l.childNodes[0])},fn=(t,s)=>{const l=(s||document).createElement(t);return Kn(l)},Pn=(t,s)=>{const l=(s||document).createTextNode(t);return Kn(l)},Kn=t=>{if(t==null)throw new Error("Node cannot be null or undefined");return{dom:t}},ge={fromHtml:Fe,fromTag:fn,fromText:Pn,fromDom:Kn,fromPoint:(t,s,c)=>A.from(t.dom.elementFromPoint(s,c)).map(Kn)},Yn=typeof window<"u"?window:Function("return this;")(),Ks=(t,s)=>{let c=s??Yn;for(let l=0;l<t.length&&c!==void 0&&c!==null;++l)c=c[t[l]];return c},vr=(t,s)=>{const c=t.split(".");return Ks(c,s)},vc=(t,s)=>vr(t,s),ss=(t,s)=>{const c=vc(t,s);if(c==null)throw new Error(t+" not available on this browser");return c},al=Object.getPrototypeOf,$r=t=>ss("HTMLElement",t),zr=t=>{const s=vr("ownerDocument.defaultView",t);return Yt(t)&&($r(s).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(al(t).constructor.name))},As=9,rs=11,ms=1,tc=3,Ur=t=>t.dom.nodeName.toLowerCase(),Ps=t=>t.dom.nodeType,Ga=t=>s=>Ps(s)===t,xa=t=>xo(t)&&zr(t.dom),xo=Ga(ms),Kr=Ga(tc),Ir=Ga(As),Ha=Ga(rs),Dc=t=>s=>xo(s)&&Ur(s)===t,Ar=(t,s)=>{const c=t.dom;if(c.nodeType!==ms)return!1;{const l=c;if(l.matches!==void 0)return l.matches(s);if(l.msMatchesSelector!==void 0)return l.msMatchesSelector(s);if(l.webkitMatchesSelector!==void 0)return l.webkitMatchesSelector(s);if(l.mozMatchesSelector!==void 0)return l.mozMatchesSelector(s);throw new Error("Browser lacks native selectors")}},Os=t=>t.nodeType!==ms&&t.nodeType!==As&&t.nodeType!==rs||t.childElementCount===0,ed=(t,s)=>{const c=s===void 0?document:s.dom;return Os(c)?[]:je(c.querySelectorAll(t),ge.fromDom)},Ta=(t,s)=>{const c=s===void 0?document:s.dom;return Os(c)?A.none():A.from(c.querySelector(t)).map(ge.fromDom)},Ko=(t,s)=>t.dom===s.dom,nc=(t,s)=>{const c=t.dom,l=s.dom;return c===l?!1:c.contains(l)},oc=t=>ge.fromDom(t.dom.ownerDocument),Or=t=>Ir(t)?t:oc(t),Ul=t=>ge.fromDom(Or(t).dom.documentElement),Rc=t=>ge.fromDom(Or(t).dom.defaultView),yc=t=>A.from(t.dom.parentNode).map(ge.fromDom),Ea=t=>yc(t),na=t=>A.from(t.dom.parentElement).map(ge.fromDom),ni=(t,s)=>{const c=ct(s)?s:no;let l=t.dom;const d=[];for(;l.parentNode!==null&&l.parentNode!==void 0;){const g=l.parentNode,h=ge.fromDom(g);if(d.push(h),c(h)===!0)break;l=g}return d},oi=t=>A.from(t.dom.offsetParent).map(ge.fromDom),El=t=>A.from(t.dom.nextSibling).map(ge.fromDom),oa=t=>je(t.dom.childNodes,ge.fromDom),Yr=(t,s)=>{const c=t.dom.childNodes;return A.from(c[s]).map(ge.fromDom)},Wl=t=>Yr(t,0),Zl=(t,s)=>({element:t,offset:s}),Ci=(t,s)=>{const c=oa(t);return c.length>0&&s<c.length?Zl(c[s],0):Zl(t,s)},ll=t=>Ha(t)&&et(t.dom.host),Dr=t=>ge.fromDom(t.dom.getRootNode()),sa=t=>ll(t)?t:ge.fromDom(Or(t).dom.body),sc=t=>Cc(t).isSome(),Cc=t=>{const s=Dr(t);return ll(s)?A.some(s):A.none()},wi=t=>ge.fromDom(t.dom.host),Si=t=>{if(et(t.target)){const s=ge.fromDom(t.target);if(xo(s)&&U(s)&&t.composed&&t.composedPath){const c=t.composedPath();if(c)return qs(c)}}return A.from(t.target)},U=t=>et(t.dom.shadowRoot),se=t=>{const s=Kr(t)?t.dom.parentNode:t.dom;if(s==null||s.ownerDocument===null)return!1;const c=s.ownerDocument;return Cc(ge.fromDom(s)).fold(()=>c.body.contains(s),Qe(se,wi))},be=()=>ze(ge.fromDom(document)),ze=t=>{const s=t.dom.body;if(s==null)throw new Error("Body is not available yet");return ge.fromDom(s)},bt=(t,s,c)=>{if(Dt(c)||Mn(c)||Qn(c))t.setAttribute(s,c+"");else throw console.error("Invalid call to Attribute.set. Key ",s,":: Value ",c,":: Element ",t),new Error("Attribute value was not simple")},Ve=(t,s,c)=>{bt(t.dom,s,c)},Vo=(t,s)=>{const c=t.dom;Ao(s,(l,d)=>{bt(c,d,l)})},nn=(t,s)=>{const c=t.dom.getAttribute(s);return c===null?void 0:c},Hn=(t,s)=>A.from(nn(t,s)),Fs=(t,s)=>{const c=t.dom;return c&&c.hasAttribute?c.hasAttribute(s):!1},B=(t,s)=>{t.dom.removeAttribute(s)},K=t=>Go(t.dom.attributes,(s,c)=>(s[c.name]=c.value,s),{}),ie=(t,s,c)=>{if(!Dt(c))throw console.error("Invalid call to CSS.set. Property ",s,":: Value ",c,":: Element ",t),new Error("CSS value must be a string: "+c);De(t)&&t.style.setProperty(s,c)},Ee=(t,s)=>{De(t)&&t.style.removeProperty(s)},qe=(t,s,c)=>{const l=t.dom;ie(l,s,c)},co=(t,s)=>{const c=t.dom;Ao(s,(l,d)=>{ie(c,d,l)})},Jo=(t,s)=>{const c=t.dom;Ao(s,(l,d)=>{l.fold(()=>{Ee(c,d)},g=>{ie(c,d,g)})})},fs=(t,s)=>{const c=t.dom,d=window.getComputedStyle(c).getPropertyValue(s);return d===""&&!se(t)?it(c,s):d},it=(t,s)=>De(t)?t.style.getPropertyValue(s):"",bs=(t,s)=>{const c=t.dom,l=it(c,s);return A.from(l).filter(d=>d.length>0)},rc=t=>{const s={},c=t.dom;if(De(c))for(let l=0;l<c.style.length;l++){const d=c.style.item(l);s[d]=c.style[d]}return s},kl=(t,s,c)=>{const l=ge.fromTag(t);return qe(l,s,c),bs(l,s).isSome()},Gn=(t,s)=>{const c=t.dom;Ee(c,s),br(Hn(t,"style").map(_r),"")&&B(t,"style")},ka=t=>t.dom.offsetWidth,qa=(t,s)=>{const c=(y,S)=>{if(!Qn(S)&&!S.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+S);const k=y.dom;De(k)&&(k.style[t]=S+"px")},l=y=>{const S=s(y);if(S<=0||S===null){const k=fs(y,t);return parseFloat(k)||0}return S},d=l,g=(y,S)=>Go(S,(k,O)=>{const N=fs(y,O),V=N===void 0?0:parseInt(N,10);return isNaN(V)?k:k+V},0);return{set:c,get:l,getOuter:d,aggregate:g,max:(y,S,k)=>{const O=g(y,k);return S>O?S-O:0}}},Wr=qa("height",t=>{const s=t.dom;return se(t)?s.getBoundingClientRect().height:s.offsetHeight}),vs=t=>Wr.get(t),_l=t=>Wr.getOuter(t),bf=(t,s)=>{const c=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],l=Wr.max(t,s,c);qe(t,"max-height",l+"px")},Hd=(t,s)=>({left:t,top:s,translate:(l,d)=>Hd(t+l,s+d)}),Ys=Hd,td=t=>{const s=t.getBoundingClientRect();return Ys(s.left,s.top)},il=(t,s)=>t!==void 0?t:s!==void 0?s:0,Ws=t=>{const s=t.dom.ownerDocument,c=s.body,l=s.defaultView,d=s.documentElement;if(c===t.dom)return Ys(c.offsetLeft,c.offsetTop);const g=il(l==null?void 0:l.pageYOffset,d.scrollTop),h=il(l==null?void 0:l.pageXOffset,d.scrollLeft),y=il(d.clientTop,c.clientTop),S=il(d.clientLeft,c.clientLeft);return ul(t).translate(h-S,g-y)},ul=t=>{const s=t.dom,l=s.ownerDocument.body;return l===s?Ys(l.offsetLeft,l.offsetTop):se(t)?td(s):Ys(0,0)},ra=qa("width",t=>t.dom.offsetWidth),nd=(t,s)=>ra.set(t,s),G=t=>ra.get(t),Q=t=>ra.getOuter(t),ke=(t,s)=>{const c=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],l=ra.max(t,s,c);qe(t,"max-width",l+"px")},Ue=t=>{let s=!1,c;return(...l)=>(s||(s=!0,c=t.apply(null,l)),c)},wn=(t,s,c,l)=>{const d=t.isiOS()&&/ipad/i.test(c)===!0,g=t.isiOS()&&!d,h=t.isiOS()||t.isAndroid(),y=h||l("(pointer:coarse)"),S=d||!g&&h&&l("(min-device-width:768px)"),k=g||h&&!S,O=s.isSafari()&&t.isiOS()&&/safari/i.test(c)===!1,N=!k&&!S&&!O;return{isiPad:W(d),isiPhone:W(g),isTablet:W(S),isPhone:W(k),isTouch:W(y),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:W(O),isDesktop:W(N)}},Oo=(t,s)=>{for(let c=0;c<t.length;c++){const l=t[c];if(l.test(s))return l}},mo=(t,s)=>{const c=Oo(t,s);if(!c)return{major:0,minor:0};const l=d=>Number(s.replace(c,"$"+d));return ca(l(1),l(2))},ws=(t,s)=>{const c=String(s).toLowerCase();return t.length===0?Rr():mo(t,c)},Rr=()=>ca(0,0),ca=(t,s)=>({major:t,minor:s}),Mc={nu:ca,detect:ws,unknown:Rr},yr=(t,s)=>tn(s.brands,c=>{const l=c.brand.toLowerCase();return Cn(t,d=>{var g;return l===((g=d.brand)===null||g===void 0?void 0:g.toLowerCase())}).map(d=>({current:d.name,version:Mc.nu(parseInt(c.version,10),0)}))}),Cr=(t,s)=>{const c=String(s).toLowerCase();return Cn(t,l=>l.search(c))},Xr=(t,s)=>Cr(t,s).map(c=>{const l=Mc.detect(c.versionRegexes,s);return{current:c.name,version:l}}),Nc=(t,s)=>Cr(t,s).map(c=>{const l=Mc.detect(c.versionRegexes,s);return{current:c.name,version:l}}),Xs=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,wr=t=>s=>kr(s,t),Zs=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>kr(t,"edge/")&&kr(t,"chrome")&&kr(t,"safari")&&kr(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Xs],search:t=>kr(t,"chrome")&&!kr(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>kr(t,"msie")||kr(t,"trident")},{name:"Opera",versionRegexes:[Xs,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:wr("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:wr("firefox")},{name:"Safari",versionRegexes:[Xs,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(kr(t,"safari")||kr(t,"mobile/"))&&kr(t,"applewebkit")}],si=[{name:"Windows",search:wr("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>kr(t,"iphone")||kr(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:wr("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:wr("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:wr("linux"),versionRegexes:[]},{name:"Solaris",search:wr("sunos"),versionRegexes:[]},{name:"FreeBSD",search:wr("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:wr("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Vd={browsers:W(Zs),oses:W(si)},Zi="Edge",od="Chromium",sd="IE",vu="Opera",yu="Firefox",dl="Safari",_a=()=>pg({current:void 0,version:Mc.unknown()}),pg=t=>{const s=t.current,c=t.version,l=d=>()=>s===d;return{current:s,version:c,isEdge:l(Zi),isChromium:l(od),isIE:l(sd),isOpera:l(vu),isFirefox:l(yu),isSafari:l(dl)}},xi={unknown:_a,nu:pg,edge:W(Zi),chromium:W(od),ie:W(sd),opera:W(vu),firefox:W(yu),safari:W(dl)},vf="Windows",rd="iOS",yf="Android",Om="Linux",cd="macOS",Dm="Solaris",Cf="FreeBSD",Cu="ChromeOS",bg=()=>de({current:void 0,version:Mc.unknown()}),de=t=>{const s=t.current,c=t.version,l=d=>()=>s===d;return{current:s,version:c,isWindows:l(vf),isiOS:l(rd),isAndroid:l(yf),isMacOS:l(cd),isLinux:l(Om),isSolaris:l(Dm),isFreeBSD:l(Cf),isChromeOS:l(Cu)}},ad={unknown:bg,nu:de,windows:W(vf),ios:W(rd),android:W(yf),linux:W(Om),macos:W(cd),solaris:W(Dm),freebsd:W(Cf),chromeos:W(Cu)},Ih={detect:(t,s,c)=>{const l=Vd.browsers(),d=Vd.oses(),g=s.bind(S=>yr(l,S)).orThunk(()=>Xr(l,t)).fold(xi.unknown,xi.nu),h=Nc(d,t).fold(ad.unknown,ad.nu),y=wn(h,g,t,c);return{browser:g,os:h,deviceType:y}}},Lh=t=>window.matchMedia(t).matches;let wu=Ue(()=>Ih.detect(window.navigator.userAgent,A.from(window.navigator.userAgentData),Lh));const po=()=>wu(),aa=(t,s,c,l,d,g,h)=>({target:t,x:s,y:c,stop:l,prevent:d,kill:g,raw:h}),Pc=t=>{const s=ge.fromDom(Si(t).getOr(t.target)),c=()=>t.stopPropagation(),l=()=>t.preventDefault(),d=Zn(l,c);return aa(s,t.clientX,t.clientY,c,l,d,t)},Su=(t,s)=>c=>{t(c)&&s(Pc(c))},wf=(t,s,c,l,d)=>{const g=Su(c,l);return t.dom.addEventListener(s,g,d),{unbind:dn(Rm,t,s,g,d)}},zd=(t,s,c,l)=>wf(t,s,c,l,!1),la=(t,s,c,l)=>wf(t,s,c,l,!0),Rm=(t,s,c,l)=>{t.dom.removeEventListener(s,c,l)},ji=(t,s)=>{yc(t).each(l=>{l.dom.insertBefore(s.dom,t.dom)})},Mm=(t,s)=>{El(t).fold(()=>{yc(t).each(d=>{Aa(d,s)})},l=>{ji(l,s)})},Gi=(t,s)=>{Wl(t).fold(()=>{Aa(t,s)},l=>{t.dom.insertBefore(s.dom,l.dom)})},Aa=(t,s)=>{t.dom.appendChild(s.dom)},Fh=(t,s,c)=>{Yr(t,c).fold(()=>{Aa(t,s)},l=>{ji(l,s)})},Ud=(t,s)=>{gt(s,c=>{Aa(t,c)})},wc=t=>{t.dom.textContent="",gt(oa(t),s=>{Ka(s)})},Ka=t=>{const s=t.dom;s.parentNode!==null&&s.parentNode.removeChild(s)},Oa=t=>{const s=t!==void 0?t.dom:document,c=s.body.scrollLeft||s.documentElement.scrollLeft,l=s.body.scrollTop||s.documentElement.scrollTop;return Ys(c,l)},ld=(t,s,c)=>{const d=(c!==void 0?c.dom:document).defaultView;d&&d.scrollTo(t,s)},Wd=t=>{const s=t===void 0?window:t;return po().browser.isFirefox()?A.none():A.from(s.visualViewport)},vg=(t,s,c,l)=>({x:t,y:s,width:c,height:l,right:t+c,bottom:s+l}),Zd=t=>{const s=t===void 0?window:t,c=s.document,l=Oa(ge.fromDom(c));return Wd(s).fold(()=>{const d=s.document.documentElement,g=d.clientWidth,h=d.clientHeight;return vg(l.left,l.top,g,h)},d=>vg(Math.max(d.pageLeft,l.left),Math.max(d.pageTop,l.top),d.width,d.height))},ri=()=>ge.fromDom(document),jd=(t,s)=>t.view(s).fold(W([]),l=>{const d=t.owner(l),g=jd(t,d);return[l].concat(g)}),S1=(t,s)=>{const c=s.owner(t),l=jd(s,c);return A.some(l)};var Cg=Object.freeze({__proto__:null,view:t=>{var s;return(t.dom===document?A.none():A.from((s=t.dom.defaultView)===null||s===void 0?void 0:s.frameElement)).map(ge.fromDom)},owner:t=>oc(t)});const Gd=t=>{const s=ri(),c=Oa(s);return S1(t,Cg).fold(dn(Ws,t),d=>{const g=ul(t),h=ds(d,(y,S)=>{const k=ul(S);return{left:y.left+k.left,top:y.top+k.top}},{left:0,top:0});return Ys(h.left+g.left+c.left,h.top+g.top+c.top)})},id=(t,s,c)=>({point:t,width:s,height:c}),Nm=(t,s,c,l)=>({x:t,y:s,width:c,height:l}),lr=(t,s,c,l)=>({x:t,y:s,width:c,height:l,right:t+c,bottom:s+l}),ir=t=>{const s=Ws(t),c=Q(t),l=_l(t);return lr(s.left,s.top,c,l)},xu=t=>{const s=Gd(t),c=Q(t),l=_l(t);return lr(s.left,s.top,c,l)},jl=(t,s)=>{const c=Math.max(t.x,s.x),l=Math.max(t.y,s.y),d=Math.min(t.right,s.right),g=Math.min(t.bottom,s.bottom),h=d-c,y=g-l;return lr(c,l,h,y)},wg=(t,s)=>Go(s,(c,l)=>jl(c,l),t),cc=()=>Zd(window),hn=t=>{let s=t;return{get:()=>s,set:d=>{s=d}}},qi=t=>{const s=hn(A.none()),c=()=>s.get().each(t);return{clear:()=>{c(),s.set(A.none())},isSet:()=>s.get().isSome(),get:()=>s.get(),set:y=>{c(),s.set(A.some(y))}}},Sg=()=>qi(t=>t.destroy()),Al=()=>qi(t=>t.unbind()),Yo=()=>{const t=qi(ee);return{...t,on:c=>t.get().each(c)}};var Tu=tinymce.util.Tools.resolve("tinymce.ThemeManager");const Pm=t=>{const s=g=>g(t),c=W(t),l=()=>d,d={tag:!0,inner:t,fold:(g,h)=>h(t),isValue:Mt,isError:no,map:g=>ao.value(g(t)),mapError:l,bind:s,exists:s,forall:s,getOr:c,or:l,getOrThunk:c,orThunk:l,getOrDie:c,each:g=>{g(t)},toOptional:()=>A.some(t)};return d},Sf=t=>{const s=()=>c,c={tag:!1,inner:t,fold:(l,d)=>l(t),isValue:no,isError:Mt,map:s,mapError:l=>ao.error(l(t)),bind:s,exists:no,forall:Mt,getOr:xt,or:xt,getOrThunk:ts,orThunk:ts,getOrDie:ue(String(t)),each:ee,toOptional:A.none};return c},ao={value:Pm,error:Sf,fromOption:(t,s)=>t.fold(()=>Sf(s),Pm)};var Lr;(function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"})(Lr||(Lr={}));const Eu=(t,s,c)=>t.stype===Lr.Error?s(t.serror):c(t.svalue),ku=t=>{const s=[],c=[];return gt(t,l=>{Eu(l,d=>c.push(d),d=>s.push(d))}),{values:s,errors:c}},fl=(t,s)=>t.stype===Lr.Error?{stype:Lr.Error,serror:s(t.serror)}:t,Ya=(t,s)=>t.stype===Lr.Value?{stype:Lr.Value,svalue:s(t.svalue)}:t,Ol=(t,s)=>t.stype===Lr.Value?s(t.svalue):t,Ds=(t,s)=>t.stype===Lr.Error?s(t.serror):t,Gl=t=>({stype:Lr.Value,svalue:t}),ud=t=>({stype:Lr.Error,serror:t}),Sr={fromResult:t=>t.fold(ud,Gl),toResult:t=>Eu(t,ao.error,ao.value),svalue:Gl,partition:ku,serror:ud,bind:Ol,bindError:Ds,map:Ya,mapError:fl,fold:Eu},_u=(t,s,c,l)=>({tag:"field",key:t,newKey:s,presence:c,prop:l}),qd=(t,s)=>({tag:"custom",newKey:t,instantiator:s}),Ss=(t,s,c)=>{switch(t.tag){case"field":return s(t.key,t.newKey,t.presence,t.prop);case"custom":return c(t.newKey,t.instantiator)}},ai=(t,s)=>s,xf=(t,s)=>io(t)&&io(s)?Hs(t,s):s,Ki=t=>(...s)=>{if(s.length===0)throw new Error("Can't merge zero objects");const c={};for(let l=0;l<s.length;l++){const d=s[l];for(const g in d)yo(d,g)&&(c[g]=t(c[g],d[g]))}return c},Hs=Ki(xf),Au=Ki(ai),Xa=()=>({tag:"required",process:{}}),Kd=t=>({tag:"defaultedThunk",process:t}),To=t=>Kd(W(t)),Yd=()=>({tag:"option",process:{}}),Tf=t=>({tag:"mergeWithThunk",process:t}),x=t=>Tf(W(t)),R=(t,s)=>t.length>0?Sr.svalue(Hs(s,Au.apply(void 0,t))):Sr.svalue(s),H=t=>Zn(Sr.serror,Rn)(t),ot={consolidateObj:(t,s)=>{const c=Sr.partition(t);return c.errors.length>0?H(c.errors):R(c.values,s)},consolidateArr:t=>{const s=Sr.partition(t);return s.errors.length>0?H(s.errors):Sr.svalue(s.values)}},On=t=>Yt(t)&&mn(t).length>100?" removed due to size":JSON.stringify(t,null,2),so=t=>{const s=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:W("... (only showing first ten failures)")}]):t;return je(s,c=>"Failed path: ("+c.path.join(" > ")+`)
`+c.getErrorInfo())},qn=(t,s)=>Sr.serror([{path:t,getErrorInfo:s}]),pn=(t,s,c)=>qn(t,()=>'Could not find valid *required* value for "'+s+'" in '+On(c)),ur=(t,s)=>qn(t,()=>'Choice schema did not contain choice key: "'+s+'"'),Jr=(t,s,c)=>qn(t,()=>'The chosen schema: "'+c+'" did not exist in branches: '+On(s)),Da=(t,s)=>qn(t,()=>"There are unsupported fields: ["+s.join(", ")+"] specified"),Ou=(t,s)=>qn(t,W(s)),Bm=t=>{const s=(l,d)=>Sr.bindError(t(d),g=>Ou(l,g)),c=W("val");return{extract:s,toString:c}},Tg=Bm(Sr.svalue),Ja=(t,s,c,l)=>pt(s,c).fold(()=>pn(t,c,s),l),Eg=(t,s,c,l)=>{const d=pt(t,s).getOrThunk(()=>c(t));return l(d)},gv=(t,s,c)=>c(pt(t,s)),x1=(t,s,c,l)=>{const d=pt(t,s).map(g=>g===!0?c(t):g);return l(d)},Bc=(t,s,c,l,d)=>{const g=y=>d.extract(s.concat([l]),y),h=y=>y.fold(()=>Sr.svalue(A.none()),S=>{const k=d.extract(s.concat([l]),S);return Sr.map(k,A.some)});switch(t.tag){case"required":return Ja(s,c,l,g);case"defaultedThunk":return Eg(c,l,t.process,g);case"option":return gv(c,l,h);case"defaultedOptionThunk":return x1(c,l,t.process,h);case"mergeWithThunk":return Eg(c,l,W({}),y=>{const S=Hs(t.process(c),y);return g(S)})}},Vh=(t,s,c)=>{const l={},d=[];for(const g of c)Ss(g,(h,y,S,k)=>{const O=Bc(S,t,s,h,k);Sr.fold(O,N=>{d.push(...N)},N=>{l[y]=N})},(h,y)=>{l[h]=y(s)});return d.length>0?Sr.serror(d):Sr.svalue(l)},$c=t=>({extract:(l,d)=>t().extract(l,d),toString:()=>t().toString()}),zh=t=>mn(Br(t,et)),ql=t=>{const s=An(t),c=ds(t,(d,g)=>Ss(g,h=>Hs(d,{[h]:!0}),W(d)),{});return{extract:(d,g)=>{const h=Mn(g)?[]:zh(g),y=uo(h,S=>!Vr(c,S));return y.length===0?s.extract(d,g):Da(d,y)},toString:s.toString}},An=t=>({extract:(l,d)=>Vh(l,d,t),toString:()=>`obj{
`+je(t,d=>Ss(d,(g,h,y,S)=>g+" -> "+S.toString(),(g,h)=>"state("+g+")")).join(`
`)+"}"}),Kl=t=>({extract:(l,d)=>{const g=je(d,(h,y)=>t.extract(l.concat(["["+y+"]"]),h));return ot.consolidateArr(g)},toString:()=>"array("+t.toString()+")"}),T1=(t,s)=>{const c=s!==void 0?s:xt;return{extract:(g,h)=>{const y=[];for(const S of t){const k=S.extract(g,h);if(k.stype===Lr.Value)return{stype:Lr.Value,svalue:c(k.svalue)};y.push(k)}return ot.consolidateArr(y)},toString:()=>"oneOf("+je(t,g=>g.toString()).join(", ")+")"}},Uh=(t,s)=>{const c=(g,h)=>Kl(Bm(t)).extract(g,h);return{extract:(g,h)=>{const y=mn(h),S=c(g,y);return Sr.bind(S,k=>{const O=je(k,N=>_u(N,N,Xa(),s));return An(O).extract(g,h)})},toString:()=>"setOf("+s.toString()+")"}},$m=(t,s)=>{const c=Ue(s);return{extract:(g,h)=>c().extract(g,h),toString:()=>c().toString()}},E1=Zn(Kl,An),Ti=W(Tg),Du=(t,s)=>Bm(c=>{const l=typeof c;return t(c)?Sr.svalue(c):Sr.serror(`Expected type: ${s} but got: ${l}`)}),Im=Du(Qn,"number"),$t=Du(Dt,"string"),Ei=Du(Mn,"boolean"),Wh=Du(ct,"function"),Ef=t=>{if(Object(t)!==t)return!0;switch({}.toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(t).every(s=>Ef(t[s]));default:return!1}},ki=Bm(t=>Ef(t)?Sr.svalue(t):Sr.serror("Expected value to be acceptable for sending via postMessage")),kg=(t,s,c,l)=>pt(c,l).fold(()=>Jr(t,c,l),g=>g.extract(t.concat(["branch: "+l]),s)),Lm=(t,s)=>({extract:(d,g)=>pt(g,t).fold(()=>ur(d,t),y=>kg(d,g,s,y)),toString:()=>"chooseOn("+t+"). Possible values: "+mn(s)}),dd=()=>Kl(Tg),_g=t=>Bm(s=>t(s).fold(Sr.serror,Sr.svalue)),Yi=(t,s)=>Uh(c=>Sr.fromResult(t(c)),s),hv=(t,s,c)=>{const l=s.extract([t],c);return Sr.mapError(l,d=>({input:c,errors:d}))},xr=(t,s,c)=>Sr.toResult(hv(t,s,c)),dt=t=>t.fold(s=>{throw new Error(Fm(s))},xt),Qa=(t,s,c)=>dt(xr(t,s,c)),Fm=t=>`Errors: 
`+so(t.errors).join(`
`)+`

Input object: `+On(t.input),Zr=(t,s)=>Lm(t,jn(s,An)),kf=(t,s)=>$m(t,s),Ic=_u,cs=qd,Ag=t=>_g(s=>vo(t,s)?ao.value(s):ao.error(`Unsupported value: "${s}", choose one of "${t.join(", ")}".`)),Ke=t=>Ic(t,t,Xa(),Ti()),as=(t,s)=>Ic(t,t,Xa(),s),Og=t=>as(t,Im),Sc=t=>as(t,$t),Ra=(t,s)=>Ic(t,t,Xa(),Ag(s)),li=t=>as(t,Wh),k1=(t,s)=>Ic(t,t,Yd(),Bm(c=>Sr.serror("The field: "+t+" is forbidden. "+s))),Xd=(t,s)=>Ic(t,t,Xa(),An(s)),_1=(t,s)=>Ic(t,t,Xa(),E1(s)),Yl=(t,s)=>Ic(t,t,Xa(),Kl(s)),Qo=t=>Ic(t,t,Yd(),Ti()),Ru=(t,s)=>Ic(t,t,Yd(),s),Dg=t=>Ru(t,Im),xc=t=>Ru(t,$t),Zh=(t,s)=>Ru(t,Ag(s)),Xi=t=>Ru(t,Wh),Rg=(t,s)=>Ru(t,Kl(s)),Lc=(t,s)=>Ru(t,An(s)),Ma=(t,s)=>Ru(t,ql(s)),Te=(t,s)=>Ic(t,t,To(s),Ti()),Rs=(t,s,c)=>Ic(t,t,To(s),c),jh=(t,s)=>Rs(t,s,Im),Qr=(t,s)=>Rs(t,s,$t),qc=(t,s,c)=>Rs(t,s,Ag(c)),Tc=(t,s)=>Rs(t,s,Ei),Js=(t,s)=>Rs(t,s,Wh),Gh=(t,s)=>Rs(t,s,ki),Jd=(t,s,c)=>Rs(t,s,Kl(c)),w=(t,s,c)=>Rs(t,s,An(c)),L={generate:t=>{if(!xn(t))throw new Error("cases must be an array");if(t.length===0)throw new Error("there must be at least one case");const s=[],c={};return gt(t,(l,d)=>{const g=mn(l);if(g.length!==1)throw new Error("one and only one name per case");const h=g[0],y=l[h];if(c[h]!==void 0)throw new Error("duplicate key detected:"+h);if(h==="cata")throw new Error("cannot have a case named cata (sorry)");if(!xn(y))throw new Error("case arguments must be an array");s.push(h),c[h]=(...S)=>{const k=S.length;if(k!==y.length)throw new Error("Wrong number of arguments to case "+h+". Expected "+y.length+" ("+y+"), got "+k);return{fold:(...N)=>{if(N.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+N.length);return N[d].apply(null,S)},match:N=>{const V=mn(N);if(s.length!==V.length)throw new Error("Wrong number of arguments to match. Expected: "+s.join(",")+`
Actual: `+V.join(","));if(!zn(s,X=>vo(V,X)))throw new Error("Not all branches were specified when using match. Specified: "+V.join(", ")+`
Required: `+s.join(", "));return N[h].apply(null,S)},log:N=>{console.log(N,{constructors:s,constructor:h,params:S})}}}}),c}};L.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Y=t=>{const s=[],c=[];return gt(t,l=>{l.fold(d=>{s.push(d)},d=>{c.push(d)})}),{errors:s,values:c}},pe=(t,s)=>{const c={};return Ao(t,(l,d)=>{vo(s,d)||(c[d]=l)}),c},Ge=(t,s)=>({[t]:s}),St=t=>{const s={};return gt(t,c=>{s[c.key]=c.value}),s},on=(t,s)=>pe(t,s),Fn=(t,s)=>Ge(t,s),lo=t=>St(t),js=(t,s)=>t.length===0?ao.value(s):ao.value(Hs(s,Au.apply(void 0,t))),gs=t=>ao.error(Rn(t)),dr=(t,s)=>{const c=Y(t);return c.errors.length>0?gs(c.errors):js(c.values,s)},gl=t=>ct(t)?t:no,ii=(t,s,c)=>{let l=t.dom;const d=gl(c);for(;l.parentNode;){l=l.parentNode;const g=ge.fromDom(l),h=s(g);if(h.isSome())return h;if(d(g))break}return A.none()},ia=(t,s,c)=>{const l=s(t),d=gl(c);return l.orThunk(()=>d(t)?A.none():ii(t,s,d))},Mu=(t,s)=>Ko(t.element,s.event.target),md={can:Mt,abort:no,run:ee},fd=t=>{if(!Vr(t,"can")&&!Vr(t,"abort")&&!Vr(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return{...md,...t}},Qd=(t,s)=>(...c)=>Go(t,(l,d)=>l&&s(d).apply(void 0,c),!0),_f=(t,s)=>(...c)=>Go(t,(l,d)=>l||s(d).apply(void 0,c),!1),Mg=t=>ct(t)?{can:Mt,abort:no,run:t}:t,qh=t=>{const s=Qd(t,d=>d.can),c=_f(t,d=>d.abort);return{can:s,abort:c,run:(...d)=>{gt(t,g=>{g.run.apply(void 0,d)})}}},gc=W,Ji=gc("touchstart"),em=gc("touchmove"),zo=gc("touchend"),fr=gc("touchcancel"),Mr=gc("mousedown"),el=gc("mousemove"),Kh=gc("mouseout"),Yh=gc("mouseup"),Dl=gc("mouseover"),Rl=gc("focusin"),K2=gc("focusout"),Qi=gc("keydown"),Ng=gc("keyup"),gd=gc("input"),tm=gc("change"),Pg=gc("click"),s_=gc("transitioncancel"),A1=gc("transitionend"),Af=gc("transitionstart"),r_=gc("selectstart"),ac=t=>W("alloy."+t),pv={tap:ac("tap")},hd=ac("focus"),Bg=ac("blur.post"),O1=ac("paste.post"),pd=ac("receive"),Na=ac("execute"),Of=ac("focus.item"),bv=pv.tap,Df=ac("longpress"),ua=ac("sandbox.close"),vv=ac("typeahead.cancel"),yv=ac("system.init"),c_=ac("system.touchmove"),Y2=ac("system.touchend"),Rf=ac("system.scroll"),$g=ac("system.resize"),Xl=ac("system.attached"),_i=ac("system.detached"),Ai=ac("system.dismissRequested"),D1=ac("system.repositionRequested"),R1=ac("focusmanager.shifted"),Xh=ac("slotcontainer.visibility"),Ny=ac("system.external.element.scroll"),X2=ac("change.tab"),J2=ac("dismiss.tab"),Py=ac("highlight"),Jh=ac("dehighlight"),Eo=(t,s)=>{wv(t,t.element,s,{})},ln=(t,s,c)=>{wv(t,t.element,s,c)},Mf=t=>{Eo(t,Na())},Cv=(t,s,c)=>{wv(t,s,c,{})},wv=(t,s,c,l)=>{const d={target:s,...l};t.getSystem().triggerEvent(c,s,d)},By=(t,s,c,l)=>{const d={...l,target:s};t.getSystem().triggerEvent(c,s,d)},Sv=(t,s,c,l)=>{t.getSystem().triggerEvent(c,s,l.event)},xs=t=>lo(t),$y=(t,s)=>({key:t,value:fd({abort:s})}),Q2=(t,s)=>({key:t,value:fd({can:s})}),Iy=t=>({key:t,value:fd({run:(s,c)=>{c.event.prevent()}})}),Ye=(t,s)=>({key:t,value:fd({run:s})}),Qh=(t,s,c)=>({key:t,value:fd({run:(l,d)=>{s.apply(void 0,[l,d].concat(c))}})}),eS=t=>s=>Ye(t,s),Ig=t=>s=>({key:t,value:fd({run:(c,l)=>{Mu(c,l)&&s(c,l)}})}),tS=(t,s)=>Ye(t,(c,l)=>{c.getSystem().getByUid(s).each(d=>{Sv(d,d.element,t,l)})}),Hm=(t,s,c)=>{const l=s.partUids[c];return tS(t,l)},xv=(t,s)=>Ye(t,(c,l)=>{const d=l.event,g=c.getSystem().getByDom(d.target).getOrThunk(()=>ia(d.target,y=>c.getSystem().getByDom(y).toOptional(),no).getOr(c));s(c,g,l)}),Lg=t=>Ye(t,(s,c)=>{c.cut()}),M1=t=>Ye(t,(s,c)=>{c.stop()}),Nf=(t,s)=>Ig(t)(s),mr=Ig(Xl()),nm=Ig(_i()),nS=Ig(yv()),Vm=eS(Na()),Ly=(t,s,c)=>{const l=c.toString(),d=l.indexOf(")")+1,g=l.indexOf("("),h=l.substring(g+1,d-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:Fg(h.slice(0,1).concat(h.slice(3)))}),t},Fg=t=>je(t,s=>mc(s,"/*")?s.substring(0,s.length-2):s),Fy=(t,s)=>{const c=t.toString(),l=c.indexOf(")")+1,d=c.indexOf("("),g=c.substring(d+1,l-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:Fg(g)}),t},Hy=(t,s)=>{const c=s.toString(),l=c.indexOf(")")+1,d=c.indexOf("("),g=c.substring(d+1,l-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:Fg(g.slice(1))}),t},Ml=t=>({classes:zt(t.classes)?[]:t.classes,attributes:zt(t.attributes)?{}:t.attributes,styles:zt(t.styles)?{}:t.styles}),ep=(t,s)=>({...t,attributes:{...t.attributes,...s.attributes},styles:{...t.styles,...s.styles},classes:t.classes.concat(s.classes)}),a_=(t,s,c)=>Vm(l=>{c(l,t,s)}),Pf=(t,s,c)=>nS((l,d)=>{c(l,t,s)}),l_=(t,s,c,l,d,g)=>{const h=ql(t),y=Lc(s,[Ma("config",t)]);return N1(h,y,s,c,l,d,g)},Hg=(t,s,c,l,d,g)=>{const h=t,y=Lc(s,[Ru("config",t)]);return N1(h,y,s,c,l,d,g)},Tv=(t,s,c)=>Ly((d,...g)=>{const h=[d].concat(g);return d.config({name:W(t)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+c)},y=>{const S=Array.prototype.slice.call(h,1);return s.apply(void 0,[d,y.config,y.state].concat(S))})},c,s),i_=t=>({key:t,value:void 0}),N1=(t,s,c,l,d,g,h)=>{const y=N=>Vr(N,c)?N[c]():A.none(),S=jn(d,(N,V)=>Tv(c,N,V)),O={...jn(g,(N,V)=>Fy(N,V)),...S,revoke:dn(i_,c),config:N=>{const V=Qa(c+"-config",t,N);return{key:c,value:{config:V,me:O,configAsRaw:Ue(()=>Qa(c+"-config",t,N)),initialConfig:N,state:h}}},schema:W(s),exhibit:(N,V)=>ta(y(N),pt(l,"exhibit"),(z,X)=>X(V,z.config,z.state)).getOrThunk(()=>Ml({})),name:W(c),handlers:N=>y(N).map(V=>pt(l,"events").getOr(()=>({}))(V.config,V.state)).getOr({})};return O},bd={init:()=>hl({readState:W("No State required")})},hl=t=>t,vt=t=>lo(t),tp=ql([Ke("fields"),Ke("name"),Te("active",{}),Te("apis",{}),Te("state",bd),Te("extra",{})]),da=t=>{const s=Qa("Creating behaviour: "+t.name,tp,t);return l_(s.fields,s.name,s.active,s.apis,s.extra,s.state)},Vy=ql([Ke("branchKey"),Ke("branches"),Ke("name"),Te("active",{}),Te("apis",{}),Te("state",bd),Te("extra",{})]),zy=t=>{const s=Qa("Creating behaviour: "+t.name,Vy,t);return Hg(Zr(s.branchKey,s.branches),s.name,s.active,s.apis,s.extra,s.state)},Uy=W(void 0),Gs=(t,s)=>{const c=nn(t,s);return c===void 0||c===""?[]:c.split(" ")},u_=(t,s,c)=>{const d=Gs(t,s).concat([c]);return Ve(t,s,d.join(" ")),!0},Vg=(t,s,c)=>{const l=uo(Gs(t,s),d=>d!==c);return l.length>0?Ve(t,s,l.join(" ")):B(t,s),!1},zm=t=>t.dom.classList!==void 0,np=t=>Gs(t,"class"),Wy=(t,s)=>u_(t,"class",s),om=(t,s)=>Vg(t,"class",s),oS=(t,s)=>vo(np(t),s)?om(t,s):Wy(t,s),hc=(t,s)=>{zm(t)?t.dom.classList.add(s):Wy(t,s)},Ev=t=>{(zm(t)?t.dom.classList:np(t)).length===0&&B(t,"class")},Ts=(t,s)=>{zm(t)?t.dom.classList.remove(s):om(t,s),Ev(t)},Zy=(t,s)=>{const c=zm(t)?t.dom.classList.toggle(s):oS(t,s);return Ev(t),c},Nl=(t,s)=>zm(t)&&t.dom.classList.contains(s),op=(t,s)=>{gt(s,c=>{hc(t,c)})},vd=(t,s)=>{gt(s,c=>{Ts(t,c)})},WR=(t,s)=>{gt(s,c=>{Zy(t,c)})},kv=(t,s)=>zn(s,c=>Nl(t,c)),d_=t=>{const s=t.dom.classList,c=new Array(s.length);for(let l=0;l<s.length;l++){const d=s.item(l);d!==null&&(c[l]=d)}return c},sS=t=>zm(t)?d_(t):np(t),Nu=(t,s,c,l,d)=>{const g=h=>h+"px";return{position:t,left:s.map(g),top:c.map(g),right:l.map(g),bottom:d.map(g)}},yd=t=>({...t,position:A.some(t.position)}),pl=(t,s)=>{Jo(t,yd(s))},sp=t=>(br(bs(t,"position"),"fixed")?A.none():oi(t)).orThunk(()=>{const l=ge.fromTag("span");return yc(t).bind(d=>{Aa(d,l);const g=oi(l);return Ka(l),g})}),_v=t=>sp(t).map(Ws).getOrThunk(()=>Ys(0,0)),Av=(t,s)=>{const c=t.element;hc(c,s.transitionClass),Ts(c,s.fadeOutClass),hc(c,s.fadeInClass),s.onShow(t)},rp=(t,s)=>{const c=t.element;hc(c,s.transitionClass),Ts(c,s.fadeInClass),hc(c,s.fadeOutClass),s.onHide(t)},Bf=(t,s)=>t.y<s.bottom&&t.bottom>s.y,sm=(t,s)=>t.y>=s.y,cp=(t,s)=>t.bottom<=s.bottom,$f=(t,s,c)=>({location:"top",leftX:s,topY:c.bounds.y-t.y}),Um=(t,s,c)=>({location:"bottom",leftX:s,bottomY:t.bottom-c.bounds.bottom}),zg=t=>t.box.x-t.win.x,P1=(t,s,c)=>{const l=s.win,d=s.box,g=zg(s);return tn(t,h=>{switch(h){case"bottom":return cp(d,c.bounds)?A.none():A.some(Um(l,g,c));case"top":return sm(d,c.bounds)?A.none():A.some($f(l,g,c));default:return A.none()}}).getOr({location:"no-dock"})},Ov=(t,s,c)=>zn(t,l=>{switch(l){case"bottom":return cp(s,c.bounds);case"top":return sm(s,c.bounds)}}),rS=(t,s)=>{const c=s.optScrollEnv.fold(W(t.bounds.y),l=>l.scrollElmTop+(t.bounds.y-l.currentScrollTop));return Ys(t.bounds.x,c)},jy=(t,s)=>{const c=s.optScrollEnv.fold(W(t.y),l=>t.y+l.currentScrollTop-l.scrollElmTop);return Ys(t.x,c)},ap=(t,s,c)=>c.getInitialPos().map(l=>{const d=rS(l,s);return{box:lr(d.left,d.top,G(t),vs(t)),location:l.location}}),cS=(t,s,c,l,d)=>{const g=jy(s,c),h=lr(g.left,g.top,s.width,s.height);l.setInitialPos({style:rc(t),position:fs(t,"position")||"static",bounds:h,location:d.location})},m_=(t,s,c,l,d)=>{l.getInitialPos().fold(()=>cS(t,s,c,l,d),()=>ee)},Dv=(t,s,c)=>c.getInitialPos().bind(l=>{var d;switch(c.clearInitialPos(),l.position){case"static":return A.some({morph:"static"});case"absolute":const g=sp(t).getOr(be()),h=ir(g),y=(d=g.dom.scrollTop)!==null&&d!==void 0?d:0;return A.some({morph:"absolute",positionCss:Nu("absolute",pt(l.style,"left").map(S=>s.x-h.x),pt(l.style,"top").map(S=>s.y-h.y+y),pt(l.style,"right").map(S=>h.right-s.right),pt(l.style,"bottom").map(S=>h.bottom-s.bottom))});default:return A.none()}}),Gy=(t,s,c)=>ap(t,s,c).filter(({box:l})=>Ov(c.getModes(),l,s)).bind(({box:l})=>Dv(t,l,c)),B1=t=>{switch(t.location){case"top":return A.some({morph:"fixed",positionCss:Nu("fixed",A.some(t.leftX),A.some(t.topY),A.none(),A.none())});case"bottom":return A.some({morph:"fixed",positionCss:Nu("fixed",A.some(t.leftX),A.none(),A.none(),A.some(t.bottomY))});default:return A.none()}},qy=(t,s,c)=>{const l=ir(t),d=cc(),g=P1(c.getModes(),{win:d,box:l},s);return g.location==="top"||g.location==="bottom"?(cS(t,l,s,c,g),B1(g)):A.none()},lp=(t,s,c)=>Gy(t,s,c).orThunk(()=>s.optScrollEnv.bind(l=>ap(t,s,c)).bind(({box:l,location:d})=>{const g=cc(),h=zg({win:g,box:l}),y=d==="top"?$f(g,h,s):Um(g,h,s);return B1(y)})),ZR=(t,s,c)=>{const l=t.element;return br(bs(l,"position"),"fixed")?lp(l,s,c):qy(l,s,c)},jR=(t,s,c)=>{const l=t.element;return ap(l,s,c).bind(({box:d})=>Dv(l,d,c))},ip=(t,s,c,l)=>{const d=ir(t),g=cc(),h=zg({win:g,box:d}),y=l(g,h,s);return y.location==="bottom"||y.location==="top"?(m_(t,d,s,c,y),B1(y)):A.none()},Pu=(t,s,c)=>{c.setDocked(!1),gt(["left","right","top","bottom","position"],l=>Gn(t.element,l)),s.onUndocked(t)},$1=(t,s,c,l)=>{const d=l.position==="fixed";c.setDocked(d),pl(t.element,l),(d?s.onDocked:s.onUndocked)(t)},aS=(t,s,c,l,d=!1)=>{s.contextual.each(g=>{g.lazyContext(t).each(h=>{const y=Bf(h,l.bounds);y!==c.isVisible()&&(c.setVisible(y),d&&!y?(op(t.element,[g.fadeOutClass]),g.onHide(t)):(y?Av:rp)(t,g))})})},lS=(t,s,c,l,d)=>{aS(t,s,c,l,!0),$1(t,s,c,d.positionCss)},iS=(t,s,c,l,d)=>{switch(d.morph){case"static":return Pu(t,s,c);case"absolute":return $1(t,s,c,d.positionCss);case"fixed":return lS(t,s,c,l,d)}},Ug=(t,s,c)=>{const l=s.lazyViewport(t);aS(t,s,c,l),ZR(t,l,c).each(d=>{iS(t,s,c,l,d)})},GR=(t,s,c)=>{const l=t.element;c.setDocked(!1);const d=s.lazyViewport(t);jR(t,d,c).each(g=>{switch(g.morph){case"static":{Pu(t,s,c);break}case"absolute":{$1(t,s,c,g.positionCss);break}}}),c.setVisible(!0),s.contextual.each(g=>{vd(l,[g.fadeInClass,g.fadeOutClass,g.transitionClass]),g.onShow(t)}),Wg(t,s,c)},Wg=(t,s,c)=>{t.getSystem().isConnected()&&Ug(t,s,c)},up=(t,s,c)=>{c.isDocked()&&GR(t,s,c)},uS=t=>(s,c,l)=>{const d=c.lazyViewport(s);ip(s.element,d,l,t).each(h=>{lS(s,c,l,d,h)})},dp=uS($f),f_=uS(Um);var Va=Object.freeze({__proto__:null,refresh:Wg,reset:up,isDocked:(t,s,c)=>c.isDocked(),getModes:(t,s,c)=>c.getModes(),setModes:(t,s,c,l)=>c.setModes(l),forceDockToTop:dp,forceDockToBottom:f_}),If=Object.freeze({__proto__:null,events:(t,s)=>xs([Nf(A1(),(c,l)=>{t.contextual.each(d=>{Nl(c.element,d.transitionClass)&&(vd(c.element,[d.transitionClass,d.fadeInClass]),(s.isVisible()?d.onShown:d.onHidden)(c)),l.stop()})}),Ye(Rf(),(c,l)=>{Wg(c,t,s)}),Ye(Ny(),(c,l)=>{Wg(c,t,s)}),Ye($g(),(c,l)=>{up(c,t,s)})])});const g_=(t,s)=>{const l=(s||document).createElement("div");return l.innerHTML=t,oa(ge.fromDom(l))},Wm=t=>t.dom.innerHTML,ui=(t,s)=>{const l=oc(t).dom,d=ge.fromDom(l.createDocumentFragment()),g=g_(s,l);Ud(d,g),wc(t),Aa(t,d)},Cd=t=>{const s=ge.fromTag("div"),c=ge.fromDom(t.dom.cloneNode(!0));return Aa(s,c),Wm(s)},Zg=(t,s)=>ge.fromDom(t.dom.cloneNode(s)),fS=t=>Zg(t,!1),I1=t=>Zg(t,!0),Rv=t=>{if(ll(t))return"#shadow-root";{const s=fS(t);return Cd(s)}},Lf=t=>Rv(t),Yy="unknown";var wd;(function(t){t[t.STOP=0]="STOP",t[t.NORMAL=1]="NORMAL",t[t.LOGGING=2]="LOGGING"})(wd||(wd={}));const rm=hn({}),h_=(t,s)=>{const c=[],l=new Date().getTime();return{logEventCut:(d,g,h)=>{c.push({outcome:"cut",target:g,purpose:h})},logEventStopped:(d,g,h)=>{c.push({outcome:"stopped",target:g,purpose:h})},logNoParent:(d,g,h)=>{c.push({outcome:"no-parent",target:g,purpose:h})},logEventNoHandlers:(d,g)=>{c.push({outcome:"no-handlers-left",target:g})},logEventResponse:(d,g,h)=>{c.push({outcome:"response",purpose:h,target:g})},write:()=>{const d=new Date().getTime();vo(["mousemove","mouseover","mouseout",yv()],t)||console.log(t,{event:t,time:d-l,target:s.dom,sequence:je(c,g=>vo(["cut","stopped","response"],g.outcome)?"{"+g.purpose+"} "+g.outcome+" at ("+Lf(g.target)+")":g.outcome)})}}},Kc=(t,s,c)=>{switch(pt(rm.get(),t).orThunk(()=>{const d=mn(rm.get());return tn(d,g=>t.indexOf(g)>-1?A.some(rm.get()[g]):A.none())}).getOr(wd.NORMAL)){case wd.NORMAL:return c(jg());case wd.LOGGING:{const d=h_(t,s),g=c(d);return d.write(),g}case wd.STOP:return!0}},L1=["alloy/data/Fields","alloy/debugging/Debugging"],eu=()=>{const t=new Error;if(t.stack!==void 0){const s=t.stack.split(`
`);return Cn(s,c=>c.indexOf("alloy")>0&&!Ms(L1,l=>c.indexOf(l)>-1)).getOr(Yy)}else return Yy},Mv={logEventCut:ee,logEventStopped:ee,logNoParent:ee,logEventNoHandlers:ee,logEventResponse:ee,write:ee},Xy=(t,s,c)=>Kc(t,s,c),jg=W(Mv),Ff=W([Ke("menu"),Ke("selectedMenu")]),Bu=W([Ke("item"),Ke("selectedItem")]);W(An(Bu().concat(Ff())));const tu=W(An(Bu())),gS=Xd("initSize",[Ke("numColumns"),Ke("numRows")]),p_=()=>as("markers",tu()),cm=()=>Xd("markers",[Ke("backgroundMenu")].concat(Ff()).concat(Bu())),Zm=t=>Xd("markers",je(t,Ke)),Nv=(t,s,c)=>(eu(),Ic(s,s,c,_g(l=>ao.value((...d)=>l.apply(void 0,d))))),Lo=t=>Nv("onHandler",t,To(ee)),tl=t=>Nv("onKeyboardHandler",t,To(A.none)),Gg=t=>Nv("onHandler",t,Xa()),mp=t=>Nv("onKeyboardHandler",t,Xa()),Qs=(t,s)=>cs(t,W(s)),qg=t=>cs(t,xt),jm=W(gS);var hS=[Lc("contextual",[Sc("fadeInClass"),Sc("fadeOutClass"),Sc("transitionClass"),li("lazyContext"),Lo("onShow"),Lo("onShown"),Lo("onHide"),Lo("onHidden")]),Js("lazyViewport",()=>({bounds:cc(),optScrollEnv:A.none()})),Jd("modes",["top","bottom"],$t),Lo("onDocked"),Lo("onUndocked")],pS=Object.freeze({__proto__:null,init:t=>{const s=hn(!1),c=hn(!0),l=Yo(),d=hn(t.modes),g=()=>`docked:  ${s.get()}, visible: ${c.get()}, modes: ${d.get().join(",")}`;return hl({isDocked:s.get,setDocked:s.set,getInitialPos:l.get,setInitialPos:l.set,clearInitialPos:l.clear,isVisible:c.get,setVisible:c.set,getModes:d.get,setModes:d.set,readState:g})}});const er=da({fields:hS,name:"docking",active:If,apis:Va,state:pS}),F1=(t,s,c)=>Ko(s,t.element)&&!Ko(s,c),v_=xs([Q2(hd(),(t,s)=>{const c=s.event,l=c.originator,d=c.target;return F1(t,l,d)?(console.warn(hd()+` did not get interpreted by the desired target. 
Originator: `+Lf(l)+`
Target: `+Lf(d)+`
Check the `+hd()+" event handlers"),!1):!0})]);var bS=Object.freeze({__proto__:null,events:v_});const Kg=(t,s,c,l)=>{const d=t+s;return d>l?c:d<c?l:d},$u=(t,s,c)=>Math.min(Math.max(t,s),c),H1=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let Gm=0;const Qt=t=>{const c=new Date().getTime(),l=Math.floor(H1()*1e9);return Gm++,t+"_"+l+Gm+String(c)},vS=W("alloy-id-"),Pv=W("data-alloy-id"),yS=vS(),CS=Pv(),Jy=(t,s)=>{const c=Qt(yS+t);return Qy(s,c),c},Qy=(t,s)=>{Object.defineProperty(t.dom,CS,{value:s,writable:!0})},fp=t=>{const s=xo(t)?t.dom[CS]:null;return A.from(s)},V1=t=>Qt(t),Yg=xt,Bv=t=>{const s=d=>`The component must be in a context to execute: ${d}`+(t?`
`+Lf(t().element)+" is not in context.":""),c=d=>()=>{throw new Error(s(d))},l=d=>()=>{console.warn(s(d))};return{debugInfo:W("fake"),triggerEvent:l("triggerEvent"),triggerFocus:l("triggerFocus"),triggerEscape:l("triggerEscape"),broadcast:l("broadcast"),broadcastOn:l("broadcastOn"),broadcastEvent:l("broadcastEvent"),build:c("build"),buildOrPatch:c("buildOrPatch"),addToWorld:c("addToWorld"),removeFromWorld:c("removeFromWorld"),addToGui:c("addToGui"),removeFromGui:c("removeFromGui"),getByUid:c("getByUid"),getByDom:c("getByDom"),isConnected:no}},gp=Bv(),$v=Qt("alloy-premade"),Iu=t=>(Object.defineProperty(t.element.dom,$v,{value:t.uid,writable:!0}),Fn($v,t)),y_=t=>yo(t.dom,$v),Iv=t=>pt(t,$v),Lv=t=>Hy((s,...c)=>t(s.getApis(),s,...c),t),C_=(t,s)=>{const c=je(s,d=>Lc(d.name(),[Ke("config"),Te("state",bd)])),l=xr("component.behaviours",An(c),t.behaviours).fold(d=>{throw new Error(Fm(d)+`
Complete spec:
`+JSON.stringify(t,null,2))},xt);return{list:s,data:jn(l,d=>{const g=d.map(h=>({config:h.config,state:h.state.init(h.config)}));return W(g)})}},w_=t=>t.list,wS=t=>t.data,z1=(t,s)=>{const c={};return Ao(t,(l,d)=>{Ao(l,(g,h)=>{const y=pt(c,h).getOr([]);c[h]=y.concat([s(d,g)])})}),c},SS=(t,s,c,l)=>{const d={...s};gt(c,O=>{d[O.name()]=O.exhibit(t,l)});const g=z1(d,(O,N)=>({name:O,modification:N})),h=O=>ds(O,(N,V)=>({...V.modification,...N}),{}),y=ds(g.classes,(O,N)=>N.modification.concat(O),[]),S=h(g.attributes),k=h(g.styles);return Ml({classes:y,attributes:S,styles:k})},eC=(t,s,c,l)=>{try{const d=pr(c,(g,h)=>{const y=g[s],S=h[s],k=l.indexOf(y),O=l.indexOf(S);if(k===-1)throw new Error("The ordering for "+t+" does not have an entry for "+y+`.
Order specified: `+JSON.stringify(l,null,2));if(O===-1)throw new Error("The ordering for "+t+" does not have an entry for "+S+`.
Order specified: `+JSON.stringify(l,null,2));return k<O?-1:O<k?1:0});return ao.value(d)}catch(d){return ao.error([d])}},S_=(t,s)=>({handler:t,purpose:s}),U1=(t,s)=>({cHandler:t,purpose:s}),hp=(t,s)=>U1(dn.apply(void 0,[t.handler].concat(s)),t.purpose),Hf=t=>t.cHandler,Fv=(t,s)=>({name:t,handler:s}),tC=(t,s)=>{const c={};return gt(t,l=>{c[l.name()]=l.handlers(s)}),c},Hv=(t,s,c)=>{const l={...c,...tC(s,t)};return z1(l,Fv)},nC=(t,s,c,l)=>{const d=Hv(t,c,l);return di(d,s)},oC=t=>{const s=Mg(t);return(c,l,...d)=>{const g=[c,l].concat(d);s.abort.apply(void 0,g)?l.stop():s.can.apply(void 0,g)&&s.run.apply(void 0,g)}},sC=(t,s)=>ao.error(["The event ("+t+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(je(s,c=>c.name),null,2)]),xS=(t,s,c)=>{const l=s[c];return l?eC("Event: "+c,"name",t,l).map(d=>{const g=je(d,h=>h.handler);return qh(g)}):sC(c,t)},di=(t,s)=>{const c=ea(t,(l,d)=>(l.length===1?ao.value(l[0].handler):xS(l,s,d)).map(h=>{const y=oC(h),S=l.length>1?uo(s[d],k=>Ms(l,O=>O.name===k)).join(" > "):l[0].name;return Fn(d,S_(y,S))}));return dr(c,{})},Xg="alloy.base.behaviour",TS=An([Ic("dom","dom",Xa(),An([Ke("tag"),Te("styles",{}),Te("classes",[]),Te("attributes",{}),Qo("value"),Qo("innerHtml")])),Ke("components"),Ke("uid"),Te("events",{}),Te("apis",{}),Ic("eventOrder","eventOrder",x({[Na()]:["disabling",Xg,"toggling","typeaheadevents"],[hd()]:[Xg,"focusing","keying"],[yv()]:[Xg,"disabling","toggling","representing","tooltipping"],[gd()]:[Xg,"representing","streaming","invalidating"],[_i()]:[Xg,"representing","item-events","toolbar-button-events","tooltipping"],[Mr()]:["focusing",Xg,"item-type-events"],[Ji()]:["focusing",Xg,"item-type-events"],[Dl()]:["item-type-events","tooltipping"],[pd()]:["receiving","reflecting","tooltipping"]}),Ti()),Qo("domModification")]),Vf=t=>xr("custom.definition",TS,t),Jg=t=>({...t.dom,uid:t.uid,domChildren:je(t.components,s=>s.element)}),rC=t=>t.domModification.fold(()=>Ml({}),Ml),He=t=>t.events,Lu=t=>t.dom.value,Qg=(t,s)=>{if(s===void 0)throw new Error("Value.set was undefined");t.dom.value=s},x_=(t,s,c)=>Yr(t,s).map(d=>{if(c.exists(h=>!Ko(h,d))){const h=c.map(Ur).getOr("span"),y=ge.fromTag(h);return ji(d,y),y}else return d}),W1=(t,s,c)=>{c.fold(()=>Aa(t,s),l=>{Ko(l,s)||(ji(l,s),Ka(l))})},nu=(t,s,c)=>{const l=je(s,c),d=oa(t);return gt(d.slice(l.length),Ka),l},pp=(t,s,c,l)=>{const d=Yr(t,s),g=l(c,d),h=x_(t,s,d);return W1(t,g.element,h),g},ES=(t,s,c)=>nu(t,s,(l,d)=>pp(t,d,l,c)),kS=(t,s)=>nu(t,s,(c,l)=>{const d=Yr(t,l);return W1(t,c,d),c}),nl=(t,s)=>{const c=mn(t),l=mn(s),d=Lt(l,c),g=cr(t,(h,y)=>!yo(s,y)||h!==s[y]).t;return{toRemove:d,toSet:g}},Vv=(t,s)=>{const{class:c,style:l,...d}=K(s),{toSet:g,toRemove:h}=nl(t.attributes,d),y=()=>{gt(h,ye=>B(s,ye)),Vo(s,g)},S=rc(s),{toSet:k,toRemove:O}=nl(t.styles,S),N=()=>{gt(O,ye=>Gn(s,ye)),co(s,k)},V=sS(s),z=Lt(V,t.classes),X=Lt(t.classes,V),ne=()=>{op(s,X),vd(s,z)},Ce=ye=>{ui(s,ye)},ae=()=>{const ye=t.domChildren;kS(s,ye)},ve=()=>{const ye=s,$e=t.value.getOrUndefined();$e!==Lu(ye)&&Qg(ye,$e??"")};return y(),ne(),N(),t.innerHtml.fold(ae,Ce),ve(),s},_S=t=>{const s=ge.fromTag(t.tag);Vo(s,t.attributes),op(s,t.classes),co(s,t.styles),t.innerHtml.each(l=>ui(s,l));const c=t.domChildren;return Ud(s,c),t.value.each(l=>{Qg(s,l)}),s},T_=(t,s)=>{try{const c=Vv(t,s);return A.some(c)}catch{return A.none()}},AS=t=>t.innerHtml.isSome()&&t.domChildren.length>0,E_=(t,s)=>{const c=d=>Ur(d)===t.tag&&!AS(t)&&!y_(d),l=s.filter(c).bind(d=>T_(t,d)).getOrThunk(()=>_S(t));return Qy(l,t.uid),l},OS=t=>{const s=pt(t,"behaviours").getOr({});return xe(mn(s),c=>{const l=s[c];return et(l)?[l.me]:[]})},k_=(t,s)=>C_(t,s),__=t=>{const s=OS(t);return k_(t,s)},DS=(t,s,c)=>{const l=Jg(t),d=rC(t),g={"alloy.base.modification":d},h=s.length>0?SS(c,g,s,l):d;return ep(l,h)},bp=(t,s,c)=>{const l={"alloy.base.behaviour":He(t)};return nC(c,t.eventOrder,s,l).getOrDie()},A_=(t,s)=>{const c=()=>ye,l=hn(gp),d=dt(Vf(t)),g=__(t),h=w_(g),y=wS(g),S=DS(d,h,y),k=E_(S,s),O=bp(d,h,y),N=hn(d.components),V=$e=>{l.set($e)},z=()=>{l.set(Bv(c))},X=()=>{const $e=oa(k),Le=xe($e,kt=>l.get().getByDom(kt).fold(()=>[],Ho));N.set(Le)},ne=$e=>{const Le=y;return(ct(Le[$e.name()])?Le[$e.name()]:()=>{throw new Error("Could not find "+$e.name()+" in "+JSON.stringify(t,null,2))})()},Ce=$e=>ct(y[$e.name()]),ae=()=>d.apis,ve=$e=>y[$e]().map(Le=>Le.state.readState()).getOr("not enabled"),ye={uid:t.uid,getSystem:l.get,config:ne,hasConfigured:Ce,spec:t,readState:ve,getApis:ae,connect:V,disconnect:z,element:k,syncComponents:X,components:N.get,events:O};return ye},RS=(t,s)=>{const c=pt(t,"components").getOr([]);return s.fold(()=>je(c,Yc),l=>je(c,(d,g)=>aC(d,Yr(l,g))))},O_=(t,s)=>{const{events:c,...l}=Yg(t),d=RS(l,s),g={...l,events:{...bS,...c},components:d};return ao.value(A_(g,s))},Nr=t=>{const s=ge.fromText(t);return cC({element:s})},cC=t=>{const s=Qa("external.component",ql([Ke("element"),Qo("uid")]),t),c=hn(Bv()),l=y=>{c.set(y)},d=()=>{c.set(Bv(()=>h))},g=s.uid.getOrThunk(()=>V1("external"));Qy(s.element,g);const h={uid:g,getSystem:c.get,config:A.none,hasConfigured:no,connect:l,disconnect:d,getApis:()=>({}),element:s.element,spec:t,readState:W("No state"),syncComponents:ee,components:W([]),events:{}};return Iu(h)},MS=V1,NS=t=>yo(t,"uid"),aC=(t,s)=>Iv(t).getOrThunk(()=>{const c=NS(t)?t:{uid:MS(""),...t};return O_(c,s).getOrDie()}),Yc=t=>aC(t,A.none()),Oi=Iu;var PS=(t,s,c,l,d)=>t(c,l)?A.some(c):ct(d)&&d(c)?A.none():s(c,l,d);const lC=(t,s,c)=>{let l=t.dom;const d=ct(c)?c:no;for(;l.parentNode;){l=l.parentNode;const g=ge.fromDom(l);if(s(g))return A.some(g);if(d(g))break}return A.none()},iC=(t,s,c)=>PS((d,g)=>g(d),lC,t,s,c),D_=(t,s)=>{const c=t.dom;return c.parentNode?zv(ge.fromDom(c.parentNode),l=>!Ko(t,l)&&s(l)):A.none()},zv=(t,s)=>{const c=d=>s(ge.fromDom(d));return Cn(t.dom.childNodes,c).map(ge.fromDom)},BS=(t,s)=>{const c=l=>{for(let d=0;d<l.childNodes.length;d++){const g=ge.fromDom(l.childNodes[d]);if(s(g))return A.some(g);const h=c(l.childNodes[d]);if(h.isSome())return h}return A.none()};return c(t.dom)},Z1=(t,s,c)=>iC(t,s,c).isSome(),$S=t=>Ta(t),Fc=(t,s,c)=>lC(t,l=>Ar(l,s),c),R_=(t,s)=>D_(t,c=>Ar(c,s)),ou=(t,s)=>zv(t,c=>Ar(c,s)),gr=(t,s)=>Ta(s,t),am=(t,s,c)=>PS((d,g)=>Ar(d,g),Fc,t,s,c),vp="aria-controls",uC=t=>iC(t,c=>{if(!xo(c))return!1;const l=nn(c,"id");return l!==void 0&&l.indexOf(vp)>-1}).bind(c=>{const l=nn(c,"id"),d=Dr(c);return gr(d,`[${vp}="${l}"]`)}),j1=()=>{const t=Qt(vp);return{id:t,link:l=>{Ve(l,vp,t)},unlink:l=>{B(l,vp)}}},IS=(t,s)=>uC(s).exists(c=>zf(t,c)),zf=(t,s)=>Z1(s,c=>Ko(c,t.element),no)||IS(t,s),za=(t,s,c,l,d,g,h,y=!1)=>({x:t,y:s,bubble:c,direction:l,placement:d,restriction:g,label:`${h}-${d}`,alwaysFit:y}),lm=L.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),LS=(t,s,c,l,d,g,h,y,S)=>t.fold(s,c,l,d,g,h,y,S),M_=(t,s,c,l)=>t.fold(s,s,l,l,s,l,c,c),dC=(t,s,c,l)=>t.fold(s,l,s,l,c,c,s,l),Uv=lm.southeast,mC=lm.southwest,fC=lm.northeast,Wv=lm.northwest,en=lm.south,G1=lm.north,gC=lm.east,FS=lm.west,N_=(t,s)=>{switch(s){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}},Ua=(t,s)=>Zo(["left","right","top","bottom"],c=>pt(s,c).map(l=>N_(t,l))),HS=(t,s,c)=>{const l=(S,k)=>s[S].map(O=>{const N=S==="top"||S==="bottom",V=N?c.top:c.left,X=(S==="left"||S==="top"?Math.max:Math.min)(O,k)+V;return N?$u(X,t.y,t.bottom):$u(X,t.x,t.right)}).getOr(k),d=l("left",t.x),g=l("top",t.y),h=l("right",t.right),y=l("bottom",t.bottom);return lr(d,g,h-d,y-g)},Uf="layout",VS=t=>t.x,hC=(t,s)=>t.x+t.width/2-s.width/2,zS=(t,s)=>t.x+t.width-s.width,Wa=(t,s)=>t.y-s.height,Wf=t=>t.y+t.height,pC=(t,s)=>t.y+t.height/2-s.height/2,eh=t=>t.x+t.width,P_=(t,s)=>t.x-s.width,Hc=(t,s,c)=>za(VS(t),Wf(t),c.southeast(),Uv(),"southeast",Ua(t,{left:1,top:3}),Uf),Vc=(t,s,c)=>za(zS(t,s),Wf(t),c.southwest(),mC(),"southwest",Ua(t,{right:0,top:3}),Uf),Pa=(t,s,c)=>za(VS(t),Wa(t,s),c.northeast(),fC(),"northeast",Ua(t,{left:1,bottom:2}),Uf),zc=(t,s,c)=>za(zS(t,s),Wa(t,s),c.northwest(),Wv(),"northwest",Ua(t,{right:0,bottom:2}),Uf),ys=(t,s,c)=>za(hC(t,s),Wa(t,s),c.north(),G1(),"north",Ua(t,{bottom:2}),Uf),Ec=(t,s,c)=>za(hC(t,s),Wf(t),c.south(),en(),"south",Ua(t,{top:3}),Uf),Zv=(t,s,c)=>za(eh(t),pC(t,s),c.east(),gC(),"east",Ua(t,{left:0}),Uf),bC=(t,s,c)=>za(P_(t,s),pC(t,s),c.west(),FS(),"west",Ua(t,{right:1}),Uf),vC=()=>[Hc,Vc,Pa,zc,Ec,ys,Zv,bC],yC=()=>[Vc,Hc,zc,Pa,Ec,ys,Zv,bC],US=()=>[Pa,zc,Hc,Vc,ys,Ec],WS=()=>[zc,Pa,Vc,Hc,ys,Ec],q1=()=>[Hc,Vc,Pa,zc,Ec,ys],jv=()=>[Vc,Hc,zc,Pa,Ec,ys],K1=(t,s)=>s.universal?t:uo(t,c=>vo(s.channels,c));var KR=Object.freeze({__proto__:null,events:t=>xs([Ye(pd(),(s,c)=>{const l=t.channels,d=mn(l),g=c,h=K1(d,g);gt(h,y=>{const S=l[y],k=S.schema,O=Qa("channel["+y+`] data
Receiver: `+Lf(s.element),k,g.data);S.onReceive(s,O)})})])}),th=[as("channels",Yi(ao.value,ql([Gg("onReceive"),Te("schema",Ti())])))];const mi=da({fields:th,name:"receiving",active:KR});var $_=Object.freeze({__proto__:null,exhibit:(t,s)=>Ml({classes:[],styles:s.useFixed()?{}:{position:"relative"}})});const su=(t,s=!1)=>t.dom.focus({preventScroll:s}),yp=t=>t.dom.blur(),Cp=t=>{const s=Dr(t).dom;return t.dom===s.activeElement},im=(t=ri())=>A.from(t.dom.activeElement).map(ge.fromDom),bl=t=>im(Dr(t)).filter(s=>t.dom.contains(s.dom)),CC=(t,s)=>{const c=Dr(s),l=im(c).bind(g=>{const h=y=>Ko(g,y);return h(s)?A.some(s):BS(s,h)}),d=t(s);return l.each(g=>{im(c).filter(h=>Ko(h,g)).fold(()=>{su(g)},ee)}),d},Zf=L.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),jS=(t,s,c,l,d,g)=>{const h=s.rect,y=h.x-c,S=h.y-l,k=h.width,O=h.height,N=d-(y+k),V=g-(S+O),z=A.some(y),X=A.some(S),ne=A.some(N),Ce=A.some(V),ae=A.none();return LS(s.direction,()=>Nu(t,z,X,ae,ae),()=>Nu(t,ae,X,ne,ae),()=>Nu(t,z,ae,ae,Ce),()=>Nu(t,ae,ae,ne,Ce),()=>Nu(t,z,X,ae,ae),()=>Nu(t,z,ae,ae,Ce),()=>Nu(t,z,X,ae,ae),()=>Nu(t,ae,X,ne,ae))},Gv=(t,s)=>t.fold(()=>{const c=s.rect;return Nu("absolute",A.some(c.x),A.some(c.y),A.none(),A.none())},(c,l,d,g)=>jS("absolute",s,c,l,d,g),(c,l,d,g)=>jS("fixed",s,c,l,d,g)),wC=(t,s)=>{const c=dn(Gd,s),l=t.fold(c,c,()=>{const h=Oa();return Gd(s).translate(-h.left,-h.top)}),d=Q(s),g=_l(s);return lr(l.left,l.top,d,g)},Y1=(t,s)=>s.fold(()=>t.fold(cc,cc,lr),c=>t.fold(W(c),W(c),()=>{const l=qv(t,c.x,c.y);return lr(l.left,l.top,c.width,c.height)})),qv=(t,s,c)=>{const l=Ys(s,c),d=()=>{const g=Oa();return l.translate(-g.left,-g.top)};return t.fold(W(l),W(l),d)},GS=(t,s,c,l)=>t.fold(s,c,l);Zf.none;const qS=Zf.relative,KS=Zf.fixed,X1=(t,s)=>({anchorBox:t,origin:s}),nh=(t,s)=>X1(t,s),J1="data-alloy-placement",I_=(t,s)=>{Ve(t,J1,s)},SC=t=>Hn(t,J1),L_=t=>B(t,J1),Kv=L.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),F_=(t,s)=>{const{x:c,y:l,right:d,bottom:g}=s,{x:h,y,right:S,bottom:k,width:O,height:N}=t,V=h>=c&&h<=d,z=y>=l&&y<=g,X=V&&z,ne=S<=d&&S>=c,Ce=k<=g&&k>=l,ae=ne&&Ce,ve=Math.min(O,h>=c?d-h:S-c),ye=Math.min(N,y>=l?g-y:k-l);return{originInBounds:X,sizeInBounds:ae,visibleW:ve,visibleH:ye}},YS=(t,s)=>{const{x:c,y:l,right:d,bottom:g}=s,{x:h,y,width:S,height:k}=t,O=Math.max(c,d-S),N=Math.max(l,g-k),V=$u(h,c,O),z=$u(y,l,N),X=Math.min(V+S,d)-V,ne=Math.min(z+k,g)-z;return lr(V,z,X,ne)},H_=(t,s,c)=>{const l=W(s.bottom-c.y),d=W(c.bottom-s.y),g=M_(t,d,d,l),h=W(s.right-c.x),y=W(c.right-s.x);return{maxWidth:dC(t,y,y,h),maxHeight:g}},XS=(t,s,c,l)=>{const d=t.bubble,g=d.offset,h=HS(l,t.restriction,g),y=t.x+g.left,S=t.y+g.top,k=lr(y,S,s,c),{originInBounds:O,sizeInBounds:N,visibleW:V,visibleH:z}=F_(k,h),X=O&&N,ne=X?k:YS(k,h),Ce=ne.width>0&&ne.height>0,{maxWidth:ae,maxHeight:ve}=H_(t.direction,ne,l),ye={rect:ne,maxHeight:ve,maxWidth:ae,direction:t.direction,placement:t.placement,classes:{on:d.classesOn,off:d.classesOff},layout:t.label,testY:S};return X||t.alwaysFit?Kv.fit(ye):Kv.nofit(ye,V,z,Ce)},Q1=(t,s,c,l,d,g)=>{const h=l.width,y=l.height,S=(O,N,V,z,X)=>{const ne=O(c,l,d,t,g),Ce=XS(ne,h,y,g);return Ce.fold(W(Ce),(ae,ve,ye,$e)=>(X===$e?ye>z||ve>V:!X&&$e)?Ce:Kv.nofit(N,V,z,X))};return Go(s,(O,N)=>{const V=dn(S,N);return O.fold(W(O),V)},Kv.nofit({rect:c,maxHeight:l.height,maxWidth:l.width,direction:Uv(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:c.y},-1,-1,!1)).fold(xt,xt)},JS=Mt,Pl=(t,s,c)=>zd(t,s,JS,c),xC=(t,s,c)=>la(t,s,JS,c),QS=Pc,TC=["top","bottom","right","left"],eb="data-alloy-transition-timer",V_=(t,s)=>kv(t,s.classes),z_=(t,s,c)=>c.exists(l=>{const d=t.mode;return d==="all"?!0:l[d]!==s[d]}),U_=(t,s)=>{const c=l=>parseFloat(l).toFixed(3);return Vt(s,(l,d)=>{const g=t[d].map(c),h=l.map(c);return!Oc(g,h)}).isSome()},Yv=t=>{const s=g=>{const y=fs(t,g).split(/\s*,\s*/);return uo(y,le)},c=g=>{if(Dt(g)&&/^[\d.]+/.test(g)){const h=parseFloat(g);return mc(g,"ms")?h:h*1e3}else return 0},l=s("transition-delay"),d=s("transition-duration");return Go(d,(g,h,y)=>{const S=c(l[y])+c(h);return Math.max(g,S)},0)},ex=(t,s)=>{const c=Al(),l=Al();let d;const g=k=>{var O;const N=(O=k.raw.pseudoElement)!==null&&O!==void 0?O:"";return Ko(k.target,t)&&re(N)&&vo(TC,k.raw.propertyName)},h=k=>{if(ft(k)||g(k)){c.clear(),l.clear();const O=k==null?void 0:k.raw.type;(ft(O)||O===A1())&&(clearTimeout(d),B(t,eb),vd(t,s.classes))}},y=Pl(t,Af(),k=>{g(k)&&(y.unbind(),c.set(Pl(t,A1(),h)),l.set(Pl(t,s_(),h)))}),S=Yv(t);requestAnimationFrame(()=>{d=setTimeout(h,S+17),Ve(t,eb,d)})},EC=(t,s)=>{op(t,s.classes),Hn(t,eb).each(c=>{clearTimeout(parseInt(c,10)),B(t,eb)}),ex(t,s)},kC=(t,s,c,l,d,g)=>{const h=z_(l,d,g);if(h||V_(t,l)){qe(t,"position",c.position);const y=wC(s,t),S=Gv(s,{...d,rect:y}),k=Zo(TC,O=>S[O]);U_(c,k)&&(Jo(t,k),h&&EC(t,l),ka(t))}else vd(t,l.classes)},tb=t=>({width:Q(t),height:_l(t)}),_C=(t,s,c,l)=>{Gn(s,"max-height"),Gn(s,"max-width");const d=tb(s);return Q1(s,l.preference,t,d,c,l.bounds)},tx=(t,s)=>{const c=s.classes;vd(t,c.off),op(t,c.on)},nx=(t,s,c)=>{const l=c.maxHeightFunction;l(t,s.maxHeight)},ox=(t,s,c)=>{const l=c.maxWidthFunction;l(t,s.maxWidth)},W_=(t,s,c)=>{const l=Gv(c.origin,s);c.transition.each(d=>{kC(t,c.origin,l,d,s,c.lastPlacement)}),pl(t,l)},sx=(t,s)=>{I_(t,s.placement)},AC=(t,s)=>{bf(t,Math.floor(s))},rx=W((t,s)=>{AC(t,s),co(t,{"overflow-x":"hidden","overflow-y":"auto"})}),jf=W((t,s)=>{AC(t,s)}),cx=(t,s,c)=>t[s]===void 0?c:t[s],Z_=(t,s,c,l,d,g,h,y)=>{const S=cx(h,"maxHeightFunction",rx()),k=cx(h,"maxWidthFunction",ee),O=t.anchorBox,N=t.origin,V={bounds:Y1(N,g),origin:N,preference:l,maxHeightFunction:S,maxWidthFunction:k,lastPlacement:d,transition:y};return j_(O,s,c,V)},j_=(t,s,c,l)=>{const d=_C(t,s,c,l);return W_(s,d,l),sx(s,d),tx(s,d),nx(s,d,l),ox(s,d,l),{layout:d.layout,placement:d.placement}},Xv=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],Fu=(t,s,c,l=1)=>{const d=t*l,g=s*l,h=S=>pt(c,S).getOr([]),y=(S,k,O)=>{const N=Lt(Xv,O);return{offset:Ys(S,k),classesOn:xe(O,h),classesOff:xe(N,h)}};return{southeast:()=>y(-t,s,["top","alignLeft"]),southwest:()=>y(t,s,["top","alignRight"]),south:()=>y(-t/2,s,["top","alignCentre"]),northeast:()=>y(-t,-s,["bottom","alignLeft"]),northwest:()=>y(t,-s,["bottom","alignRight"]),north:()=>y(-t/2,-s,["bottom","alignCentre"]),east:()=>y(t,-s/2,["valignCentre","left"]),west:()=>y(-t,-s/2,["valignCentre","right"]),insetNortheast:()=>y(d,g,["top","alignLeft","inset"]),insetNorthwest:()=>y(-d,g,["top","alignRight","inset"]),insetNorth:()=>y(-d/2,g,["top","alignCentre","inset"]),insetSoutheast:()=>y(d,-g,["bottom","alignLeft","inset"]),insetSouthwest:()=>y(-d,-g,["bottom","alignRight","inset"]),insetSouth:()=>y(-d/2,-g,["bottom","alignCentre","inset"]),insetEast:()=>y(-d,-g/2,["valignCentre","right","inset"]),insetWest:()=>y(d,-g/2,["valignCentre","left","inset"])}},Jv=()=>Fu(0,0,{}),Qv=xt,OC=(t,s)=>c=>ax(c)==="rtl"?s:t,ax=t=>fs(t,"direction")==="rtl"?"rtl":"ltr";var kc;(function(t){t.TopToBottom="toptobottom",t.BottomToTop="bottomtotop"})(kc||(kc={}));const lx="data-alloy-vertical-dir",wp=t=>Z1(t,s=>xo(s)&&nn(s,"data-alloy-vertical-dir")===kc.BottomToTop),Gf=()=>Lc("layouts",[Ke("onLtr"),Ke("onRtl"),Qo("onBottomLtr"),Qo("onBottomRtl")]),e0=(t,s,c,l,d,g,h)=>{const y=h.map(wp).getOr(!1),S=s.layouts.map(z=>z.onLtr(t)),k=s.layouts.map(z=>z.onRtl(t)),O=y?s.layouts.bind(z=>z.onBottomLtr.map(X=>X(t))).or(S).getOr(d):S.getOr(c),N=y?s.layouts.bind(z=>z.onBottomRtl.map(X=>X(t))).or(k).getOr(g):k.getOr(l);return OC(O,N)(t)},ix=(t,s,c)=>{const l=s.hotspot,d=wC(c,l.element),g=e0(t.element,s,q1(),jv(),US(),WS(),A.some(s.hotspot.element));return A.some(Qv({anchorBox:d,bubble:s.bubble.getOr(Jv()),overrides:s.overrides,layouts:g}))};var G_=[Ke("hotspot"),Qo("bubble"),Te("overrides",{}),Gf(),Qs("placement",ix)];const q_=(t,s,c)=>{const l=qv(c,s.x,s.y),d=lr(l.left,l.top,s.width,s.height),g=e0(t.element,s,vC(),yC(),vC(),yC(),A.none());return A.some(Qv({anchorBox:d,bubble:s.bubble,overrides:s.overrides,layouts:g}))};var ux=[Ke("x"),Ke("y"),Te("height",0),Te("width",0),Te("bubble",Jv()),Te("overrides",{}),Gf(),Qs("placement",q_)];const nb=L.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),DC=t=>t.fold(xt,(s,c,l)=>s.translate(-c,-l)),K_=t=>t.fold(xt,xt),Sp=t=>Go(t,(s,c)=>s.translate(c.left,c.top),Ys(0,0)),dx=t=>{const s=je(t,DC);return Sp(s)},mx=t=>{const s=je(t,K_);return Sp(s)},fx=nb.screen,RC=nb.absolute,t0=(t,s,c)=>{const l=Rc(c.root).dom,d=g=>{const h=oc(g),y=oc(t.element);return Ko(h,y)};return A.from(l.frameElement).map(ge.fromDom).filter(d).map(Ws)},gx=(t,s,c)=>{const l=oc(t.element),d=Oa(l),g=t0(t,s,c).getOr(d);return RC(g,d.left,d.top)},qf=(t,s,c,l)=>{const d=fx(Ys(t,s));return A.some(id(d,c,l))},Y_=(t,s,c,l,d)=>t.map(g=>{const h=[s,g.point],y=GS(l,()=>mx(h),()=>mx(h),()=>dx(h)),S=Nm(y.left,y.top,g.width,g.height),k=c.showAbove?US():q1(),O=c.showAbove?WS():jv(),N=e0(d,c,k,O,k,O,A.none());return Qv({anchorBox:S,bubble:c.bubble.getOr(Jv()),overrides:c.overrides,layouts:N})}),hx=(t,s,c)=>{const l=gx(t,c,s);return s.node.filter(se).bind(d=>{const g=d.dom.getBoundingClientRect(),h=qf(g.left,g.top,g.width,g.height),y=s.node.getOr(t.element);return Y_(h,l,s,c,y)})};var px=[Ke("node"),Ke("root"),Qo("bubble"),Gf(),Te("overrides",{}),Te("showAbove",!1),Qs("placement",hx)];const n0="\uFEFF",X_=" ",o0={create:(t,s,c,l)=>({start:t,soffset:s,finish:c,foffset:l})},ob=L.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),bx=(t,s,c,l)=>t.fold(s,c,l),xp=t=>t.fold(xt,xt,xt),Tp=ob.before,J_=ob.on,vx=ob.after,Q_={before:Tp,on:J_,after:vx,cata:bx,getStart:xp},sh=L.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Ep=t=>sh.exact(t.start,t.soffset,t.finish,t.foffset),MC=t=>t.match({domRange:s=>ge.fromDom(s.startContainer),relative:(s,c)=>Q_.getStart(s),exact:(s,c,l,d)=>s}),NC=sh.domRange,eA=sh.relative,PC=sh.exact,yx=t=>{const s=MC(t);return Rc(s)},Cx=o0.create,kp={domRange:NC,relative:eA,exact:PC,exactFromRange:Ep,getWin:yx,range:Cx},wx=(t,s)=>{s.fold(c=>{t.setStartBefore(c.dom)},(c,l)=>{t.setStart(c.dom,l)},c=>{t.setStartAfter(c.dom)})},s0=(t,s)=>{s.fold(c=>{t.setEndBefore(c.dom)},(c,l)=>{t.setEnd(c.dom,l)},c=>{t.setEndAfter(c.dom)})},Kf=(t,s,c)=>{const l=t.document.createRange();return wx(l,s),s0(l,c),l},qm=(t,s,c,l,d)=>{const g=t.document.createRange();return g.setStart(s.dom,c),g.setEnd(l.dom,d),g},sb=t=>({left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}),rb=t=>{const s=t.getClientRects(),c=s.length>0?s[0]:t.getBoundingClientRect();return c.width>0||c.height>0?A.some(c).map(sb):A.none()},tA=t=>{const s=t.getBoundingClientRect();return s.width>0||s.height>0?A.some(s).map(sb):A.none()},fi=L.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Sd=(t,s,c)=>s(ge.fromDom(c.startContainer),c.startOffset,ge.fromDom(c.endContainer),c.endOffset),BC=(t,s)=>s.match({domRange:c=>({ltr:W(c),rtl:A.none}),relative:(c,l)=>({ltr:Ue(()=>Kf(t,c,l)),rtl:Ue(()=>A.some(Kf(t,l,c)))}),exact:(c,l,d,g)=>({ltr:Ue(()=>qm(t,c,l,d,g)),rtl:Ue(()=>A.some(qm(t,d,g,c,l)))})}),nA=(t,s)=>{const c=s.ltr();return c.collapsed?s.rtl().filter(d=>d.collapsed===!1).map(d=>fi.rtl(ge.fromDom(d.endContainer),d.endOffset,ge.fromDom(d.startContainer),d.startOffset)).getOrThunk(()=>Sd(t,fi.ltr,c)):Sd(t,fi.ltr,c)},YR=(t,s)=>{const c=BC(t,s);return nA(t,c)},Yf=(t,s)=>YR(t,s).match({ltr:(l,d,g,h)=>{const y=t.document.createRange();return y.setStart(l.dom,d),y.setEnd(g.dom,h),y},rtl:(l,d,g,h)=>{const y=t.document.createRange();return y.setStart(g.dom,h),y.setEnd(l.dom,d),y}});fi.ltr,fi.rtl;const _p=(t,s,c)=>uo(ni(t,c),s),Ba=(t,s)=>ed(s,t),$C=(t,s,c,l)=>{const g=oc(t).dom.createRange();return g.setStart(t.dom,s),g.setEnd(c.dom,l),g},r0=(t,s,c,l)=>{const d=$C(t,s,c,l),g=Ko(t,c)&&s===l;return d.collapsed&&!g},rh=t=>A.from(t.getSelection()),cb=t=>{if(t.rangeCount>0){const s=t.getRangeAt(0),c=t.getRangeAt(t.rangeCount-1);return A.some(o0.create(ge.fromDom(s.startContainer),s.startOffset,ge.fromDom(c.endContainer),c.endOffset))}else return A.none()},oA=t=>{if(t.anchorNode===null||t.focusNode===null)return cb(t);{const s=ge.fromDom(t.anchorNode),c=ge.fromDom(t.focusNode);return r0(s,t.anchorOffset,c,t.focusOffset)?A.some(o0.create(s,t.anchorOffset,c,t.focusOffset)):cb(t)}},IC=t=>rh(t).filter(s=>s.rangeCount>0).bind(oA),ab=(t,s)=>{const c=Yf(t,s);return rb(c)},$a=(t,s)=>{const c=Yf(t,s);return tA(c)},ru=((t,s)=>{const c=g=>{if(!t(g))throw new Error("Can only get "+s+" value of a "+s+" node");return l(g).getOr("")},l=g=>t(g)?A.from(g.dom.nodeValue):A.none();return{get:c,getOption:l,set:(g,h)=>{if(!t(g))throw new Error("Can only set raw "+s+" value of a "+s+" node");g.dom.nodeValue=h}}})(Kr,"text"),FC=t=>ru.get(t),Ap=(t,s)=>({element:t,offset:s}),Op=(t,s)=>{const c=oa(t);if(c.length===0)return Ap(t,s);if(s<c.length)return Ap(c[s],0);{const l=c[c.length-1],d=Kr(l)?FC(l).length:oa(l).length;return Ap(l,d)}},HC=(t,s)=>Kr(t)?Ap(t,s):Op(t,s),Km=t=>t.foffset!==void 0,VC=(t,s)=>s.getSelection.getOrThunk(()=>()=>IC(t))().map(l=>{if(Km(l)){const d=HC(l.start,l.soffset),g=HC(l.finish,l.foffset);return kp.range(d.element,d.offset,g.element,g.offset)}else return l}),zC=(t,s,c)=>{const l=Rc(s.root).dom,d=gx(t,c,s),g=VC(l,s).bind(S=>{if(Km(S))return $a(l,kp.exactFromRange(S)).orThunk(()=>{const O=ge.fromText(n0);ji(S.start,O);const N=ab(l,kp.exact(O,0,O,1));return Ka(O),N}).bind(O=>qf(O.left,O.top,O.width,O.height));{const k=jn(S,N=>N.dom.getBoundingClientRect()),O={left:Math.min(k.firstCell.left,k.lastCell.left),right:Math.max(k.firstCell.right,k.lastCell.right),top:Math.min(k.firstCell.top,k.lastCell.top),bottom:Math.max(k.firstCell.bottom,k.lastCell.bottom)};return qf(O.left,O.top,O.right-O.left,O.bottom-O.top)}}),y=VC(l,s).bind(S=>Km(S)?xo(S.start)?A.some(S.start):na(S.start):A.some(S.firstCell)).getOr(t.element);return Y_(g,d,s,c,y)};var UC=[Qo("getSelection"),Ke("root"),Qo("bubble"),Gf(),Te("overrides",{}),Te("showAbove",!1),Qs("placement",zC)];const um="link-layout",c0=t=>t.x+t.width,Za=(t,s)=>t.x-s.width,Sx=(t,s)=>t.y-s.height+t.height,WC=t=>t.y,ZC=(t,s,c)=>za(c0(t),WC(t),c.southeast(),Uv(),"southeast",Ua(t,{left:0,top:2}),um),xx=(t,s,c)=>za(Za(t,s),WC(t),c.southwest(),mC(),"southwest",Ua(t,{right:1,top:2}),um),jC=(t,s,c)=>za(c0(t),Sx(t,s),c.northeast(),fC(),"northeast",Ua(t,{left:0,bottom:3}),um),Tx=(t,s,c)=>za(Za(t,s),Sx(t,s),c.northwest(),Wv(),"northwest",Ua(t,{right:1,bottom:3}),um),Ex=()=>[ZC,xx,jC,Tx],Di=()=>[xx,ZC,Tx,jC],Xf=(t,s,c)=>{const l=wC(c,s.item.element),d=e0(t.element,s,Ex(),Di(),Ex(),Di(),A.none());return A.some(Qv({anchorBox:l,bubble:Jv(),overrides:s.overrides,layouts:d}))};var kx=[Ke("item"),Gf(),Te("overrides",{}),Qs("placement",Xf)],ch=Zr("type",{selection:UC,node:px,hotspot:G_,submenu:kx,makeshift:ux});const vl=[Yl("classes",$t),qc("mode","all",["all","layout","placement"])],gi=[Te("useFixed",no),Qo("getBounds")],yl=[as("anchor",ch),Lc("transition",vl)],Ri=()=>{const t=document.documentElement;return KS(0,0,t.clientWidth,t.clientHeight)},a0=t=>{const s=Ws(t.element),c=t.element.dom.getBoundingClientRect();return qS(s.left,s.top,c.width,c.height)},Mi=(t,s,c,l,d,g)=>{const h=nh(s.anchorBox,t);return Z_(h,l.element,s.bubble,s.layouts,d,c,s.overrides,g)},ah=(t,s,c,l,d)=>{const g=A.none();_x(t,s,c,l,d,g)},_x=(t,s,c,l,d,g)=>{const h=Qa("placement.info",An(yl),d),y=h.anchor,S=l.element,k=c.get(l.uid);CC(()=>{qe(S,"position","fixed");const O=bs(S,"visibility");qe(S,"visibility","hidden");const N=s.useFixed()?Ri():a0(t);y.placement(t,y,N).each(V=>{const z=g.orThunk(()=>s.getBounds.map(ts)),X=Mi(N,V,z,l,k,h.transition);c.set(l.uid,X)}),O.fold(()=>{Gn(S,"visibility")},V=>{qe(S,"visibility",V)}),bs(S,"left").isNone()&&bs(S,"top").isNone()&&bs(S,"right").isNone()&&bs(S,"bottom").isNone()&&br(bs(S,"position"),"fixed")&&Gn(S,"position")},S)};var GC=Object.freeze({__proto__:null,position:ah,positionWithinBounds:_x,getMode:(t,s,c)=>s.useFixed()?"fixed":"absolute",reset:(t,s,c,l)=>{const d=l.element;gt(["position","left","right","top","bottom"],g=>Gn(d,g)),L_(d),c.clear(l.uid)}}),l0=Object.freeze({__proto__:null,init:()=>{let t={};return hl({readState:()=>t,clear:d=>{et(d)?delete t[d]:t={}},set:(d,g)=>{t[d]=g},get:d=>pt(t,d)})}});const Ia=da({fields:gi,name:"positioning",active:$_,apis:GC,state:l0}),lb=t=>t.getSystem().isConnected(),ib=t=>{Eo(t,_i());const s=t.components();gt(s,ib)},Jf=t=>{const s=t.components();gt(s,Jf),Eo(t,Xl())},qC=(t,s)=>{t.getSystem().addToWorld(s),se(t.element)&&Jf(s)},i0=t=>{ib(t),t.getSystem().removeFromWorld(t)},KC=(t,s)=>{Aa(t.element,s.element)},u0=t=>{gt(t.components(),s=>Ka(s.element)),wc(t.element),t.syncComponents()},YC=(t,s,c)=>{const l=t.components();u0(t);const d=c(s),g=Lt(l,d);gt(g,h=>{ib(h),t.getSystem().removeFromWorld(h)}),gt(d,h=>{lb(h)?KC(t,h):(t.getSystem().addToWorld(h),KC(t,h),se(t.element)&&Jf(h))}),t.syncComponents()},Dp=(t,s,c)=>{const l=t.components(),d=xe(s,y=>Iv(y).toArray());gt(l,y=>{vo(d,y)||i0(y)});const g=c(s),h=Lt(l,g);gt(h,y=>{lb(y)&&i0(y)}),gt(g,y=>{lb(y)||qC(t,y)}),t.syncComponents()},Ym=(t,s)=>{ub(t,s,Aa)},ub=(t,s,c)=>{t.getSystem().addToWorld(s),c(t.element,s.element),se(t.element)&&Jf(s),t.syncComponents()},lh=t=>{ib(t),Ka(t.element),t.getSystem().removeFromWorld(t)},Xm=t=>{const s=yc(t.element).bind(c=>t.getSystem().getByDom(c).toOptional());lh(t),s.each(c=>{c.syncComponents()})},Ax=t=>{const s=t.components();gt(s,lh),wc(t.element),t.syncComponents()},hi=(t,s)=>{Qf(t,s,Aa)},XC=(t,s)=>{Qf(t,s,Mm)},Qf=(t,s,c)=>{c(t,s.element);const l=oa(s.element);gt(l,d=>{s.getByDom(d).each(Jf)})},ih=t=>{const s=oa(t.element);gt(s,c=>{t.getByDom(c).each(ib)}),Ka(t.element)},d0=(t,s,c,l)=>{c.get().each(h=>{Ax(t)});const d=s.getAttachPoint(t);Ym(d,t);const g=t.getSystem().build(l);return Ym(t,g),c.set(g),g},m0=(t,s,c,l)=>{const d=d0(t,s,c,l);return s.onOpen(t,d),d},cA=(t,s,c,l)=>c.get().map(()=>d0(t,s,c,l)),aA=(t,s,c,l,d)=>{Rx(t,s),m0(t,s,c,l),d(),f0(t,s)},Ox=(t,s,c)=>{c.get().each(l=>{Ax(t),Xm(t),s.onClose(t,l),c.clear()})},Dx=(t,s,c)=>c.isOpen(),uh=(t,s,c,l)=>Dx(t,s,c)&&c.get().exists(d=>s.isPartOf(t,d,l)),Rp=(t,s,c)=>c.get(),db=(t,s,c,l)=>{bs(t.element,s).fold(()=>{B(t.element,c)},d=>{Ve(t.element,c,d)}),qe(t.element,s,l)},lA=(t,s,c)=>{Hn(t.element,c).fold(()=>Gn(t.element,s),l=>qe(t.element,s,l))},Rx=(t,s,c)=>{const l=s.getAttachPoint(t);qe(t.element,"position",Ia.getMode(l)),db(t,"visibility",s.cloakVisibilityAttr,"hidden")},mb=t=>Ms(["top","left","right","bottom"],s=>bs(t,s).isSome()),f0=(t,s,c)=>{mb(t.element)||Gn(t.element,"position"),lA(t,"visibility",s.cloakVisibilityAttr)};var JC=Object.freeze({__proto__:null,cloak:Rx,decloak:f0,open:m0,openWhileCloaked:aA,close:Ox,isOpen:Dx,isPartOf:uh,getState:Rp,setContent:cA}),g0=Object.freeze({__proto__:null,events:(t,s)=>xs([Ye(ua(),(c,l)=>{Ox(c,t,s)})])}),Mp=[Lo("onOpen"),Lo("onClose"),Ke("isPartOf"),Ke("getAttachPoint"),Te("cloakVisibilityAttr","data-precloak-visibility")],dh=Object.freeze({__proto__:null,init:()=>{const t=Yo(),s=W("not-implemented");return hl({readState:s,isOpen:t.isSet,clear:t.clear,set:t.set,get:t.get})}});const Uo=da({fields:Mp,name:"sandboxing",active:g0,apis:JC,state:dh}),Jm=W("dismiss.popups"),eg=W("reposition.popups"),h0=W("mouse.released"),QC=ql([Te("isExtraPart",no),Lc("fireEventInstead",[Te("event",Ai())])]),fb=t=>{const s=Qa("Dismissal",QC,t);return{[Jm()]:{schema:ql([Ke("target")]),onReceive:(c,l)=>{Uo.isOpen(c)&&(Uo.isPartOf(c,l.target)||s.isExtraPart(c,l.target)||s.fireEventInstead.fold(()=>Uo.close(c),g=>Eo(c,g.event)))}}}},mh=ql([Lc("fireEventInstead",[Te("event",D1())]),li("doReposition")]),gb=t=>{const s=Qa("Reposition",mh,t);return{[eg()]:{onReceive:c=>{Uo.isOpen(c)&&s.fireEventInstead.fold(()=>s.doReposition(c),l=>Eo(c,l.event))}}}},p0=(t,s,c)=>{s.store.manager.onLoad(t,s,c)},Px=(t,s,c)=>{s.store.manager.onUnload(t,s,c)};var tg=Object.freeze({__proto__:null,onLoad:p0,onUnload:Px,setValue:(t,s,c,l)=>{s.store.manager.setValue(t,s,c,l)},getValue:(t,s,c)=>s.store.manager.getValue(t,s,c),getState:(t,s,c)=>c}),tw=Object.freeze({__proto__:null,events:(t,s)=>{const c=t.resetOnDom?[mr((l,d)=>{p0(l,t,s)}),nm((l,d)=>{Px(l,t,s)})]:[Pf(t,s,p0)];return xs(c)}});const gh=()=>{const t=hn(null),s=()=>({mode:"memory",value:t.get()}),c=()=>t.get()===null,l=()=>{t.set(null)};return hl({set:t.set,get:t.get,isNotSet:c,clear:l,readState:s})},nw=()=>hl({readState:ee}),Bx=()=>{const t=hn({}),s=hn({});return hl({readState:()=>({mode:"dataset",dataByValue:t.get(),dataByText:s.get()}),lookup:h=>pt(t.get(),h).orThunk(()=>pt(s.get(),h)),update:h=>{const y=t.get(),S=s.get(),k={},O={};gt(h,N=>{k[N.value]=N,pt(N,"meta").each(V=>{pt(V,"text").each(z=>{O[z]=N})})}),t.set({...y,...k}),s.set({...S,...O})},clear:()=>{t.set({}),s.set({})}})};var dm=Object.freeze({__proto__:null,memory:gh,dataset:Bx,manual:nw,init:t=>t.store.manager.state(t)});const Ix=(t,s,c,l)=>{const d=s.store;c.update([l]),d.setValue(t,l),s.onSetValue(t,l)},v0=(t,s,c)=>{const l=s.store,d=l.getDataKey(t);return c.lookup(d).getOrThunk(()=>l.getFallbackEntry(d))},cu=(t,s,c)=>{s.store.initialValue.each(d=>{Ix(t,s,c,d)})},ma=(t,s,c)=>{c.clear()};var uA=[Qo("initialValue"),Ke("getFallbackEntry"),Ke("getDataKey"),Ke("setValue"),Qs("manager",{setValue:Ix,getValue:v0,onLoad:cu,onUnload:ma,state:Bx})];const xd=(t,s,c)=>s.store.getValue(t),dA=(t,s,c,l)=>{s.store.setValue(t,l),s.onSetValue(t,l)},Lx=(t,s,c)=>{s.store.initialValue.each(l=>{s.store.setValue(t,l)})};var hb=[Ke("getValue"),Te("setValue",ee),Qo("initialValue"),Qs("manager",{setValue:dA,getValue:xd,onLoad:Lx,onUnload:ee,state:bd.init})];const Np=(t,s,c,l)=>{c.set(l),s.onSetValue(t,l)},Fx=(t,s,c)=>c.get(),Hx=(t,s,c)=>{s.store.initialValue.each(l=>{c.isNotSet()&&c.set(l)})},JR=(t,s,c)=>{c.clear()};var QR=[Qo("initialValue"),Qs("manager",{setValue:Np,getValue:Fx,onLoad:Hx,onUnload:JR,state:gh})],Vx=[Rs("store",{mode:"memory"},Zr("mode",{memory:QR,manual:hb,dataset:uA})),Lo("onSetValue"),Te("resetOnDom",!1)];const Ut=da({fields:Vx,name:"representing",active:tw,apis:tg,extra:{setValueFrom:(t,s)=>{const c=Ut.getValue(s);Ut.setValue(t,c)}},state:dm}),fa=(t,s)=>w(t,{},je(s,c=>k1(c.name(),"Cannot configure "+c.name()+" for "+t)).concat([cs("dump",xt)])),y0=t=>t.dump,ga=(t,s)=>({...vt(s),...t.dump}),au={field:fa,augment:ga,get:y0},ow="placeholder",pb=L.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),Pp=t=>yo(t,"uiType"),zx=(t,s,c,l)=>t.exists(d=>d!==c.owner)?pb.single(!0,W(c)):pt(l,c.name).fold(()=>{throw new Error("Unknown placeholder component: "+c.name+`
Known: [`+mn(l)+`]
Namespace: `+t.getOr("none")+`
Spec: `+JSON.stringify(c,null,2))},d=>d.replace()),ng=(t,s,c,l)=>Pp(c)&&c.uiType===ow?zx(t,s,c,l):pb.single(!1,W(c)),Bp=(t,s,c,l)=>ng(t,s,c,l).fold((g,h)=>{const y=Pp(c)?h(s,c.config,c.validated):h(s),S=pt(y,"components").getOr([]),k=xe(S,O=>Bp(t,s,O,l));return[{...y,components:k}]},(g,h)=>{if(Pp(c)){const y=h(s,c.config,c.validated);return c.validated.preprocess.getOr(xt)(y)}else return h(s)}),mA=(t,s,c,l)=>xe(c,d=>Bp(t,s,d,l)),fA=(t,s)=>{let c=!1;const l=()=>c,d=()=>{if(c)throw new Error("Trying to use the same placeholder more than once: "+t);return c=!0,s},g=()=>s.fold((h,y)=>h,(h,y)=>h);return{name:W(t),required:g,used:l,replace:d}},gA=(t,s,c,l)=>{const d=jn(l,(h,y)=>fA(y,h)),g=mA(t,s,c,d);return Ao(d,h=>{if(h.used()===!1&&h.required())throw new Error("Placeholder: "+h.name()+` was not found in components list
Namespace: `+t.getOr("none")+`
Components: `+JSON.stringify(s.components,null,2))}),g},Ux=pb.single,hh=pb.multiple,$p=W(ow),ph=L.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),C0=Te("factory",{sketch:xt}),Ni=Te("schema",[]),Td=Ke("name"),bh=Ic("pname","pname",Kd(t=>"<alloy."+Qt(t.name)+">"),Ti()),Ip=cs("schema",()=>[Qo("preprocess")]),w0=Te("defaults",W({})),S0=Te("overrides",W({})),hA=An([C0,Ni,Td,bh,w0,S0]),pA=An([C0,Ni,Td,w0,S0]),bA=An([C0,Ni,Td,bh,w0,S0]),vA=An([C0,Ip,Td,Ke("unit"),bh,w0,S0]),Wx=t=>t.fold(A.some,A.none,A.some,A.some),Zx=t=>{const s=c=>c.name;return t.fold(s,s,s,s)},sw=t=>t.fold(xt,xt,xt,xt),x0=(t,s)=>c=>{const l=Qa("Converting part type",s,c);return t(l)},ol=x0(ph.required,hA),lu=x0(ph.external,pA),Pi=x0(ph.optional,bA),bb=x0(ph.group,vA),rw=W("entirety");var jx=Object.freeze({__proto__:null,required:ol,external:lu,optional:Pi,group:bb,asNamedPart:Wx,name:Zx,asCommon:sw,original:rw});const T0=(t,s,c,l)=>Hs(s.defaults(t,c,l),c,{uid:t.partUids[s.name]},s.overrides(t,c,l)),yA=(t,s,c)=>{const l={},d={};return gt(c,g=>{g.fold(h=>{l[h.pname]=Ux(!0,(y,S,k)=>h.factory.sketch(T0(y,h,S,k)))},h=>{const y=s.parts[h.name];d[h.name]=W(h.factory.sketch(T0(s,h,y[rw()]),y))},h=>{l[h.pname]=Ux(!1,(y,S,k)=>h.factory.sketch(T0(y,h,S,k)))},h=>{l[h.pname]=hh(!0,(y,S,k)=>{const O=y[h.name];return je(O,N=>h.factory.sketch(Hs(h.defaults(y,N,k),N,h.overrides(y,N))))})})}),{internals:W(l),externals:W(d)}},E0=(t,s)=>{const c={};return gt(s,l=>{Wx(l).each(d=>{const g=CA(t,d.pname);c[d.name]=h=>{const y=Qa("Part: "+d.name+" in "+t,An(d.schema),h);return{...g,config:h,validated:y}}})}),c},CA=(t,s)=>({uiType:$p(),owner:t,name:s}),k0=(t,s,c)=>({uiType:$p(),owner:t,name:s,config:c,validated:{}}),wA=t=>xe(t,s=>s.fold(A.none,A.some,A.none,A.none).map(c=>Xd(c.name,c.schema.concat([qg(rw())]))).toArray()),SA=t=>je(t,Zx),Gx=(t,s,c)=>yA(t,s,c),_0=(t,s,c)=>gA(A.some(t),s,s.components,c),Vs=(t,s,c)=>{const l=s.partUids[c];return t.getSystem().getByUid(l).toOptional()},Wt=(t,s,c)=>Vs(t,s,c).getOrDie("Could not find part: "+c),Ed=(t,s,c)=>{const l={},d=s.partUids,g=t.getSystem();return gt(c,h=>{l[h]=W(g.getByUid(d[h]))}),l},qx=(t,s)=>{const c=t.getSystem();return jn(s.partUids,(l,d)=>W(c.getByUid(l)))},cw=t=>mn(t.partUids),Lp=(t,s,c)=>{const l={},d=s.partUids,g=t.getSystem();return gt(c,h=>{l[h]=W(g.getByUid(d[h]).getOrDie())}),l},A0=(t,s)=>{const c=SA(s);return lo(je(c,l=>({key:l,value:t+"-"+l})))},vb=t=>Ic("partUids","partUids",Tf(s=>A0(s.uid,t)),Ti());var aw=Object.freeze({__proto__:null,generate:E0,generateOne:k0,schemas:wA,names:SA,substitutes:Gx,components:_0,defaultUids:A0,defaultUidsSchema:vb,getAllParts:qx,getAllPartNames:cw,getPart:Vs,getPartOrDie:Wt,getParts:Ed,getPartsOrDie:Lp});const Kx=(t,s)=>(t.length>0?[Xd("parts",t)]:[]).concat([Ke("uid"),Te("dom",{}),Te("components",[]),qg("originalSpec"),Te("debug.sketcher",{})]).concat(s),lw=(t,s,c,l,d)=>{const g=Kx(l,d);return Qa(t+" [SpecSchema]",ql(g.concat(s)),c)},Yx=(t,s,c,l)=>{const d=O0(l),g=lw(t,s,d,[],[]);return c(g,d)},yb=(t,s,c,l,d)=>{const g=O0(d),h=wA(c),y=vb(c),S=lw(t,s,g,h,[y]),k=Gx(t,S,c),O=_0(t,S,k.internals());return l(S,O,g,k.externals())},vh=t=>yo(t,"uid"),O0=t=>vh(t)?t:{...t,uid:V1("uid")},xA=t=>t.uid!==void 0,TA=ql([Ke("name"),Ke("factory"),Ke("configFields"),Te("apis",{}),Te("extraApis",{})]),EA=ql([Ke("name"),Ke("factory"),Ke("configFields"),Ke("partFields"),Te("apis",{}),Te("extraApis",{})]),pi=t=>{const s=Qa("Sketcher for "+t.name,TA,t),c=g=>Yx(s.name,s.configFields,s.factory,g),l=jn(s.apis,Lv),d=jn(s.extraApis,(g,h)=>Fy(g,h));return{name:s.name,configFields:s.configFields,sketch:c,...l,...d}},ja=t=>{const s=Qa("Sketcher for "+t.name,EA,t),c=h=>yb(s.name,s.configFields,s.partFields,s.factory,h),l=E0(s.name,s.partFields),d=jn(s.apis,Lv),g=jn(s.extraApis,(h,y)=>Fy(h,y));return{name:s.name,partFields:s.partFields,configFields:s.configFields,sketch:c,parts:l,...d,...g}},Fp=t=>Dc("input")(t)&&nn(t,"type")!=="radio"||Dc("textarea")(t);var kA=Object.freeze({__proto__:null,getCurrent:(t,s,c)=>s.find(t)});const _A=[Ke("find")],$o=da({fields:_A,name:"composing",apis:kA}),AA=["input","button","textarea","select"],OA=(t,s,c)=>{(s.disabled()?uw:D0)(t,s)},iw=(t,s)=>s.useNative===!0&&vo(AA,Ur(t.element)),tM=t=>Fs(t.element,"disabled"),nM=t=>{Ve(t.element,"disabled","disabled")},og=t=>{B(t.element,"disabled")},Cb=t=>nn(t.element,"aria-disabled")==="true",DA=t=>{Ve(t.element,"aria-disabled","true")},RA=t=>{Ve(t.element,"aria-disabled","false")},uw=(t,s,c)=>{s.disableClass.each(d=>{hc(t.element,d)}),(iw(t,s)?nM:DA)(t),s.onDisabled(t)},D0=(t,s,c)=>{s.disableClass.each(d=>{Ts(t.element,d)}),(iw(t,s)?og:RA)(t),s.onEnabled(t)},R0=(t,s)=>iw(t,s)?tM(t):Cb(t);var MA=Object.freeze({__proto__:null,enable:D0,disable:uw,isDisabled:R0,onLoad:OA,set:(t,s,c,l)=>{(l?uw:D0)(t,s)}}),NA=Object.freeze({__proto__:null,exhibit:(t,s)=>Ml({classes:s.disabled()?s.disableClass.toArray():[]}),events:(t,s)=>xs([$y(Na(),(c,l)=>R0(c,t)),Pf(t,s,OA)])}),Xx=[Js("disabled",no),Te("useNative",!0),Qo("disableClass"),Lo("onDisabled"),Lo("onEnabled")];const $n=da({fields:Xx,name:"disabling",active:NA,apis:MA}),M0=(t,s,c,l)=>{const d=Ba(t.element,"."+s.highlightClass);gt(d,g=>{Ms(l,y=>Ko(y.element,g))||(Ts(g,s.highlightClass),t.getSystem().getByDom(g).each(y=>{s.onDehighlight(t,y),Eo(y,Jh())}))})},i=(t,s,c)=>M0(t,s,c,[]),m=(t,s,c,l)=>{Z(t,s,c,l)&&(Ts(l.element,s.highlightClass),s.onDehighlight(t,l),Eo(l,Jh()))},p=(t,s,c,l)=>{M0(t,s,c,[l]),Z(t,s,c,l)||(hc(l.element,s.highlightClass),s.onHighlight(t,l),Eo(l,Py()))},v=(t,s,c)=>{Ae(t,s).each(l=>{p(t,s,c,l)})},E=(t,s,c)=>{mt(t,s).each(l=>{p(t,s,c,l)})},D=(t,s,c,l)=>{fe(t,s,c,l).fold(d=>{throw d},d=>{p(t,s,c,d)})},I=(t,s,c,l)=>{const d=rn(t,s);Cn(d,l).each(h=>{p(t,s,c,h)})},Z=(t,s,c,l)=>Nl(l.element,s.highlightClass),te=(t,s,c)=>gr(t.element,"."+s.highlightClass).bind(l=>t.getSystem().getByDom(l).toOptional()),fe=(t,s,c,l)=>{const d=Ba(t.element,"."+s.itemClass);return A.from(d[l]).fold(()=>ao.error(new Error("No element found with index "+l)),t.getSystem().getByDom)},Ae=(t,s,c)=>gr(t.element,"."+s.itemClass).bind(l=>t.getSystem().getByDom(l).toOptional()),mt=(t,s,c)=>{const l=Ba(t.element,"."+s.itemClass);return(l.length>0?A.some(l[l.length-1]):A.none()).bind(g=>t.getSystem().getByDom(g).toOptional())},Pt=(t,s,c,l)=>{const d=Ba(t.element,"."+s.itemClass);return So(d,h=>Nl(h,s.highlightClass)).bind(h=>{const y=Kg(h,l,0,d.length-1);return t.getSystem().getByDom(d[y]).toOptional()})},Rt=(t,s,c)=>Pt(t,s,c,-1),Tt=(t,s,c)=>Pt(t,s,c,1),rn=(t,s,c)=>{const l=Ba(t.element,"."+s.itemClass);return Gc(je(l,d=>t.getSystem().getByDom(d).toOptional()))};var at=Object.freeze({__proto__:null,dehighlightAll:i,dehighlight:m,highlight:p,highlightFirst:v,highlightLast:E,highlightAt:D,highlightBy:I,isHighlighted:Z,getHighlighted:te,getFirst:Ae,getLast:mt,getPrevious:Rt,getNext:Tt,getCandidates:rn}),Et=[Ke("highlightClass"),Ke("itemClass"),Lo("onHighlight"),Lo("onDehighlight")];const _t=da({fields:Et,name:"highlighting",apis:at}),Un=[8],Io=[9],Es=[13],tr=[27],Tr=[32],Bi=[37],kd=[38],yh=[39],mm=[40],zs=(t,s,c)=>{const l=Ht(t.slice(0,s)),d=Ht(t.slice(s+1));return Cn(l.concat(d),c)},Bl=(t,s,c)=>{const l=Ht(t.slice(0,s));return Cn(l,c)},$l=(t,s,c)=>{const l=t.slice(0,s),d=t.slice(s+1);return Cn(d.concat(l),c)},iu=(t,s,c)=>{const l=t.slice(s+1);return Cn(l,c)},fo=t=>s=>{const c=s.raw;return vo(t,c.which)},Jl=t=>s=>zn(t,c=>c(s)),Uc=t=>t.raw.shiftKey===!0,N0=t=>t.raw.ctrlKey===!0,Qm=Oe(Uc),Co=(t,s)=>({matches:t,classification:s}),sl=(t,s)=>Cn(t,l=>l.matches(s)).map(l=>l.classification),P0=(t,s,c)=>{s.exists(d=>c.exists(g=>Ko(g,d)))||ln(t,R1(),{prevFocus:s,newFocus:c})},B0=()=>{const t=c=>bl(c.element);return{get:t,set:(c,l)=>{const d=t(c);c.getSystem().triggerFocus(l,c.element);const g=t(c);P0(c,d,g)}}},Jx=()=>{const t=c=>_t.getHighlighted(c).map(l=>l.element);return{get:t,set:(c,l)=>{const d=t(c);c.getSystem().getByDom(l).fold(ee,h=>{_t.highlight(c,h)});const g=t(c);P0(c,d,g)}}};var sg;(function(t){t.OnFocusMode="onFocus",t.OnEnterOrSpaceMode="onEnterOrSpace",t.OnApiMode="onApi"})(sg||(sg={}));const Ch=(t,s,c,l,d)=>{const g=()=>t.concat([Te("focusManager",B0()),Rs("focusInside","onFocus",_g(k=>vo(["onFocus","onEnterOrSpace","onApi"],k)?ao.value(k):ao.error("Invalid value for focusInside"))),Qs("handler",S),Qs("state",s),Qs("sendFocusIn",d)]),h=(k,O,N,V,z)=>{const X=N(k,O,V,z);return sl(X,O.event).bind(ne=>ne(k,O,V,z))},S={schema:g,processKey:h,toEvents:(k,O)=>{const N=k.focusInside!==sg.OnFocusMode?A.none():d(k).map(X=>Ye(hd(),(ne,Ce)=>{X(ne,k,O),Ce.stop()})),V=(X,ne)=>{const Ce=fo(Tr.concat(Es))(ne.event);k.focusInside===sg.OnEnterOrSpaceMode&&Ce&&Mu(X,ne)&&d(k).each(ae=>{ae(X,k,O),ne.stop()})},z=[Ye(Qi(),(X,ne)=>{h(X,ne,c,k,O).fold(()=>{V(X,ne)},Ce=>{ne.stop()})}),Ye(Ng(),(X,ne)=>{h(X,ne,l,k,O).each(Ce=>{ne.stop()})})];return xs(N.toArray().concat(z))}};return S},$0=t=>{const s=[Qo("onEscape"),Qo("onEnter"),Te("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),Te("firstTabstop",0),Te("useTabstopAt",Mt),Qo("visibilitySelector")].concat([t]),c=(ae,ve)=>{const ye=ae.visibilitySelector.bind($e=>am(ve,$e)).getOr(ve);return vs(ye)>0},l=(ae,ve)=>{const ye=Ba(ae.element,ve.selector),$e=uo(ye,Le=>c(ve,Le));return A.from($e[ve.firstTabstop])},d=(ae,ve)=>ve.focusManager.get(ae).bind(ye=>am(ye,ve.selector)),g=(ae,ve)=>c(ae,ve)&&ae.useTabstopAt(ve),h=(ae,ve,ye)=>{l(ae,ve).each($e=>{ve.focusManager.set(ae,$e)})},y=(ae,ve,ye,$e,Le)=>Le(ve,ye,kt=>g($e,kt)).fold(()=>$e.cyclic?A.some(!0):A.none(),kt=>($e.focusManager.set(ae,kt),A.some(!0))),S=(ae,ve,ye,$e)=>{const Le=Ba(ae.element,ye.selector);return d(ae,ye).bind(kt=>So(Le,dn(Ko,kt)).bind(Ze=>y(ae,Le,Ze,ye,$e)))},k=(ae,ve,ye)=>{const $e=ye.cyclic?zs:Bl;return S(ae,ve,ye,$e)},O=(ae,ve,ye)=>{const $e=ye.cyclic?$l:iu;return S(ae,ve,ye,$e)},N=ae=>Ea(ae).bind(Wl).exists(ve=>Ko(ve,ae)),V=(ae,ve,ye)=>d(ae,ye).filter($e=>!ye.useTabstopAt($e)).bind($e=>(N($e)?k:O)(ae,ve,ye)),z=(ae,ve,ye)=>ye.onEnter.bind($e=>$e(ae,ve)),X=(ae,ve,ye)=>ye.onEscape.bind($e=>$e(ae,ve)),ne=W([Co(Jl([Uc,fo(Io)]),k),Co(fo(Io),O),Co(Jl([Qm,fo(Es)]),z)]),Ce=W([Co(fo(tr),X),Co(fo(Io),V)]);return Ch(s,bd.init,ne,Ce,()=>A.some(h))};var PA=$0(cs("cyclic",no)),Sb=$0(cs("cyclic",Mt));const IF=(t,s,c)=>(Cv(t,c,Na()),A.some(!0)),wh=(t,s,c)=>Fp(c)&&fo(Tr)(s.event)?A.none():IF(t,s,c),xb=(t,s)=>A.some(!0),sM=[Te("execute",wh),Te("useSpace",!1),Te("useEnter",!0),Te("useControlEnter",!1),Te("useDown",!1)],Qx=(t,s,c)=>c.execute(t,s,t.element),LF=(t,s,c,l)=>{const d=c.useSpace&&!Fp(t.element)?Tr:[],g=c.useEnter?Es:[],h=c.useDown?mm:[],y=d.concat(g).concat(h);return[Co(fo(y),Qx)].concat(c.useControlEnter?[Co(Jl([N0,fo(Es)]),Qx)]:[])},rM=(t,s,c,l)=>c.useSpace&&!Fp(t.element)?[Co(fo(Tr),xb)]:[];var FF=Ch(sM,bd.init,LF,rM,()=>A.none());const BA=()=>{const t=Yo();return hl({readState:()=>t.get().map(d=>({numRows:String(d.numRows),numColumns:String(d.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(d,g)=>{t.set({numRows:d,numColumns:g})},getNumRows:()=>t.get().map(d=>d.numRows),getNumColumns:()=>t.get().map(d=>d.numColumns)})};var VF=Object.freeze({__proto__:null,flatgrid:BA,init:t=>t.state(t)});const cM=t=>(s,c,l,d)=>{const g=t(s.element);return aM(g,s,c,l,d)},$A=(t,s)=>{const c=OC(t,s);return cM(c)},IA=(t,s)=>{const c=OC(s,t);return cM(c)},LA=t=>(s,c,l,d)=>aM(t,s,c,l,d),aM=(t,s,c,l,d)=>l.focusManager.get(s).bind(h=>t(s.element,h,l,d)).map(h=>(l.focusManager.set(s,h),!0)),mw=LA,eT=LA,tT=LA,sG=t=>t.offsetWidth<=0&&t.offsetHeight<=0,FA=t=>!sG(t.dom),zF=(t,s)=>So(t,s).map(c=>({index:c,candidates:t})),lM=(t,s,c)=>{const l=h=>Ko(h,s),d=Ba(t,c),g=uo(d,FA);return zF(g,l)},Hu=(t,s)=>So(t,c=>Ko(s,c)),iM=(t,s,c,l)=>{const d=Math.floor(s/c),g=s%c;return l(d,g).bind(h=>{const y=h.row*c+h.column;return y>=0&&y<t.length?A.some(t[y]):A.none()})},uM=(t,s,c,l,d)=>iM(t,s,l,(g,h)=>{const S=g===c-1?t.length-g*l:l,k=Kg(h,d,0,S-1);return A.some({row:g,column:k})}),dM=(t,s,c,l,d)=>iM(t,s,l,(g,h)=>{const y=Kg(g,d,0,c-1),k=y===c-1?t.length-y*l:l,O=$u(h,0,k-1);return A.some({row:y,column:O})}),UF=(t,s,c,l)=>uM(t,s,c,l,1),WF=(t,s,c,l)=>uM(t,s,c,l,-1),I0=(t,s,c,l)=>dM(t,s,c,l,-1),HA=(t,s,c,l)=>dM(t,s,c,l,1),ZF=[Ke("selector"),Te("execute",wh),tl("onEscape"),Te("captureTab",!1),jm()],VA=(t,s,c)=>{gr(t.element,s.selector).each(l=>{s.focusManager.set(t,l)})},nT=(t,s)=>s.focusManager.get(t).bind(c=>am(c,s.selector)),zA=(t,s,c,l)=>nT(t,c).bind(d=>c.execute(t,s,d)),oT=t=>(s,c,l,d)=>lM(s,c,l.selector).bind(g=>t(g.candidates,g.index,d.getNumRows().getOr(l.initSize.numRows),d.getNumColumns().getOr(l.initSize.numColumns))),mM=(t,s,c)=>c.captureTab?A.some(!0):A.none(),jF=(t,s,c)=>c.onEscape(t,s),fM=oT(WF),gM=oT(UF),GF=oT(I0),qF=oT(HA),hM=W([Co(fo(Bi),$A(fM,gM)),Co(fo(yh),IA(fM,gM)),Co(fo(kd),mw(GF)),Co(fo(mm),eT(qF)),Co(Jl([Uc,fo(Io)]),mM),Co(Jl([Qm,fo(Io)]),mM),Co(fo(Tr.concat(Es)),zA)]),sT=W([Co(fo(tr),jF),Co(fo(Tr),xb)]);var KF=Ch(ZF,BA,hM,sT,()=>A.some(VA));const pM=(t,s,c,l,d)=>{const g=y=>Ur(y)==="button"&&nn(y,"disabled")==="disabled",h=(y,S,k)=>d(y,S,l,0,k.length-1,k[S],O=>g(k[O])?h(y,O,k):A.from(k[O]));return lM(t,c,s).bind(y=>{const S=y.index,k=y.candidates;return h(S,S,k)})},bM=(t,s,c,l)=>pM(t,s,c,l,(d,g,h,y,S,k,O)=>{const N=$u(g+h,y,S);return N===d?A.from(k):O(N)}),rT=(t,s,c,l)=>pM(t,s,c,l,(d,g,h,y,S,k,O)=>{const N=Kg(g,h,y,S);return N===d?A.none():O(N)}),L0=[Ke("selector"),Te("getInitial",A.none),Te("execute",wh),tl("onEscape"),Te("executeOnMove",!1),Te("allowVertical",!0),Te("allowHorizontal",!0),Te("cycles",!0)],vM=(t,s)=>s.focusManager.get(t).bind(c=>am(c,s.selector)),UA=(t,s,c)=>vM(t,c).bind(l=>c.execute(t,s,l)),WA=(t,s,c)=>{s.getInitial(t).orThunk(()=>gr(t.element,s.selector)).each(l=>{s.focusManager.set(t,l)})},yM=(t,s,c)=>(c.cycles?rT:bM)(t,c.selector,s,-1),ZA=(t,s,c)=>(c.cycles?rT:bM)(t,c.selector,s,1),jA=t=>(s,c,l,d)=>t(s,c,l,d).bind(()=>l.executeOnMove?UA(s,c,l):A.some(!0)),CM=(t,s,c)=>c.onEscape(t,s),wM=(t,s,c,l)=>{const d=[...c.allowHorizontal?Bi:[]].concat(c.allowVertical?kd:[]),g=[...c.allowHorizontal?yh:[]].concat(c.allowVertical?mm:[]);return[Co(fo(d),jA($A(yM,ZA))),Co(fo(g),jA(IA(yM,ZA))),Co(fo(Es),UA),Co(fo(Tr),UA)]},SM=W([Co(fo(Tr),xb),Co(fo(tr),CM)]);var YF=Ch(L0,bd.init,wM,SM,()=>A.some(WA));const cT=(t,s,c)=>A.from(t[s]).bind(l=>A.from(l[c]).map(d=>({rowIndex:s,columnIndex:c,cell:d}))),xM=(t,s,c,l)=>{const g=t[s].length,h=Kg(c,l,0,g-1);return cT(t,s,h)},aT=(t,s,c,l)=>{const d=Kg(c,l,0,t.length-1),g=t[d].length,h=$u(s,0,g-1);return cT(t,d,h)},TM=(t,s,c,l)=>{const g=t[s].length,h=$u(c+l,0,g-1);return cT(t,s,h)},fw=(t,s,c,l)=>{const d=$u(c+l,0,t.length-1),g=t[d].length,h=$u(s,0,g-1);return cT(t,d,h)},XF=(t,s,c)=>xM(t,s,c,1),EM=(t,s,c)=>xM(t,s,c,-1),bi=(t,s,c)=>aT(t,c,s,-1),JF=(t,s,c)=>aT(t,c,s,1),kM=(t,s,c)=>TM(t,s,c,-1),_M=(t,s,c)=>TM(t,s,c,1),QF=(t,s,c)=>fw(t,c,s,-1),AM=(t,s,c)=>fw(t,c,s,1),OM=[Xd("selectors",[Ke("row"),Ke("cell")]),Te("cycles",!0),Te("previousSelector",A.none),Te("execute",wh)],e6=(t,s,c)=>{s.previousSelector(t).orThunk(()=>{const d=s.selectors;return gr(t.element,d.cell)}).each(d=>{s.focusManager.set(t,d)})},t6=(t,s,c)=>bl(t.element).bind(l=>c.execute(t,s,l)),n6=(t,s)=>je(t,c=>Ba(c,s.selectors.cell)),lT=(t,s)=>(c,l,d)=>{const g=d.cycles?t:s;return am(l,d.selectors.row).bind(h=>{const y=Ba(h,d.selectors.cell);return Hu(y,l).bind(S=>{const k=Ba(c,d.selectors.row);return Hu(k,h).bind(O=>{const N=n6(k,d);return g(N,O,S).map(V=>V.cell)})})})},GA=lT(EM,kM),DM=lT(XF,_M),o6=lT(bi,QF),RM=lT(JF,AM),MM=W([Co(fo(Bi),$A(GA,DM)),Co(fo(yh),IA(GA,DM)),Co(fo(kd),mw(o6)),Co(fo(mm),eT(RM)),Co(fo(Tr.concat(Es)),t6)]),NM=W([Co(fo(Tr),xb)]);var s6=Ch(OM,bd.init,MM,NM,()=>A.some(e6));const r6=[Ke("selector"),Te("execute",wh),Te("moveOnTab",!1)],PM=(t,s,c)=>c.focusManager.get(t).bind(l=>c.execute(t,s,l)),c6=(t,s,c)=>{gr(t.element,s.selector).each(l=>{s.focusManager.set(t,l)})},qA=(t,s,c)=>rT(t,c.selector,s,-1),KA=(t,s,c)=>rT(t,c.selector,s,1),Hp=(t,s,c,l)=>c.moveOnTab?tT(qA)(t,s,c,l):A.none(),BM=(t,s,c,l)=>c.moveOnTab?tT(KA)(t,s,c,l):A.none(),$M=W([Co(fo(kd),tT(qA)),Co(fo(mm),tT(KA)),Co(Jl([Uc,fo(Io)]),Hp),Co(Jl([Qm,fo(Io)]),BM),Co(fo(Es),PM),Co(fo(Tr),PM)]),IM=W([Co(fo(Tr),xb)]);var a6=Ch(r6,bd.init,$M,IM,()=>A.some(c6));const F0=[tl("onSpace"),tl("onEnter"),tl("onShiftEnter"),tl("onLeft"),tl("onRight"),tl("onTab"),tl("onShiftTab"),tl("onUp"),tl("onDown"),tl("onEscape"),Te("stopSpaceKeyup",!1),Qo("focusIn")],l6=(t,s,c)=>[Co(fo(Tr),c.onSpace),Co(Jl([Qm,fo(Es)]),c.onEnter),Co(Jl([Uc,fo(Es)]),c.onShiftEnter),Co(Jl([Uc,fo(Io)]),c.onShiftTab),Co(Jl([Qm,fo(Io)]),c.onTab),Co(fo(kd),c.onUp),Co(fo(mm),c.onDown),Co(fo(Bi),c.onLeft),Co(fo(yh),c.onRight),Co(fo(Tr),c.onSpace)],i6=(t,s,c)=>[...c.stopSpaceKeyup?[Co(fo(Tr),xb)]:[],Co(fo(tr),c.onEscape)];var LM=Ch(F0,bd.init,l6,i6,t=>t.focusIn);const u6=PA.schema(),d6=Sb.schema(),m6=YF.schema(),FM=KF.schema(),YA=s6.schema(),XA=FF.schema(),f6=a6.schema(),Vp=LM.schema();var HM=Object.freeze({__proto__:null,acyclic:u6,cyclic:d6,flow:m6,flatgrid:FM,matrix:YA,execution:XA,menu:f6,special:Vp});const VM=t=>Vr(t,"setGridSize"),En=zy({branchKey:"mode",branches:HM,name:"keying",active:{events:(t,s)=>t.handler.toEvents(t,s)},apis:{focusIn:(t,s,c)=>{s.sendFocusIn(s).fold(()=>{t.getSystem().triggerFocus(t.element,t.element)},l=>{l(t,s,c)})},setGridSize:(t,s,c,l,d)=>{VM(c)?c.setGridSize(l,d):console.error("Layout does not support setGridSize")}},state:VF}),zM=(t,s)=>{CC(()=>{YC(t,s,()=>je(s,t.getSystem().build))},t.element)},H0=(t,s)=>{CC(()=>{Dp(t,s,()=>ES(t.element,s,t.getSystem().buildOrPatch))},t.element)},gw=(t,s,c,l)=>{i0(s);const d=pp(t.element,c,l,t.getSystem().buildOrPatch);qC(t,d),t.syncComponents()},iT=(t,s,c)=>{const l=t.getSystem().build(c);ub(t,l,s)},JA=(t,s,c,l)=>{Xm(s),iT(t,(d,g)=>Fh(d,g,c),l)},zp=(t,s,c,l)=>(s.reuseDom?H0:zM)(t,l),Up=(t,s,c,l)=>{iT(t,Aa,l)},g6=(t,s,c,l)=>{iT(t,Gi,l)},h6=(t,s,c,l)=>{const d=hw(t);Cn(d,h=>Ko(l.element,h.element)).each(Xm)},hw=(t,s)=>t.components(),rg=(t,s,c,l,d)=>{const g=hw(t);return A.from(g[l]).map(h=>(d.fold(()=>Xm(h),y=>{(s.reuseDom?gw:JA)(t,h,l,y)}),h))};var p6=Object.freeze({__proto__:null,append:Up,prepend:g6,remove:h6,replaceAt:rg,replaceBy:(t,s,c,l,d)=>{const g=hw(t);return So(g,l).bind(h=>rg(t,s,c,h,d))},set:zp,contents:hw});const eo=da({fields:[Tc("reuseDom",!0)],name:"replacing",apis:p6}),WM=(t,s)=>{const c=xs(s);return da({fields:[Ke("enabled")],name:t,active:{events:W(c)}})},oo=(t,s)=>{const c=WM(t,s);return{key:t,value:{config:{},me:c,configAsRaw:W({}),initialConfig:{},state:bd}}},uT=(t,s)=>{s.ignore||(su(t.element),s.onFocus(t))};var v6=Object.freeze({__proto__:null,focus:uT,blur:(t,s)=>{s.ignore||yp(t.element)},isFocused:t=>Cp(t.element)}),e4=Object.freeze({__proto__:null,exhibit:(t,s)=>{const c=s.ignore?{}:{attributes:{tabindex:"-1"}};return Ml(c)},events:t=>xs([Ye(hd(),(s,c)=>{uT(s,t),c.stop()})].concat(t.stopMousedown?[Ye(Mr(),(s,c)=>{c.event.prevent()})]:[]))}),dT=[Lo("onFocus"),Te("stopMousedown",!1),Te("ignore",!1)];const Vn=da({fields:dT,name:"focusing",active:e4,apis:v6}),y6=t=>({init:()=>{const c=hn(t);return{get:()=>c.get(),set:y=>c.set(y),clear:()=>c.set(t),readState:()=>c.get()}}}),ZM=(t,s,c)=>{const l=s.aria;l.update(t,l,c.get())},jM=(t,s,c)=>{s.toggleClass.each(l=>{c.get()?hc(t.element,l):Ts(t.element,l)})},V0=(t,s,c,l)=>{const d=c.get();c.set(l),jM(t,s,c),ZM(t,s,c),d!==l&&s.onToggled(t,l)},t4=(t,s,c)=>{V0(t,s,c,!c.get())},C6=(t,s,c)=>{V0(t,s,c,!0)},n4=(t,s,c)=>{V0(t,s,c,!1)},w6=(t,s,c)=>c.get(),GM=(t,s,c)=>{V0(t,s,c,s.selected)};var S6=Object.freeze({__proto__:null,onLoad:GM,toggle:t4,isOn:w6,on:C6,off:n4,set:V0}),T6=Object.freeze({__proto__:null,exhibit:()=>Ml({}),events:(t,s)=>{const c=a_(t,s,t4),l=Pf(t,s,GM);return xs(Rn([t.toggleOnExecute?[c]:[],[l]]))}});const E6=(t,s,c)=>{Ve(t.element,"aria-pressed",c),s.syncWithExpanded&&KM(t,s,c)},qM=(t,s,c)=>{Ve(t.element,"aria-selected",c)},pw=(t,s,c)=>{Ve(t.element,"aria-checked",c)},KM=(t,s,c)=>{Ve(t.element,"aria-expanded",c)};var bw=[Te("selected",!1),Qo("toggleClass"),Te("toggleOnExecute",!0),Lo("onToggled"),Rs("aria",{mode:"none"},Zr("mode",{pressed:[Te("syncWithExpanded",!1),Qs("update",E6)],checked:[Qs("update",pw)],expanded:[Qs("update",KM)],selected:[Qs("update",qM)],none:[Qs("update",ee)]}))];const bo=da({fields:bw,name:"toggling",active:T6,apis:S6,state:y6(!1)}),o4=()=>{const t=(s,c)=>{c.stop(),Mf(s)};return[Ye(Pg(),t),Ye(bv(),t),Lg(Ji()),Lg(Mr())]},vw=t=>{const s=c=>Vm((l,d)=>{c(l),d.stop()});return xs(Rn([t.map(s).toArray(),o4()]))},YM="alloy.item-hover",XM="alloy.item-focus",s4="alloy.item-toggled",JM=t=>{(bl(t.element).isNone()||Vn.isFocused(t))&&(Vn.isFocused(t)||Vn.focus(t),ln(t,YM,{item:t}))},r4=t=>{ln(t,XM,{item:t})},k6=(t,s)=>{ln(t,s4,{item:t,state:s})},QM=W(YM),eN=W(XM),mT=W(s4),c4=t=>t.role.fold(()=>t.toggling.map(s=>s.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),xt),a4=(t,s)=>({aria:{mode:s?"selected":"checked"},...Br(t,(c,l)=>l!=="exclusive"),onToggled:(c,l)=>{ct(t.onToggled)&&t.onToggled(c,l),k6(c,l)}}),_6=t=>({dom:t.dom,domModification:{...t.domModification,attributes:{role:c4(t),...t.domModification.attributes,"aria-haspopup":t.hasSubmenu,...t.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:au.augment(t.itemBehaviours,[t.toggling.fold(bo.revoke,s=>bo.config(a4(s,t.role.exists(c=>c==="option")))),Vn.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:s=>{r4(s)}}),En.config({mode:"execution"}),Ut.config({store:{mode:"memory",initialValue:t.data}}),oo("item-type-events",[...o4(),Ye(Dl(),JM),Ye(Of(),Vn.focus)])]),components:t.components,eventOrder:t.eventOrder}),A6=[Ke("data"),Ke("components"),Ke("dom"),Te("hasSubmenu",!1),Qo("toggling"),Qo("role"),au.field("itemBehaviours",[bo,Vn,En,Ut]),Te("ignoreFocus",!1),Te("domModification",{}),Qs("builder",_6),Te("eventOrder",{})],O6=t=>({dom:t.dom,components:t.components,events:xs([M1(Of())])}),D6=[Ke("dom"),Ke("components"),Qs("builder",O6)],fT=W("item-widget"),gT=W([ol({name:"widget",overrides:t=>({behaviours:vt([Ut.config({store:{mode:"manual",getValue:s=>t.data,setValue:ee}})])})})]),R6=t=>{const s=Gx(fT(),t,gT()),c=_0(fT(),t,s.internals()),l=g=>Vs(g,t,"widget").map(h=>(En.focusIn(h),h)),d=(g,h)=>Fp(h.event.target)?A.none():(t.autofocus&&h.setSource(g.element),A.none());return{dom:t.dom,components:c,domModification:t.domModification,events:xs([Vm((g,h)=>{l(g).each(y=>{h.stop()})}),Ye(Dl(),JM),Ye(Of(),(g,h)=>{t.autofocus?l(g):Vn.focus(g)})]),behaviours:au.augment(t.widgetBehaviours,[Ut.config({store:{mode:"memory",initialValue:t.data}}),Vn.config({ignore:t.ignoreFocus,onFocus:g=>{r4(g)}}),En.config({mode:"special",focusIn:t.autofocus?g=>{l(g)}:Uy(),onLeft:d,onRight:d,onEscape:(g,h)=>!Vn.isFocused(g)&&!t.autofocus?(Vn.focus(g),A.some(!0)):(t.autofocus&&h.setSource(g.element),A.none())})])}},M6=[Ke("uid"),Ke("data"),Ke("components"),Ke("dom"),Te("autofocus",!1),Te("ignoreFocus",!1),au.field("widgetBehaviours",[Ut,Vn,En]),Te("domModification",{}),vb(gT()),Qs("builder",R6)],N6=Zr("type",{widget:M6,item:A6,separator:D6}),P6=(t,s)=>({mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:s.initSize.numColumns,numRows:s.initSize.numRows},focusManager:t.focusManager}),B6=(t,s)=>({mode:"matrix",selectors:{row:s.rowSelector,cell:"."+t.markers.item},previousSelector:s.previousSelector,focusManager:t.focusManager}),$6=(t,s)=>({mode:"menu",selector:"."+t.markers.item,moveOnTab:s.moveOnTab,focusManager:t.focusManager}),tN=W([bb({factory:{sketch:t=>{const s=Qa("menu.spec item",N6,t);return s.builder(s)}},name:"items",unit:"item",defaults:(t,s)=>yo(s,"uid")?s:{...s,uid:V1("item")},overrides:(t,s)=>({type:s.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}})})]),I6=W([xc("role"),Ke("value"),Ke("items"),Ke("dom"),Ke("components"),Te("eventOrder",{}),fa("menuBehaviours",[_t,Ut,$o,En]),Rs("movement",{mode:"menu",moveOnTab:!0},Zr("mode",{grid:[jm(),Qs("config",P6)],matrix:[Qs("config",B6),Ke("rowSelector"),Te("previousSelector",A.none)],menu:[Te("moveOnTab",!0),Qs("config",$6)]})),p_(),Te("fakeFocus",!1),Te("focusManager",B0()),Lo("onHighlight"),Lo("onDehighlight"),Te("showMenuRole",!0)]),nN=W("alloy.menu-focus"),L6=(t,s)=>{const c=Ba(t.element,'[role="menuitemradio"][aria-checked="true"]');gt(c,l=>{Ko(l,s.element)||t.getSystem().getByDom(l).each(d=>{bo.off(d)})})},F6=(t,s,c,l)=>({uid:t.uid,dom:t.dom,markers:t.markers,behaviours:ga(t.menuBehaviours,[_t.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight,onDehighlight:t.onDehighlight}),Ut.config({store:{mode:"memory",initialValue:t.value}}),$o.config({find:A.some}),En.config(t.movement.config(t,t.movement))]),events:xs([Ye(eN(),(d,g)=>{const h=g.event;d.getSystem().getByDom(h.target).each(y=>{_t.highlight(d,y),g.stop(),ln(d,nN(),{menu:d,item:y})})}),Ye(QM(),(d,g)=>{const h=g.event.item;_t.highlight(d,h)}),Ye(mT(),(d,g)=>{const{item:h,state:y}=g.event;y&&nn(h.element,"role")==="menuitemradio"&&L6(d,h)})]),components:s,eventOrder:t.eventOrder,...t.showMenuRole?{domModification:{attributes:{role:t.role.getOr("menu")}}}:{}}),Tb=ja({name:"Menu",configFields:I6(),partFields:tN(),factory:F6}),Eb=t=>jc(t,(s,c)=>({k:s,v:c})),oN=(t,s,c,l)=>pt(c,l).bind(d=>pt(t,d).bind(g=>{const h=oN(t,s,c,g);return A.some([g].concat(h))})).getOr([]),H6=(t,s)=>{const c={};Ao(t,(h,y)=>{gt(h,S=>{c[S]=y})});const l=s,d=Eb(s),g=jn(d,(h,y)=>[y].concat(oN(c,l,d,y)));return jn(c,h=>pt(g,h).getOr([h]))},kb=()=>{const t=hn({}),s=hn({}),c=hn({}),l=Yo(),d=hn({}),g=()=>{t.set({}),s.set({}),c.set({}),l.clear()},h=()=>l.get().isNone(),y=(Le,kt)=>{s.set({...s.get(),[Le]:{type:"prepared",menu:kt}})},S=(Le,kt,Kt,Ze)=>{l.set(Le),t.set(Kt),s.set(kt),d.set(Ze);const Jt=H6(Ze,Kt);c.set(Jt)},k=Le=>Vt(t.get(),(kt,Kt)=>kt===Le),O=(Le,kt,Kt)=>ne(Le).bind(Ze=>k(Le).bind(Jt=>kt(Jt).map(Bt=>({triggeredMenu:Ze,triggeringItem:Bt,triggeringPath:Kt})))),N=(Le,kt)=>{const Kt=uo(ae(Le).toArray(),Ze=>ne(Ze).isSome());return pt(c.get(),Le).bind(Ze=>{const Jt=Ht(Kt.concat(Ze)),Bt=xe(Jt,(sn,Do)=>O(sn,kt,Jt.slice(0,Do+1)).fold(()=>br(l.get(),sn)?[]:[A.none()],rr=>[A.some(rr)]));return os(Bt)})},V=Le=>pt(t.get(),Le).map(kt=>{const Kt=pt(c.get(),Le).getOr([]);return[kt].concat(Kt)}),z=Le=>pt(c.get(),Le).bind(kt=>kt.length>1?A.some(kt.slice(1)):A.none()),X=Le=>pt(c.get(),Le),ne=Le=>Ce(Le).bind(l4),Ce=Le=>pt(s.get(),Le),ae=Le=>pt(t.get(),Le);return{setMenuBuilt:y,setContents:S,expand:V,refresh:X,collapse:z,lookupMenu:Ce,lookupItem:ae,otherMenus:Le=>{const kt=d.get();return Lt(mn(kt),Le)},getPrimary:()=>l.get().bind(ne),getMenus:()=>s.get(),clear:g,isClear:h,getTriggeringPath:N}},l4=t=>t.type==="prepared"?A.some(t.menu):A.none(),sN={init:kb,extractPreparedMenu:l4},Sh=Qt("tiered-menu-item-highlight"),rN=Qt("tiered-menu-item-dehighlight");var vi;(function(t){t[t.HighlightMenuAndItem=0]="HighlightMenuAndItem",t[t.HighlightJustMenu=1]="HighlightJustMenu",t[t.HighlightNone=2]="HighlightNone"})(vi||(vi={}));const _d=(t,s)=>{const c=Yo(),l=(ut,Nt,Wn)=>jn(Wn,(go,Tn)=>{const to=()=>Tb.sketch({...go,value:Tn,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:(Is,ks)=>{ln(Is,Sh,{menuComp:Is,itemComp:ks})},onDehighlight:(Is,ks)=>{ln(Is,rN,{menuComp:Is,itemComp:ks})},focusManager:t.fakeFocus?Jx():B0()});return Tn===Nt?{type:"prepared",menu:ut.getSystem().build(to())}:{type:"notbuilt",nbMenu:to}}),d=sN.init(),g=ut=>{const Nt=l(ut,t.data.primary,t.data.menus),Wn=S();return d.setContents(t.data.primary,Nt,t.data.expansions,Wn),d.getPrimary()},h=ut=>Ut.getValue(ut).value,y=(ut,Nt,Wn)=>tn(Nt,go=>{if(!go.getSystem().isConnected())return A.none();const Tn=_t.getCandidates(go);return Cn(Tn,to=>h(to)===Wn)}),S=ut=>jn(t.data.menus,(Nt,Wn)=>xe(Nt.items,go=>go.type==="separator"?[]:[go.data.value])),k=_t.highlight,O=(ut,Nt)=>{k(ut,Nt),_t.getHighlighted(Nt).orThunk(()=>_t.getFirst(Nt)).each(Wn=>{t.fakeFocus?_t.highlight(Nt,Wn):Cv(ut,Wn.element,Of())})},N=(ut,Nt)=>Gc(je(Nt,Wn=>ut.lookupMenu(Wn).bind(go=>go.type==="prepared"?A.some(go.menu):A.none()))),V=(ut,Nt,Wn)=>{const go=N(Nt,Nt.otherMenus(Wn));gt(go,Tn=>{vd(Tn.element,[t.markers.backgroundMenu]),t.stayInDom||eo.remove(ut,Tn)})},z=ut=>c.get().getOrThunk(()=>{const Nt={},Wn=Ba(ut.element,`.${t.markers.item}`),go=uo(Wn,Tn=>nn(Tn,"aria-haspopup")==="true");return gt(go,Tn=>{ut.getSystem().getByDom(Tn).each(to=>{const Is=h(to);Nt[Is]=to})}),c.set(Nt),Nt}),X=(ut,Nt)=>{const Wn=z(ut);Ao(Wn,(go,Tn)=>{const to=vo(Nt,Tn);Ve(go.element,"aria-expanded",to)})},ne=(ut,Nt,Wn)=>A.from(Wn[0]).bind(go=>Nt.lookupMenu(go).bind(Tn=>{if(Tn.type==="notbuilt")return A.none();{const to=Tn.menu,Is=N(Nt,Wn.slice(1));return gt(Is,ks=>{hc(ks.element,t.markers.backgroundMenu)}),se(to.element)||eo.append(ut,Oi(to)),vd(to.element,[t.markers.backgroundMenu]),O(ut,to),V(ut,Nt,Wn),A.some(to)}}));let Ce;(function(ut){ut[ut.HighlightSubmenu=0]="HighlightSubmenu",ut[ut.HighlightParent=1]="HighlightParent"})(Ce||(Ce={}));const ae=(ut,Nt,Wn)=>{if(Wn.type==="notbuilt"){const go=ut.getSystem().build(Wn.nbMenu());return d.setMenuBuilt(Nt,go),go}else return Wn.menu},ve=(ut,Nt,Wn=Ce.HighlightSubmenu)=>{if(Nt.hasConfigured($n)&&$n.isDisabled(Nt))return A.some(Nt);{const go=h(Nt);return d.expand(go).bind(Tn=>(X(ut,Tn),A.from(Tn[0]).bind(to=>d.lookupMenu(to).bind(Is=>{const ks=ae(ut,to,Is);return se(ks.element)||eo.append(ut,Oi(ks)),t.onOpenSubmenu(ut,Nt,ks,Ht(Tn)),Wn===Ce.HighlightSubmenu?(_t.highlightFirst(ks),ne(ut,d,Tn)):(_t.dehighlightAll(ks),A.some(Nt))}))))}},ye=(ut,Nt)=>{const Wn=h(Nt);return d.collapse(Wn).bind(go=>(X(ut,go),ne(ut,d,go).map(Tn=>(t.onCollapseMenu(ut,Nt,Tn),Tn))))},$e=(ut,Nt)=>{const Wn=h(Nt);return d.refresh(Wn).bind(go=>(X(ut,go),ne(ut,d,go)))},Le=(ut,Nt)=>Fp(Nt.element)?A.none():ve(ut,Nt,Ce.HighlightSubmenu),kt=(ut,Nt)=>Fp(Nt.element)?A.none():ye(ut,Nt),Kt=(ut,Nt)=>ye(ut,Nt).orThunk(()=>t.onEscape(ut,Nt).map(()=>ut)),Ze=ut=>(Nt,Wn)=>am(Wn.getSource(),`.${t.markers.item}`).bind(go=>Nt.getSystem().getByDom(go).toOptional().bind(Tn=>ut(Nt,Tn).map(Mt))),Jt=xs([Ye(nN(),(ut,Nt)=>{const Wn=Nt.event.item;d.lookupItem(h(Wn)).each(()=>{const go=Nt.event.menu;_t.highlight(ut,go);const Tn=h(Nt.event.item);d.refresh(Tn).each(to=>V(ut,d,to))})}),Vm((ut,Nt)=>{const Wn=Nt.event.target;ut.getSystem().getByDom(Wn).each(go=>{h(go).indexOf("collapse-item")===0&&ye(ut,go),ve(ut,go,Ce.HighlightSubmenu).fold(()=>{t.onExecute(ut,go)},ee)})}),mr((ut,Nt)=>{g(ut).each(Wn=>{eo.append(ut,Oi(Wn)),t.onOpenMenu(ut,Wn),t.highlightOnOpen===vi.HighlightMenuAndItem?O(ut,Wn):t.highlightOnOpen===vi.HighlightJustMenu&&k(ut,Wn)})}),Ye(Sh,(ut,Nt)=>{t.onHighlightItem(ut,Nt.event.menuComp,Nt.event.itemComp)}),Ye(rN,(ut,Nt)=>{t.onDehighlightItem(ut,Nt.event.menuComp,Nt.event.itemComp)}),...t.navigateOnHover?[Ye(QM(),(ut,Nt)=>{const Wn=Nt.event.item;$e(ut,Wn),ve(ut,Wn,Ce.HighlightParent),t.onHover(ut,Wn)})]:[]]),Bt=ut=>_t.getHighlighted(ut).bind(_t.getHighlighted),sn=ut=>{Bt(ut).each(Nt=>{ye(ut,Nt)})},Do=ut=>{d.getPrimary().each(Nt=>{O(ut,Nt)})},rr=ut=>A.from(ut.components()[0]).filter(Nt=>nn(Nt.element,"role")==="menu"),an={collapseMenu:sn,highlightPrimary:Do,repositionMenus:ut=>{d.getPrimary().bind(Wn=>Bt(ut).bind(go=>{const Tn=h(go),to=cl(d.getMenus()),Is=Gc(je(to,sN.extractPreparedMenu));return d.getTriggeringPath(Tn,ks=>y(ut,Is,ks))}).map(go=>({primary:Wn,triggeringPath:go}))).fold(()=>{rr(ut).each(Wn=>{t.onRepositionMenu(ut,Wn,[])})},({primary:Wn,triggeringPath:go})=>{t.onRepositionMenu(ut,Wn,go)})}};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:ga(t.tmenuBehaviours,[En.config({mode:"special",onRight:Ze(Le),onLeft:Ze(kt),onEscape:Ze(Kt),focusIn:(ut,Nt)=>{d.getPrimary().each(Wn=>{Cv(ut,Wn.element,Of())})}}),_t.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),$o.config({find:ut=>_t.getHighlighted(ut)}),eo.config({})]),eventOrder:t.eventOrder,apis:an,events:Jt}},cN=W("collapse-item"),aN=(t,s,c)=>({primary:t,menus:s,expansions:c}),lN=(t,s)=>({primary:t,menus:Fn(t,s),expansions:{}}),V6=t=>({value:Qt(cN()),meta:{text:t}}),cg=pi({name:"TieredMenu",configFields:[mp("onExecute"),mp("onEscape"),Gg("onOpenMenu"),Gg("onOpenSubmenu"),Lo("onRepositionMenu"),Lo("onCollapseMenu"),Te("highlightOnOpen",vi.HighlightMenuAndItem),Xd("data",[Ke("primary"),Ke("menus"),Ke("expansions")]),Te("fakeFocus",!1),Lo("onHighlightItem"),Lo("onDehighlightItem"),Lo("onHover"),cm(),Ke("dom"),Te("navigateOnHover",!0),Te("stayInDom",!1),fa("tmenuBehaviours",[En,_t,$o,eo]),Te("eventOrder",{})],apis:{collapseMenu:(t,s)=>{t.collapseMenu(s)},highlightPrimary:(t,s)=>{t.highlightPrimary(s)},repositionMenus:(t,s)=>{t.repositionMenus(s)}},factory:_d,extraApis:{tieredData:aN,singleData:lN,collapseItem:V6}}),iN=(t,s,c,l,d)=>{const g=()=>t.lazySink(s),h=l.type==="horizontal"?{layouts:{onLtr:()=>q1(),onRtl:()=>jv()}}:{},y=k=>k.length===2,S=k=>y(k)?h:{};return cg.sketch({dom:{tag:"div"},data:l.data,markers:l.menu.markers,highlightOnOpen:l.menu.highlightOnOpen,fakeFocus:l.menu.fakeFocus,onEscape:()=>(Uo.close(s),t.onEscape.map(k=>k(s)),A.some(!0)),onExecute:()=>A.some(!0),onOpenMenu:(k,O)=>{Ia.positionWithinBounds(g().getOrDie(),O,c,d())},onOpenSubmenu:(k,O,N,V)=>{const z=g().getOrDie();Ia.position(z,N,{anchor:{type:"submenu",item:O,...S(V)}})},onRepositionMenu:(k,O,N)=>{const V=g().getOrDie();Ia.positionWithinBounds(V,O,c,d()),gt(N,z=>{const X=S(z.triggeringPath);Ia.position(V,z.triggeredMenu,{anchor:{type:"submenu",item:z.triggeringItem,...X}})})}})},z6=(t,s)=>{const c=(V,z)=>t.getRelated(V).exists(ne=>zf(ne,z)),l=(V,z)=>{Uo.setContent(V,z)},d=(V,z,X)=>{const ne=A.none;g(V,z,X,ne)},g=(V,z,X,ne)=>{const Ce=t.lazySink(V).getOrDie();Uo.openWhileCloaked(V,z,()=>Ia.positionWithinBounds(Ce,V,X,ne())),Ut.setValue(V,A.some({mode:"position",config:X,getBounds:ne}))},h=(V,z,X)=>{y(V,z,X,A.none)},y=(V,z,X,ne)=>{const Ce=iN(t,V,z,X,ne);Uo.open(V,Ce),Ut.setValue(V,A.some({mode:"menu",menu:Ce}))},S=V=>{Uo.isOpen(V)&&(Ut.setValue(V,A.none()),Uo.close(V))},k=V=>Uo.getState(V),O=V=>{Uo.isOpen(V)&&Ut.getValue(V).each(z=>{switch(z.mode){case"menu":Uo.getState(V).each(cg.repositionMenus);break;case"position":const X=t.lazySink(V).getOrDie();Ia.positionWithinBounds(X,V,z.config,z.getBounds());break}})},N={setContent:l,showAt:d,showWithinBounds:g,showMenuAt:h,showMenuWithinBounds:y,hide:S,getContent:k,reposition:O,isOpen:Uo.isOpen};return{uid:t.uid,dom:t.dom,behaviours:ga(t.inlineBehaviours,[Uo.config({isPartOf:(V,z,X)=>zf(z,X)||c(V,X),getAttachPoint:V=>t.lazySink(V).getOrDie(),onOpen:V=>{t.onShow(V)},onClose:V=>{t.onHide(V)}}),Ut.config({store:{mode:"memory",initialValue:A.none()}}),mi.config({channels:{...fb({isExtraPart:s.isExtraPart,...t.fireDismissalEventInstead.map(V=>({fireEventInstead:{event:V.event}})).getOr({})}),...gb({...t.fireRepositionEventInstead.map(V=>({fireEventInstead:{event:V.event}})).getOr({}),doReposition:O})}})]),eventOrder:t.eventOrder,apis:N}},Fr=pi({name:"InlineView",configFields:[Ke("lazySink"),Lo("onShow"),Lo("onHide"),Xi("onEscape"),fa("inlineBehaviours",[Uo,Ut,mi]),Lc("fireDismissalEventInstead",[Te("event",Ai())]),Lc("fireRepositionEventInstead",[Te("event",D1())]),Te("getRelated",A.none),Te("isExtraPart",no),Te("eventOrder",A.none)],factory:z6,apis:{showAt:(t,s,c,l)=>{t.showAt(s,c,l)},showWithinBounds:(t,s,c,l,d)=>{t.showWithinBounds(s,c,l,d)},showMenuAt:(t,s,c,l)=>{t.showMenuAt(s,c,l)},showMenuWithinBounds:(t,s,c,l,d)=>{t.showMenuWithinBounds(s,c,l,d)},hide:(t,s)=>{t.hide(s)},isOpen:(t,s)=>t.isOpen(s),getContent:(t,s)=>t.getContent(s),setContent:(t,s,c)=>{t.setContent(s,c)},reposition:(t,s)=>{t.reposition(s)}}});var _b=tinymce.util.Tools.resolve("tinymce.util.Delay"),Wp=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),uN=tinymce.util.Tools.resolve("tinymce.EditorManager"),Ab=tinymce.util.Tools.resolve("tinymce.Env"),Vu;(function(t){t.default="wrap",t.floating="floating",t.sliding="sliding",t.scrolling="scrolling"})(Vu||(Vu={}));var yw;(function(t){t.auto="auto",t.top="top",t.bottom="bottom"})(yw||(yw={}));const Bs=t=>s=>s.options.get(t),z0=t=>s=>A.from(t(s)),dN=t=>{const s=Ab.deviceType.isPhone(),c=Ab.deviceType.isTablet()||s,l=t.options.register,d=h=>Dt(h)||h===!1,g=h=>Dt(h)||Qn(h);l("skin",{processor:h=>Dt(h)||h===!1,default:"oxide"}),l("skin_url",{processor:"string"}),l("height",{processor:g,default:Math.max(t.getElement().offsetHeight,400)}),l("width",{processor:g,default:Wp.DOM.getStyle(t.getElement(),"width")}),l("min_height",{processor:"number",default:100}),l("min_width",{processor:"number"}),l("max_height",{processor:"number"}),l("max_width",{processor:"number"}),l("style_formats",{processor:"object[]"}),l("style_formats_merge",{processor:"boolean",default:!1}),l("style_formats_autohide",{processor:"boolean",default:!1}),l("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),l("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),l("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),l("font_size_input_default_unit",{processor:"string",default:"pt"}),l("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),l("content_langs",{processor:"object[]"}),l("removed_menuitems",{processor:"string",default:""}),l("menubar",{processor:h=>Dt(h)||Mn(h),default:!s}),l("menu",{processor:"object",default:{}}),l("toolbar",{processor:h=>Mn(h)||Dt(h)||xn(h)?{value:h,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),ho(9,h=>{l("toolbar"+(h+1),{processor:"string"})}),l("toolbar_mode",{processor:"string",default:c?"scrolling":"floating"}),l("toolbar_groups",{processor:"object",default:{}}),l("toolbar_location",{processor:"string",default:yw.auto}),l("toolbar_persist",{processor:"boolean",default:!1}),l("toolbar_sticky",{processor:"boolean",default:t.inline}),l("toolbar_sticky_offset",{processor:"number",default:0}),l("fixed_toolbar_container",{processor:"string",default:""}),l("fixed_toolbar_container_target",{processor:"object"}),l("ui_mode",{processor:"string",default:"combined"}),l("file_picker_callback",{processor:"function"}),l("file_picker_validator_handler",{processor:"function"}),l("file_picker_types",{processor:"string"}),l("typeahead_urls",{processor:"boolean",default:!0}),l("anchor_top",{processor:d,default:"#top"}),l("anchor_bottom",{processor:d,default:"#bottom"}),l("draggable_modal",{processor:"boolean",default:!1}),l("statusbar",{processor:"boolean",default:!0}),l("elementpath",{processor:"boolean",default:!0}),l("branding",{processor:"boolean",default:!0}),l("promotion",{processor:"boolean",default:!0}),l("resize",{processor:h=>h==="both"||Mn(h),default:!Ab.deviceType.isTouch()}),l("sidebar_show",{processor:"string"}),l("help_accessibility",{processor:"boolean",default:t.hasPlugin("help")}),l("default_font_stack",{processor:"string[]",default:[]})},mN=Bs("readonly"),i4=Bs("height"),Cw=Bs("width"),u4=z0(Bs("min_width")),Ob=z0(Bs("min_height")),Db=z0(Bs("max_width")),hT=z0(Bs("max_height")),d4=z0(Bs("style_formats")),fN=Bs("style_formats_merge"),gN=Bs("style_formats_autohide"),hN=Bs("content_langs"),pN=Bs("removed_menuitems"),Zp=Bs("toolbar_mode"),m4=Bs("toolbar_groups"),pT=Bs("toolbar_location"),f4=Bs("fixed_toolbar_container"),U6=Bs("fixed_toolbar_container_target"),g4=Bs("toolbar_persist"),bN=Bs("toolbar_sticky_offset"),vN=Bs("menubar"),bT=Bs("toolbar"),h4=Bs("file_picker_callback"),yN=Bs("file_picker_validator_handler"),CN=Bs("font_size_input_default_unit"),vT=Bs("file_picker_types"),p4=Bs("typeahead_urls"),b4=Bs("anchor_top"),wN=Bs("anchor_bottom"),yT=Bs("draggable_modal"),SN=Bs("statusbar"),xN=Bs("elementpath"),v4=Bs("branding"),TN=Bs("resize"),EN=Bs("paste_as_text"),y4=Bs("sidebar_show"),CT=Bs("promotion"),kN=Bs("help_accessibility"),ww=Bs("default_font_stack"),C4=t=>t.options.get("skin")===!1,wT=t=>t.options.get("menubar")!==!1,w4=t=>{const s=t.options.get("skin_url");if(C4(t))return s;if(s)return t.documentBaseURI.toAbsolute(s);{const c=t.options.get("skin");return uN.baseURL+"/skins/ui/"+c}},ST=t=>A.from(t.options.get("skin_url")),_N=t=>t.options.get("line_height_formats").split(" "),xT=t=>{const s=bT(t),c=Dt(s),l=xn(s)&&s.length>0;return!Sw(t)&&(l||c||s===!0)},TT=t=>{const s=ho(9,l=>t.options.get("toolbar"+(l+1))),c=uo(s,Dt);return yn(c.length>0,c)},Sw=t=>TT(t).fold(()=>{const s=bT(t);return Re(s,Dt)&&s.length>0},Mt),S4=t=>pT(t)===yw.bottom,ET=t=>{var s;if(!t.inline)return A.none();const c=(s=f4(t))!==null&&s!==void 0?s:"";if(c.length>0)return gr(be(),c);const l=U6(t);return et(l)?A.some(ge.fromDom(l)):A.none()},fm=t=>t.inline&&ET(t).isSome(),x4=t=>ET(t).getOrThunk(()=>sa(Dr(ge.fromDom(t.getElement())))),T4=t=>t.inline&&!wT(t)&&!xT(t)&&!Sw(t),jp=t=>(t.options.get("toolbar_sticky")||t.inline)&&!fm(t)&&!T4(t),xh=t=>!fm(t)&&t.options.get("ui_mode")==="split",AN=t=>{const s=t.options.get("menu");return jn(s,c=>({...c,items:c.items}))};var W6=Object.freeze({__proto__:null,get ToolbarMode(){return Vu},get ToolbarLocation(){return yw},register:dN,getSkinUrl:w4,getSkinUrlOption:ST,isReadOnly:mN,isSkinDisabled:C4,getHeightOption:i4,getWidthOption:Cw,getMinWidthOption:u4,getMinHeightOption:Ob,getMaxWidthOption:Db,getMaxHeightOption:hT,getUserStyleFormats:d4,shouldMergeStyleFormats:fN,shouldAutoHideStyleFormats:gN,getLineHeightFormats:_N,getContentLanguages:hN,getRemovedMenuItems:pN,isMenubarEnabled:wT,isMultipleToolbars:Sw,isToolbarEnabled:xT,isToolbarPersist:g4,getMultipleToolbarsOption:TT,getUiContainer:x4,useFixedContainer:fm,isSplitUiMode:xh,getToolbarMode:Zp,isDraggableModal:yT,isDistractionFree:T4,isStickyToolbar:jp,getStickyToolbarOffset:bN,getToolbarLocation:pT,isToolbarLocationBottom:S4,getToolbarGroups:m4,getMenus:AN,getMenubar:vN,getToolbar:bT,getFilePickerCallback:h4,getFilePickerTypes:vT,useTypeaheadUrls:p4,getAnchorTop:b4,getAnchorBottom:wN,getFilePickerValidatorHandler:yN,getFontSizeInputDefaultUnit:CN,useStatusBar:SN,useElementPath:xN,promotionEnabled:CT,useBranding:v4,getResize:TN,getPasteAsText:EN,getSidebarShow:y4,useHelpAccessibility:kN,getDefaultFontStack:ww});const ON=["visible","hidden","clip"],DN=t=>_r(t).length>0&&!vo(ON,t),E4=t=>{if(xa(t)){const s=fs(t,"overflow-x"),c=fs(t,"overflow-y");return DN(s)||DN(c)}else return!1},RN=t=>t.plugins.fullscreen&&t.plugins.fullscreen.isFullscreen(),k4=(t,s)=>{const c=_p(s,E4),l=c.length===0?Cc(s).map(wi).map(d=>_p(d,E4)).getOr([]):c;return qs(l).map(d=>({element:d,others:l.slice(1),isFullscreen:()=>RN(t)}))},Gp=(t,s)=>xh(t)?k4(t,s):A.none(),qp=t=>{const s=[...je(t.others,ir),cc()];return t.isFullscreen()?cc():wg(ir(t.element),s)},Xc=pi({name:"Button",factory:t=>{const s=vw(t.action),c=t.dom.tag,l=g=>pt(t.dom,"attributes").bind(h=>pt(h,g)),d=()=>{if(c==="button"){const g=l("type").getOr("button"),h=l("role").map(y=>({role:y})).getOr({});return{type:g,...h}}else return{role:t.role.getOr(l("role").getOr("button"))}};return{uid:t.uid,dom:t.dom,components:t.components,events:s,behaviours:au.augment(t.buttonBehaviours,[Vn.config({}),En.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:d()},eventOrder:t.eventOrder}},configFields:[Te("uid",void 0),Ke("dom"),Te("components",[]),au.field("buttonBehaviours",[Vn,En]),Qo("action"),Qo("role"),Te("eventOrder",{})]}),Z6=t=>{const s=t.dom.attributes!==void 0?t.dom.attributes:[];return Go(s,(c,l)=>l.name==="class"?c:{...c,[l.name]:l.value},{})},j6=t=>Array.prototype.slice.call(t.dom.classList,0),ef=t=>{const s=ge.fromHtml(t),c=oa(s),l=Z6(s),d=j6(s),g=c.length===0?{}:{innerHtml:Wm(s)};return{tag:Ur(s),classes:d,attributes:l,...g}},us=t=>{const s=xA(t)&&Vr(t,"uid")?t.uid:V1("memento");return{get:g=>g.getSystem().getByUid(s).getOrDie(),getOpt:g=>g.getSystem().getByUid(s).toOptional(),asSpec:()=>({...t,uid:s})}};var _4=Object.freeze({__proto__:null,exhibit:(t,s)=>Ml({attributes:lo([{key:s.tabAttr,value:"true"}])})}),G6=[Te("tabAttr","data-alloy-tabstop")];const hr=da({fields:G6,name:"tabstopping",active:_4}),kT=Qt("tooltip.exclusive"),xw=Qt("tooltip.show"),Tw=Qt("tooltip.hide"),Ew=Qt("tooltip.immediateHide"),kw=Qt("tooltip.immediateShow"),MN=(t,s,c)=>{t.getSystem().broadcastOn([kT],{})};var q6=Object.freeze({__proto__:null,hideAllExclusive:MN,immediateOpenClose:(t,s,c,l)=>Eo(t,l?kw:Ew),isEnabled:(t,s,c)=>c.isEnabled(),setComponents:(t,s,c,l)=>{c.getTooltip().each(d=>{d.getSystem().isConnected()&&eo.set(d,l)})},setEnabled:(t,s,c,l)=>c.setEnabled(l)}),K6=Object.freeze({__proto__:null,events:(t,s)=>{const c=h=>{s.getTooltip().each(y=>{y.getSystem().isConnected()&&(Xm(y),t.onHide(h,y),s.clearTooltip())}),s.clearTimer()},l=h=>{if(!s.isShowing()&&s.isEnabled()){MN(h);const y=t.lazySink(h).getOrDie(),S=h.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:xs(t.mode==="normal"?[Ye(Dl(),k=>{Eo(h,xw)}),Ye(Kh(),k=>{Eo(h,Tw)})]:[]),behaviours:vt([eo.config({})])});s.setTooltip(S),Ym(y,S),t.onShow(h,S),Ia.position(y,S,{anchor:t.anchor(h)})}},d=h=>{s.getTooltip().each(y=>{const S=t.lazySink(h).getOrDie();Ia.position(S,y,{anchor:t.anchor(h)})})},g=()=>{switch(t.mode){case"normal":return[Ye(Rl(),h=>{Eo(h,kw)}),Ye(Bg(),h=>{Eo(h,Ew)}),Ye(Dl(),h=>{Eo(h,xw)}),Ye(Kh(),h=>{Eo(h,Tw)})];case"follow-highlight":return[Ye(Py(),(h,y)=>{Eo(h,xw)}),Ye(Jh(),h=>{Eo(h,Tw)})];case"children-normal":return[Ye(Rl(),(h,y)=>{bl(h.element).each(S=>{Ar(y.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{Eo(h,kw)},k=>{s.isShowing()&&(t.onShow(h,k),d(h))})})}),Ye(Bg(),h=>{bl(h.element).fold(()=>{Eo(h,Ew)},ee)}),Ye(Dl(),h=>{gr(h.element,"[data-mce-tooltip]:hover").each(y=>{s.getTooltip().fold(()=>{Eo(h,xw)},S=>{s.isShowing()&&(t.onShow(h,S),d(h))})})}),Ye(Kh(),h=>{gr(h.element,"[data-mce-tooltip]:hover").fold(()=>{Eo(h,Tw)},ee)})];default:return[Ye(Rl(),(h,y)=>{bl(h.element).each(S=>{Ar(y.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{Eo(h,kw)},k=>{s.isShowing()&&(t.onShow(h,k),d(h))})})}),Ye(Bg(),h=>{bl(h.element).fold(()=>{Eo(h,Ew)},ee)})]}};return xs(Rn([[nS(h=>{t.onSetup(h)}),Ye(xw,h=>{s.resetTimer(()=>{l(h)},t.delayForShow())}),Ye(Tw,h=>{s.resetTimer(()=>{c(h)},t.delayForHide())}),Ye(kw,h=>{s.resetTimer(()=>{l(h)},0)}),Ye(Ew,h=>{s.resetTimer(()=>{c(h)},0)}),Ye(pd(),(h,y)=>{const S=y;S.universal||vo(S.channels,kT)&&c(h)}),nm(h=>{c(h)})],g()]))}}),A4=[Ke("lazySink"),Ke("tooltipDom"),Te("exclusive",!0),Te("tooltipComponents",[]),Js("delayForShow",W(300)),Js("delayForHide",W(300)),Js("onSetup",ee),qc("mode","normal",["normal","follow-highlight","children-keyboard-focus","children-normal"]),Te("anchor",t=>({type:"hotspot",hotspot:t,layouts:{onLtr:W([Ec,ys,Hc,Pa,Vc,zc]),onRtl:W([Ec,ys,Hc,Pa,Vc,zc])},bubble:Fu(0,-2,{})})),Lo("onHide"),Lo("onShow")],Y6=Object.freeze({__proto__:null,init:()=>{const t=hn(!0),s=Yo(),c=Yo(),l=()=>{s.on(clearTimeout)},d=(h,y)=>{l(),s.set(setTimeout(h,y))},g=W("not-implemented");return hl({getTooltip:c.get,isShowing:c.isSet,setTooltip:c.set,clearTooltip:c.clear,clearTimer:l,resetTimer:d,readState:g,isEnabled:()=>t.get(),setEnabled:h=>t.set(h)})}});const ec=da({fields:A4,name:"tooltipping",active:K6,state:Y6,apis:q6});/*! @license DOMPurify 3.1.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.7/LICENSE */const{entries:O4,setPrototypeOf:NN,isFrozen:X6,getPrototypeOf:J6,getOwnPropertyDescriptor:Q6}=Object;let{freeze:uu,seal:gm,create:_T}=Object,{apply:D4,construct:R4}=typeof Reflect<"u"&&Reflect;uu||(uu=function(s){return s}),gm||(gm=function(s){return s}),D4||(D4=function(s,c,l){return s.apply(c,l)}),R4||(R4=function(s,c){return new s(...c)});const AT=Ad(Array.prototype.forEach),PN=Ad(Array.prototype.pop),_w=Ad(Array.prototype.push),OT=Ad(String.prototype.toLowerCase),M4=Ad(String.prototype.toString),BN=Ad(String.prototype.match),Aw=Ad(String.prototype.replace),e8=Ad(String.prototype.indexOf),t8=Ad(String.prototype.trim),tf=Ad(Object.prototype.hasOwnProperty),du=Ad(RegExp.prototype.test),Kp=N4(TypeError);function Ad(t){return function(s){for(var c=arguments.length,l=new Array(c>1?c-1:0),d=1;d<c;d++)l[d-1]=arguments[d];return D4(t,s,l)}}function N4(t){return function(){for(var s=arguments.length,c=new Array(s),l=0;l<s;l++)c[l]=arguments[l];return R4(t,c)}}function nr(t,s){let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:OT;NN&&NN(t,null);let l=s.length;for(;l--;){let d=s[l];if(typeof d=="string"){const g=c(d);g!==d&&(X6(s)||(s[l]=g),d=g)}t[d]=!0}return t}function n8(t){for(let s=0;s<t.length;s++)tf(t,s)||(t[s]=null);return t}function Rb(t){const s=_T(null);for(const[c,l]of O4(t))tf(t,c)&&(Array.isArray(l)?s[c]=n8(l):l&&typeof l=="object"&&l.constructor===Object?s[c]=Rb(l):s[c]=l);return s}function U0(t,s){for(;t!==null;){const l=Q6(t,s);if(l){if(l.get)return Ad(l.get);if(typeof l.value=="function")return Ad(l.value)}t=J6(t)}function c(){return null}return c}const $N=uu(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Ow=uu(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Dw=uu(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),IN=uu(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Rw=uu(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),DT=uu(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),P4=uu(["#text"]),nf=uu(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Mw=uu(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),LN=uu(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),RT=uu(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),o8=gm(/\{\{[\w\W]*|[\w\W]*\}\}/gm),s8=gm(/<%[\w\W]*|[\w\W]*%>/gm),Nw=gm(/\${[\w\W]*}/gm),r8=gm(/^data-[\-\w.\u00B7-\uFFFF]/),FN=gm(/^aria-[\-\w]+$/),MT=gm(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),c8=gm(/^(?:\w+script|data):/i),B4=gm(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),NT=gm(/^html$/i),a8=gm(/^[a-z][.\w]*(-[.\w]+)+$/i);var $4=Object.freeze({__proto__:null,MUSTACHE_EXPR:o8,ERB_EXPR:s8,TMPLIT_EXPR:Nw,DATA_ATTR:r8,ARIA_ATTR:FN,IS_ALLOWED_URI:MT,IS_SCRIPT_OR_DATA:c8,ATTR_WHITESPACE:B4,DOCTYPE_NAME:NT,CUSTOM_ELEMENT:a8});const W0={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},l8=function(){return typeof window>"u"?null:window},HN=function(s,c){if(typeof s!="object"||typeof s.createPolicy!="function")return null;let l=null;const d="data-tt-policy-suffix";c&&c.hasAttribute(d)&&(l=c.getAttribute(d));const g="dompurify"+(l?"#"+l:"");try{return s.createPolicy(g,{createHTML(h){return h},createScriptURL(h){return h}})}catch{return console.warn("TrustedTypes policy "+g+" could not be created."),null}};function I4(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:l8();const s=Fo=>I4(Fo);if(s.version="3.1.7",s.removed=[],!t||!t.document||t.document.nodeType!==W0.document)return s.isSupported=!1,s;let{document:c}=t;const l=c,d=l.currentScript,{DocumentFragment:g,HTMLTemplateElement:h,Node:y,Element:S,NodeFilter:k,NamedNodeMap:O=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:N,DOMParser:V,trustedTypes:z}=t,X=S.prototype,ne=U0(X,"cloneNode"),Ce=U0(X,"remove"),ae=U0(X,"nextSibling"),ve=U0(X,"childNodes"),ye=U0(X,"parentNode");if(typeof h=="function"){const Fo=c.createElement("template");Fo.content&&Fo.content.ownerDocument&&(c=Fo.content.ownerDocument)}let $e,Le="";const{implementation:kt,createNodeIterator:Kt,createDocumentFragment:Ze,getElementsByTagName:Jt}=c,{importNode:Bt}=l;let sn={};s.isSupported=typeof O4=="function"&&typeof ye=="function"&&kt&&kt.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Do,ERB_EXPR:rr,TMPLIT_EXPR:is,DATA_ATTR:an,ARIA_ATTR:ut,IS_SCRIPT_OR_DATA:Nt,ATTR_WHITESPACE:Wn,CUSTOM_ELEMENT:go}=$4;let{IS_ALLOWED_URI:Tn}=$4,to=null;const Is=nr({},[...$N,...Ow,...Dw,...Rw,...P4]);let ks=null;const Vi=nr({},[...nf,...Mw,...LN,...RT]);let Hr=Object.seal(_T(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Yu=null,xl=null,Xu=!0,Ju=!0,_m=!1,j2=!0,hg=!1,BR=!0,dv=!1,$R=!1,Kj=!1,Qk=!1,RF=!1,MF=!1,nq=!0,oq=!1;const Iq="user-content-";let Yj=!0,IR=!1,e_={},t_=null;const sq=nr({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let rq=null;const cq=nr({},["audio","video","img","source","image","track"]);let Xj=null;const aq=nr({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),NF="http://www.w3.org/1998/Math/MathML",PF="http://www.w3.org/2000/svg",mv="http://www.w3.org/1999/xhtml";let n_=mv,Jj=!1,Qj=null;const Lq=nr({},[NF,PF,mv],M4);let LR=null;const Fq=["application/xhtml+xml","text/html"],Hq="text/html";let zi=null,o_=null;const Vq=c.createElement("form"),lq=function(Ie){return Ie instanceof RegExp||Ie instanceof Function},eG=function(){let Ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(o_&&o_===Ie)){if((!Ie||typeof Ie!="object")&&(Ie={}),Ie=Rb(Ie),LR=Fq.indexOf(Ie.PARSER_MEDIA_TYPE)===-1?Hq:Ie.PARSER_MEDIA_TYPE,zi=LR==="application/xhtml+xml"?M4:OT,to=tf(Ie,"ALLOWED_TAGS")?nr({},Ie.ALLOWED_TAGS,zi):Is,ks=tf(Ie,"ALLOWED_ATTR")?nr({},Ie.ALLOWED_ATTR,zi):Vi,Qj=tf(Ie,"ALLOWED_NAMESPACES")?nr({},Ie.ALLOWED_NAMESPACES,M4):Lq,Xj=tf(Ie,"ADD_URI_SAFE_ATTR")?nr(Rb(aq),Ie.ADD_URI_SAFE_ATTR,zi):aq,rq=tf(Ie,"ADD_DATA_URI_TAGS")?nr(Rb(cq),Ie.ADD_DATA_URI_TAGS,zi):cq,t_=tf(Ie,"FORBID_CONTENTS")?nr({},Ie.FORBID_CONTENTS,zi):sq,Yu=tf(Ie,"FORBID_TAGS")?nr({},Ie.FORBID_TAGS,zi):{},xl=tf(Ie,"FORBID_ATTR")?nr({},Ie.FORBID_ATTR,zi):{},e_=tf(Ie,"USE_PROFILES")?Ie.USE_PROFILES:!1,Xu=Ie.ALLOW_ARIA_ATTR!==!1,Ju=Ie.ALLOW_DATA_ATTR!==!1,_m=Ie.ALLOW_UNKNOWN_PROTOCOLS||!1,j2=Ie.ALLOW_SELF_CLOSE_IN_ATTR!==!1,hg=Ie.SAFE_FOR_TEMPLATES||!1,BR=Ie.SAFE_FOR_XML!==!1,dv=Ie.WHOLE_DOCUMENT||!1,Qk=Ie.RETURN_DOM||!1,RF=Ie.RETURN_DOM_FRAGMENT||!1,MF=Ie.RETURN_TRUSTED_TYPE||!1,Kj=Ie.FORCE_BODY||!1,nq=Ie.SANITIZE_DOM!==!1,oq=Ie.SANITIZE_NAMED_PROPS||!1,Yj=Ie.KEEP_CONTENT!==!1,IR=Ie.IN_PLACE||!1,Tn=Ie.ALLOWED_URI_REGEXP||MT,n_=Ie.NAMESPACE||mv,Hr=Ie.CUSTOM_ELEMENT_HANDLING||{},Ie.CUSTOM_ELEMENT_HANDLING&&lq(Ie.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Hr.tagNameCheck=Ie.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Ie.CUSTOM_ELEMENT_HANDLING&&lq(Ie.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Hr.attributeNameCheck=Ie.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Ie.CUSTOM_ELEMENT_HANDLING&&typeof Ie.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Hr.allowCustomizedBuiltInElements=Ie.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),hg&&(Ju=!1),RF&&(Qk=!0),e_&&(to=nr({},P4),ks=[],e_.html===!0&&(nr(to,$N),nr(ks,nf)),e_.svg===!0&&(nr(to,Ow),nr(ks,Mw),nr(ks,RT)),e_.svgFilters===!0&&(nr(to,Dw),nr(ks,Mw),nr(ks,RT)),e_.mathMl===!0&&(nr(to,Rw),nr(ks,LN),nr(ks,RT))),Ie.ADD_TAGS&&(to===Is&&(to=Rb(to)),nr(to,Ie.ADD_TAGS,zi)),Ie.ADD_ATTR&&(ks===Vi&&(ks=Rb(ks)),nr(ks,Ie.ADD_ATTR,zi)),Ie.ADD_URI_SAFE_ATTR&&nr(Xj,Ie.ADD_URI_SAFE_ATTR,zi),Ie.FORBID_CONTENTS&&(t_===sq&&(t_=Rb(t_)),nr(t_,Ie.FORBID_CONTENTS,zi)),Yj&&(to["#text"]=!0),dv&&nr(to,["html","head","body"]),to.table&&(nr(to,["tbody"]),delete Yu.tbody),Ie.TRUSTED_TYPES_POLICY){if(typeof Ie.TRUSTED_TYPES_POLICY.createHTML!="function")throw Kp('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Ie.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Kp('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');$e=Ie.TRUSTED_TYPES_POLICY,Le=$e.createHTML("")}else $e===void 0&&($e=HN(z,d)),$e!==null&&typeof Le=="string"&&(Le=$e.createHTML(""));uu&&uu(Ie),o_=Ie}},iq=nr({},["mi","mo","mn","ms","mtext"]),uq=nr({},["annotation-xml"]),zq=nr({},["title","style","font","a","script"]),dq=nr({},[...Ow,...Dw,...IN]),mq=nr({},[...Rw,...DT]),Uq=function(Ie){let Dn=ye(Ie);(!Dn||!Dn.tagName)&&(Dn={namespaceURI:n_,tagName:"template"});const Ro=OT(Ie.tagName),Ca=OT(Dn.tagName);return Qj[Ie.namespaceURI]?Ie.namespaceURI===PF?Dn.namespaceURI===mv?Ro==="svg":Dn.namespaceURI===NF?Ro==="svg"&&(Ca==="annotation-xml"||iq[Ca]):!!dq[Ro]:Ie.namespaceURI===NF?Dn.namespaceURI===mv?Ro==="math":Dn.namespaceURI===PF?Ro==="math"&&uq[Ca]:!!mq[Ro]:Ie.namespaceURI===mv?Dn.namespaceURI===PF&&!uq[Ca]||Dn.namespaceURI===NF&&!iq[Ca]?!1:!mq[Ro]&&(zq[Ro]||!dq[Ro]):!!(LR==="application/xhtml+xml"&&Qj[Ie.namespaceURI]):!1},v1=function(Ie){_w(s.removed,{element:Ie});try{ye(Ie).removeChild(Ie)}catch{Ce(Ie)}},FR=function(Ie,Dn){try{_w(s.removed,{attribute:Dn.getAttributeNode(Ie),from:Dn})}catch{_w(s.removed,{attribute:null,from:Dn})}if(Dn.removeAttribute(Ie),Ie==="is"&&!ks[Ie])if(Qk||RF)try{v1(Dn)}catch{}else try{Dn.setAttribute(Ie,"")}catch{}},fq=function(Ie){let Dn=null,Ro=null;if(Kj)Ie="<remove></remove>"+Ie;else{const Ui=BN(Ie,/^[\r\n\t ]+/);Ro=Ui&&Ui[0]}LR==="application/xhtml+xml"&&n_===mv&&(Ie='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Ie+"</body></html>");const Ca=$e?$e.createHTML(Ie):Ie;if(n_===mv)try{Dn=new V().parseFromString(Ca,LR)}catch{}if(!Dn||!Dn.documentElement){Dn=kt.createDocument(n_,"template",null);try{Dn.documentElement.innerHTML=Jj?Le:Ca}catch{}}const Qu=Dn.body||Dn.documentElement;return Ie&&Ro&&Qu.insertBefore(c.createTextNode(Ro),Qu.childNodes[0]||null),n_===mv?Jt.call(Dn,dv?"html":"body")[0]:dv?Dn.documentElement:Qu},gq=function(Ie){return Kt.call(Ie.ownerDocument||Ie,Ie,k.SHOW_ELEMENT|k.SHOW_COMMENT|k.SHOW_TEXT|k.SHOW_PROCESSING_INSTRUCTION|k.SHOW_CDATA_SECTION,null)},hq=function(Ie){return Ie instanceof N&&(typeof Ie.nodeName!="string"||typeof Ie.textContent!="string"||typeof Ie.removeChild!="function"||!(Ie.attributes instanceof O)||typeof Ie.removeAttribute!="function"||typeof Ie.setAttribute!="function"||typeof Ie.namespaceURI!="string"||typeof Ie.insertBefore!="function"||typeof Ie.hasChildNodes!="function")},pq=function(Ie){return typeof y=="function"&&Ie instanceof y},fv=function(Ie,Dn,Ro){sn[Ie]&&AT(sn[Ie],Ca=>{Ca.call(s,Dn,Ro,o_)})},bq=function(Ie){let Dn=null;if(fv("beforeSanitizeElements",Ie,null),hq(Ie))return v1(Ie),!0;const Ro=zi(Ie.nodeName);if(fv("uponSanitizeElement",Ie,{tagName:Ro,allowedTags:to}),Ie.hasChildNodes()&&!pq(Ie.firstElementChild)&&du(/<[/\w]/g,Ie.innerHTML)&&du(/<[/\w]/g,Ie.textContent)||Ie.nodeType===W0.progressingInstruction||BR&&Ie.nodeType===W0.comment&&du(/<[/\w]/g,Ie.data))return v1(Ie),!0;if(!to[Ro]||Yu[Ro]){if(!Yu[Ro]&&yq(Ro)&&(Hr.tagNameCheck instanceof RegExp&&du(Hr.tagNameCheck,Ro)||Hr.tagNameCheck instanceof Function&&Hr.tagNameCheck(Ro)))return!1;if(Yj&&!t_[Ro]){const Ca=ye(Ie)||Ie.parentNode,Qu=ve(Ie)||Ie.childNodes;if(Qu&&Ca){const Ui=Qu.length;for(let Am=Ui-1;Am>=0;--Am){const y1=ne(Qu[Am],!0);y1.__removalCount=(Ie.__removalCount||0)+1,Ca.insertBefore(y1,ae(Ie))}}}return v1(Ie),!0}return Ie instanceof S&&!Uq(Ie)||(Ro==="noscript"||Ro==="noembed"||Ro==="noframes")&&du(/<\/no(script|embed|frames)/i,Ie.innerHTML)?(v1(Ie),!0):(hg&&Ie.nodeType===W0.text&&(Dn=Ie.textContent,AT([Do,rr,is],Ca=>{Dn=Aw(Dn,Ca," ")}),Ie.textContent!==Dn&&(_w(s.removed,{element:Ie.cloneNode()}),Ie.textContent=Dn)),fv("afterSanitizeElements",Ie,null),!1)},vq=function(Ie,Dn,Ro){if(nq&&(Dn==="id"||Dn==="name")&&(Ro in c||Ro in Vq))return!1;if(!(Ju&&!xl[Dn]&&du(an,Dn))){if(!(Xu&&du(ut,Dn))){if(!ks[Dn]||xl[Dn]){if(!(yq(Ie)&&(Hr.tagNameCheck instanceof RegExp&&du(Hr.tagNameCheck,Ie)||Hr.tagNameCheck instanceof Function&&Hr.tagNameCheck(Ie))&&(Hr.attributeNameCheck instanceof RegExp&&du(Hr.attributeNameCheck,Dn)||Hr.attributeNameCheck instanceof Function&&Hr.attributeNameCheck(Dn))||Dn==="is"&&Hr.allowCustomizedBuiltInElements&&(Hr.tagNameCheck instanceof RegExp&&du(Hr.tagNameCheck,Ro)||Hr.tagNameCheck instanceof Function&&Hr.tagNameCheck(Ro))))return!1}else if(!Xj[Dn]){if(!du(Tn,Aw(Ro,Wn,""))){if(!((Dn==="src"||Dn==="xlink:href"||Dn==="href")&&Ie!=="script"&&e8(Ro,"data:")===0&&rq[Ie])){if(!(_m&&!du(Nt,Aw(Ro,Wn,"")))){if(Ro)return!1}}}}}}return!0},yq=function(Ie){return Ie!=="annotation-xml"&&BN(Ie,go)},Cq=function(Ie){fv("beforeSanitizeAttributes",Ie,null);const{attributes:Dn}=Ie;if(!Dn)return;const Ro={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ks};let Ca=Dn.length;for(;Ca--;){const Qu=Dn[Ca],{name:Ui,namespaceURI:Am,value:y1}=Qu,HR=zi(Ui);let bu=Ui==="value"?y1:t8(y1);const Zq=bu;if(Ro.attrName=HR,Ro.attrValue=bu,Ro.keepAttr=!0,Ro.forceKeepAttr=void 0,fv("uponSanitizeAttribute",Ie,Ro),bu=Ro.attrValue,Ro.forceKeepAttr)continue;if(!Ro.keepAttr){FR(Ui,Ie);continue}if(!j2&&du(/\/>/i,bu)){FR(Ui,Ie);continue}hg&&AT([Do,rr,is],Sq=>{bu=Aw(bu,Sq," ")});const wq=zi(Ie.nodeName);if(!vq(wq,HR,bu)){FR(Ui,Ie);continue}if(oq&&(HR==="id"||HR==="name")&&(FR(Ui,Ie),bu=Iq+bu),BR&&du(/((--!?|])>)|<\/(style|title)/i,bu)){FR(Ui,Ie);continue}if($e&&typeof z=="object"&&typeof z.getAttributeType=="function"&&!Am)switch(z.getAttributeType(wq,HR)){case"TrustedHTML":{bu=$e.createHTML(bu);break}case"TrustedScriptURL":{bu=$e.createScriptURL(bu);break}}if(bu!==Zq)try{Am?Ie.setAttributeNS(Am,Ui,bu):Ie.setAttribute(Ui,bu),hq(Ie)?v1(Ie):PN(s.removed)}catch{}}fv("afterSanitizeAttributes",Ie,null)},Wq=function Fo(Ie){let Dn=null;const Ro=gq(Ie);for(fv("beforeSanitizeShadowDOM",Ie,null);Dn=Ro.nextNode();)fv("uponSanitizeShadowNode",Dn,null),!bq(Dn)&&(Dn.content instanceof g&&Fo(Dn.content),Cq(Dn));fv("afterSanitizeShadowDOM",Ie,null)};return s.sanitize=function(Fo){let Ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Dn=null,Ro=null,Ca=null,Qu=null;if(Jj=!Fo,Jj&&(Fo="<!-->"),typeof Fo!="string"&&!pq(Fo))if(typeof Fo.toString=="function"){if(Fo=Fo.toString(),typeof Fo!="string")throw Kp("dirty is not a string, aborting")}else throw Kp("toString is not a function");if(!s.isSupported)return Fo;if($R||eG(Ie),s.removed=[],typeof Fo=="string"&&(IR=!1),IR){if(Fo.nodeName){const y1=zi(Fo.nodeName);if(!to[y1]||Yu[y1])throw Kp("root node is forbidden and cannot be sanitized in-place")}}else if(Fo instanceof y)Dn=fq("<!---->"),Ro=Dn.ownerDocument.importNode(Fo,!0),Ro.nodeType===W0.element&&Ro.nodeName==="BODY"||Ro.nodeName==="HTML"?Dn=Ro:Dn.appendChild(Ro);else{if(!Qk&&!hg&&!dv&&Fo.indexOf("<")===-1)return $e&&MF?$e.createHTML(Fo):Fo;if(Dn=fq(Fo),!Dn)return Qk?null:MF?Le:""}Dn&&Kj&&v1(Dn.firstChild);const Ui=gq(IR?Fo:Dn);for(;Ca=Ui.nextNode();)bq(Ca)||(Ca.content instanceof g&&Wq(Ca.content),Cq(Ca));if(IR)return Fo;if(Qk){if(RF)for(Qu=Ze.call(Dn.ownerDocument);Dn.firstChild;)Qu.appendChild(Dn.firstChild);else Qu=Dn;return(ks.shadowroot||ks.shadowrootmode)&&(Qu=Bt.call(l,Qu,!0)),Qu}let Am=dv?Dn.outerHTML:Dn.innerHTML;return dv&&to["!doctype"]&&Dn.ownerDocument&&Dn.ownerDocument.doctype&&Dn.ownerDocument.doctype.name&&du(NT,Dn.ownerDocument.doctype.name)&&(Am="<!DOCTYPE "+Dn.ownerDocument.doctype.name+`>
`+Am),hg&&AT([Do,rr,is],y1=>{Am=Aw(Am,y1," ")}),$e&&MF?$e.createHTML(Am):Am},s.setConfig=function(){let Fo=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};eG(Fo),$R=!0},s.clearConfig=function(){o_=null,$R=!1},s.isValidAttribute=function(Fo,Ie,Dn){o_||eG({});const Ro=zi(Fo),Ca=zi(Ie);return vq(Ro,Ca,Dn)},s.addHook=function(Fo,Ie){typeof Ie=="function"&&(sn[Fo]=sn[Fo]||[],_w(sn[Fo],Ie))},s.removeHook=function(Fo){if(sn[Fo])return PN(sn[Fo])},s.removeHooks=function(Fo){sn[Fo]&&(sn[Fo]=[])},s.removeAllHooks=function(){sn={}},s}var i8=I4();const VN=t=>i8().sanitize(t);var Od=tinymce.util.Tools.resolve("tinymce.util.I18n");const u8={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},zN="temporary-placeholder",PT=t=>()=>pt(t,zN).getOr("!not found!"),BT=(t,s)=>{const c=t.toLowerCase();if(Od.isRtl()){const l=hs(c,"-rtl");return yo(s,l)?l:c}else return c},UN=(t,s)=>pt(s,BT(t,s)),L4=(t,s)=>{const c=s();return UN(t,c).getOrThunk(PT(c))},Pw=(t,s,c)=>{const l=s();return UN(t,l).or(c).getOrThunk(PT(l))},WN=t=>Od.isRtl()?yo(u8,t):!1,ZN=()=>oo("add-focusable",[mr(t=>{ou(t.element,"svg").each(s=>Ve(s,"focusable","false"))})]),jN=(t,s,c,l)=>{var d,g;const h=WN(s)?["tox-icon--flip"]:[],y=pt(c,BT(s,c)).or(l).getOrThunk(PT(c));return{dom:{tag:t.tag,attributes:(d=t.attributes)!==null&&d!==void 0?d:{},classes:t.classes.concat(h),innerHtml:y},behaviours:vt([...(g=t.behaviours)!==null&&g!==void 0?g:[],ZN()])}},zu=(t,s,c,l=A.none())=>jN(s,t,c(),l),d8=(t,s,c)=>{const l=c(),d=Cn(t,g=>yo(l,BT(g,l)));return jN(s,d.getOr(zN),l,A.none())},m8={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},$T=pi({name:"Notification",factory:t=>{const s=Qt("notification-text"),c=us({dom:ef(`<p id=${s}>${VN(t.backstageProvider.translate(t.text))}</p>`),behaviours:vt([eo.config({})])}),l=X=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${X}%`}}}),d=X=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${X}%`}}),g=us({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[l(0)]},d(0)],behaviours:vt([eo.config({})])}),S={updateProgress:(X,ne)=>{X.getSystem().isConnected()&&g.getOpt(X).each(Ce=>{eo.set(Ce,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[l(ne)]},d(ne)])})},updateText:(X,ne)=>{if(X.getSystem().isConnected()){const Ce=c.get(X);eo.set(Ce,[Nr(ne)])}}},k=Rn([t.icon.toArray(),t.level.toArray(),t.level.bind(X=>A.from(m8[X])).toArray()]),O=us(Xc.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":t.backstageProvider.translate("Close")}},components:[zu("close",{tag:"span",classes:["tox-icon"]},t.iconProvider)],buttonBehaviours:vt([hr.config({}),ec.config({...t.backstageProvider.tooltips.getConfig({tooltipText:t.backstageProvider.translate("Close")})})]),action:X=>{t.onAction(X)}})),N=d8(k,{tag:"div",classes:["tox-notification__icon"]},t.iconProvider),V={dom:{tag:"div",classes:["tox-notification__body"]},components:[c.asSpec()],behaviours:vt([eo.config({})])},z=[N,V];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert","aria-labelledby":s},classes:t.level.map(X=>["tox-notification","tox-notification--in",`tox-notification--${X}`]).getOr(["tox-notification","tox-notification--in"])},behaviours:vt([hr.config({}),Vn.config({}),En.config({mode:"special",onEscape:X=>(t.onAction(X),A.some(!0))})]),components:z.concat(t.progress?[g.asSpec()]:[]).concat([O.asSpec()]),apis:S}},configFields:[Qo("level"),Ke("progress"),Qo("icon"),Ke("onAction"),Ke("text"),Ke("iconProvider"),Ke("backstageProvider")],apis:{updateProgress:(t,s,c)=>{t.updateProgress(s,c)},updateText:(t,s,c)=>{t.updateText(s,c)}}});var GN=(t,s,c,l)=>{const d=s.backstage.shared,g=()=>ge.fromDom(t.queryCommandValue("ToggleView")===""?t.getContentAreaContainer():t.getContainer()),h=()=>{const N=ir(g());return A.some(N)},y=N=>{h().each(V=>{gt(N,z=>{Gn(z.element,"width"),G(z.element)>V.width&&qe(z.element,"width",V.width+"px")})})};return{open:(N,V,z)=>{const X=()=>{const ve=kt=>{eo.remove(kt,ne),Ce()},ye=(kt,Kt)=>{oa(kt.element).length===0?$e(kt,Kt):Le(kt,Kt)},$e=(kt,Kt)=>{Fr.hide(kt),l.clear(),Kt&&t.focus()},Le=(kt,Kt)=>{Kt&&En.focusIn(kt)};l.on(kt=>{V();const Kt=z();ve(kt),ye(kt,Kt)})},ne=Yc($T.sketch({text:N.text,level:vo(["success","error","warning","warn","info"],N.type)?N.type:void 0,progress:N.progressBar===!0,icon:N.icon,onAction:X,iconProvider:d.providers.icons,backstageProvider:d.providers}));if(l.isSet()){const ve=Oi(ne);l.on(ye=>{eo.append(ye,ve),Fr.reposition(ye),er.refresh(ye),y(ye.components())})}else{const ve=Yc(Fr.sketch({dom:{tag:"div",classes:["tox-notifications-container"],attributes:{"aria-label":"Notifications",role:"region"}},lazySink:d.getSink,fireDismissalEventInstead:{},...d.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}},inlineBehaviours:vt([En.config({mode:"cyclic",selector:".tox-notification, .tox-notification a, .tox-notification button"}),eo.config({}),...jp(t)&&!d.header.isPositionedAtTop()?[]:[er.config({contextual:{lazyContext:()=>A.some(ir(g())),fadeInClass:"tox-notification-container-dock-fadein",fadeOutClass:"tox-notification-container-dock-fadeout",transitionClass:"tox-notification-container-dock-transition"},modes:["top"],lazyViewport:kt=>Gp(t,kt.element).map(Ze=>({bounds:qp(Ze),optScrollEnv:A.some({currentScrollTop:Ze.element.dom.scrollTop,scrollElmTop:Ws(Ze.element).top})})).getOrThunk(()=>({bounds:cc(),optScrollEnv:A.none()}))})]])})),ye=Oi(ne),$e={maxHeightFunction:jf()},Le={...d.anchors.banner(),overrides:$e};l.set(ve),c.add(ve),Fr.showWithinBounds(ve,ye,{anchor:Le},h)}Qn(N.timeout)&&N.timeout>0&&_b.setEditorTimeout(t,()=>{X()},N.timeout);const Ce=()=>{l.on(ve=>{Fr.reposition(ve),er.refresh(ve),y(ve.components())})};return{close:X,reposition:Ce,text:ve=>{$T.updateText(ne,ve)},settings:N,getEl:()=>ne.element.dom,progressBar:{value:ve=>{$T.updateProgress(ne,ve)}}}},close:N=>{N.close()},getArgs:N=>N.settings}};const h8={setup:(t,s)=>{const c=(d,g)=>{ln(d,Qi(),{raw:g})},l=()=>t.getMenu().bind(_t.getHighlighted);s.on("keydown",d=>{const g=d.which;t.isActive()&&(t.isMenuOpen()?g===13?(l().each(Mf),d.preventDefault()):g===40?(l().fold(()=>{t.getMenu().each(_t.highlightFirst)},h=>{c(h,d)}),d.preventDefault(),d.stopImmediatePropagation()):(g===37||g===38||g===39)&&l().each(h=>{c(h,d),d.preventDefault(),d.stopImmediatePropagation()}):(g===13||g===38||g===40)&&t.cancelIfNecessary())}),s.on("NodeChange",()=>{t.isActive()&&!t.isProcessingAction()&&!s.queryCommandState("mceAutoCompleterInRange")&&t.cancelIfNecessary()})}};var F4;(function(t){t[t.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",t[t.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(F4||(F4={}));var hm=F4;const Bw="tox-menu-nav__js",Z0="tox-collection__item",IT="tox-swatch",qN={normal:Bw,color:IT},H4="tox-collection__item--enabled",p8="tox-collection__group-heading",LT="tox-collection__item-icon",V4="tox-collection__item-label",KN="tox-collection__item-accessory",z4="tox-collection__item-caret",Mb="tox-collection__item-checkmark",Nb="tox-collection__item--active",FT="tox-collection__item-container",HT="tox-collection__item-container--column",YN="tox-collection__item-container--row",XN="tox-collection__item-container--align-right",JN="tox-collection__item-container--align-left",QN="tox-collection__item-container--valign-top",U4="tox-collection__item-container--valign-middle",eP="tox-collection__item-container--valign-bottom",tP=t=>pt(qN,t).getOr(Bw),nP=t=>t==="color"?"tox-swatches":"tox-menu",VT=t=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:nP(t),tieredMenu:"tox-tiered-menu"}),Yp=t=>{const s=VT(t);return{backgroundMenu:s.backgroundMenu,selectedMenu:s.selectedMenu,menu:s.menu,selectedItem:s.selectedItem,item:tP(t)}},oP=(t,s,c)=>{const l=VT(c);return{tag:"div",classes:Rn([[l.menu,`tox-menu-${s}-column`],t?[l.hasIcons]:[]])}},b8=[Tb.parts.items({})],$w=(t,s,c)=>{const l=VT(c);return{dom:{tag:"div",classes:Rn([[l.tieredMenu]])},markers:Yp(c)}},sP=W([Qo("data"),Te("inputAttributes",{}),Te("inputStyles",{}),Te("tag","input"),Te("inputClasses",[]),Lo("onSetValue"),Te("styles",{}),Te("eventOrder",{}),fa("inputBehaviours",[Ut,Vn]),Te("selectOnFocus",!0)]),rP=t=>vt([Vn.config({onFocus:t.selectOnFocus?s=>{const c=s.element,l=Lu(c);c.dom.setSelectionRange(0,l.length)}:ee})]),v8=t=>({...rP(t),...ga(t.inputBehaviours,[Ut.config({store:{mode:"manual",...t.data.map(s=>({initialValue:s})).getOr({}),getValue:s=>Lu(s.element),setValue:(s,c)=>{Lu(s.element)!==c&&Qg(s.element,c)}},onSetValue:t.onSetValue})])}),cP=t=>({tag:t.tag,attributes:{type:"text",...t.inputAttributes},styles:t.inputStyles,classes:t.inputClasses}),aP=(t,s)=>({uid:t.uid,dom:cP(t),components:[],behaviours:v8(t),eventOrder:t.eventOrder}),of=pi({name:"Input",configFields:sP(),factory:aP}),W4=Qt("refetch-trigger-event"),lP=Qt("redirect-menu-item-interaction"),iP="tox-menu__searcher",zT=t=>gr(t.element,`.${iP}`).bind(s=>t.getSystem().getByDom(s).toOptional()),uP=zT,y8=(t,s)=>{Ut.setValue(t,s.fetchPattern),t.element.dom.selectionStart=s.selectionStart,t.element.dom.selectionEnd=s.selectionEnd},Iw=t=>{const s=Ut.getValue(t),c=t.element.dom.selectionStart,l=t.element.dom.selectionEnd;return{fetchPattern:s,selectionStart:c,selectionEnd:l}},C8=(t,s)=>{Hn(s.element,"id").each(c=>Ve(t.element,"aria-activedescendant",c))},dP=t=>{const s=(d,g)=>(g.cut(),A.none()),c=(d,g)=>{const h={interactionEvent:g.event,eventType:g.event.raw.type};return ln(d,lP,h),A.some(!0)},l="searcher-events";return{dom:{tag:"div",classes:[Z0]},components:[of.sketch({inputClasses:[iP,"tox-textfield"],inputAttributes:{...t.placeholder.map(d=>({placeholder:t.i18n(d)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:vt([oo(l,[Ye(gd(),d=>{Eo(d,W4)}),Ye(Qi(),(d,g)=>{g.event.raw.key==="Escape"&&g.stop()})]),En.config({mode:"special",onLeft:s,onRight:s,onSpace:s,onEnter:c,onEscape:c,onUp:c,onDown:c})]),eventOrder:{keydown:[l,En.name()]}})]}},UT="tox-collection--results__js",Z4=t=>{var s;return t.dom?{...t,dom:{...t.dom,attributes:{...(s=t.dom.attributes)!==null&&s!==void 0?s:{},id:Qt("aria-item-search-result-id"),"aria-selected":"false"}}}:t},WT=(t,s)=>c=>{const l=Us(c,s);return je(l,d=>({dom:t,components:d}))},w8=t=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[Tb.parts.items({preprocess:t!=="auto"?WT({tag:"div",classes:["tox-swatches__row"]},t):xt})]}]}),mP=t=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[Tb.parts.items({preprocess:WT({tag:"div",classes:["tox-collection__group"]},t)})]}),j4=(t,s)=>{const c=[];let l=[];return gt(t,(d,g)=>{s(d,g)?(l.length>0&&c.push(l),l=[],(yo(d.dom,"innerHtml")||d.components&&d.components.length>0)&&l.push(d)):l.push(d)}),l.length>0&&c.push(l),je(c,d=>({dom:{tag:"div",classes:["tox-collection__group"]},components:d}))},ZT=(t,s,c)=>Tb.parts.items({preprocess:l=>{const d=je(l,c);return t!=="auto"&&t>1?WT({tag:"div",classes:["tox-collection__group"]},t)(d):j4(d,(g,h)=>s[h].type==="separator")}}),G4=(t,s,c=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[ZT(t,s,xt)]}),S8=(t,s,c=!0)=>{const l=Qt("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",UT].concat(t===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:l}},components:[ZT(t,s,Z4)]}},x8=(t,s,c)=>{const l=Qt("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[dP({i18n:Od.translate,placeholder:c.placeholder}),{dom:{tag:"div",classes:[...t===1?["tox-collection--list"]:["tox-collection--grid"],UT],attributes:{id:l}},components:[ZT(t,s,Z4)]}]}},T8=(t,s=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[Tb.parts.items({preprocess:c=>j4(c,(l,d)=>t[d].type==="separator")})]}),jT=t=>Ms(t,s=>"icon"in s&&s.icon!==void 0),ag=t=>(console.error(Fm(t)),console.log(t),A.none()),fP=(t,s,c,l,d)=>{const g=T8(c);return{value:t,dom:g.dom,components:g.components,items:c}},q4=(t,s,c,l,d)=>{const g=()=>d.menuType!=="searchable"?G4(l,c):d.searchMode.searchMode==="search-with-field"?x8(l,c,d.searchMode):S8(l,c);if(d.menuType==="color"){const h=w8(l);return{value:t,dom:h.dom,components:h.components,items:c}}else if(d.menuType==="normal"&&l==="auto"){const h=G4(l,c);return{value:t,dom:h.dom,components:h.components,items:c}}else if(d.menuType==="normal"||d.menuType==="searchable"){const h=g();return{value:t,dom:h.dom,components:h.components,items:c}}else if(d.menuType==="listpreview"&&l!=="auto"){const h=mP(l);return{value:t,dom:h.dom,components:h.components,items:c}}else return{value:t,dom:oP(s,l,d.menuType),components:b8,items:c}},_c=Sc("type"),K4=Sc("name"),Y4=Sc("label"),Th=Sc("text"),gP=Sc("title"),hP=Sc("icon"),Pb=Sc("value"),pP=li("fetch"),E8=li("getSubmenuItems"),j0=li("onAction"),bP=li("onItemAction"),Bb=Js("onSetup",()=>ee),k8=xc("name"),Eh=xc("text"),vP=xc("role"),Uu=xc("icon"),Lw=xc("tooltip"),X4=xc("label"),J4=xc("shortcut"),yP=Xi("select"),G0=Tc("active",!1),_8=Tc("borderless",!1),pm=Tc("enabled",!0),GT=Tc("primary",!1),CP=t=>Te("columns",t),Q4=Te("meta",{}),eO=Js("onAction",ee),Xp=t=>Qr("type",t),qT=t=>Ic("name","name",Kd(()=>Qt(`${t}-name`)),$t),A8=t=>Ic("value","value",Kd(()=>Qt(`${t}-value`)),Ti()),wP=An([_c,Eh]),O8=t=>xr("separatormenuitem",wP,t),mu=An([Xp("autocompleteitem"),G0,pm,Q4,Pb,Eh,Uu]),bm=t=>xr("Autocompleter.Separator",wP,t),SP=t=>xr("Autocompleter.Item",mu,t),$b=[pm,Lw,Uu,Eh,Bb,Qr("context","mode:design")],tO=An([_c,j0,J4].concat($b)),Fw=t=>xr("toolbarbutton",tO,t),KT=[G0].concat($b),Hw=An(KT.concat([_c,j0,J4])),Vw=t=>xr("ToggleButton",Hw,t),YT=[Js("predicate",no),qc("scope","node",["node","editor"]),qc("position","selection",["node","selection","line"])],xP=$b.concat([Xp("contextformbutton"),GT,j0,cs("original",xt)]),zw=KT.concat([Xp("contextformbutton"),GT,j0,cs("original",xt)]),D8=$b.concat([Xp("contextformbutton")]),R8=KT.concat([Xp("contextformtogglebutton")]),sf=Zr("type",{contextformbutton:xP,contextformtogglebutton:zw}),fu=An([Xp("contextform"),Js("initValue",W("")),X4,Yl("commands",sf),Ru("launch",Zr("type",{contextformbutton:D8,contextformtogglebutton:R8}))].concat(YT)),Uw=t=>xr("ContextForm",fu,t),Dd=An([Xp("contexttoolbar"),Sc("items")].concat(YT)),M8=t=>xr("ContextToolbar",Dd,t),or=[_c,Sc("src"),xc("alt"),Jd("classes",[],$t)],N8=An(or),Ib=[_c,Th,k8,Jd("classes",["tox-collection__item-label"],$t)],Ww=An(Ib),nO=$c(()=>Lm("type",{cardimage:N8,cardtext:Ww,cardcontainer:oO})),oO=An([_c,Qr("direction","horizontal"),Qr("align","left"),Qr("valign","middle"),Yl("items",nO)]),Jp=[pm,Eh,vP,J4,A8("menuitem"),Q4,Qr("context","mode:design")],P8=An([_c,X4,Yl("items",nO),Bb,eO].concat(Jp)),sO=t=>xr("cardmenuitem",P8,t),B8=An([_c,G0,Uu].concat(Jp)),TP=t=>xr("choicemenuitem",B8,t),rO=[_c,Sc("fancytype"),eO],cO=[Te("initData",{})].concat(rO),EP=[Xi("select"),w("initData",{},[Tc("allowCustomColors",!0),Qr("storageKey","default"),Rg("colors",Ti())])].concat(rO),XT=Zr("fancytype",{inserttable:cO,colorswatch:EP}),$8=t=>xr("fancymenuitem",XT,t),I8=An([_c,Bb,eO,Uu].concat(Jp)),L8=t=>xr("menuitem",I8,t),F8=An([_c,E8,Bb,Uu].concat(Jp)),H8=t=>xr("nestedmenuitem",F8,t),kP=An([_c,Uu,G0,Bb,j0].concat(Jp)),V8=t=>xr("togglemenuitem",kP,t),aO=(t,s,c)=>{const l=Ba(t.element,"."+c);if(l.length>0){const d=So(l,g=>{const h=g.dom.getBoundingClientRect().top,y=l[0].dom.getBoundingClientRect().top;return Math.abs(h-y)>s}).getOr(l.length);return A.some({numColumns:d,numRows:Math.ceil(l.length/d)})}else return A.none()},lO=(t,s)=>vt([oo(t,s)]),q0={namedEvents:lO,unnamedEvents:t=>lO(Qt("unnamed-events"),t)},Zw=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),Wu={item:t=>$n.config({disabled:t,disableClass:"tox-collection__item--state-disabled"}),button:t=>$n.config({disabled:t}),splitButton:t=>$n.config({disabled:t,disableClass:"tox-tbtn--disabled"}),toolbarButton:t=>$n.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},JT=(t,s)=>{const c=t.getApi(s);return l=>{l(c)}},Qp=(t,s)=>mr(c=>{JT(t,c)(d=>{const g=t.onSetup(d);ct(g)&&s.set(g)})}),e1=(t,s)=>nm(c=>JT(t,c)(s.get())),AP="silver.uistate",jw=(t,s)=>{const l=t.mainUi.outerContainer.element,d=[t.mainUi.mothership,...t.uiMotherships];s==="setDisabled"&&gt(d,g=>{g.broadcastOn([Jm()],{target:l})}),gt(d,g=>{g.broadcastOn([AP],s)})},OP=(t,s)=>{t.on("init SwitchMode",c=>{jw(s,c.type)}),t.on("NodeChange",c=>{t.ui.isEnabled()?jw(s,c.type):jw(s,"setDisabled")}),mN(t)&&t.mode.set("readonly")},pc=t=>mi.config({channels:{[AP]:{onReceive:(s,c)=>{if(c==="setDisabled"||c==="setEnabled"){$n.set(s,c==="setDisabled");return}const{contextType:l,shouldDisable:d}=t();l==="mode"&&!vo(["switchmode","init"],c)||$n.set(s,d)}}}}),vm=(t,s)=>Vm((c,l)=>{JT(t,c)(t.onAction),!t.triggersSubmenu&&s===hm.CLOSE_ON_EXECUTE&&(c.getSystem().isConnected()&&Eo(c,ua()),l.stop())}),U8={[Na()]:["disabling","alloy.base.behaviour","toggling","item-events"]},t1=Gc,Lb=(t,s,c,l)=>{const d=hn(ee);return{type:"item",dom:s.dom,components:t1(s.optComponents),data:t.data,eventOrder:U8,hasSubmenu:t.triggersSubmenu,itemBehaviours:vt([oo("item-events",[vm(t,c),Qp(t,d),e1(t,d)]),Wu.item(()=>!t.enabled||l.checkUiComponentContext(t.context).shouldDisable),pc(()=>l.checkUiComponentContext(t.context)),eo.config({})].concat(t.itemBehaviours))}},Fb=t=>({value:t.value,meta:{text:t.text.getOr(""),...t.meta}}),iO=t=>{const s=Ab.os.isMacOS()||Ab.os.isiOS(),d=s?{alt:"⌥",ctrl:"⌃",shift:"⇧",meta:"⌘",access:"⌃⌥"}:{meta:"Ctrl",access:"Shift+Alt"},g=t.split("+"),h=je(g,y=>{const S=y.toLowerCase().trim();return yo(d,S)?d[S]:y});return s?h.join(""):h.join("+")},QT=(t,s,c=[LT])=>zu(t,{tag:"div",classes:c},s),uO=t=>({dom:{tag:"div",classes:[V4]},components:[Nr(Od.translate(t))]}),dO=(t,s)=>({dom:{tag:"div",classes:s,innerHtml:t}}),W8=(t,s)=>({dom:{tag:"div",classes:[V4]},components:[{dom:{tag:t.tag,styles:t.styles},components:[Nr(Od.translate(s))]}]}),Z8=t=>({dom:{tag:"div",classes:[KN]},components:[Nr(iO(t))]}),DP=t=>QT("checkmark",t,[Mb]),j8=t=>QT("chevron-right",t,[z4]),G8=t=>QT("chevron-down",t,[z4]),q8=(t,s)=>{const c=t.direction==="vertical"?HT:YN,l=t.align==="left"?JN:XN;return{dom:{tag:"div",classes:[FT,c,l,(()=>{switch(t.valign){case"top":return QN;case"middle":return U4;case"bottom":return eP}})()]},components:s}},K8=(t,s,c)=>({dom:{tag:"img",classes:s,attributes:{src:t,alt:c.getOr("")}}}),RP=(t,s,c)=>{const l="custom",d="remove",g=t.value,h=t.iconContent.map(k=>Pw(k,s.icons,c)),y=t.ariaLabel.map(k=>({"aria-label":s.translate(k),"data-mce-name":k})).getOr({});return{dom:(()=>{const k=IT,O=h.getOr(""),N={tag:"div",attributes:y,classes:[k]};return g===l?{...N,tag:"button",classes:[...N.classes,"tox-swatches__picker-btn"],innerHtml:O}:g===d?{...N,classes:[...N.classes,"tox-swatch--remove"],innerHtml:O}:et(g)?{...N,attributes:{...N.attributes,"data-mce-color":g},styles:{"background-color":g},innerHtml:O}:N})(),optComponents:[]}},mO=t=>{const s=t.map(c=>({attributes:{id:Qt("menu-item"),"aria-label":Od.translate(c)}})).getOr({});return{tag:"div",classes:[Bw,Z0],...s}},MP=(t,s,c,l)=>{const d={tag:"div",classes:[LT]},g=V=>zu(V,d,s.icons,l),h=()=>A.some({dom:d}),y=c?t.iconContent.map(g).orThunk(h):A.none(),S=t.checkMark,k=A.from(t.meta).fold(()=>uO,V=>yo(V,"style")?dn(W8,V.style):uO),O=t.htmlContent.fold(()=>t.textContent.map(k),V=>A.some(dO(V,[V4])));return{dom:mO(t.ariaLabel),optComponents:[y,O,t.shortcutContent.map(Z8),S,t.caret]}},Gw=(t,s,c,l=A.none())=>t.presets==="color"?RP(t,s,l):MP(t,s,c,l),NP=(t,s,c)=>pt(t,"tooltipWorker").map(l=>[ec.config({lazySink:s.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:d=>({type:"submenu",item:d,overrides:{maxHeightFunction:jf}}),mode:"follow-highlight",onShow:(d,g)=>{l(h=>{ec.setComponents(d,[cC({element:ge.fromDom(h)})])})}})]).getOrThunk(()=>c.map(l=>[ec.config({...s.providers.tooltips.getConfig({tooltipText:l}),mode:"follow-highlight"})]).getOr([])),Y8=t=>Wp.DOM.encode(t),Hb=(t,s)=>{const c=Od.translate(t),l=Y8(c);if(s.length>0){const d=new RegExp(Zw(s),"gi");return l.replace(d,g=>`<span class="tox-autocompleter-highlight">${g}</span>`)}else return l},X8=(t,s,c,l,d,g,h,y=!0)=>{const S=Gw({presets:l,textContent:A.none(),htmlContent:c?t.text.map(O=>Hb(O,s)):A.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:A.none(),checkMark:A.none(),caret:A.none(),value:t.value},h.providers,y,t.icon),k=t.text.filter(O=>!c&&O!=="");return Lb({context:"mode:design",data:Fb(t),enabled:t.enabled,getApi:W({}),onAction:O=>d(t.value,t.meta),onSetup:W(ee),triggersSubmenu:!1,itemBehaviours:NP(t,h,k)},S,g,h.providers)},fO=(t,s)=>je(t,c=>{switch(c.type){case"cardcontainer":return q8(c,fO(c.items,s));case"cardimage":return K8(c.src,c.classes,c.alt);case"cardtext":const d=c.name.exists(g=>vo(s.cardText.highlightOn,g))?A.from(s.cardText.matchText).getOr(""):"";return dO(Hb(c.text,d),c.classes)}}),PP=(t,s,c,l)=>{const d=h=>({isEnabled:()=>!$n.isDisabled(h),setEnabled:y=>{$n.set(h,!y),gt(Ba(h.element,"*"),S=>{h.getSystem().getByDom(S).each(k=>{k.hasConfigured($n)&&$n.set(k,!y)})})}}),g={dom:mO(t.label),optComponents:[A.some({dom:{tag:"div",classes:[FT,YN]},components:fO(t.items,l)})]};return Lb({context:"mode:design",data:Fb({text:A.none(),...t}),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:A.from(l.itemBehaviours).getOr([])},g,s,c.providers)},BP=(t,s,c,l,d,g,h,y=!0)=>{const S=N=>({setActive:V=>{bo.set(N,V)},isActive:()=>bo.isOn(N),isEnabled:()=>!$n.isDisabled(N),setEnabled:V=>$n.set(N,!V)}),k=Gw({presets:c,textContent:s?t.text:A.none(),htmlContent:A.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:s?t.shortcut:A.none(),checkMark:s?A.some(DP(h.icons)):A.none(),caret:A.none(),value:t.value},h,y),O=t.text.filter(W(!s)).map(N=>ec.config(h.tooltips.getConfig({tooltipText:h.translate(N)})));return Hs(Lb({context:t.context,data:Fb(t),enabled:t.enabled,getApi:S,onAction:N=>l(t.value),onSetup:N=>(N.setActive(d),ee),triggersSubmenu:!1,itemBehaviours:[...O.toArray()]},k,g,h),{toggling:{toggleClass:H4,toggleOnExecute:!1,selected:t.active,exclusive:!0}})},gO=E0(fT(),gT()),eE=t=>({value:$P(t)}),tE=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,nE=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,hO=t=>tE.test(t)||nE.test(t),$P=t=>zl(t,"#").toUpperCase(),IP=t=>hO(t)?A.some({value:$P(t)}):A.none(),J8=t=>({value:t.value.replace(tE,(c,l,d,g)=>l+l+d+d+g+g)}),Q8=t=>{const s=J8(t),c=nE.exec(s.value);return c===null?["FFFFFF","FF","FF","FF"]:c},pO=t=>{const s=t.toString(16);return(s.length===1?"0"+s:s).toUpperCase()},K0=t=>{const s=pO(t.red)+pO(t.green)+pO(t.blue);return eE(s)},bO=Math.min,vO=Math.max,oE=Math.round,e7=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,t7=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,Vb=(t,s,c,l)=>({red:t,green:s,blue:c,alpha:l}),yO=t=>{const s=parseInt(t,10);return s.toString()===t&&s>=0&&s<=255},LP=t=>{let s,c,l;const d=(t.hue||0)%360;let g=t.saturation/100,h=t.value/100;if(g=vO(0,bO(g,1)),h=vO(0,bO(h,1)),g===0)return s=c=l=oE(255*h),Vb(s,c,l,1);const y=d/60,S=h*g,k=S*(1-Math.abs(y%2-1)),O=h-S;switch(Math.floor(y)){case 0:s=S,c=k,l=0;break;case 1:s=k,c=S,l=0;break;case 2:s=0,c=S,l=k;break;case 3:s=0,c=k,l=S;break;case 4:s=k,c=0,l=S;break;case 5:s=S,c=0,l=k;break;default:s=c=l=0}return s=oE(255*(s+O)),c=oE(255*(c+O)),l=oE(255*(l+O)),Vb(s,c,l,1)},qw=t=>{const s=Q8(t),c=parseInt(s[1],16),l=parseInt(s[2],16),d=parseInt(s[3],16);return Vb(c,l,d,1)},FP=(t,s,c,l)=>{const d=parseInt(t,10),g=parseInt(s,10),h=parseInt(c,10),y=parseFloat(l);return Vb(d,g,h,y)},CO=t=>{const s=e7.exec(t);if(s!==null)return A.some(FP(s[1],s[2],s[3],"1"));const c=t7.exec(t);return c!==null?A.some(FP(c[1],c[2],c[3],c[4])):A.none()},HP=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,VP=Vb(255,0,0,1),zP=t=>{t.dispatch("SkinLoaded")},n7=(t,s)=>{t.dispatch("SkinLoadError",s)},o7=t=>{t.dispatch("ResizeEditor")},wO=(t,s)=>{t.dispatch("ResizeContent",s)},s7=(t,s)=>{t.dispatch("ScrollContent",s)},UP=(t,s)=>{t.dispatch("TextColorChange",s)},sE=(t,s)=>{t.dispatch("AfterProgressState",{state:s})},WP=(t,s)=>t.dispatch("ResolveName",{name:s.nodeName.toLowerCase(),target:s}),r7=(t,s)=>{t.dispatch("ToggleToolbarDrawer",{state:s})},c7=(t,s)=>{t.dispatch("StylesTextUpdate",s)},a7=(t,s)=>{t.dispatch("AlignTextUpdate",s)},l7=(t,s)=>{t.dispatch("FontSizeTextUpdate",s)},i7=(t,s)=>{t.dispatch("FontSizeInputTextUpdate",s)},u7=(t,s)=>{t.dispatch("BlocksTextUpdate",s)},SO=(t,s)=>{t.dispatch("FontFamilyTextUpdate",s)},ZP=t=>{t.dispatch("ToggleSidebar")},jP=t=>{t.dispatch("ToggleView")},rE=(t,s)=>()=>{t(),s()},Il=t=>zb(t,"NodeChange",s=>{s.setEnabled(t.selection.isEditable())}),d7=(t,s)=>c=>{const l=Al(),d=()=>{c.setActive(t.formatter.match(s));const g=t.formatter.formatChanged(s,c.setActive);l.set(g)};return t.initialized?d():t.once("init",d),()=>{t.off("init",d),l.clear()}},cE=(t,s)=>c=>{const l=Il(t)(c),d=d7(t,s)(c);return()=>{l(),d()}},zb=(t,s,c)=>l=>{const d=()=>c(l),g=()=>{c(l),t.on(s,d)};return t.initialized?g():t.once("init",g),()=>{t.off("init",g),t.off(s,d)}},GP=t=>s=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("mceToggleFormat",!1,s.format)})},gu=(t,s)=>()=>t.execCommand(s);var Ub=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const qP={},m7=(t,s=10)=>{const c=Ub.getItem(t),l=Dt(c)?JSON.parse(c):[],g=(k=>s-k.length<0?k.slice(0,s):k)(l),h=k=>{Je(g,k).each(y),g.unshift(k),g.length>s&&g.pop(),Ub.setItem(t,JSON.stringify(g))},y=k=>{g.splice(k,1)};return{add:h,state:()=>g.slice(0)}},KP=t=>pt(qP,t).getOrThunk(()=>{const s=`tinymce-custom-colors-${t}`,c=Ub.getItem(s);if(ft(c)){const d=Ub.getItem("tinymce-custom-colors");Ub.setItem(s,et(d)?d:"[]")}const l=m7(s,10);return qP[t]=l,l}),f7=t=>je(KP(t).state(),s=>({type:"choiceitem",text:s,icon:"checkmark",value:s})),Kw=(t,s)=>{KP(t).add(s)},Wb=(t,s,c)=>({hue:t,saturation:s,value:c}),Yw=t=>{let s=0,c=0,l=0;const d=t.red/255,g=t.green/255,h=t.blue/255,y=Math.min(d,Math.min(g,h)),S=Math.max(d,Math.max(g,h));if(y===S)return l=y,Wb(0,0,l*100);const k=d===y?g-h:h===y?d-g:h-d;return s=d===y?3:h===y?1:5,s=60*(s-k/(S-y)),c=(S-y)/S,l=S,Wb(Math.round(s),Math.round(c*100),Math.round(l*100))},YP=t=>Yw(qw(t)),XP=t=>K0(LP(t)),g7=t=>IP(t).orThunk(()=>CO(t).map(K0)).getOrThunk(()=>{const s=document.createElement("canvas");s.height=1,s.width=1;const c=s.getContext("2d");c.clearRect(0,0,s.width,s.height),c.fillStyle="#FFFFFF",c.fillStyle=t,c.fillRect(0,0,1,1);const l=c.getImageData(0,0,1,1).data,d=l[0],g=l[1],h=l[2],y=l[3];return K0(Vb(d,g,h,y))}),Xw="forecolor",Jw="hilitecolor",aE=5,JP=t=>{const s=[];for(let c=0;c<t.length;c+=2)s.push({text:t[c+1],value:"#"+g7(t[c]).value,icon:"checkmark",type:"choiceitem"});return s},lg=t=>s=>s.options.get(t),xO="#000000",h7=t=>{const s=t.options.register,c=d=>Re(d,Dt)?{value:JP(d),valid:!0}:{valid:!1,message:"Must be an array of strings."},l=d=>Qn(d)&&d>0?{value:d,valid:!0}:{valid:!1,message:"Must be a positive number."};s("color_map",{processor:c,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),s("color_map_background",{processor:c}),s("color_map_foreground",{processor:c}),s("color_cols",{processor:l,default:TO(t)}),s("color_cols_foreground",{processor:l,default:QP(t,Xw)}),s("color_cols_background",{processor:l,default:QP(t,Jw)}),s("custom_colors",{processor:"boolean",default:!0}),s("color_default_foreground",{processor:"string",default:xO}),s("color_default_background",{processor:"string",default:xO})},lE=(t,s)=>s===Xw&&t.options.isSet("color_map_foreground")?lg("color_map_foreground")(t):s===Jw&&t.options.isSet("color_map_background")?lg("color_map_background")(t):lg("color_map")(t),TO=(t,s="default")=>Math.max(aE,Math.ceil(Math.sqrt(lE(t,s).length))),QP=(t,s)=>{const c=lg("color_cols")(t),l=TO(t,s);return c===TO(t)?l:c},eB=(t,s="default")=>Math.round(s===Xw?lg("color_cols_foreground")(t):s===Jw?lg("color_cols_background")(t):lg("color_cols")(t)),tB=lg("custom_colors"),p7=lg("color_default_foreground"),b7=lg("color_default_background"),v7="rgba(0, 0, 0, 0)",y7=t=>CO(t).exists(s=>s.alpha!==0),C7=t=>ia(t,s=>{if(xo(s)){const c=fs(s,"background-color");return yn(y7(c),c)}else return A.none()}).getOr(v7),EO=(t,s)=>{const c=ge.fromDom(t.selection.getStart()),l=s==="hilitecolor"?C7(c):fs(c,"color");return CO(l).map(d=>"#"+K0(d).value)},w7=(t,s,c)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.apply(s,{value:c}),t.nodeChanged()})},S7=(t,s)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.remove(s,{value:null},void 0,!0),t.nodeChanged()})},ig=t=>{t.addCommand("mceApplyTextcolor",(s,c)=>{w7(t,s,c)}),t.addCommand("mceRemoveTextcolor",s=>{S7(t,s)})},nB=t=>{const s="choiceitem",c={type:s,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return t?[c,{type:s,text:"Custom color",icon:"color-picker",value:"custom"}]:[c]},kO=(t,s,c,l)=>{c==="custom"?aB(t)(g=>{g.each(h=>{Kw(s,h),t.execCommand("mceApplyTextcolor",s,h),l(h)})},EO(t,s).getOr(xO)):c==="remove"?(l(""),t.execCommand("mceRemoveTextcolor",s)):(l(c),t.execCommand("mceApplyTextcolor",s,c))},Qw=(t,s,c)=>t.concat(f7(s).concat(nB(c))),ha=(t,s,c)=>l=>{l(Qw(t,s,c))},_O=(t,s,c)=>{const l=s==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";t.setIconFill(l,c)},oB=(t,s)=>{t.setTooltip(s)},sB=(t,s)=>c=>{const l=EO(t,s);return br(l,c.toUpperCase())},AO=(t,s,c)=>{if(re(c))return s==="forecolor"?"Text color":"Background color";const l=s==="forecolor"?"Text color {0}":"Background color {0}",d=Qw(lE(t,s),s,!1),g=Cn(d,h=>h.value===c).getOr({text:""}).text;return t.translate([l,t.translate(g)])},rB=(t,s,c,l)=>{t.ui.registry.addSplitButton(s,{tooltip:AO(t,c,l.get()),presets:"color",icon:s==="forecolor"?"text-color":"highlight-bg-color",select:sB(t,c),columns:eB(t,c),fetch:ha(lE(t,c),c,tB(t)),onAction:d=>{kO(t,c,l.get(),ee)},onItemAction:(d,g)=>{kO(t,c,g,h=>{l.set(h),UP(t,{name:s,color:h})})},onSetup:d=>{_O(d,s,l.get());const g=h=>{h.name===s&&(_O(d,h.name,h.color),oB(d,AO(t,c,h.color)))};return t.on("TextColorChange",g),rE(Il(t)(d),()=>{t.off("TextColorChange",g)})}})},cB=(t,s,c,l,d)=>{t.ui.registry.addNestedMenuItem(s,{text:l,icon:s==="forecolor"?"text-color":"highlight-bg-color",onSetup:g=>(oB(g,AO(t,c,d.get())),_O(g,s,d.get()),Il(t)(g)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:sB(t,c),initData:{storageKey:c},onAction:g=>{kO(t,c,g.value,h=>{d.set(h),UP(t,{name:s,color:h})})}}]})},aB=t=>(s,c)=>{let l=!1;const d=y=>{const k=y.getData().colorpicker;l?(s(A.from(k)),y.close()):t.windowManager.alert(t.translate(["Invalid hex color code: {0}",k]))},g=(y,S)=>{S.name==="hex-valid"&&(l=S.value)},h={colorpicker:c};t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:h,onAction:g,onSubmit:d,onClose:ee,onCancel:()=>{s(A.none())}})},x7=t=>{ig(t);const s=p7(t),c=b7(t),l=hn(s),d=hn(c);rB(t,"forecolor","forecolor",l),rB(t,"backcolor","hilitecolor",d),cB(t,"forecolor","forecolor","Text color",l),cB(t,"backcolor","hilitecolor","Background color",d)},OO=(t,s,c,l,d,g,h,y)=>{const S=jT(s),O=T7(s,c,l,d!=="color"?"normal":"color",g,h,y);return q4(t,S,O,l,{menuType:d})},T7=(t,s,c,l,d,g,h)=>Gc(je(t,y=>y.type==="choiceitem"?TP(y).fold(ag,S=>A.some(BP(S,c===1,l,s,g(S.value),d,h,jT(t)))):A.none())),iE=(t,s)=>{const c=Yp(s);return t===1?{mode:"menu",moveOnTab:!0}:t==="auto"?{mode:"grid",selector:"."+c.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+(s==="color"?"tox-swatches__row":"tox-collection__group"),previousSelector:d=>s==="color"?gr(d.element,"[aria-checked=true]"):A.none()}},E7=(t,s)=>t===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:t==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:s==="color"?".tox-swatches__row":".tox-collection__group",cell:s==="color"?`.${IT}`:`.${Z0}`}},k7=(t,s)=>{const c=_7(t,s),l=s.colorinput.getColorCols(t.initData.storageKey),d="color",h={...OO(Qt("menu-value"),c,y=>{t.onAction({value:y})},l,d,hm.CLOSE_ON_EXECUTE,t.select.getOr(no),s.shared.providers),markers:Yp(d),movement:iE(l,d),showMenuRole:!1};return{type:"widget",data:{value:Qt("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[gO.widget(Tb.sketch(h))]}},_7=(t,s)=>{const c=t.initData.allowCustomColors&&s.colorinput.hasCustomColors();return t.initData.colors.fold(()=>Qw(s.colorinput.getColors(t.initData.storageKey),t.initData.storageKey,c),l=>l.concat(nB(c)))},lB=Qt("cell-over"),iB=Qt("cell-execute"),A7=t=>(s,c)=>t.shared.providers.translate(["{0} columns, {1} rows",c,s]),O7=(t,s,c)=>{const l=h=>ln(h,lB,{row:t,col:s}),d=h=>ln(h,iB,{row:t,col:s}),g=(h,y)=>{y.stop(),d(h)};return Yc({dom:{tag:"div",attributes:{role:"button","aria-label":c}},behaviours:vt([oo("insert-table-picker-cell",[Ye(Dl(),Vn.focus),Ye(Na(),d),Ye(Pg(),g),Ye(bv(),g)]),bo.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),Vn.config({onFocus:l})])})},D7=(t,s,c)=>{const l=[];for(let d=0;d<s;d++){const g=[];for(let h=0;h<c;h++){const y=t(d+1,h+1);g.push(O7(d,h,y))}l.push(g)}return l},R7=(t,s,c,l,d)=>{for(let g=0;g<l;g++)for(let h=0;h<d;h++)bo.set(t[g][h],g<=s&&h<=c)},M7=t=>xe(t,s=>je(s,Oi)),uB=(t,s)=>Nr(`${s}x${t}`),N7={inserttable:(t,s)=>{const d=A7(s),g=D7(d,10,10),h=uB(0,0),y=us({dom:{tag:"span",classes:["tox-insert-table-picker__label"]},components:[h],behaviours:vt([eo.config({})])});return{type:"widget",data:{value:Qt("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[gO.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:M7(g).concat(y.asSpec()),behaviours:vt([oo("insert-table-picker",[mr(S=>{eo.set(y.get(S),[h])}),xv(lB,(S,k,O)=>{const{row:N,col:V}=O.event;R7(g,N,V,10,10),eo.set(y.get(S),[uB(N+1,V+1)])}),xv(iB,(S,k,O)=>{const{row:N,col:V}=O.event;Eo(S,ua()),t.onAction({numRows:N+1,numColumns:V+1})})]),En.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:k7},P7=(t,s)=>pt(N7,t.fancytype).map(c=>c(t,s)),dB=(t,s,c,l=!0,d=!1)=>{const g=d?G8(c.icons):j8(c.icons),h=S=>({isEnabled:()=>!$n.isDisabled(S),setEnabled:k=>$n.set(S,!k),setIconFill:(k,O)=>{gr(S.element,`svg path[class="${k}"], rect[class="${k}"]`).each(N=>{Ve(N,"fill",O)})},setTooltip:k=>{const O=c.translate(k);Ve(S.element,"aria-label",O)}}),y=Gw({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:A.none(),ariaLabel:t.text,caret:A.some(g),checkMark:A.none(),shortcutContent:t.shortcut},c,l);return Lb({context:t.context,data:Fb(t),getApi:h,enabled:t.enabled,onAction:ee,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},y,s,c)},B7=(t,s,c,l=!0)=>{const d=h=>({isEnabled:()=>!$n.isDisabled(h),setEnabled:y=>$n.set(h,!y)}),g=Gw({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:A.none(),ariaLabel:t.text,caret:A.none(),checkMark:A.none(),shortcutContent:t.shortcut},c,l);return Lb({context:t.context,data:Fb(t),getApi:d,enabled:t.enabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,c)},mB=t=>({type:"separator",dom:{tag:"div",classes:[Z0,p8]},components:t.text.map(Nr).toArray()}),$7=(t,s,c,l=!0)=>{const d=h=>({setActive:y=>{bo.set(h,y)},isActive:()=>bo.isOn(h),isEnabled:()=>!$n.isDisabled(h),setEnabled:y=>$n.set(h,!y)}),g=Gw({iconContent:t.icon,textContent:t.text,htmlContent:A.none(),ariaLabel:t.text,checkMark:A.some(DP(c.icons)),caret:A.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},c,l);return Hs(Lb({context:t.context,data:Fb(t),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,c),{toggling:{toggleClass:H4,toggleOnExecute:!1,selected:t.active},role:t.role.getOrUndefined()})},I7=X8,fB=mB,gB=B7,L7=dB,F7=$7,H7=P7,V7=PP;var hB=Object.freeze({__proto__:null,getCoupled:(t,s,c,l)=>c.getOrCreate(t,s,l),getExistingCoupled:(t,s,c,l)=>c.getExisting(t,s,l)}),U7=[as("others",Yi(ao.value,Ti()))],Z7=Object.freeze({__proto__:null,init:()=>{const t={},s=(g,h)=>{if(mn(g.others).length===0)throw new Error("Cannot find any known coupled components");return pt(t,h)},c=(g,h,y)=>s(h,y).getOrThunk(()=>{const k=pt(h.others,y).getOrDie("No information found for coupled component: "+y)(g),O=g.getSystem().build(k);return t[y]=O,O}),l=(g,h,y)=>s(h,y).orThunk(()=>(pt(h.others,y).getOrDie("No information found for coupled component: "+y),A.none())),d=W({});return hl({readState:d,getExisting:l,getOrCreate:c})}});const lc=da({fields:U7,name:"coupling",apis:hB,state:Z7}),DO=t=>{let s=A.none(),c=[];const l=k=>DO(O=>{d(N=>{O(k(N))})}),d=k=>{h()?S(k):c.push(k)},g=k=>{h()||(s=A.some(k),y(c),c=[])},h=()=>s.isSome(),y=k=>{gt(k,S)},S=k=>{s.each(O=>{setTimeout(()=>{k(O)},0)})};return t(g),{get:d,map:l,isReady:h}},j7={nu:DO,pure:t=>DO(s=>{s(t)})},G7=t=>{setTimeout(()=>{throw t},0)},Y0=t=>{const s=S=>{t().then(S,G7)};return{map:S=>Y0(()=>t().then(S)),bind:S=>Y0(()=>t().then(k=>S(k).toPromise())),anonBind:S=>Y0(()=>t().then(()=>S.toPromise())),toLazy:()=>j7.nu(s),toCached:()=>{let S=null;return Y0(()=>(S===null&&(S=t()),S))},toPromise:t,get:s}},Cl={nu:t=>Y0(()=>new Promise(t)),pure:t=>Y0(()=>Promise.resolve(t))},pB=W("sink"),bB=W(Pi({name:pB(),overrides:W({dom:{tag:"div"},behaviours:vt([Ia.config({useFixed:Mt})]),events:xs([Lg(Qi()),Lg(Mr()),Lg(Pg())])})})),vB=(t,s)=>{const c=t.getHotspot(s).getOr(s),l="hotspot",d=t.getAnchorOverrides();return t.layouts.fold(()=>({type:l,hotspot:c,overrides:d}),g=>({type:l,hotspot:c,overrides:d,layouts:g}))},yB=(t,s,c)=>{const l=t.fetch;return l(c).map(s)},q7=(t,s,c,l,d,g,h)=>{const y=yB(t,s,l),S=dE(l,t);return y.map(k=>k.bind(O=>{const N=O.menus[O.primary];return A.from(N).each(V=>{t.listRole.each(z=>{V.role=z})}),A.from(cg.sketch({...g.menu(),uid:V1(""),data:O,highlightOnOpen:h,onOpenMenu:(V,z)=>{const X=S().getOrDie();Ia.position(X,z,{anchor:c}),Uo.decloak(d)},onOpenSubmenu:(V,z,X)=>{const ne=S().getOrDie();Ia.position(ne,X,{anchor:{type:"submenu",item:z}}),Uo.decloak(d)},onRepositionMenu:(V,z,X)=>{const ne=S().getOrDie();Ia.position(ne,z,{anchor:c}),gt(X,Ce=>{Ia.position(ne,Ce.triggeredMenu,{anchor:{type:"submenu",item:Ce.triggeringItem}})})},onEscape:()=>(Vn.focus(l),Uo.close(d),A.some(!0))}))}))},uE=(t,s,c,l,d,g,h)=>{const y=vB(t,c);return q7(t,s,y,c,l,d,h).map(k=>(k.fold(()=>{Uo.isOpen(l)&&Uo.close(l)},O=>{Uo.cloak(l),Uo.open(l,O),g(l)}),l))},K7=(t,s,c,l,d,g,h)=>(Uo.close(l),Cl.pure(l)),RO=(t,s,c,l,d,g)=>{const h=lc.getCoupled(c,"sandbox");return(Uo.isOpen(h)?K7:uE)(t,s,c,h,l,d,g)},Y7=(t,s,c)=>{const l=$o.getCurrent(s).getOr(s),d=G(t.element);c?qe(l.element,"min-width",d+"px"):nd(l.element,d)},dE=(t,s)=>t.getSystem().getByUid(s.uid+"-"+pB()).map(c=>()=>ao.value(c)).getOrThunk(()=>s.lazySink.fold(()=>()=>ao.error(new Error("No internal sink is specified, nor could an external sink be found")),c=>()=>c(t))),CB=t=>{Uo.getState(t).each(s=>{cg.repositionMenus(s)})},MO=(t,s,c)=>{const l=j1(),d=(y,S)=>{const k=vB(t,s);l.link(s.element),t.matchWidth&&Y7(k.hotspot,S,t.useMinWidth),t.onOpen(k,y,S),c!==void 0&&c.onOpen!==void 0&&c.onOpen(y,S)},g=(y,S)=>{l.unlink(s.element),h().getOr(S).element.dom.dispatchEvent(new window.FocusEvent("focusout")),c!==void 0&&c.onClose!==void 0&&c.onClose(y,S)},h=dE(s,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:l.id}},behaviours:au.augment(t.sandboxBehaviours,[Ut.config({store:{mode:"memory",initialValue:s}}),Uo.config({onOpen:d,onClose:g,isPartOf:(y,S,k)=>zf(S,k)||zf(s,k),getAttachPoint:()=>h().getOrDie()}),$o.config({find:y=>Uo.getState(y).bind(S=>$o.getCurrent(S))}),mi.config({channels:{...fb({isExtraPart:no}),...gb({doReposition:CB})}})])}},wB=t=>{const s=lc.getCoupled(t,"sandbox");CB(s)},mE=()=>[Te("sandboxClasses",[]),au.field("sandboxBehaviours",[$o,mi,Uo,Ut])],SB=W([Ke("dom"),Ke("fetch"),Lo("onOpen"),tl("onExecute"),Te("getHotspot",A.some),Te("getAnchorOverrides",W({})),Gf(),fa("dropdownBehaviours",[bo,lc,En,Vn]),Ke("toggleClass"),Te("eventOrder",{}),Qo("lazySink"),Te("matchWidth",!1),Te("useMinWidth",!1),Qo("role"),Qo("listRole")].concat(mE())),X7=W([lu({schema:[cm(),Te("fakeFocus",!1)],name:"menu",defaults:t=>({onExecute:t.onExecute})}),bB()]),J7=(t,s,c,l)=>{const d=O=>pt(t.dom,"attributes").bind(N=>pt(N,O)),g=O=>{Uo.getState(O).each(N=>{cg.highlightPrimary(N)})},h=(O,N,V)=>RO(t,xt,O,l,N,V),y=O=>{h(O,g,vi.HighlightMenuAndItem).get(ee)},S={expand:O=>{bo.isOn(O)||h(O,ee,vi.HighlightNone).get(ee)},open:O=>{bo.isOn(O)||h(O,ee,vi.HighlightMenuAndItem).get(ee)},refetch:O=>lc.getExistingCoupled(O,"sandbox").fold(()=>h(O,ee,vi.HighlightMenuAndItem).map(ee),V=>uE(t,xt,O,V,l,ee,vi.HighlightMenuAndItem).map(ee)),isOpen:bo.isOn,close:O=>{bo.isOn(O)&&h(O,ee,vi.HighlightMenuAndItem).get(ee)},repositionMenus:O=>{bo.isOn(O)&&wB(O)}},k=(O,N)=>(Mf(O),A.some(!0));return{uid:t.uid,dom:t.dom,components:s,behaviours:ga(t.dropdownBehaviours,[bo.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),lc.config({others:{sandbox:O=>MO(t,O,{onOpen:()=>bo.on(O),onClose:()=>bo.off(O)})}}),En.config({mode:"special",onSpace:k,onEnter:k,onDown:(O,N)=>{if(hu.isOpen(O)){const V=lc.getCoupled(O,"sandbox");g(V)}else hu.open(O);return A.some(!0)},onEscape:(O,N)=>hu.isOpen(O)?(hu.close(O),A.some(!0)):A.none()}),Vn.config({})]),events:vw(A.some(y)),eventOrder:{...t.eventOrder,[Na()]:["disabling","toggling","alloy.base.behaviour"]},apis:S,domModification:{attributes:{"aria-haspopup":t.listRole.getOr("true"),...t.role.fold(()=>({}),O=>({role:O})),...t.dom.tag==="button"?{type:d("type").getOr("button")}:{}}}}},hu=ja({name:"Dropdown",configFields:SB(),partFields:X7(),factory:J7,apis:{open:(t,s)=>t.open(s),refetch:(t,s)=>t.refetch(s),expand:(t,s)=>t.expand(s),close:(t,s)=>t.close(s),isOpen:(t,s)=>t.isOpen(s),repositionMenus:(t,s)=>t.repositionMenus(s)}}),Q7=t=>{switch(t.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:t}}},eH=t=>{const s=Ut.getValue(t),c=zT(t).map(Iw);hu.refetch(s).get(()=>{const l=lc.getCoupled(s,"sandbox");c.each(d=>zT(l).each(g=>y8(g,d)))})},tH=(t,s)=>{nH(t).each(c=>{By(t,c.element,s.event.eventType,s.event.interactionEvent)})},nH=t=>Uo.getState(t).bind(_t.getHighlighted).bind(_t.getHighlighted),oH=t=>Nl(t.element,UT)?A.some(t.element):gr(t.element,"."+UT),xB=(t,s,c)=>{uP(t).each(l=>{C8(l,c),oH(s).each(g=>{Hn(g,"id").each(h=>Ve(l.element,"aria-controls",h))})}),Ve(c.element,"aria-selected","true")},fE=(t,s,c)=>{Ve(c.element,"aria-selected","false")},sH=t=>{uP(t).each(s=>Vn.focus(s))},gE=t=>lc.getExistingCoupled(t,"sandbox").bind(zT).map(Iw).map(c=>c.fetchPattern).getOr("");var hE;(function(t){t[t.ContentFocus=0]="ContentFocus",t[t.UiFocus=1]="UiFocus"})(hE||(hE={}));const rH=(t,s,c,l,d)=>{const g=c.shared.providers,h=y=>d?{...y,shortcut:A.none(),icon:y.text.isSome()?A.none():y.icon}:y;switch(t.type){case"menuitem":return L8(t).fold(ag,y=>A.some(gB(h(y),s,g,l)));case"nestedmenuitem":return H8(t).fold(ag,y=>A.some(L7(h(y),s,g,l,d)));case"togglemenuitem":return V8(t).fold(ag,y=>A.some(F7(h(y),s,g,l)));case"separator":return O8(t).fold(ag,y=>A.some(fB(y)));case"fancymenuitem":return $8(t).fold(ag,y=>H7(y,c));default:return console.error("Unknown item in general menu",t),A.none()}},cH=(t,s,c,l,d,g,h)=>{const y=l===1,S=!y||jT(t);return Gc(je(t,k=>{switch(k.type){case"separator":return bm(k).fold(ag,O=>A.some(fB(O)));case"cardmenuitem":return sO(k).fold(ag,O=>A.some(V7({...O,onAction:N=>{O.onAction(N),c(O.value,O.meta)}},d,g,{itemBehaviours:NP(O.meta,g,A.none()),cardText:{matchText:s,highlightOn:h}})));case"autocompleteitem":default:return SP(k).fold(ag,O=>A.some(I7(O,s,y,"normal",c,d,g,S)))}}))},TB=(t,s,c,l,d,g)=>{const h=jT(s),y=Gc(je(s,O=>{const N=z=>d?!yo(z,"text"):h,V=z=>rH(z,c,l,N(z),d);return O.type==="nestedmenuitem"&&O.getSubmenuItems().length<=0?V({...O,enabled:!1}):V(O)})),S=Q7(g);return(d?fP:q4)(t,h,y,1,S)},EB=t=>cg.singleData(t.value,t),pE=(t,s,c,l)=>{const d=iE(s,l),g=Yp(l);return{data:EB({...t,movement:d,menuBehaviours:q0.unnamedEvents(s!=="auto"?[]:[mr((h,y)=>{aO(h,4,g.item).each(({numColumns:S,numRows:k})=>{En.setGridSize(h,k,S)})})])}),menu:{markers:Yp(l),fakeFocus:c===hE.ContentFocus}}},X0=t=>o0.create(ge.fromDom(t.startContainer),t.startOffset,ge.fromDom(t.endContainer),t.endOffset),kB={register:(t,s)=>{const c=Qt("autocompleter"),l=hn(!1),d=hn(!1),g=Yo(),h=Yc(Fr.sketch({dom:{tag:"div",classes:["tox-autocompleter"],attributes:{id:c}},components:[],fireDismissalEventInstead:{},inlineBehaviours:vt([oo("dismissAutocompleter",[Ye(Ai(),()=>N()),Ye(Py(),(ae,ve)=>{Hn(ve.event.target,"id").each(ye=>Ve(ge.fromDom(t.getBody()),"aria-activedescendant",ye))})])]),lazySink:s.getSink})),y=()=>Fr.isOpen(h),S=d.get,k=()=>{if(y()){Fr.hide(h),t.dom.remove(c,!1);const ae=ge.fromDom(t.getBody());Hn(ae,"aria-owns").filter(ve=>ve===c).each(()=>{B(ae,"aria-owns"),B(ae,"aria-activedescendant")})}},O=()=>Fr.getContent(h).bind(ae=>qo(ae.components(),0)),N=()=>t.execCommand("mceAutocompleterClose"),V=ae=>{const ve=tn(ae,ye=>A.from(ye.columns)).getOr(1);return xe(ae,ye=>{const $e=ye.items;return cH($e,ye.matchText,(Le,kt)=>{const Kt={hide:()=>N(),reload:Ze=>{k(),t.execCommand("mceAutocompleterReload",!1,{fetchOptions:Ze})}};t.execCommand("mceAutocompleterRefreshActiveRange"),g.get().each(Ze=>{l.set(!0),ye.onAction(Kt,Ze,Le,kt),l.set(!1)})},ve,hm.BUBBLE_TO_SANDBOX,s,ye.highlightOn)})},z=(ae,ve)=>{const ye=tn(ae,$e=>A.from($e.columns)).getOr(1);Fr.showMenuAt(h,{anchor:{type:"selection",getSelection:()=>g.get().map(X0),root:ge.fromDom(t.getBody())}},pE(q4("autocompleter-value",!0,ve,ye,{menuType:"normal"}),ye,hE.ContentFocus,"normal")),O().each(_t.highlightFirst)},X=ae=>{const ve=V(ae);ve.length>0?(z(ae,ve),Ve(ge.fromDom(t.getBody()),"aria-owns",c),t.inline||ne()):k()},ne=()=>{t.dom.get(c)&&t.dom.remove(c,!1);const ae=t.getDoc().documentElement,ve=t.selection.getNode(),ye=I1(h.element);co(ye,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",top:`${ve.offsetTop}px`,left:`${ve.offsetLeft}px`}),t.dom.add(ae,ye.dom),gr(ye,'[role="menu"]').each($e=>{Gn($e,"position"),Gn($e,"max-height")})};t.on("AutocompleterStart",({lookupData:ae})=>{d.set(!0),l.set(!1),X(ae)}),t.on("AutocompleterUpdate",({lookupData:ae})=>X(ae)),t.on("AutocompleterUpdateActiveRange",({range:ae})=>g.set(ae)),t.on("AutocompleterEnd",()=>{k(),d.set(!1),l.set(!1),g.clear()});const Ce={cancelIfNecessary:N,isMenuOpen:y,isActive:S,isProcessingAction:l.get,getMenu:O};h8.setup(Ce,t)}},e2=(t,s,c)=>am(t,s,c).isSome(),_B=(t,s)=>{let c=null;return{cancel:()=>{c!==null&&(clearTimeout(c),c=null)},schedule:(...g)=>{c=setTimeout(()=>{t.apply(null,g),c=null},s)}}},AB=5,lH=400,OB=t=>{const s=t.raw;return s.touches===void 0||s.touches.length!==1?A.none():A.some(s.touches[0])},iH=(t,s)=>{const c=Math.abs(t.clientX-s.x),l=Math.abs(t.clientY-s.y);return c>AB||l>AB},uH=t=>{const s=Yo(),c=hn(!1),l=_B(k=>{t.triggerEvent(Df(),k),c.set(!0)},lH),d=k=>(OB(k).each(O=>{l.cancel();const N={x:O.clientX,y:O.clientY,target:k.target};l.schedule(k),c.set(!1),s.set(N)}),A.none()),g=k=>(l.cancel(),OB(k).each(O=>{s.on(N=>{iH(O,N)&&s.clear()})}),A.none()),h=k=>{l.cancel();const O=N=>Ko(N.target,k.target);return s.get().filter(O).map(N=>c.get()?(k.prevent(),!1):t.triggerEvent(bv(),k))},y=lo([{key:Ji(),value:d},{key:em(),value:g},{key:zo(),value:h}]);return{fireIfReady:(k,O)=>pt(y,O).bind(N=>N(k))}},dH=t=>t.raw.which===Un[0]&&!vo(["input","textarea"],Ur(t.target))&&!e2(t.target,'[contenteditable="true"]'),mH=(t,s)=>{const c={stopBackspace:!0,...s},l=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],d=uH(c),g=je(l.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),z=>Pl(t,z,X=>{d.fireIfReady(X,z).each(Ce=>{Ce&&X.kill()}),c.triggerEvent(z,X)&&X.kill()})),h=Yo(),y=Pl(t,"paste",z=>{d.fireIfReady(z,"paste").each(ne=>{ne&&z.kill()}),c.triggerEvent("paste",z)&&z.kill(),h.set(setTimeout(()=>{c.triggerEvent(O1(),z)},0))}),S=Pl(t,"keydown",z=>{c.triggerEvent("keydown",z)?z.kill():c.stopBackspace&&dH(z)&&z.prevent()}),k=Pl(t,"focusin",z=>{c.triggerEvent("focusin",z)&&z.kill()}),O=Yo(),N=Pl(t,"focusout",z=>{c.triggerEvent("focusout",z)&&z.kill(),O.set(setTimeout(()=>{c.triggerEvent(Bg(),z)},0))});return{unbind:()=>{gt(g,z=>{z.unbind()}),S.unbind(),k.unbind(),N.unbind(),y.unbind(),h.on(clearTimeout),O.on(clearTimeout)}}},DB=(t,s)=>{const c=pt(t,"target").getOr(s);return hn(c)},fH=(t,s)=>{const c=hn(!1),l=hn(!1);return{stop:()=>{c.set(!0)},cut:()=>{l.set(!0)},isStopped:c.get,isCut:l.get,event:t,setSource:s.set,getSource:s.get}},RB=t=>{const s=hn(!1);return{stop:()=>{s.set(!0)},cut:ee,isStopped:s.get,isCut:no,event:t,setSource:ue("Cannot set source of a broadcasted event"),getSource:ue("Cannot get source of a broadcasted event")}},ug=L.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),n1=(t,s,c,l,d,g)=>{const h=t(s,l),y=fH(c,d);return h.fold(()=>(g.logEventNoHandlers(s,l),ug.complete()),S=>{const k=S.descHandler;return Hf(k)(y),y.isStopped()?(g.logEventStopped(s,S.element,k.purpose),ug.stopped()):y.isCut()?(g.logEventCut(s,S.element,k.purpose),ug.complete()):yc(S.element).fold(()=>(g.logNoParent(s,S.element,k.purpose),ug.complete()),N=>(g.logEventResponse(s,S.element,k.purpose),ug.resume(N)))})},MB=(t,s,c,l,d,g)=>n1(t,s,c,l,d,g).fold(Mt,h=>MB(t,s,c,h,d,g),no),NB=(t,s,c,l,d)=>{const g=DB(c,l);return n1(t,s,c,l,g,d)},PB=(t,s,c)=>{const l=RB(s);return gt(t,d=>{const g=d.descHandler;Hf(g)(l)}),l.isStopped()},bE=(t,s,c,l)=>BB(t,s,c,c.target,l),BB=(t,s,c,l,d)=>{const g=DB(c,l);return MB(t,s,c,l,g,d)},t2=(t,s)=>({element:t,descHandler:s}),n2=(t,s)=>({id:t,descHandler:s}),gH=()=>{const t={},s=(h,y,S)=>{Ao(S,(k,O)=>{const N=t[O]!==void 0?t[O]:{};N[y]=hp(k,h),t[O]=N})},c=(h,y)=>fp(y).bind(S=>pt(h,S)).map(S=>t2(y,S));return{registerId:s,unregisterId:h=>{Ao(t,(y,S)=>{yo(y,h)&&delete y[h]})},filterByType:h=>pt(t,h).map(y=>ea(y,(S,k)=>n2(k,S))).getOr([]),find:(h,y,S)=>pt(t,y).bind(k=>ia(S,O=>c(k,O),h))}},hH=()=>{const t=gH(),s={},c=k=>{const O=k.element;return fp(O).getOrThunk(()=>Jy("uid-",k.element))},l=(k,O)=>{const N=s[O];if(N===k)g(k);else throw new Error('The tagId "'+O+'" is already used by: '+Lf(N.element)+`
Cannot use it for: `+Lf(k.element)+`
The conflicting element is`+(se(N.element)?" ":" not ")+"already in the DOM")},d=k=>{const O=c(k);Vr(s,O)&&l(k,O);const N=[k];t.registerId(N,O,k.events),s[O]=k},g=k=>{fp(k.element).each(O=>{delete s[O],t.unregisterId(O)})};return{find:(k,O,N)=>t.find(k,O,N),filter:k=>t.filterByType(k),register:d,unregister:g,getById:k=>pt(s,k)}},rf=pi({name:"Container",factory:t=>{const{attributes:s,...c}=t.dom;return{uid:t.uid,dom:{tag:"div",attributes:{role:"presentation",...s},...c},components:t.components,behaviours:y0(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[Te("components",[]),fa("containerBehaviours",[]),Te("events",{}),Te("domModification",{}),Te("eventOrder",{})]}),NO=t=>{const s=ae=>yc(t.element).fold(Mt,ve=>Ko(ae,ve)),c=hH(),l=(ae,ve)=>c.find(s,ae,ve),d=mH(t.element,{triggerEvent:(ae,ve)=>Xy(ae,ve.target,ye=>bE(l,ae,ve,ye))}),g={debugInfo:W("real"),triggerEvent:(ae,ve,ye)=>{Xy(ae,ve,$e=>BB(l,ae,ye,ve,$e))},triggerFocus:(ae,ve)=>{fp(ae).fold(()=>{su(ae)},ye=>{Xy(hd(),ae,$e=>(NB(l,hd(),{originator:ve,kill:ee,prevent:ee,target:ae},ae,$e),!1))})},triggerEscape:(ae,ve)=>{g.triggerEvent("keydown",ae.element,ve.event)},getByUid:ae=>ne(ae),getByDom:ae=>Ce(ae),build:Yc,buildOrPatch:aC,addToGui:ae=>{S(ae)},removeFromGui:ae=>{k(ae)},addToWorld:ae=>{h(ae)},removeFromWorld:ae=>{y(ae)},broadcast:ae=>{V(ae)},broadcastOn:(ae,ve)=>{z(ae,ve)},broadcastEvent:(ae,ve)=>{X(ae,ve)},isConnected:Mt},h=ae=>{ae.connect(g),Kr(ae.element)||(c.register(ae),gt(ae.components(),h),g.triggerEvent(yv(),ae.element,{target:ae.element}))},y=ae=>{Kr(ae.element)||(gt(ae.components(),y),c.unregister(ae)),ae.disconnect()},S=ae=>{Ym(t,ae)},k=ae=>{Xm(ae)},O=()=>{d.unbind(),Ka(t.element)},N=ae=>{const ve=c.filter(pd());gt(ve,ye=>{const $e=ye.descHandler;Hf($e)(ae)})},V=ae=>{N({universal:!0,data:ae})},z=(ae,ve)=>{N({universal:!1,channels:ae,data:ve})},X=(ae,ve)=>{const ye=c.filter(ae);return PB(ye,ve)},ne=ae=>c.getById(ae).fold(()=>ao.error(new Error('Could not find component with uid: "'+ae+'" in system.')),ao.value),Ce=ae=>{const ve=fp(ae).getOr("not found");return ne(ve)};return h(t),{root:t,element:t.element,destroy:O,add:S,remove:k,getByUid:ne,getByDom:Ce,addToWorld:h,removeFromWorld:y,broadcast:V,broadcastOn:z,broadcastEvent:X}},pH=(t,s)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:je(t.items,s.interpreter)}),vE=W([Te("prefix","form-field"),fa("fieldBehaviours",[$o,Ut])]),bH=W([Pi({schema:[Ke("dom")],name:"label"}),Pi({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[Ke("text")],name:"aria-descriptor"}),ol({factory:{sketch:t=>{const s=on(t,["factory"]);return t.factory.sketch(s)}},schema:[Ke("factory")],name:"field"})]),PO=(t,s,c,l)=>{const d=ga(t.fieldBehaviours,[$o.config({find:y=>Vs(y,t,"field")}),Ut.config({store:{mode:"manual",getValue:y=>$o.getCurrent(y).bind(Ut.getValue),setValue:(y,S)=>{$o.getCurrent(y).each(k=>{Ut.setValue(k,S)})}}})]),g=xs([mr((y,S)=>{const k=Ed(y,t,["label","field","aria-descriptor"]);k.field().each(O=>{const N=Qt(t.prefix);k.label().each(V=>{Ve(V.element,"for",N),Ve(O.element,"id",N)}),k["aria-descriptor"]().each(V=>{const z=Qt(t.prefix);Ve(V.element,"id",z),Ve(O.element,"aria-describedby",z)})})})]),h={getField:y=>Vs(y,t,"field"),getLabel:y=>Vs(y,t,"label")};return{uid:t.uid,dom:t.dom,components:s,behaviours:d,events:g,apis:h}},Cs=ja({name:"FormField",configFields:vE(),partFields:bH(),factory:PO,apis:{getField:(t,s)=>t.getField(s),getLabel:(t,s)=>t.getLabel(s)}});var vH=tinymce.util.Tools.resolve("tinymce.html.Entities");const o2=(t,s,c,l)=>{const d=yH(t,s,c,l);return Cs.sketch(d)},$B=(t,s)=>o2(t,s,[],[]),yH=(t,s,c,l)=>({dom:IB(c),components:t.toArray().concat([s]),fieldBehaviours:vt(l)}),CH=()=>IB([]),IB=t=>({tag:"div",classes:["tox-form__group"].concat(t)}),kh=(t,s)=>Cs.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Nr(s.translate(t))]}),$i=Qt("form-component-change"),s2=Qt("form-close"),o1=Qt("form-cancel"),dg=Qt("form-action"),r2=Qt("form-submit"),yE=Qt("form-block"),CE=Qt("form-unblock"),LB=Qt("form-tabchange"),FB=Qt("form-resize"),wH=(t,s,c)=>{const l=t.label.map(z=>kh(z,s)),d=s.icons(),g=z=>{var X;return(X=d[z])!==null&&X!==void 0?X:z},h=z=>(X,ne)=>{am(ne.event.target,"[data-collection-item-value]").each(Ce=>{z(X,ne,Ce,nn(Ce,"data-collection-item-value"))})},y=(z,X)=>{const Ce=s.checkUiComponentContext("mode:design").shouldDisable||s.isDisabled()?" tox-collection__item--state-disabled":"",ae=je(X,$e=>{const Le=Od.translate($e.text),kt=t.columns===1?`<div class="tox-collection__item-label">${Le}</div>`:"",Kt=`<div class="tox-collection__item-icon">${g($e.icon)}</div>`,Ze={_:" "," - ":" ","-":" "},Jt=Le.replace(/\_| \- |\-/g,Bt=>Ze[Bt]);return`<div data-mce-tooltip="${Jt}" class="tox-collection__item${Ce}" tabindex="-1" data-collection-item-value="${vH.encodeAllRaw($e.value)}" aria-label="${Jt}">${Kt}${kt}</div>`}),ve=t.columns!=="auto"&&t.columns>1?Us(ae,t.columns):[ae],ye=je(ve,$e=>`<div class="tox-collection__group">${$e.join("")}</div>`);ui(z.element,ye.join(""))},S=h((z,X,ne,Ce)=>{X.stop(),s.checkUiComponentContext("mode:design").shouldDisable||s.isDisabled()||ln(z,dg,{name:t.name,value:Ce})}),k=[Ye(Dl(),h((z,X,ne)=>{su(ne,!0)})),Ye(Pg(),S),Ye(bv(),S),Ye(Rl(),h((z,X,ne)=>{gr(z.element,"."+Nb).each(Ce=>{Ts(Ce,Nb)}),hc(ne,Nb)})),Ye(K2(),h(z=>{gr(z.element,"."+Nb).each(X=>{Ts(X,Nb),yp(X)})})),Vm(h((z,X,ne,Ce)=>{ln(z,dg,{name:t.name,value:Ce})}))],O=(z,X)=>je(Ba(z.element,".tox-collection__item"),X),N=Cs.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(t.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:xt},behaviours:vt([$n.config({disabled:()=>s.checkUiComponentContext(t.context).shouldDisable,onDisabled:z=>{O(z,X=>{hc(X,"tox-collection__item--state-disabled"),Ve(X,"aria-disabled",!0)})},onEnabled:z=>{O(z,X=>{Ts(X,"tox-collection__item--state-disabled"),B(X,"aria-disabled")})}}),pc(()=>s.checkUiComponentContext(t.context)),eo.config({}),ec.config({...s.tooltips.getConfig({tooltipText:"",onShow:z=>{gr(z.element,"."+Nb+"[data-mce-tooltip]").each(X=>{Hn(X,"data-mce-tooltip").each(ne=>{ec.setComponents(z,s.tooltips.getComponents({tooltipText:ne}))})})}}),mode:"children-keyboard-focus",anchor:z=>({type:"node",node:gr(z.element,"."+Nb).orThunk(()=>$S(".tox-collection__item")),root:z.element,layouts:{onLtr:W([Ec,ys,Hc,Pa,Vc,zc]),onRtl:W([Ec,ys,Hc,Pa,Vc,zc])},bubble:Fu(0,-2,{})})}),Ut.config({store:{mode:"memory",initialValue:c.getOr([])},onSetValue:(z,X)=>{y(z,X),t.columns==="auto"&&aO(z,5,"tox-collection__item").each(({numRows:ne,numColumns:Ce})=>{En.setGridSize(z,ne,Ce)}),Eo(z,FB)}}),hr.config({}),En.config(E7(t.columns,"normal")),oo("collection-events",k)]),eventOrder:{[Na()]:["disabling","alloy.base.behaviour","collection-events"],[Rl()]:["collection-events","tooltipping"]}});return o2(l,N,["tox-form__group--collection"],[])},SH=["input","textarea"],HB=t=>{const s=Ur(t);return vo(SH,s)},BO=(t,s)=>{const c=s.getRoot(t).getOr(t.element);Ts(c,s.invalidClass),s.notify.each(l=>{HB(t.element)&&Ve(t.element,"aria-invalid",!1),l.getContainer(t).each(d=>{ui(d,l.validHtml)}),l.onValid(t)})},Zb=(t,s,c,l)=>{const d=s.getRoot(t).getOr(t.element);hc(d,s.invalidClass),s.notify.each(g=>{HB(t.element)&&Ve(t.element,"aria-invalid",!0),g.getContainer(t).each(h=>{ui(h,l)}),g.onInvalid(t,l)})},VB=(t,s,c)=>s.validator.fold(()=>Cl.pure(ao.value(!0)),l=>l.validate(t)),$O=(t,s,c)=>(s.notify.each(l=>{l.onValidate(t)}),VB(t,s).map(l=>t.getSystem().isConnected()?l.fold(d=>(Zb(t,s,c,d),ao.error(d)),d=>(BO(t,s),ao.value(d))):ao.error("No longer in system")));var wE=Object.freeze({__proto__:null,markValid:BO,markInvalid:Zb,query:VB,run:$O,isInvalid:(t,s)=>{const c=s.getRoot(t).getOr(t.element);return Nl(c,s.invalidClass)}}),IO=Object.freeze({__proto__:null,events:(t,s)=>t.validator.map(c=>xs([Ye(c.onEvent,l=>{$O(l,t,s).get(xt)})].concat(c.validateOnLoad?[mr(l=>{$O(l,t,s).get(ee)})]:[]))).getOr({})}),zB=[Ke("invalidClass"),Te("getRoot",A.none),Lc("notify",[Te("aria","alert"),Te("getContainer",A.none),Te("validHtml",""),Lo("onValid"),Lo("onInvalid"),Lo("onValidate")]),Lc("validator",[Ke("validate"),Te("onEvent","input"),Te("validateOnLoad",!0)])];const mg=da({fields:zB,name:"invalidating",active:IO,apis:wE,extra:{validation:t=>s=>{const c=Ut.getValue(s);return Cl.pure(t(c))}}});var xH=Object.freeze({__proto__:null,events:()=>xs([$y(r_(),Mt)]),exhibit:()=>Ml({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})});const J0=da({fields:[],name:"unselecting",active:xH}),UB=(t,s)=>hu.sketch({dom:t.dom,components:t.components,toggleClass:"mce-active",dropdownBehaviours:vt([Wu.button(()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(t.context).shouldDisable),pc(()=>s.providers.checkUiComponentContext(t.context)),J0.config({}),hr.config({})]),layouts:t.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:s.getSink,fetch:c=>Cl.nu(l=>t.fetch(l)).map(l=>A.from(EB(Hs(OO(Qt("menu-value"),l,d=>{t.onItemAction(c,d)},t.columns,t.presets,hm.CLOSE_ON_EXECUTE,no,s.providers),{movement:iE(t.columns,t.presets)})))),parts:{menu:$w(!1,1,t.presets)}}),WB=Qt("color-input-change"),ZB=Qt("color-swatch-change"),LO=Qt("color-picker-cancel"),TH=(t,s,c,l)=>{const d=Cs.parts.field({factory:of,inputClasses:["tox-textfield"],data:l,onSetValue:k=>mg.run(k).get(ee),inputBehaviours:vt([$n.config({disabled:()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(t.context).shouldDisable}),pc(()=>s.providers.checkUiComponentContext(t.context)),hr.config({}),mg.config({invalidClass:"tox-textbox-field-invalid",getRoot:k=>na(k.element),notify:{onValid:k=>{const O=Ut.getValue(k);ln(k,WB,{color:O})}},validator:{validateOnLoad:!1,validate:k=>{const O=Ut.getValue(k);if(O.length===0)return Cl.pure(ao.value(!0));{const N=ge.fromTag("span");qe(N,"background-color",O);const V=bs(N,"background-color").fold(()=>ao.error("blah"),z=>ao.value(O));return Cl.pure(V)}}}})]),selectOnFocus:!1}),g=t.label.map(k=>kh(k,s.providers)),h=(k,O)=>{ln(k,ZB,{value:O})},y=(k,O)=>{S.getOpt(k).each(N=>{O==="custom"?c.colorPicker(V=>{V.fold(()=>Eo(N,LO),z=>{h(N,z),Kw(t.storageKey,z)})},"#ffffff"):O==="remove"?h(N,""):h(N,O)})},S=us(UB({dom:{tag:"span",attributes:{"aria-label":s.providers.translate("Color swatch")}},layouts:{onRtl:()=>[Vc,Hc,Ec],onLtr:()=>[Hc,Vc,Ec]},components:[],fetch:ha(c.getColors(t.storageKey),t.storageKey,c.hasCustomColors()),columns:c.getColorCols(t.storageKey),presets:"color",onItemAction:y,context:t.context},s));return Cs.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:g.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[d,S.asSpec()]}]),fieldBehaviours:vt([oo("form-field-events",[Ye(WB,(k,O)=>{S.getOpt(k).each(N=>{qe(N.element,"background-color",O.event.color)}),ln(k,$i,{name:t.name})}),Ye(ZB,(k,O)=>{Cs.getField(k).each(N=>{Ut.setValue(N,O.event.value),$o.getCurrent(k).each(Vn.focus)})}),Ye(LO,(k,O)=>{Cs.getField(k).each(N=>{$o.getCurrent(k).each(Vn.focus)})})])])})},jB=Pi({schema:[Ke("dom")],name:"label"}),_h=t=>Pi({name:""+t+"-edge",overrides:s=>s.model.manager.edgeActions[t].fold(()=>({}),l=>({events:xs([Qh(Ji(),(d,g,h)=>l(d,h),[s]),Qh(Mr(),(d,g,h)=>l(d,h),[s]),Qh(el(),(d,g,h)=>{h.mouseIsDown.get()&&l(d,h)},[s])])}))}),GB=_h("top-left"),EH=_h("top"),kH=_h("top-right"),_H=_h("right"),AH=_h("bottom-right"),OH=_h("bottom"),DH=_h("bottom-left"),FO=_h("left"),RH=ol({name:"thumb",defaults:W({dom:{styles:{position:"absolute"}}}),overrides:t=>({events:xs([Hm(Ji(),t,"spectrum"),Hm(em(),t,"spectrum"),Hm(zo(),t,"spectrum"),Hm(Mr(),t,"spectrum"),Hm(el(),t,"spectrum"),Hm(Yh(),t,"spectrum")])})}),SE=t=>Uc(t.event),qB=ol({schema:[cs("mouseIsDown",()=>hn(!1))],name:"spectrum",overrides:t=>{const c=t.model.manager,l=(d,g)=>c.getValueFromEvent(g).map(h=>c.setValueFrom(d,t,h));return{behaviours:vt([En.config({mode:"special",onLeft:(d,g)=>c.onLeft(d,t,SE(g)),onRight:(d,g)=>c.onRight(d,t,SE(g)),onUp:(d,g)=>c.onUp(d,t,SE(g)),onDown:(d,g)=>c.onDown(d,t,SE(g))}),hr.config({}),Vn.config({})]),events:xs([Ye(Ji(),l),Ye(em(),l),Ye(Mr(),l),Ye(el(),(d,g)=>{t.mouseIsDown.get()&&l(d,g)})])}}});var MH=[jB,FO,_H,EH,OH,GB,kH,DH,AH,RH,qB];const c2=W("slider.change.value"),NH=t=>t.type.indexOf("touch")!==-1,HO=t=>{const s=t.event.raw;if(NH(s)){const c=s;return c.touches!==void 0&&c.touches.length===1?A.some(c.touches[0]).map(l=>Ys(l.clientX,l.clientY)):A.none()}else{const c=s;return c.clientX!==void 0?A.some(c).map(l=>Ys(l.clientX,l.clientY)):A.none()}},PH="top",BH="right",KB="bottom",YB="left",jb=t=>t.model.minX,Gb=t=>t.model.minY,xE=t=>t.model.minX-1,TE=t=>t.model.minY-1,qb=t=>t.model.maxX,Kb=t=>t.model.maxY,a2=t=>t.model.maxX+1,l2=t=>t.model.maxY+1,VO=(t,s,c)=>s(t)-c(t),i2=t=>VO(t,qb,jb),zO=t=>VO(t,Kb,Gb),UO=t=>i2(t)/2,XB=t=>zO(t)/2,Q0=(t,s)=>s?t.stepSize*t.speedMultiplier:t.stepSize,JB=t=>t.snapToGrid,QB=t=>t.snapStart,EE=t=>t.rounded,Cm=(t,s)=>t[s+"-edge"]!==void 0,e$=t=>Cm(t,YB),ey=t=>Cm(t,BH),t$=t=>Cm(t,PH),kE=t=>Cm(t,KB),Ah=t=>t.model.value.get(),s1=(t,s)=>({x:t,y:s}),wm=(t,s)=>{ln(t,c2(),{value:s})},n$=(t,s)=>{wm(t,s1(xE(s),TE(s)))},$H=(t,s)=>{wm(t,TE(s))},WO=(t,s)=>{wm(t,s1(UO(s),TE(s)))},ZO=(t,s)=>{wm(t,s1(a2(s),TE(s)))},jO=(t,s)=>{wm(t,a2(s))},IH=(t,s)=>{wm(t,s1(a2(s),XB(s)))},Zu=(t,s)=>{wm(t,s1(a2(s),l2(s)))},LH=(t,s)=>{wm(t,l2(s))},FH=(t,s)=>{wm(t,s1(UO(s),l2(s)))},o$=(t,s)=>{wm(t,s1(xE(s),l2(s)))},s$=(t,s)=>{wm(t,xE(s))},HH=(t,s)=>{wm(t,s1(xE(s),XB(s)))},GO=(t,s,c,l)=>t<s?t:t>c?c:t===s?s-1:Math.max(s,t-l),qO=(t,s,c,l)=>t>c?t:t<s?s:t===c?c+1:Math.min(c,t+l),r$=(t,s,c)=>Math.max(s,Math.min(c,t)),VH=(t,s,c,l,d)=>d.fold(()=>{const g=t-s,h=Math.round(g/l)*l;return r$(s+h,s-1,c+1)},g=>{const h=(t-g)%l,y=Math.round(h/l),S=Math.floor((t-g)/l),k=Math.floor((c-g)/l),O=Math.min(k,S+y),N=g+O*l;return Math.max(g,N)}),zH=(t,s,c)=>Math.min(c,Math.max(t,s))-s,c$=t=>{const{min:s,max:c,range:l,value:d,step:g,snap:h,snapStart:y,rounded:S,hasMinEdge:k,hasMaxEdge:O,minBound:N,maxBound:V,screenRange:z}=t,X=k?s-1:s,ne=O?c+1:c;if(d<N)return X;if(d>V)return ne;{const Ce=zH(d,N,V),ae=r$(Ce/z*l+s,X,ne);return h&&ae>=s&&ae<=c?VH(ae,s,c,g,y):S?Math.round(ae):ae}},KO=t=>{const{min:s,max:c,range:l,value:d,hasMinEdge:g,hasMaxEdge:h,maxBound:y,maxOffset:S,centerMinEdge:k,centerMaxEdge:O}=t;return d<s?g?0:k:d>c?h?y:O:(d-s)/l*S},YO="top",a$="right",l$="bottom",_E="left",XO="width",i$="height",cf=t=>t.element.dom.getBoundingClientRect(),Rd=(t,s)=>t[s],u2=t=>{const s=cf(t);return Rd(s,_E)},AE=t=>{const s=cf(t);return Rd(s,a$)},OE=t=>{const s=cf(t);return Rd(s,YO)},DE=t=>{const s=cf(t);return Rd(s,l$)},Yb=t=>{const s=cf(t);return Rd(s,XO)},JO=t=>{const s=cf(t);return Rd(s,i$)},QO=(t,s,c)=>(t+s)/2-c,e3=(t,s)=>{const c=cf(t),l=cf(s),d=Rd(c,_E),g=Rd(c,a$),h=Rd(l,_E);return QO(d,g,h)},u$=(t,s)=>{const c=cf(t),l=cf(s),d=Rd(c,YO),g=Rd(c,l$),h=Rd(l,YO);return QO(d,g,h)},RE=(t,s)=>{ln(t,c2(),{value:s})},ty=(t,s,c)=>{const l={min:jb(s),max:qb(s),range:i2(s),value:c,step:Q0(s),snap:JB(s),snapStart:QB(s),rounded:EE(s),hasMinEdge:e$(s),hasMaxEdge:ey(s),minBound:u2(t),maxBound:AE(t),screenRange:Yb(t)};return c$(l)},UH=(t,s,c)=>{const l=ty(t,s,c);return RE(t,l),l},WH=(t,s)=>{const c=jb(s);RE(t,c)},d$=(t,s)=>{const c=qb(s);RE(t,c)},m$=(t,s,c,l)=>{const g=(t>0?qO:GO)(Ah(c),jb(c),qb(c),Q0(c,l));return RE(s,g),A.some(g)},ME=t=>(s,c,l)=>m$(t,s,c,l).map(Mt),f$=t=>HO(t).map(c=>c.left),yi=(t,s,c,l,d)=>{const h=Yb(t),y=l.bind(O=>A.some(e3(O,t))).getOr(0),S=d.bind(O=>A.some(e3(O,t))).getOr(h),k={min:jb(s),max:qb(s),range:i2(s),value:c,hasMinEdge:e$(s),hasMaxEdge:ey(s),minBound:u2(t),minOffset:0,maxBound:AE(t),maxOffset:h,centerMinEdge:y,centerMaxEdge:S};return KO(k)},NE=(t,s,c,l,d,g)=>{const h=yi(s,g,c,l,d);return u2(s)-u2(t)+h},ZH=(t,s,c,l)=>{const d=Ah(c),g=NE(t,l.getSpectrum(t),d,l.getLeftEdge(t),l.getRightEdge(t),c),h=G(s.element)/2;qe(s.element,"left",g-h+"px")},jH=ME(-1),g$=ME(1),GH=A.none,qH=A.none,KH={"top-left":A.none(),top:A.none(),"top-right":A.none(),right:A.some(jO),"bottom-right":A.none(),bottom:A.none(),"bottom-left":A.none(),left:A.some(s$)};var h$=Object.freeze({__proto__:null,setValueFrom:UH,setToMin:WH,setToMax:d$,findValueOfOffset:ty,getValueFromEvent:f$,findPositionOfValue:NE,setPositionFromValue:ZH,onLeft:jH,onRight:g$,onUp:GH,onDown:qH,edgeActions:KH});const Md=(t,s)=>{ln(t,c2(),{value:s})},d2=(t,s,c)=>{const l={min:Gb(s),max:Kb(s),range:zO(s),value:c,step:Q0(s),snap:JB(s),snapStart:QB(s),rounded:EE(s),hasMinEdge:t$(s),hasMaxEdge:kE(s),minBound:OE(t),maxBound:DE(t),screenRange:JO(t)};return c$(l)},p$=(t,s,c)=>{const l=d2(t,s,c);return Md(t,l),l},PE=(t,s)=>{const c=Gb(s);Md(t,c)},t3=(t,s)=>{const c=Kb(s);Md(t,c)},YH=(t,s,c,l)=>{const g=(t>0?qO:GO)(Ah(c),Gb(c),Kb(c),Q0(c,l));return Md(s,g),A.some(g)},b$=t=>(s,c,l)=>YH(t,s,c,l).map(Mt),XH=t=>HO(t).map(c=>c.top),JH=(t,s,c,l,d)=>{const h=JO(t),y=l.bind(O=>A.some(u$(O,t))).getOr(0),S=d.bind(O=>A.some(u$(O,t))).getOr(h),k={min:Gb(s),max:Kb(s),range:zO(s),value:c,hasMinEdge:t$(s),hasMaxEdge:kE(s),minBound:OE(t),minOffset:0,maxBound:DE(t),maxOffset:h,centerMinEdge:y,centerMaxEdge:S};return KO(k)},n3=(t,s,c,l,d,g)=>{const h=JH(s,g,c,l,d);return OE(s)-OE(t)+h},QH=(t,s,c,l)=>{const d=Ah(c),g=n3(t,l.getSpectrum(t),d,l.getTopEdge(t),l.getBottomEdge(t),c),h=vs(s.element)/2;qe(s.element,"top",g-h+"px")},eV=A.none,v$=A.none,tV=b$(-1),fg=b$(1),BE={"top-left":A.none(),top:A.some($H),"top-right":A.none(),right:A.none(),"bottom-right":A.none(),bottom:A.some(LH),"bottom-left":A.none(),left:A.none()};var nV=Object.freeze({__proto__:null,setValueFrom:p$,setToMin:PE,setToMax:t3,findValueOfOffset:d2,getValueFromEvent:XH,findPositionOfValue:n3,setPositionFromValue:QH,onLeft:eV,onRight:v$,onUp:tV,onDown:fg,edgeActions:BE});const $E=(t,s)=>{ln(t,c2(),{value:s})},m2=(t,s)=>({x:t,y:s}),y$=(t,s,c)=>{const l=ty(t,s,c.left),d=d2(t,s,c.top),g=m2(l,d);return $E(t,g),g},o3=(t,s,c,l,d)=>{const g=t>0?qO:GO,h=s?Ah(l).x:g(Ah(l).x,jb(l),qb(l),Q0(l,d)),y=s?g(Ah(l).y,Gb(l),Kb(l),Q0(l,d)):Ah(l).y;return $E(c,m2(h,y)),A.some(h)},Xb=(t,s)=>(c,l,d)=>o3(t,s,c,l,d).map(Mt),f2=(t,s)=>{const c=jb(s),l=Gb(s);$E(t,m2(c,l))},g2=(t,s)=>{const c=qb(s),l=Kb(s);$E(t,m2(c,l))},C$=t=>HO(t),w$=(t,s,c,l)=>{const d=Ah(c),g=NE(t,l.getSpectrum(t),d.x,l.getLeftEdge(t),l.getRightEdge(t),c),h=n3(t,l.getSpectrum(t),d.y,l.getTopEdge(t),l.getBottomEdge(t),c),y=G(s.element)/2,S=vs(s.element)/2;qe(s.element,"left",g-y+"px"),qe(s.element,"top",h-S+"px")},S$=Xb(-1,!1),x$=Xb(1,!1),oV=Xb(-1,!0),sV=Xb(1,!0),rV={"top-left":A.some(n$),top:A.some(WO),"top-right":A.some(ZO),right:A.some(IH),"bottom-right":A.some(Zu),bottom:A.some(FH),"bottom-left":A.some(o$),left:A.some(HH)};var cV=Object.freeze({__proto__:null,setValueFrom:y$,setToMin:f2,setToMax:g2,getValueFromEvent:C$,setPositionFromValue:w$,onLeft:S$,onRight:x$,onUp:oV,onDown:sV,edgeActions:rV});const aV=[Te("stepSize",1),Te("speedMultiplier",10),Te("onChange",ee),Te("onChoose",ee),Te("onInit",ee),Te("onDragStart",ee),Te("onDragEnd",ee),Te("snapToGrid",!1),Te("rounded",!0),Qo("snapStart"),as("model",Zr("mode",{x:[Te("minX",0),Te("maxX",100),cs("value",t=>hn(t.mode.minX)),Ke("getInitialValue"),Qs("manager",h$)],y:[Te("minY",0),Te("maxY",100),cs("value",t=>hn(t.mode.minY)),Ke("getInitialValue"),Qs("manager",nV)],xy:[Te("minX",0),Te("maxX",100),Te("minY",0),Te("maxY",100),cs("value",t=>hn({x:t.mode.minX,y:t.mode.minY})),Ke("getInitialValue"),Qs("manager",cV)]})),fa("sliderBehaviours",[En,Ut]),cs("mouseIsDown",()=>hn(!1))],Nd=ja({name:"Slider",configFields:aV,partFields:MH,factory:(t,s,c,l)=>{const d=Le=>Wt(Le,t,"thumb"),g=Le=>Wt(Le,t,"spectrum"),h=Le=>Vs(Le,t,"left-edge"),y=Le=>Vs(Le,t,"right-edge"),S=Le=>Vs(Le,t,"top-edge"),k=Le=>Vs(Le,t,"bottom-edge"),O=t.model,N=O.manager,V=(Le,kt)=>{N.setPositionFromValue(Le,kt,t,{getLeftEdge:h,getRightEdge:y,getTopEdge:S,getBottomEdge:k,getSpectrum:g})},z=(Le,kt)=>{O.value.set(kt);const Kt=d(Le);V(Le,Kt)},X=(Le,kt)=>{z(Le,kt);const Kt=d(Le);return t.onChange(Le,Kt,kt),A.some(!0)},ne=Le=>{N.setToMin(Le,t)},Ce=Le=>{N.setToMax(Le,t)},ae=Le=>{const kt=()=>{Vs(Le,t,"thumb").each(Ze=>{const Jt=O.value.get();t.onChoose(Le,Ze,Jt)})},Kt=t.mouseIsDown.get();t.mouseIsDown.set(!1),Kt&&kt()},ve=(Le,kt)=>{kt.stop(),t.mouseIsDown.set(!0),t.onDragStart(Le,d(Le))},ye=(Le,kt)=>{kt.stop(),t.onDragEnd(Le,d(Le)),ae(Le)},$e=Le=>{Vs(Le,t,"spectrum").map(En.focusIn)};return{uid:t.uid,dom:t.dom,components:s,behaviours:ga(t.sliderBehaviours,[En.config({mode:"special",focusIn:$e}),Ut.config({store:{mode:"manual",getValue:Le=>O.value.get(),setValue:z}}),mi.config({channels:{[h0()]:{onReceive:ae}}})]),events:xs([Ye(c2(),(Le,kt)=>{X(Le,kt.event.value)}),mr((Le,kt)=>{const Kt=O.getInitialValue();O.value.set(Kt);const Ze=d(Le);V(Le,Ze);const Jt=g(Le);t.onInit(Le,Ze,Jt,O.value.get())}),Ye(Ji(),ve),Ye(zo(),ye),Ye(Mr(),(Le,kt)=>{$e(Le),ve(Le,kt)}),Ye(Yh(),ye)]),apis:{resetToMin:ne,resetToMax:Ce,setValue:z,refresh:V},domModification:{styles:{position:"relative"}}}},apis:{setValue:(t,s,c)=>{t.setValue(s,c)},resetToMin:(t,s)=>{t.resetToMin(s)},resetToMax:(t,s)=>{t.resetToMax(s)},refresh:(t,s)=>{t.refresh(s)}}}),s3=Qt("rgb-hex-update"),r3=Qt("slider-update"),T$=Qt("palette-update"),E$=(t,s)=>{const c=Nd.parts.spectrum({dom:{tag:"div",classes:[s("hue-slider-spectrum")],attributes:{role:"presentation"}}}),l=Nd.parts.thumb({dom:{tag:"div",classes:[s("hue-slider-thumb")],attributes:{role:"presentation"}}});return Nd.sketch({dom:{tag:"div",classes:[s("hue-slider")],attributes:{role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":120}},rounded:!1,model:{mode:"y",getInitialValue:W(0)},components:[c,l],sliderBehaviours:vt([Vn.config({})]),onChange:(d,g,h)=>{Ve(d.element,"aria-valuenow",Math.floor(360-h*3.6)),ln(d,r3,{value:h})}})},ny="form",iV=[fa("formBehaviours",[Ut])],c3=t=>"<alloy.field."+t+">",uV=t=>{const s=(()=>{const g=[];return{field:(y,S)=>(g.push(y),k0(ny,c3(y),S)),record:W(g)}})(),c=t(s),l=s.record(),d=je(l,g=>ol({name:g,pname:c3(g)}));return yb(ny,iV,d,mV,c)},dV=(t,s)=>t.fold(()=>ao.error(s),ao.value),mV=(t,s)=>({uid:t.uid,dom:t.dom,components:s,behaviours:ga(t.formBehaviours,[Ut.config({store:{mode:"manual",getValue:c=>{const l=qx(c,t);return jn(l,(d,g)=>d().bind(h=>{const y=$o.getCurrent(h);return dV(y,new Error(`Cannot find a current component to extract the value from for form part '${g}': `+Lf(h.element)))}).map(Ut.getValue))},setValue:(c,l)=>{Ao(l,(d,g)=>{Vs(c,t,g).each(h=>{$o.getCurrent(h).each(y=>{Ut.setValue(y,d)})})})}}})]),apis:{getField:(c,l)=>Vs(c,t,l).bind($o.getCurrent)}}),oy={getField:Lv((t,s,c)=>t.getField(s,c)),sketch:uV},a3=Qt("valid-input"),k$=Qt("invalid-input"),l3=Qt("validating-input"),h2="colorcustom.rgb.",Oh={isEnabled:Mt,setEnabled:ee,immediatelyShow:ee,immediatelyHide:ee},i3=(t,s,c,l,d,g)=>{const h=(ne,Ce)=>{const ae=Ce.get();ne!==ae.isEnabled()&&(ae.setEnabled(ne),ne?ae.immediatelyShow():ae.immediatelyHide())},y=(ne,Ce,ae)=>mg.config({invalidClass:s("invalid"),notify:{onValidate:ve=>{ln(ve,l3,{type:ne})},onValid:ve=>{h(!1,ae),ln(ve,a3,{type:ne,value:Ut.getValue(ve)})},onInvalid:ve=>{h(!0,ae),ln(ve,k$,{type:ne,value:Ut.getValue(ve)})}},validator:{validate:ve=>{const ye=Ut.getValue(ve),$e=Ce(ye)?ao.value(!0):ao.error(t("aria.input.invalid"));return Cl.pure($e)},validateOnLoad:!1}}),S=(ne,Ce,ae,ve,ye)=>{const $e=hn(Oh),Le=t(h2+"range"),kt=Cs.parts.label({dom:{tag:"label",attributes:{"aria-label":ve}},components:[Nr(ae)]}),Kt=Cs.parts.field({data:ye,factory:of,inputAttributes:{type:"text",...Ce==="hex"?{"aria-live":"polite"}:{}},inputClasses:[s("textfield")],inputBehaviours:vt([y(Ce,ne,$e),hr.config({}),ec.config({...d({tooltipText:"",onSetup:is=>{$e.set({isEnabled:()=>ec.isEnabled(is),setEnabled:an=>ec.setEnabled(is,an),immediatelyShow:()=>ec.immediateOpenClose(is,!0),immediatelyHide:()=>ec.immediateOpenClose(is,!1)}),ec.setEnabled(is,!1)},onShow:(is,an)=>{ec.setComponents(is,[{dom:{tag:"p",classes:[s("rgb-warning-note")]},components:[Nr(t(Ce==="hex"?"colorcustom.rgb.invalidHex":"colorcustom.rgb.invalid"))]}])}})})]),onSetValue:is=>{mg.isInvalid(is)&&mg.run(is).get(ee)}}),Ze=Qt("aria-invalid"),Jt=us(g("invalid",A.some(Ze),"warning")),Bt=us({dom:{tag:"div",classes:[s("invalid-icon")]},components:[Jt.asSpec()]}),sn=[kt,Kt,Bt.asSpec()],Do=Ce!=="hex"?[Cs.parts["aria-descriptor"]({text:Le})]:[],rr=sn.concat(Do);return{dom:{tag:"div",attributes:{role:"presentation"},classes:[s("rgb-container")]},components:rr}},k=(ne,Ce)=>{const ae=K0(Ce);return oy.getField(ne,"hex").each(ve=>{Vn.isFocused(ve)||Ut.setValue(ne,{hex:ae.value})}),ae},O=(ne,Ce)=>{const ae=Ce.red,ve=Ce.green,ye=Ce.blue;Ut.setValue(ne,{red:ae,green:ve,blue:ye})},N=us({dom:{tag:"div",classes:[s("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),V=(ne,Ce)=>{N.getOpt(ne).each(ae=>{qe(ae.element,"background-color","#"+Ce.value)})};return pi({factory:()=>{const ne={red:hn(A.some(255)),green:hn(A.some(255)),blue:hn(A.some(255)),hex:hn(A.some("ffffff"))},Ce=(an,ut)=>{const Nt=qw(ut);O(an,Nt),$e(Nt)},ae=an=>ne[an].get(),ve=(an,ut)=>{ne[an].set(ut)},ye=()=>ae("red").bind(an=>ae("green").bind(ut=>ae("blue").map(Nt=>Vb(an,ut,Nt,1)))),$e=an=>{const ut=an.red,Nt=an.green,Wn=an.blue;ve("red",A.some(ut)),ve("green",A.some(Nt)),ve("blue",A.some(Wn))},Le=(an,ut)=>{const Nt=ut.event;Nt.type!=="hex"?ve(Nt.type,A.none()):l(an)},kt=(an,ut)=>{c(an);const Nt=eE(ut);ve("hex",A.some(Nt.value));const Wn=qw(Nt);O(an,Wn),$e(Wn),ln(an,s3,{hex:Nt}),V(an,Nt)},Kt=(an,ut,Nt)=>{const Wn=parseInt(Nt,10);ve(ut,A.some(Wn)),ye().each(go=>{const Tn=k(an,go);ln(an,s3,{hex:Tn}),V(an,Tn)})},Ze=an=>an.type==="hex",Jt=(an,ut)=>{const Nt=ut.event;Ze(Nt)?kt(an,Nt.value):Kt(an,Nt.type,Nt.value)},Bt=an=>({label:t(h2+an+".label"),description:t(h2+an+".description")}),sn=Bt("red"),Do=Bt("green"),rr=Bt("blue"),is=Bt("hex");return Hs(oy.sketch(an=>({dom:{tag:"form",classes:[s("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[an.field("red",Cs.sketch(S(yO,"red",sn.label,sn.description,255))),an.field("green",Cs.sketch(S(yO,"green",Do.label,Do.description,255))),an.field("blue",Cs.sketch(S(yO,"blue",rr.label,rr.description,255))),an.field("hex",Cs.sketch(S(hO,"hex",is.label,is.description,"ffffff"))),N.asSpec()],formBehaviours:vt([mg.config({invalidClass:s("form-invalid")}),oo("rgb-form-events",[Ye(a3,Jt),Ye(k$,Le),Ye(l3,Le)])])})),{apis:{updateHex:(an,ut)=>{Ut.setValue(an,{hex:ut.value}),Ce(an,ut),V(an,ut)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(ne,Ce,ae)=>{ne.updateHex(Ce,ae)}},extraApis:{}})},_$=(t,s)=>{const c=Nd.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[s("sv-palette-spectrum")]}}),l=Nd.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette-thumb")],innerHtml:`<div class=${s("sv-palette-inner-thumb")} role="presentation"></div>`}}),d=(k,O)=>{const{width:N,height:V}=k,z=k.getContext("2d");if(z===null)return;z.fillStyle=O,z.fillRect(0,0,N,V);const X=z.createLinearGradient(0,0,N,0);X.addColorStop(0,"rgba(255,255,255,1)"),X.addColorStop(1,"rgba(255,255,255,0)"),z.fillStyle=X,z.fillRect(0,0,N,V);const ne=z.createLinearGradient(0,0,0,V);ne.addColorStop(0,"rgba(0,0,0,0)"),ne.addColorStop(1,"rgba(0,0,0,1)"),z.fillStyle=ne,z.fillRect(0,0,N,V)},g=(k,O)=>{const N=k.components()[0].element.dom,V=Wb(O,100,100),z=LP(V);d(N,HP(z))},h=(k,O)=>{const N=Yw(qw(O));Nd.setValue(k,{x:N.saturation,y:100-N.value}),Ve(k.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",N.saturation,N.value]))};return pi({factory:k=>{const O=W({x:0,y:0}),N=(X,ne,Ce)=>{Qn(Ce)||Ve(X.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",Math.floor(Ce.x),Math.floor(100-Ce.y)])),ln(X,T$,{value:Ce})},V=(X,ne,Ce,ae)=>{d(Ce.element.dom,HP(VP))},z=vt([$o.config({find:A.some}),Vn.config({})]);return Nd.sketch({dom:{tag:"div",attributes:{role:"slider","aria-valuetext":t(["Saturation {0}%, Brightness {1}%",0,0])},classes:[s("sv-palette")]},model:{mode:"xy",getInitialValue:O},rounded:!1,components:[c,l],onChange:N,onInit:V,sliderBehaviours:z})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(k,O,N)=>{g(O,N)},setThumb:(k,O,N)=>{h(O,N)}},extraApis:{}})},A$=(t,s,c,l)=>{const d=h=>{const y=i3(t,s,h.onValidHex,h.onInvalidHex,c,l),S=_$(t,s),k=Ze=>(100-Ze)/100*360,O=Ze=>100-Ze/360*100,N={paletteRgba:hn(VP),paletteHue:hn(0)},V=us(E$(t,s)),z=us(S.sketch({})),X=us(y.sketch({})),ne=(Ze,Jt,Bt)=>{z.getOpt(Ze).each(sn=>{S.setHue(sn,Bt)})},Ce=(Ze,Jt)=>{X.getOpt(Ze).each(Bt=>{y.updateHex(Bt,Jt)})},ae=(Ze,Jt,Bt)=>{V.getOpt(Ze).each(sn=>{Nd.setValue(sn,O(Bt))})},ve=(Ze,Jt)=>{z.getOpt(Ze).each(Bt=>{S.setThumb(Bt,Jt)})},ye=(Ze,Jt)=>{const Bt=qw(Ze);N.paletteRgba.set(Bt),N.paletteHue.set(Jt)},$e=(Ze,Jt,Bt,sn)=>{ye(Jt,Bt),gt(sn,Do=>{Do(Ze,Jt,Bt)})},Le=()=>{const Ze=[Ce];return(Jt,Bt)=>{const sn=Bt.event.value,Do=N.paletteHue.get(),rr=Wb(Do,sn.x,100-sn.y),is=XP(rr);$e(Jt,is,Do,Ze)}},kt=()=>{const Ze=[ne,Ce];return(Jt,Bt)=>{const sn=k(Bt.event.value),Do=N.paletteRgba.get(),rr=Yw(Do),is=Wb(sn,rr.saturation,rr.value),an=XP(is);$e(Jt,an,sn,Ze)}},Kt=()=>{const Ze=[ne,ae,ve];return(Jt,Bt)=>{const sn=Bt.event.hex,Do=YP(sn);$e(Jt,sn,Do.hue,Ze)}};return{uid:h.uid,dom:h.dom,components:[z.asSpec(),V.asSpec(),X.asSpec()],behaviours:vt([oo("colour-picker-events",[Ye(s3,Kt()),Ye(T$,Le()),Ye(r3,kt())]),$o.config({find:Ze=>X.getOpt(Ze)}),En.config({mode:"acyclic"})])}};return pi({name:"ColourPicker",configFields:[Ke("dom"),Te("onValidHex",ee),Te("onInvalidHex",ee)],factory:d})},Pd={self:()=>$o.config({find:A.some}),memento:t=>$o.config({find:t.getOpt}),childAt:t=>$o.config({find:s=>Yr(s.element,t).bind(c=>s.getSystem().getByDom(c).toOptional())})},D$=An([Te("preprocess",xt),Te("postprocess",xt)]),gV=(t,s)=>{const c=Qa("RepresentingConfigs.memento processors",D$,s);return Ut.config({store:{mode:"manual",getValue:l=>{const d=t.get(l),g=Ut.getValue(d);return c.postprocess(g)},setValue:(l,d)=>{const g=c.preprocess(d),h=t.get(l);Ut.setValue(h,g)}}})},Jb=(t,s,c)=>Ut.config({store:{mode:"manual",...t.map(l=>({initialValue:l})).getOr({}),getValue:s,setValue:c}}),R$=(t,s,c)=>Jb(t,l=>s(l.element),(l,d)=>c(l.element,d)),hV=t=>R$(t,Wm,ui),IE=t=>Ut.config({store:{mode:"memory",initialValue:t}}),M$={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.rgb.invalid":"Numbers only, 0 to 255","colorcustom.rgb.invalidHex":"Hexadecimal only, 000000 to FFFFFF","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},N$=t=>s=>Dt(s)?t.translate(M$[s]):t.translate(s),pV=(t,s,c)=>{const l=k=>"tox-"+k,d=(k,O,N=k,V=k)=>zu(N,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+k],attributes:{title:s.translate(V),"aria-live":"polite",...O.fold(()=>({}),z=>({id:z}))}},s.icons),g=A$(N$(s),l,s.tooltips.getConfig,d),h=k=>{ln(k,dg,{name:"hex-valid",value:!0})},y=k=>{ln(k,dg,{name:"hex-valid",value:!1})},S=us(g.sketch({dom:{tag:"div",classes:[l("color-picker-container")],attributes:{role:"presentation"}},onValidHex:h,onInvalidHex:y}));return{dom:{tag:"div"},components:[S.asSpec()],behaviours:vt([Jb(c,k=>{const O=S.get(k);return $o.getCurrent(O).bind(z=>Ut.getValue(z).hex).map(z=>"#"+zl(z,"#")).getOr("")},(k,O)=>{const N=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,V=A.from(N.exec(O)).bind(ne=>qo(ne,1)),z=S.get(k);$o.getCurrent(z).fold(()=>{console.log("Can not find form")},ne=>{Ut.setValue(ne,{hex:V.getOr("")}),oy.getField(ne,"hex").each(Ce=>{Eo(Ce,gd())})})}),Pd.self()])}};var bV=tinymce.util.Tools.resolve("tinymce.Resource");const P$=t=>yo(t,"init"),LE=t=>{const s=Yo(),c=us({dom:{tag:t.tag}}),l=Yo(),d=!P$(t)&&t.onFocus.isSome()?[Vn.config({onFocus:g=>{t.onFocus.each(h=>{h(g.element.dom)})}}),hr.config({})]:[];return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:vt([oo("custom-editor-events",[mr(g=>{c.getOpt(g).each(h=>{(P$(t)?t.init(h.element.dom):bV.load(t.scriptId,t.scriptUrl).then(y=>y(h.element.dom,t.settings))).then(y=>{l.on(S=>{y.setValue(S)}),l.clear(),s.set(y)})})})]),Jb(A.none(),()=>s.get().fold(()=>l.get().getOr(""),g=>g.getValue()),(g,h)=>{s.get().fold(()=>l.set(h),y=>y.setValue(h))}),Pd.self()].concat(d)),components:[c.asSpec()]}};var Dh=tinymce.util.Tools.resolve("tinymce.util.Tools");const d3=Qt("browse.files.event"),B$=(t,s)=>{const c=Dh.explode(s.getOption("images_file_types")),l=d=>Ms(c,g=>mc(d.name.toLowerCase(),`.${g.toLowerCase()}`));return uo(lt(t),l)},$$=(t,s,c)=>{const l=(V,z)=>{z.stop()},d=V=>(z,X)=>{gt(V,ne=>{ne(z,X)})},g=(V,z)=>{var X;if(!$n.isDisabled(V)){const ne=z.event.raw;ln(V,d3,{files:(X=ne.dataTransfer)===null||X===void 0?void 0:X.files})}},h=(V,z)=>{const X=z.event.raw.target;ln(V,d3,{files:X.files})},y=(V,z)=>{z&&(Ut.setValue(V,B$(z,s)),ln(V,$i,{name:t.name}))},S=us({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:vt([oo("input-file-events",[Lg(Pg()),Lg(bv())])])}),k=t.label.map(V=>kh(V,s)),O=Cs.parts.field({factory:Xc,dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[Nr(s.translate("Browse for an image")),S.asSpec()],action:V=>{S.get(V).element.dom.click()},buttonBehaviours:vt([Pd.self(),IE(c.getOr([])),hr.config({}),Wu.button(()=>s.checkUiComponentContext(t.context).shouldDisable),pc(()=>s.checkUiComponentContext(t.context))])}),N={dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:vt([$n.config({disabled:()=>s.checkUiComponentContext(t.context).shouldDisable}),pc(()=>s.checkUiComponentContext(t.context)),bo.config({toggleClass:"dragenter",toggleOnExecute:!1}),oo("dropzone-events",[Ye("dragenter",d([l,bo.toggle])),Ye("dragleave",d([l,bo.toggle])),Ye("dragover",l),Ye("drop",d([l,g])),Ye(tm(),h)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[Nr(s.translate("Drop an image here"))]},O]}]};return o2(k,N,["tox-form__group--stretched"],[oo("handle-files",[Ye(d3,(V,z)=>{Cs.getField(V).each(X=>{y(X,z.event.files)})})])])},vV=(t,s)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${t.columns}col`]},components:je(t.items,s.interpreter)}),yV=(t,s)=>{let c=null,l=null;return{cancel:()=>{Xt(c)||(clearTimeout(c),c=null,l=null)},throttle:(...h)=>{l=h,Xt(c)&&(c=setTimeout(()=>{const y=l;c=null,l=null,t.apply(null,y)},s))}}},m3=(t,s)=>{let c=null;return{cancel:()=>{Xt(c)||(clearTimeout(c),c=null)},throttle:(...g)=>{Xt(c)&&(c=setTimeout(()=>{c=null,t.apply(null,g)},s))}}},f3=(t,s)=>{let c=null;const l=()=>{Xt(c)||(clearTimeout(c),c=null)};return{cancel:l,throttle:(...g)=>{l(),c=setTimeout(()=>{c=null,t.apply(null,g)},s)}}},FE=Qt("alloy-fake-before-tabstop"),g3=Qt("alloy-fake-after-tabstop"),I$=t=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:vt([Vn.config({ignore:!0}),hr.config({})])}),L$=(t,s)=>({dom:{tag:"div",classes:["tox-navobj",...t.getOr([])]},components:[I$([FE]),s,I$([g3])],behaviours:vt([Pd.childAt(1)])}),h3=(t,s)=>{ln(t,Qi(),{raw:{which:9,shiftKey:s}})},F$=(t,s)=>{const c=s.element;Nl(c,FE)?h3(t,!0):Nl(c,g3)&&h3(t,!1)},p2=t=>e2(t,["."+FE,"."+g3].join(","),no),HE=Qt("update-dialog"),H$=Qt("update-title"),V$=Qt("update-body"),p3=Qt("update-footer"),z$=Qt("body-send-message"),b2=Qt("dialog-focus-shifted"),b3=po().browser,v2=b3.isSafari(),CV=b3.isFirefox(),U$=v2||CV,wV=b3.isChromium(),SV=({scrollTop:t,scrollHeight:s,clientHeight:c})=>Math.ceil(t)+c>=s,W$=(t,s)=>t.scrollTo(0,s==="bottom"?99999999:s),xV=(t,s)=>{const c=t.body;return A.from(!/^<!DOCTYPE (html|HTML)/.test(s)&&(!wV&&!v2||et(c)&&(c.scrollTop!==0||Math.abs(c.scrollHeight-c.clientHeight)>1))?c:t.documentElement)},Z$=(t,s,c)=>{const l=t.dom;A.from(l.contentDocument).fold(c,d=>{let g=0;const h=xV(d,s).map(S=>(g=S.scrollTop,S)).forall(SV),y=()=>{const S=l.contentWindow;et(S)&&(h?W$(S,"bottom"):!h&&U$&&g!==0&&W$(S,g))};v2&&l.addEventListener("load",y,{once:!0}),d.open(),d.write(s),d.close(),v2||y()})},TV=yn(U$,v2?500:200).map(t=>yV(Z$,t)),EV=(t,s)=>{const c=hn(t.getOr(""));return{getValue:l=>c.get(),setValue:(l,d)=>{if(c.get()!==d){const g=l.element,h=()=>Ve(g,"srcdoc",d);s?TV.fold(W(Z$),y=>y.throttle)(g,d,h):h()}c.set(d)}}},kV=(t,s,c)=>{const l="tox-dialog__iframe",d=t.transparent?[]:[`${l}--opaque`],g=t.border?["tox-navobj-bordered"]:[],h={...t.label.map(N=>({title:N})).getOr({}),...c.map(N=>({srcdoc:N})).getOr({}),...t.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}},y=EV(c,t.streamContent),S=t.label.map(N=>kh(N,s)),k=N=>L$(A.from(g),{uid:N.uid,dom:{tag:"iframe",attributes:h,classes:[l,...d]},behaviours:vt([hr.config({}),Vn.config({}),Jb(c,y.getValue,y.setValue),mi.config({channels:{[b2]:{onReceive:(V,z)=>{z.newFocus.each(X=>{na(V.element).each(ne=>{(Ko(V.element,X)?hc:Ts)(ne,"tox-navobj-bordered-focus")})})}}}})])}),O=Cs.parts.field({factory:{sketch:k}});return o2(S,O,["tox-form__group--stretched"],[])},y2=t=>new Promise((s,c)=>{const l=()=>{g(),s(t)},d=[Pl(t,"load",l),Pl(t,"error",()=>{g(),c("Unable to load data from image: "+t.dom.src)})],g=()=>gt(d,h=>h.unbind());t.dom.complete&&l()}),v3=(t,s,c,l,d)=>{const g=c*d,h=l*d,y=Math.max(0,t/2-g/2),S=Math.max(0,s/2-h/2);return{left:y.toString()+"px",top:S.toString()+"px",width:g.toString()+"px",height:h.toString()+"px"}},_V=(t,s,c)=>{const l=G(t),d=vs(t);return Math.min(l/s,d/c,1)},AV=(t,s)=>{const c=hn(s.getOr({url:""})),l=us({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:s.map(S=>({src:S.url})).getOr({})}}),d=us({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[l.asSpec()]}),g=(S,k)=>{const O={url:k.url};k.zoom.each(V=>O.zoom=V),k.cachedWidth.each(V=>O.cachedWidth=V),k.cachedHeight.each(V=>O.cachedHeight=V),c.set(O);const N=()=>{const{cachedWidth:V,cachedHeight:z,zoom:X}=O;if(!zt(V)&&!zt(z)){if(zt(X)){const Ce=_V(S.element,V,z);O.zoom=Ce}const ne=v3(G(S.element),vs(S.element),V,z,O.zoom);d.getOpt(S).each(Ce=>{co(Ce.element,ne)})}};l.getOpt(S).each(V=>{const z=V.element;k.url!==nn(z,"src")&&(Ve(z,"src",k.url),Ts(S.element,"tox-imagepreview__loaded")),N(),y2(z).then(X=>{S.getSystem().isConnected()&&(hc(S.element,"tox-imagepreview__loaded"),O.cachedWidth=X.dom.naturalWidth,O.cachedHeight=X.dom.naturalHeight,N())})})},h={};t.height.each(S=>h.height=S);const y=s.map(S=>({url:S.url,zoom:A.from(S.zoom),cachedWidth:A.from(S.cachedWidth),cachedHeight:A.from(S.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:h,attributes:{role:"presentation"}},components:[d.asSpec()],behaviours:vt([Pd.self(),Jb(y,()=>c.get(),g)])}},y3=(t,s,c)=>{const l="tox-label",d=t.align==="center"?[`${l}--center`]:[],g=t.align==="end"?[`${l}--end`]:[],h=us({dom:{tag:"label",classes:[l,...d,...g]},components:[Nr(s.providers.translate(t.label))]}),y=je(t.items,s.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[h.asSpec(),...y],behaviours:vt([Pd.self(),eo.config({}),hV(A.none()),En.config({mode:"acyclic"}),oo("label",[mr(S=>{t.for.each(k=>{c(k).each(O=>{h.getOpt(S).each(N=>{var V;const z=(V=nn(O.element,"id"))!==null&&V!==void 0?V:Qt("form-field");Ve(O.element,"id",z),Ve(N.element,"for",z)})})})})])])}},G$=Qt("toolbar.button.execute"),C3=t=>Vm((s,c)=>{JT(t,s)(l=>{ln(s,G$,{buttonApi:l}),t.onAction(l)})}),r1=Qt("common-button-display-events"),q$={[Na()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events","tooltipping"],[Xl()]:["toolbar-button-events",r1],[_i()]:["toolbar-button-events","dropdown-events","tooltipping"],[Mr()]:["focusing","alloy.base.behaviour",r1]},w3=t=>qe(t.element,"width",fs(t.element,"width")),S3=(t,s,c)=>zu(t,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:c},s),VE=(t,s)=>S3(t,s,[]),c1=(t,s)=>S3(t,s,[eo.config({})]),x3=(t,s,c)=>({dom:{tag:"span",classes:[`${s}__select-label`]},components:[Nr(c.translate(t))],behaviours:vt([eo.config({})])}),ju=Qt("update-menu-text"),Qb=Qt("update-menu-icon"),zE=(t,s,c,l)=>{const d=hn(ee),g=t.text.map(ne=>us(x3(ne,s,c.providers))),h=t.icon.map(ne=>us(c1(ne,c.providers.icons))),y=(ne,Ce)=>{const ae=Ut.getValue(ne);return Vn.focus(ae),ln(ae,"keydown",{raw:Ce.event.raw}),hu.close(ae),A.some(!0)},S=t.role.fold(()=>({}),ne=>({role:ne})),k=A.from(t.listRole).map(ne=>({listRole:ne})).getOr({}),O=t.ariaLabel.fold(()=>({}),ne=>({"aria-label":c.providers.translate(ne)})),N=zu("chevron-down",{tag:"div",classes:[`${s}__select-chevron`]},c.providers.icons),V=Qt("common-button-display-events"),z="dropdown-events";return us(hu.sketch({...t.uid?{uid:t.uid}:{},...S,...k,dom:{tag:"button",classes:[s,`${s}--select`].concat(je(t.classes,ne=>`${s}--${ne}`)),attributes:{...O,...et(l)?{"data-mce-name":l}:{}}},components:t1([h.map(ne=>ne.asSpec()),g.map(ne=>ne.asSpec()),A.some(N)]),matchWidth:!0,useMinWidth:!0,onOpen:(ne,Ce,ae)=>{t.searchable&&sH(ae)},dropdownBehaviours:vt([...t.dropdownBehaviours,Wu.button(()=>t.disabled||c.providers.checkUiComponentContext(t.context).shouldDisable),pc(()=>c.providers.checkUiComponentContext(t.context)),J0.config({}),eo.config({}),...t.tooltip.map(ne=>ec.config(c.providers.tooltips.getConfig({tooltipText:c.providers.translate(ne)}))).toArray(),oo(z,[Qp(t,d),e1(t,d)]),oo(V,[mr((ne,Ce)=>{t.listRole!=="listbox"&&w3(ne)})]),oo("update-dropdown-width-variable",[Ye($g(),(ne,Ce)=>hu.close(ne))]),oo("menubutton-update-display-text",[Ye(ju,(ne,Ce)=>{g.bind(ae=>ae.getOpt(ne)).each(ae=>{eo.set(ae,[Nr(c.providers.translate(Ce.event.text))])})}),Ye(Qb,(ne,Ce)=>{h.bind(ae=>ae.getOpt(ne)).each(ae=>{eo.set(ae,[c1(Ce.event.icon,c.providers.icons)])})})])]),eventOrder:Hs(q$,{[Mr()]:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[Xl()]:["toolbar-button-events",ec.name(),z,V]}),sandboxBehaviours:vt([En.config({mode:"special",onLeft:y,onRight:y}),oo("dropdown-sandbox-events",[Ye(W4,(ne,Ce)=>{eH(ne),Ce.stop()}),Ye(lP,(ne,Ce)=>{tH(ne,Ce),Ce.stop()})])]),lazySink:c.getSink,toggleClass:`${s}--active`,parts:{menu:{...$w(!1,t.columns,t.presets),fakeFocus:t.searchable,...t.listRole==="listbox"?{}:{onHighlightItem:xB,onCollapseMenu:(ne,Ce,ae)=>{_t.getHighlighted(ae).each(ve=>{xB(ne,ae,ve)})},onDehighlightItem:fE}}},getAnchorOverrides:()=>({maxHeightFunction:(ne,Ce)=>{rx()(ne,Ce-10)}}),fetch:ne=>Cl.nu(dn(t.fetch,ne))})).asSpec()},K$=t=>Dt(t),T3=t=>t.type==="separator",OV=t=>yo(t,"getSubmenuItems"),DV={type:"separator"},RV=(t,s)=>{const c=Go(t,(l,d)=>K$(d)?d===""?l:d==="|"?l.length>0&&!T3(l[l.length-1])?l.concat([DV]):l:yo(s,d.toLowerCase())?l.concat([s[d.toLowerCase()]]):l:l.concat([d]),[]);return c.length>0&&T3(c[c.length-1])&&c.pop(),c},Y$=(t,s)=>{const c=t.getSubmenuItems(),l=E3(c,s),d=Hs(l.menus,{[t.value]:l.items}),g=Hs(l.expansions,{[t.value]:t.value});return{item:t,menus:d,expansions:g}},MV=t=>{const s=pt(t,"value").getOrThunk(()=>Qt("generated-menu-item"));return Hs({value:s},t)},E3=(t,s)=>{const c=RV(Dt(t)?t.split(" "):t,s);return ds(c,(l,d)=>{if(OV(d)){const g=MV(d),h=Y$(g,s);return{menus:Hs(l.menus,h.menus),items:[h.item,...l.items],expansions:Hs(l.expansions,h.expansions)}}else return{...l,items:[d,...l.items]}},{menus:{},expansions:{},items:[]})},NV=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-field",placeholder:s.placeholder})),PV=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-results"})),a1=(t,s,c,l)=>{const d=Qt("primary-menu"),g=E3(t,c.shared.providers.menuItems());if(g.items.length===0)return A.none();const h=NV(l),y=TB(d,g.items,s,c,l.isHorizontalMenu,h),S=PV(l),k=jn(g.menus,(N,V)=>TB(V,N,s,c,!1,S)),O=Hs(k,Fn(d,y));return A.from(cg.tieredData(d,O,g.expansions))},UE=t=>!yo(t,"items"),X$="data-value",J$=(t,s,c,l,d)=>je(c,g=>UE(g)?{type:"togglemenuitem",...d?{}:{role:"option"},text:g.text,value:g.value,active:g.value===l,onAction:()=>{Ut.setValue(t,g.value),ln(t,$i,{name:s}),Vn.focus(t)}}:{type:"nestedmenuitem",text:g.text,getSubmenuItems:()=>J$(t,s,g.items,l,d)}),C2=(t,s)=>tn(t,c=>UE(c)?yn(c.value===s,c):C2(c.items,s)),BV=(t,s,c)=>{const l=Ms(t.items,k=>!UE(k)),d=s.shared.providers,g=c.bind(k=>C2(t.items,k)).orThunk(()=>qs(t.items).filter(UE)),h=t.label.map(k=>kh(k,d)),y=Cs.parts.field({dom:{},factory:{sketch:k=>zE({context:t.context,uid:k.uid,text:g.map(O=>O.text),icon:A.none(),tooltip:A.none(),role:yn(!l,"combobox"),...l?{}:{listRole:"listbox"},ariaLabel:t.label,fetch:(O,N)=>{const V=J$(O,t.name,t.items,Ut.getValue(O),l);N(a1(V,hm.CLOSE_ON_EXECUTE,s,{isHorizontalMenu:!1,search:A.none()}))},onSetup:W(ee),getApi:W({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[hr.config({}),Jb(g.map(O=>O.value),O=>nn(O.element,X$),(O,N)=>{C2(t.items,N).each(V=>{Ve(O.element,X$,V.value),ln(O,ju,{text:V.text})})})]},"tox-listbox",s.shared)}}),S={dom:{tag:"div",classes:["tox-listboxfield"]},components:[y]};return Cs.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Rn([h.toArray(),[S]]),fieldBehaviours:vt([$n.config({disabled:()=>!t.enabled||d.checkUiComponentContext(t.context).shouldDisable,onDisabled:k=>{Cs.getField(k).each($n.disable)},onEnabled:k=>{Cs.getField(k).each($n.enable)}})])})},Q$=(t,s)=>({dom:{tag:"div",classes:t.classes},components:je(t.items,s.shared.interpreter)}),$V=(t,s)=>{const c=je(t.options,d=>({dom:{tag:"option",value:d.value,innerHtml:d.text}})),l=t.data.map(d=>Fn("initialValue",d)).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:c,behaviours:ga(t.selectBehaviours,[Vn.config({}),Ut.config({store:{mode:"manual",getValue:d=>Lu(d.element),setValue:(d,g)=>{const h=qs(t.options);Cn(t.options,S=>S.value===g).isSome()?Qg(d.element,g):d.element.dom.selectedIndex===-1&&g===""&&h.each(S=>Qg(d.element,S.value))},...l}})])}},e5=pi({name:"HtmlSelect",configFields:[Ke("options"),fa("selectBehaviours",[Vn,Ut]),Te("selectClasses",[]),Te("selectAttributes",{}),Qo("data")],factory:$V}),IV=(t,s,c)=>{const l=je(t.items,S=>({text:s.translate(S.text),value:S.value})),d=t.label.map(S=>kh(S,s)),g=Cs.parts.field({dom:{},...c.map(S=>({data:S})).getOr({}),selectAttributes:{size:t.size},options:l,factory:e5,selectBehaviours:vt([$n.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable}),hr.config({}),oo("selectbox-change",[Ye(tm(),(S,k)=>{ln(S,$i,{name:t.name})})])])}),h=t.size>1?A.none():A.some(zu("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},s.icons)),y={dom:{tag:"div",classes:["tox-selectfield"]},components:Rn([[g],h.toArray()])};return Cs.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Rn([d.toArray(),[y]]),fieldBehaviours:vt([$n.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable,onDisabled:S=>{Cs.getField(S).each($n.disable)},onEnabled:S=>{Cs.getField(S).each($n.enable)}}),pc(()=>s.checkUiComponentContext(t.context))])})},LV=W([Te("field1Name","field1"),Te("field2Name","field2"),Gg("onLockedChange"),Zm(["lockClass"]),Te("locked",!1),au.field("coupledFieldBehaviours",[$o,Ut])]),FV=(t,s,c)=>Vs(t,s,c).bind($o.getCurrent),t5=(t,s)=>ol({factory:Cs,name:t,overrides:c=>({fieldBehaviours:vt([oo("coupled-input-behaviour",[Ye(gd(),l=>{FV(l,c,s).each(d=>{Vs(l,c,"lock").each(g=>{bo.isOn(g)&&c.onLockedChange(l,d,g)})})})])])})}),HV=W([t5("field1","field2"),t5("field2","field1"),ol({factory:Xc,schema:[Ke("dom")],name:"lock",overrides:t=>({buttonBehaviours:vt([bo.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])})})]),n5=(t,s,c,l)=>({uid:t.uid,dom:t.dom,components:s,behaviours:au.augment(t.coupledFieldBehaviours,[$o.config({find:A.some}),Ut.config({store:{mode:"manual",getValue:d=>{const g=Lp(d,t,["field1","field2"]);return{[t.field1Name]:Ut.getValue(g.field1()),[t.field2Name]:Ut.getValue(g.field2())}},setValue:(d,g)=>{const h=Lp(d,t,["field1","field2"]);Vr(g,t.field1Name)&&Ut.setValue(h.field1(),g[t.field1Name]),Vr(g,t.field2Name)&&Ut.setValue(h.field2(),g[t.field2Name])}}})]),apis:{getField1:d=>Vs(d,t,"field1"),getField2:d=>Vs(d,t,"field2"),getLock:d=>Vs(d,t,"lock")}}),Gu=ja({name:"FormCoupledInputs",configFields:LV(),partFields:HV(),factory:n5,apis:{getField1:(t,s)=>t.getField1(s),getField2:(t,s)=>t.getField2(s),getLock:(t,s)=>t.getLock(s)}}),VV=t=>{const s={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},c=d=>d in s?s[d]:1;let l=t.value.toFixed(c(t.unit));return l.indexOf(".")!==-1&&(l=l.replace(/\.?0*$/,"")),l+t.unit},WE=t=>{const c=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(c!==null){const l=parseFloat(c[1]),d=c[2];return ao.value({value:l,unit:d})}else return ao.error(t)},o5=(t,s)=>{const c={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},l=d=>yo(c,d);return t.unit===s?A.some(t.value):l(t.unit)&&l(s)?c[t.unit]===c[s]?A.some(t.value):A.some(t.value/c[t.unit]*c[s]):A.none()},k3=t=>A.none(),zV=(t,s)=>c=>o5(c,s).map(l=>({value:l*t,unit:s})),s5=(t,s)=>{const c=WE(t).toOptional(),l=WE(s).toOptional();return ta(c,l,(d,g)=>o5(d,g.unit).map(h=>g.value/h).map(h=>zV(h,g.unit)).getOr(k3)).getOr(k3)},UV=(t,s)=>{let c=k3;const l=Qt("ratio-event"),d=z=>zu(z,{tag:"span",classes:["tox-icon","tox-lock-icon__"+z]},s.icons),g=t.label.getOr("Constrain proportions"),h=s.translate(g),y=Gu.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":h,"data-mce-name":g}},components:[d("lock"),d("unlock")],buttonBehaviours:vt([$n.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable}),pc(()=>s.checkUiComponentContext(t.context)),hr.config({}),ec.config(s.tooltips.getConfig({tooltipText:h}))])}),S=z=>({dom:{tag:"div",classes:["tox-form__group"]},components:z}),k=z=>Cs.parts.field({factory:of,inputClasses:["tox-textfield"],inputBehaviours:vt([$n.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable}),pc(()=>s.checkUiComponentContext(t.context)),hr.config({}),oo("size-input-events",[Ye(Rl(),(X,ne)=>{ln(X,l,{isField1:z})}),Ye(tm(),(X,ne)=>{ln(X,$i,{name:t.name})})])]),selectOnFocus:!1}),O=z=>({dom:{tag:"label",classes:["tox-label"]},components:[Nr(s.translate(z))]}),N=Gu.parts.field1(S([Cs.parts.label(O("Width")),k(!0)])),V=Gu.parts.field2(S([Cs.parts.label(O("Height")),k(!1)]));return Gu.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[N,V,S([O(X_),y])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(z,X,ne)=>{WE(Ut.getValue(z)).each(Ce=>{c(Ce).each(ae=>{Ut.setValue(X,VV(ae))})})},coupledFieldBehaviours:vt([$n.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable,onDisabled:z=>{Gu.getField1(z).bind(Cs.getField).each($n.disable),Gu.getField2(z).bind(Cs.getField).each($n.disable),Gu.getLock(z).each($n.disable)},onEnabled:z=>{Gu.getField1(z).bind(Cs.getField).each($n.enable),Gu.getField2(z).bind(Cs.getField).each($n.enable),Gu.getLock(z).each($n.enable)}}),pc(()=>s.checkUiComponentContext("mode:design")),oo("size-input-events2",[Ye(l,(z,X)=>{const ne=X.event.isField1,Ce=ne?Gu.getField1(z):Gu.getField2(z),ae=ne?Gu.getField2(z):Gu.getField1(z),ve=Ce.map(Ut.getValue).getOr(""),ye=ae.map(Ut.getValue).getOr("");c=s5(ve,ye)})])])})},WV=(t,s,c)=>{const l=Nd.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Nr(s.translate(t.label))]}),d=Nd.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),g=Nd.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return Nd.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:t.min,maxX:t.max,getInitialValue:W(c.getOrThunk(()=>(Math.abs(t.max)-Math.abs(t.min))/2))},components:[l,d,g],sliderBehaviours:vt([Pd.self(),Vn.config({})]),onChoose:(h,y,S)=>{ln(h,$i,{name:t.name,value:S})},onChange:(h,y,S)=>{ln(h,$i,{name:t.name,value:S})}})},ZV=(t,s)=>{const c=y=>({dom:{tag:"th",innerHtml:s.translate(y)}}),l=y=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:je(y,c)}]}),d=y=>({dom:{tag:"td",innerHtml:s.translate(y)}}),g=y=>({dom:{tag:"tr"},components:je(y,d)}),h=y=>({dom:{tag:"tbody"},components:je(y,g)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[l(t.header),h(t.cells)],behaviours:vt([hr.config({}),Vn.config({})])}},_3=(t,s)=>{const c=t.label.map(z=>kh(z,s)),l=[$n.config({disabled:()=>t.disabled||s.checkUiComponentContext(t.context).shouldDisable}),pc(()=>s.checkUiComponentContext(t.context)),En.config({mode:"execution",useEnter:t.multiline!==!0,useControlEnter:t.multiline===!0,execute:z=>(Eo(z,r2),A.some(!0))}),oo("textfield-change",[Ye(gd(),(z,X)=>{ln(z,$i,{name:t.name})}),Ye(O1(),(z,X)=>{ln(z,$i,{name:t.name})})]),hr.config({})],d=t.validation.map(z=>mg.config({getRoot:X=>na(X.element),invalidClass:"tox-invalid",validator:{validate:X=>{const ne=Ut.getValue(X),Ce=z.validator(ne);return Cl.pure(Ce===!0?ao.value(ne):ao.error(Ce))},validateOnLoad:z.validateOnLoad}})).toArray(),g=t.placeholder.fold(W({}),z=>({placeholder:s.translate(z)})),h=t.inputMode.fold(W({}),z=>({inputmode:z})),y={...g,...h,"data-mce-name":t.name},S=Cs.parts.field({tag:t.multiline===!0?"textarea":"input",...t.data.map(z=>({data:z})).getOr({}),inputAttributes:y,inputClasses:[t.classname],inputBehaviours:vt(Rn([l,d])),selectOnFocus:!1,factory:of}),k=t.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[S]}:S,N=(t.flex?["tox-form__group--stretched"]:[]).concat(t.maximized?["tox-form-group--maximize"]:[]),V=[$n.config({disabled:()=>t.disabled||s.checkUiComponentContext(t.context).shouldDisable,onDisabled:z=>{Cs.getField(z).each($n.disable)},onEnabled:z=>{Cs.getField(z).each($n.enable)}}),pc(()=>s.checkUiComponentContext(t.context))];return o2(c,k,N,V)},r5=(t,s,c)=>_3({name:t.name,multiline:!1,label:t.label,inputMode:t.inputMode,placeholder:t.placeholder,flex:!1,disabled:!t.enabled,classname:"tox-textfield",validation:A.none(),maximized:t.maximized,data:c,context:t.context},s),c5=(t,s,c)=>_3({name:t.name,multiline:!0,label:t.label,inputMode:A.none(),placeholder:t.placeholder,flex:!0,disabled:!t.enabled,classname:"tox-textarea",validation:A.none(),maximized:t.maximized,data:c,context:t.context},s),l1=(t,s)=>s.getAnimationRoot.fold(()=>t.element,c=>c(t)),Rh=t=>t.dimension.property,ev=(t,s)=>t.dimension.getDimension(s),ZE=(t,s)=>{const c=l1(t,s);vd(c,[s.shrinkingClass,s.growingClass])},A3=(t,s)=>{Ts(t.element,s.openClass),hc(t.element,s.closedClass),qe(t.element,Rh(s),"0px"),ka(t.element)},jE=(t,s)=>{Ts(t.element,s.closedClass),hc(t.element,s.openClass),Gn(t.element,Rh(s))},a5=(t,s,c,l)=>{c.setCollapsed(),qe(t.element,Rh(s),ev(s,t.element)),ZE(t,s),A3(t,s),s.onStartShrink(t),s.onShrunk(t)},jV=(t,s,c,l)=>{const d=l.getOrThunk(()=>ev(s,t.element));c.setCollapsed(),qe(t.element,Rh(s),d),ka(t.element);const g=l1(t,s);Ts(g,s.growingClass),hc(g,s.shrinkingClass),A3(t,s),s.onStartShrink(t)},l5=(t,s,c)=>{const l=ev(s,t.element);(l==="0px"?a5:jV)(t,s,c,A.some(l))},O3=(t,s,c)=>{const l=l1(t,s),d=Nl(l,s.shrinkingClass),g=ev(s,t.element);jE(t,s);const h=ev(s,t.element);(d?()=>{qe(t.element,Rh(s),g),ka(t.element)}:()=>{A3(t,s)})(),Ts(l,s.shrinkingClass),hc(l,s.growingClass),jE(t,s),qe(t.element,Rh(s),h),c.setExpanded(),s.onStartGrow(t)},i5=(t,s,c)=>{if(c.isExpanded()){Gn(t.element,Rh(s));const l=ev(s,t.element);qe(t.element,Rh(s),l)}},GV=(t,s,c)=>{c.isExpanded()||O3(t,s,c)},qV=(t,s,c)=>{c.isExpanded()&&l5(t,s,c)},u5=(t,s,c)=>{c.isExpanded()&&a5(t,s,c)},KV=(t,s,c)=>c.isExpanded(),YV=(t,s,c)=>c.isCollapsed(),Xn=(t,s,c)=>{const l=l1(t,s);return Nl(l,s.growingClass)===!0},sy=(t,s,c)=>{const l=l1(t,s);return Nl(l,s.shrinkingClass)===!0};var d5=Object.freeze({__proto__:null,refresh:i5,grow:GV,shrink:qV,immediateShrink:u5,hasGrown:KV,hasShrunk:YV,isGrowing:Xn,isShrinking:sy,isTransitioning:(t,s,c)=>Xn(t,s)||sy(t,s),toggleGrow:(t,s,c)=>{(c.isExpanded()?l5:O3)(t,s,c)},disableTransitions:ZE,immediateGrow:(t,s,c)=>{c.isExpanded()||(jE(t,s),qe(t.element,Rh(s),ev(s,t.element)),ZE(t,s),c.setExpanded(),s.onStartGrow(t),s.onGrown(t))}}),w2=Object.freeze({__proto__:null,exhibit:(t,s,c)=>{const l=s.expanded;return Ml(l?{classes:[s.openClass],styles:{}}:{classes:[s.closedClass],styles:Fn(s.dimension.property,"0px")})},events:(t,s)=>xs([Nf(A1(),(c,l)=>{l.event.raw.propertyName===t.dimension.property&&(ZE(c,t),s.isExpanded()&&Gn(c.element,t.dimension.property),(s.isExpanded()?t.onGrown:t.onShrunk)(c))})])}),tz=[Ke("closedClass"),Ke("openClass"),Ke("shrinkingClass"),Ke("growingClass"),Qo("getAnimationRoot"),Lo("onShrunk"),Lo("onStartShrink"),Lo("onGrown"),Lo("onStartGrow"),Te("expanded",!1),as("dimension",Zr("property",{width:[Qs("property","width"),Qs("getDimension",t=>G(t)+"px")],height:[Qs("property","height"),Qs("getDimension",t=>vs(t)+"px")]}))],oz=Object.freeze({__proto__:null,init:t=>{const s=hn(t.expanded),c=()=>"expanded: "+s.get();return hl({isExpanded:()=>s.get()===!0,isCollapsed:()=>s.get()===!1,setCollapsed:dn(s.set,!1),setExpanded:dn(s.set,!0),readState:c})}});const Ii=da({fields:tz,name:"sliding",active:w2,apis:d5,state:oz}),m5=t=>({isEnabled:()=>!$n.isDisabled(t),setEnabled:s=>$n.set(t,!s),setActive:s=>{const c=t.element;s?(hc(c,"tox-tbtn--enabled"),Ve(c,"aria-pressed",!0)):(Ts(c,"tox-tbtn--enabled"),B(c,"aria-pressed"))},isActive:()=>Nl(t.element,"tox-tbtn--enabled"),setText:s=>{ln(t,ju,{text:s})},setIcon:s=>ln(t,Qb,{icon:s})}),ry=(t,s,c,l,d=!0,g)=>zE({text:t.text,icon:t.icon,tooltip:t.tooltip,ariaLabel:t.tooltip,searchable:t.search.isSome(),role:l,fetch:(h,y)=>{const S={pattern:t.search.isSome()?gE(h):""};t.fetch(k=>{y(a1(k,hm.CLOSE_ON_EXECUTE,c,{isHorizontalMenu:!1,search:t.search}))},S,m5(h))},onSetup:t.onSetup,getApi:m5,columns:1,presets:"normal",classes:[],dropdownBehaviours:[...d?[hr.config({})]:[]],context:t.context},s,c.shared,g),D3=(t,s,c)=>{const l=g=>h=>{const y=!h.isActive();h.setActive(y),g.storage.set(y),c.shared.getSink().each(S=>{s().getOpt(S).each(k=>{su(k.element),ln(k,dg,{name:g.name,value:g.storage.get()})})})},d=g=>h=>{h.setActive(g.storage.get())};return g=>{g(je(t,h=>{const y=h.text.fold(()=>({}),S=>({text:S}));return{type:h.type,active:!1,...y,context:h.context,onAction:l(h),onSetup:d(h)}}))}},R3=t=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{"aria-label":t}},components:[Nr(t)]}),f5=(t,s,c)=>{t.customStateIcon.each(l=>s.push(h5(l,c.shared.providers.icons,t.customStateIconTooltip.fold(()=>[],d=>[ec.config(c.shared.providers.tooltips.getConfig({tooltipText:d}))]),["tox-icon-custom-state"],t.customStateIconTooltip.fold(()=>({}),d=>({title:d})))))},g5=Qt("leaf-label-event-id"),M3=({leaf:t,onLeafAction:s,visible:c,treeId:l,selectedId:d,backstage:g})=>{const h=t.menu.map(S=>ry(S,"tox-mbtn",g,A.none(),c)),y=[R3(t.title)];return f5(t,y,g),h.each(S=>y.push(S)),Xc.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(c?["tox-tree--leaf__label--visible"]:[])},components:y,role:"treeitem",action:S=>{s(t.id),S.getSystem().broadcastOn([`update-active-item-${l}`],{value:t.id})},eventOrder:{[Qi()]:[g5,"keying"]},buttonBehaviours:vt([...c?[hr.config({})]:[],bo.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),mi.config({channels:{[`update-active-item-${l}`]:{onReceive:(S,k)=>{(k.value===t.id?bo.on:bo.off)(S)}}}}),oo(g5,[mr((S,k)=>{d.each(O=>{(O===t.id?bo.on:bo.off)(S)})}),Ye(Qi(),(S,k)=>{const O=k.event.raw.code==="ArrowLeft",N=k.event.raw.code==="ArrowRight";O?(Fc(S.element,".tox-tree--directory").each(V=>{S.getSystem().getByDom(V).each(z=>{ou(V,".tox-tree--directory__label").each(X=>{z.getSystem().getByDom(X).each(Vn.focus)})})}),k.stop()):N&&k.stop()})])])})},h5=(t,s,c,l,d)=>zu(t,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"].concat(l||[]),behaviours:c,attributes:d},s),sz=(t,s)=>h5(t,s,[]),p5=Qt("directory-label-event-id"),rz=({directory:t,visible:s,noChildren:c,backstage:l})=>{const d=t.menu.map(y=>ry(y,"tox-mbtn",l,A.none())),g=[{dom:{tag:"div",classes:["tox-chevron"]},components:[sz("chevron-right",l.shared.providers.icons)]},R3(t.title)];f5(t,g,l),d.each(y=>{g.push(y)});const h=y=>{Fc(y.element,".tox-tree--directory").each(S=>{y.getSystem().getByDom(S).each(k=>{const O=!bo.isOn(k);bo.toggle(k),ln(y,"expand-tree-node",{expanded:O,node:t.id})})})};return Xc.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(s?["tox-tree--directory__label--visible"]:[])},components:g,action:h,eventOrder:{[Qi()]:[p5,"keying"]},buttonBehaviours:vt([...s?[hr.config({})]:[],oo(p5,[Ye(Qi(),(y,S)=>{const k=S.event.raw.code==="ArrowRight",O=S.event.raw.code==="ArrowLeft";k&&c&&S.stop(),(k||O)&&Fc(y.element,".tox-tree--directory").each(N=>{y.getSystem().getByDom(N).each(V=>{!bo.isOn(V)&&k||bo.isOn(V)&&O?(h(y),S.stop()):O&&!bo.isOn(V)&&(Fc(V.element,".tox-tree--directory").each(z=>{ou(z,".tox-tree--directory__label").each(X=>{V.getSystem().getByDom(X).each(Vn.focus)})}),S.stop())})})})])])})},cz=({children:t,onLeafAction:s,visible:c,treeId:l,expandedIds:d,selectedId:g,backstage:h})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:t.map(y=>y.type==="leaf"?M3({leaf:y,selectedId:g,onLeafAction:s,visible:c,treeId:l,backstage:h}):N3({directory:y,expandedIds:d,selectedId:g,onLeafAction:s,labelTabstopping:c,treeId:l,backstage:h})),behaviours:vt([Ii.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:c}),eo.config({})])}),az=Qt("directory-event-id"),N3=({directory:t,onLeafAction:s,labelTabstopping:c,treeId:l,backstage:d,expandedIds:g,selectedId:h})=>{const{children:y}=t,S=hn(g),k=N=>y.map(V=>V.type==="leaf"?M3({leaf:V,selectedId:h,onLeafAction:s,visible:N,treeId:l,backstage:d}):N3({directory:V,expandedIds:S.get(),selectedId:h,onLeafAction:s,labelTabstopping:N,treeId:l,backstage:d})),O=g.includes(t.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[rz({directory:t,visible:c,noChildren:t.children.length===0,backstage:d}),cz({children:y,expandedIds:g,selectedId:h,onLeafAction:s,visible:O,treeId:l,backstage:d})],behaviours:vt([oo(az,[mr((N,V)=>{bo.set(N,O)}),Ye("expand-tree-node",(N,V)=>{const{expanded:z,node:X}=V.event;S.set(z?[...S.get(),X]:S.get().filter(ne=>ne!==X))})]),bo.config({...t.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:(N,V)=>{const z=N.components()[1],X=k(V);V?Ii.grow(z):Ii.shrink(z),eo.set(z,X)}})])}},b5=Qt("tree-event-id"),lz=(t,s)=>{const c=t.onLeafAction.getOr(ee),l=t.onToggleExpand.getOr(ee),d=t.defaultExpandedIds,g=hn(d),h=hn(t.defaultSelectedId),y=Qt("tree-id"),S=(k,O)=>t.items.map(N=>N.type==="leaf"?M3({leaf:N,selectedId:k,onLeafAction:c,visible:!0,treeId:y,backstage:s}):N3({directory:N,selectedId:k,onLeafAction:c,expandedIds:O,labelTabstopping:!0,treeId:y,backstage:s}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:S(h.get(),g.get()),behaviours:vt([En.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),oo(b5,[Ye("expand-tree-node",(k,O)=>{const{expanded:N,node:V}=O.event;g.set(N?[...g.get(),V]:g.get().filter(z=>z!==V)),l(g.get(),{expanded:N,node:V})})]),mi.config({channels:{[`update-active-item-${y}`]:{onReceive:(k,O)=>{h.set(A.some(O.value)),eo.set(k,S(A.some(O.value),g.get()))}}}}),eo.config({})])}};var iz=Object.freeze({__proto__:null,events:(t,s)=>{const l=t.stream.streams.setup(t,s);return xs([Ye(t.event,l),nm(()=>s.cancel())].concat(t.cancelEvent.map(d=>[Ye(d,()=>s.cancel())]).getOr([])))}});const v5=t=>{const s=hn(null);return hl({readState:()=>({timer:s.get()!==null?"set":"unset"}),setTimer:g=>{s.set(g)},cancel:()=>{const g=s.get();g!==null&&g.cancel()}})};var uz=Object.freeze({__proto__:null,throttle:v5,init:t=>t.stream.streams.state(t)});const dz=(t,s)=>{const c=t.stream,l=f3(t.onStream,c.delay);return s.setTimer(l),(d,g)=>{l.throttle(d,g),c.stopEvent&&g.stop()}};var mz=[as("stream",Zr("mode",{throttle:[Ke("delay"),Te("stopEvent",!0),Qs("streams",{setup:dz,state:v5})]})),Te("event","input"),Qo("cancelEvent"),Gg("onStream")];const P3=da({fields:mz,name:"streaming",active:iz,state:uz}),GE=(t,s,c)=>{const l=Ut.getValue(c);Ut.setValue(s,l),B3(s)},y5=(t,s)=>{const c=t.element,l=Lu(c),d=c.dom;nn(c,"type")!=="number"&&s(d,l)},B3=t=>{y5(t,(s,c)=>s.setSelectionRange(c.length,c.length))},fz=(t,s)=>{y5(t,(c,l)=>c.setSelectionRange(s,l.length))},gz=(t,s,c)=>{if(t.selectsOver){const l=Ut.getValue(s),d=t.getDisplayText(l),g=Ut.getValue(c);return t.getDisplayText(g).indexOf(d)===0?A.some(()=>{GE(t,s,c),fz(s,d.length)}):A.none()}else return A.none()},$3=W("alloy.typeahead.itemexecute"),hz=(t,s,c,l)=>{const d=(N,V,z)=>{t.previewing.set(!1);const X=lc.getCoupled(N,"sandbox");if(Uo.isOpen(X))$o.getCurrent(X).each(ne=>{_t.getHighlighted(ne).fold(()=>{z(ne)},()=>{Sv(X,ne.element,"keydown",V)})});else{const ne=Ce=>{$o.getCurrent(Ce).each(z)};uE(t,h(N),N,X,l,ne,vi.HighlightMenuAndItem).get(ee)}},g=rP(t),h=N=>V=>V.map(z=>{const X=cl(z.menus),ne=xe(X,ae=>uo(ae.items,ve=>ve.type==="item"));return Ut.getState(N).update(je(ne,ae=>ae.data)),z}),y=N=>$o.getCurrent(N),S="typeaheadevents",k=[Vn.config({}),Ut.config({onSetValue:t.onSetValue,store:{mode:"dataset",getDataKey:N=>Lu(N.element),getFallbackEntry:N=>({value:N,meta:{}}),setValue:(N,V)=>{Qg(N.element,t.model.getDisplayText(V))},...t.initialData.map(N=>Fn("initialValue",N)).getOr({})}}),P3.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:(N,V)=>{const z=lc.getCoupled(N,"sandbox");if(Vn.isFocused(N)&&Lu(N.element).length>=t.minChars){const ne=y(z).bind(ae=>_t.getHighlighted(ae).map(Ut.getValue));t.previewing.set(!0);const Ce=ae=>{y(z).each(ve=>{ne.fold(()=>{t.model.selectsOver&&_t.highlightFirst(ve)},ye=>{_t.highlightBy(ve,$e=>Ut.getValue($e).value===ye.value),_t.getHighlighted(ve).orThunk(()=>(_t.highlightFirst(ve),A.none()))})})};uE(t,h(N),N,z,l,Ce,vi.HighlightJustMenu).get(ee)}},cancelEvent:vv()}),En.config({mode:"special",onDown:(N,V)=>(d(N,V,_t.highlightFirst),A.some(!0)),onEscape:N=>{const V=lc.getCoupled(N,"sandbox");return Uo.isOpen(V)?(Uo.close(V),A.some(!0)):A.none()},onUp:(N,V)=>(d(N,V,_t.highlightLast),A.some(!0)),onEnter:N=>{const V=lc.getCoupled(N,"sandbox"),z=Uo.isOpen(V);if(z&&!t.previewing.get())return y(V).bind(X=>_t.getHighlighted(X)).map(X=>(ln(N,$3(),{item:X}),!0));{const X=Ut.getValue(N);return Eo(N,vv()),t.onExecute(V,N,X),z&&Uo.close(V),A.some(!0)}}}),bo.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),lc.config({others:{sandbox:N=>MO(t,N,{onOpen:()=>bo.on(N),onClose:()=>{t.lazyTypeaheadComp.get().each(V=>B(V.element,"aria-activedescendant")),bo.off(N)}})}}),oo(S,[mr(N=>{t.lazyTypeaheadComp.set(A.some(N))}),nm(N=>{t.lazyTypeaheadComp.set(A.none())}),Vm(N=>{const V=ee;RO(t,h(N),N,l,V,vi.HighlightMenuAndItem).get(ee)}),Ye($3(),(N,V)=>{const z=lc.getCoupled(N,"sandbox");GE(t.model,N,V.event.item),Eo(N,vv()),t.onItemExecute(N,z,V.event.item,Ut.getValue(N)),Uo.close(z),B3(N)})].concat(t.dismissOnBlur?[Ye(Bg(),N=>{const V=lc.getCoupled(N,"sandbox");bl(V.element).isNone()&&Uo.close(V)})]:[]))],O={[_i()]:[Ut.name(),P3.name(),S],...t.eventOrder};return{uid:t.uid,dom:cP(Hs(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...g,...ga(t.typeaheadBehaviours,k)},eventOrder:O}},pz=W([Qo("lazySink"),Ke("fetch"),Te("minChars",5),Te("responseTime",1e3),Lo("onOpen"),Te("getHotspot",A.some),Te("getAnchorOverrides",W({})),Te("layouts",A.none()),Te("eventOrder",{}),w("model",{},[Te("getDisplayText",t=>t.meta!==void 0&&t.meta.text!==void 0?t.meta.text:t.value),Te("selectsOver",!0),Te("populateFromBrowse",!0)]),Lo("onSetValue"),tl("onExecute"),Lo("onItemExecute"),Te("inputClasses",[]),Te("inputAttributes",{}),Te("inputStyles",{}),Te("matchWidth",!0),Te("useMinWidth",!1),Te("dismissOnBlur",!0),Zm(["openClass"]),Qo("initialData"),Qo("listRole"),fa("typeaheadBehaviours",[Vn,Ut,P3,En,bo,lc]),cs("lazyTypeaheadComp",()=>hn(A.none)),cs("previewing",()=>hn(!0))].concat(sP()).concat(mE())),bz=W([lu({schema:[cm()],name:"menu",overrides:t=>({fakeFocus:!0,onHighlightItem:(s,c,l)=>{t.previewing.get()?t.lazyTypeaheadComp.get().each(d=>{gz(t.model,d,l).fold(()=>{t.model.selectsOver?(_t.dehighlight(c,l),t.previewing.set(!0)):t.previewing.set(!1)},g=>{g(),t.previewing.set(!1)})}):t.lazyTypeaheadComp.get().each(d=>{t.model.populateFromBrowse&&GE(t.model,d,l),Hn(l.element,"id").each(g=>Ve(d.element,"aria-activedescendant",g))})},onExecute:(s,c)=>t.lazyTypeaheadComp.get().map(l=>(ln(l,$3(),{item:c}),!0)),onHover:(s,c)=>{t.previewing.set(!1),t.lazyTypeaheadComp.get().each(l=>{t.model.populateFromBrowse&&GE(t.model,l,c)})}})})]),C5=ja({name:"Typeahead",configFields:pz(),partFields:bz(),factory:hz}),Sm=t=>({...t,toCached:()=>Sm(t.toCached()),bindFuture:S=>Sm(t.bind(k=>k.fold(O=>Cl.pure(ao.error(O)),O=>S(O)))),bindResult:S=>Sm(t.map(k=>k.bind(S))),mapResult:S=>Sm(t.map(k=>k.map(S))),mapError:S=>Sm(t.map(k=>k.mapError(S))),foldResult:(S,k)=>t.map(O=>O.fold(S,k)),withTimeout:(S,k)=>Sm(Cl.nu(O=>{let N=!1;const V=setTimeout(()=>{N=!0,O(ao.error(k()))},S);t.get(z=>{N||(clearTimeout(V),O(z))})}))}),I3=t=>Sm(Cl.nu(t)),w5=t=>Sm(Cl.pure(ao.value(t))),x5={nu:I3,wrap:Sm,pure:w5,value:w5,error:t=>Sm(Cl.pure(ao.error(t))),fromResult:t=>Sm(Cl.pure(t)),fromFuture:t=>Sm(t.map(ao.value)),fromPromise:t=>I3(s=>{t.then(c=>{s(ao.value(c))},c=>{s(ao.error(c))})})},S2=(t,s,c=[],l,d,g,h)=>{const y=s.fold(()=>({}),O=>({action:O})),S={buttonBehaviours:vt([Wu.item(()=>!t.enabled||h.checkUiComponentContext(t.context).shouldDisable),pc(()=>h.checkUiComponentContext(t.context)),hr.config({}),...g.map(O=>ec.config(h.tooltips.getConfig({tooltipText:h.translate(O)}))).toArray(),oo("button press",[Iy("click")])].concat(c)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...y},k=Hs(S,{dom:l});return Hs(k,{components:d})},Cz=(t,s,c,l=[],d)=>{const g=t.tooltip.map(k=>({"aria-label":c.translate(k)})).getOr({}),h={tag:"button",classes:["tox-tbtn"],attributes:{...g,"data-mce-name":d}},y=t.icon.map(k=>VE(k,c.icons)),S=t1([y]);return S2(t,s,l,h,S,t.tooltip,c)},qE=t=>{switch(t){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},T5=(t,s,c,l=[],d=[])=>{const g=c.translate(t.text),h=t.icon.map(z=>VE(z,c.icons)),y=[h.getOrThunk(()=>Nr(g))],S=t.buttonType.getOr(!t.primary&&!t.borderless?"secondary":"primary"),N={tag:"button",classes:[...qE(S),...h.isSome()?["tox-button--icon"]:[],...t.borderless?["tox-button--naked"]:[],...d],attributes:{"aria-label":g,"data-mce-name":t.text}},V=t.icon.map(W(g));return S2(t,s,l,N,y,V,c)},E5=(t,s,c,l=[],d=[])=>{const g=T5(t,A.some(s),c,l,d);return Xc.sketch(g)},xm=(t,s)=>c=>{s==="custom"?ln(c,dg,{name:t,value:{}}):s==="submit"?Eo(c,r2):s==="cancel"?Eo(c,o1):console.error("Unknown button type: ",s)},KE=(t,s)=>s==="menu",YE=(t,s)=>s==="custom"||s==="cancel"||s==="submit",wz=(t,s)=>s==="togglebutton",L3=(t,s,c)=>{var l,d;const g=t.icon.map(ye=>c1(ye,s.icons)).map(us),h=ye=>{ln(ye,dg,{name:t.name,value:{setIcon:$e=>{g.map(Le=>Le.getOpt(ye).each(kt=>{eo.set(kt,[c1($e,s.icons)])}))}}})},y=t.buttonType.getOr(t.primary?"primary":"secondary"),S={...t,name:(l=t.name)!==null&&l!==void 0?l:"",primary:y==="primary",tooltip:t.tooltip,enabled:(d=t.enabled)!==null&&d!==void 0?d:!1,borderless:!1},k=S.tooltip.or(t.text).map(ye=>({"aria-label":s.translate(ye)})).getOr({}),O=qE(y??"secondary"),N=t.icon.isSome()&&t.text.isSome(),V={tag:"button",classes:[...O.concat(t.icon.isSome()?["tox-button--icon"]:[]),...t.active?["tox-button--enabled"]:[],...N?["tox-button--icon-and-text"]:[]],attributes:{...k,...et(c)?{"data-mce-name":c}:{}}},z=[],X=s.translate(t.text.getOr("")),ne=Nr(X),ae=[...t1([g.map(ye=>ye.asSpec())]),...t.text.isSome()?[ne]:[]],ve=S2(S,A.some(h),z,V,ae,t.tooltip,s);return Xc.sketch(ve)},XE=(t,s,c)=>{if(KE(t,s)){const l=()=>h,d=t,g={...t,type:"menubutton",search:A.none(),onSetup:y=>(y.setEnabled(t.enabled),ee),fetch:D3(d.items,l,c)},h=us(ry(g,"tox-tbtn",c,A.none(),!0,t.text.or(t.tooltip).getOrUndefined()));return h.asSpec()}else if(YE(t,s)){const l=xm(t.name,s),d={...t,context:s==="cancel"?"any":t.context,borderless:!1};return E5(d,l,c.shared.providers,[])}else{if(wz(t,s))return L3(t,c.shared.providers,t.text.or(t.tooltip).getOrUndefined());throw console.error("Unknown footer button type: ",s),new Error("Unknown footer button type")}},F3=(t,s)=>{const c=xm(t.name,"custom");return $B(A.none(),Cs.parts.field({factory:Xc,...T5(t,A.some(c),s,[IE(""),Pd.self()])}))},k5={type:"separator"},H3=t=>({type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:ee}),V3=(t,s)=>({type:"menuitem",value:s,text:t,meta:{attach:void 0},onAction:ee}),Sz=t=>je(t,H3),_5=(t,s)=>uo(s,c=>c.type===t),A5=(t,s)=>Sz(_5(t,s)),xz=t=>A5("header",t.targets),z3=t=>A5("anchor",t.targets),Tz=t=>A.from(t.anchorTop).map(s=>V3("<top>",s)).toArray(),Ez=t=>A.from(t.anchorBottom).map(s=>V3("<bottom>",s)).toArray(),O5=t=>je(t,s=>V3(s,s)),D5=t=>Go(t,(s,c)=>s.length===0||c.length===0?s.concat(c):s.concat(k5,c),[]),U3=(t,s)=>{const c=t.toLowerCase();return uo(s,l=>{var d;const g=l.meta!==void 0&&l.meta.text!==void 0?l.meta.text:l.text,h=(d=l.value)!==null&&d!==void 0?d:"";return kr(g.toLowerCase(),c)||kr(h.toLowerCase(),c)})},kz=(t,s,c)=>{var l,d;const g=Ut.getValue(s),h=(d=(l=g==null?void 0:g.meta)===null||l===void 0?void 0:l.text)!==null&&d!==void 0?d:g.value;return c.getLinkInformation().fold(()=>[],S=>{const k=U3(h,O5(c.getHistory(t)));return t==="file"?D5([k,U3(h,xz(S)),U3(h,Rn([Tz(S),z3(S),Ez(S)]))]):k})},R5=Qt("aria-invalid"),_z=(t,s,c,l)=>{const d=s.shared.providers,g=ve=>{const ye=Ut.getValue(ve);c.addToHistory(ye.value,t.filetype)},h={...l.map(ve=>({initialData:ve})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":R5,type:"url"},minChars:0,responseTime:0,fetch:ve=>{const ye=kz(t.filetype,ve,c),$e=a1(ye,hm.BUBBLE_TO_SANDBOX,s,{isHorizontalMenu:!1,search:A.none()});return Cl.pure($e)},getHotspot:ve=>X.getOpt(ve),onSetValue:(ve,ye)=>{ve.hasConfigured(mg)&&mg.run(ve).get(ee)},typeaheadBehaviours:vt([...c.getValidationHandler().map(ve=>mg.config({getRoot:ye=>na(ye.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(ye,$e)=>{O.getOpt(ye).each(Le=>{Ve(Le.element,"title",d.translate($e))})}},validator:{validate:ye=>{const $e=Ut.getValue(ye);return x5.nu(Le=>{ve({type:t.filetype,url:$e.value},kt=>{if(kt.status==="invalid"){const Kt=ao.error(kt.message);Le(Kt)}else{const Kt=ao.value(kt.message);Le(Kt)}})})},validateOnLoad:!1}})).toArray(),$n.config({disabled:()=>!t.enabled||d.checkUiComponentContext(t.context).shouldDisable}),hr.config({}),oo("urlinput-events",[Ye(gd(),ve=>{const ye=Lu(ve.element),$e=ye.trim();$e!==ye&&Qg(ve.element,$e),t.filetype==="file"&&ln(ve,$i,{name:t.name})}),Ye(tm(),ve=>{ln(ve,$i,{name:t.name}),g(ve)}),Ye(O1(),ve=>{ln(ve,$i,{name:t.name}),g(ve)})])]),eventOrder:{[gd()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:ve=>ve.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:s.shared.getSink,parts:{menu:$w(!1,1,"normal")},onExecute:(ve,ye,$e)=>{ln(ye,r2,{})},onItemExecute:(ve,ye,$e,Le)=>{g(ve),ln(ve,$i,{name:t.name})}},y=Cs.parts.field({...h,factory:C5}),S=t.label.map(ve=>kh(ve,d)),O=us(((ve,ye,$e=ve,Le=ve)=>zu($e,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+ve],attributes:{title:d.translate(Le),"aria-live":"polite",...ye.fold(()=>({}),kt=>({id:kt}))}},d.icons))("invalid",A.some(R5),"warning")),N=us({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[O.asSpec()]}),V=c.getUrlPicker(t.filetype),z=Qt("browser.url.event"),X=us({dom:{tag:"div",classes:["tox-control-wrap"]},components:[y,N.asSpec()],behaviours:vt([$n.config({disabled:()=>!t.enabled||d.checkUiComponentContext(t.context).shouldDisable})])}),ne=us(E5({context:t.context,name:t.name,icon:A.some("browse"),text:t.picker_text.or(t.label).getOr(""),enabled:t.enabled,primary:!1,buttonType:A.none(),borderless:!0},ve=>Eo(ve,z),d,[],["tox-browse-url"])),Ce=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:Rn([[X.asSpec()],V.map(()=>ne.asSpec()).toArray()])}),ae=ve=>{$o.getCurrent(ve).each(ye=>{const $e=Ut.getValue(ye),Le={fieldname:t.name,...$e};V.each(kt=>{kt(Le).get(Kt=>{Ut.setValue(ye,Kt),ln(ve,$i,{name:t.name})})})})};return Cs.sketch({dom:CH(),components:S.toArray().concat([Ce()]),fieldBehaviours:vt([$n.config({disabled:()=>!t.enabled||d.checkUiComponentContext(t.context).shouldDisable,onDisabled:ve=>{Cs.getField(ve).each($n.disable),ne.getOpt(ve).each($n.disable)},onEnabled:ve=>{Cs.getField(ve).each($n.enable),ne.getOpt(ve).each($n.enable)}}),pc(()=>d.checkUiComponentContext(t.context)),oo("url-input-events",[Ye(z,ae)])])})},M5=(t,s)=>{const c=L4(t.icon,s.icons);return rf.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${t.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:t.url?void 0:c},components:t.url?[Xc.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:c,attributes:{title:s.translate(t.iconTooltip)}},action:l=>ln(l,dg,{name:"alert-banner",value:t.url}),buttonBehaviours:vt([ZN()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:s.translate(t.text)}}]})},af=(t,s)=>{t.dom.checked=s},W3=t=>t.dom.checked,Az=(t,s,c)=>{const l=S=>(S.element.dom.click(),A.some(!0)),d=Cs.parts.field({factory:{sketch:xt},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:vt([Pd.self(),$n.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable,onDisabled:S=>{na(S.element).each(k=>hc(k,"tox-checkbox--disabled"))},onEnabled:S=>{na(S.element).each(k=>Ts(k,"tox-checkbox--disabled"))}}),hr.config({}),Vn.config({}),R$(c,W3,af),En.config({mode:"special",onEnter:l,onSpace:l,stopSpaceKeyup:!0}),oo("checkbox-events",[Ye(tm(),(S,k)=>{ln(S,$i,{name:t.name})})])])}),g=Cs.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[Nr(s.translate(t.label))],behaviours:vt([J0.config({})])}),h=S=>zu(S==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+S]},s.icons),y=us({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[h("checked"),h("unchecked")]});return Cs.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[d,y.asSpec(),g],fieldBehaviours:vt([$n.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable}),pc(()=>s.checkUiComponentContext(t.context))])})},Oz=(t,s)=>{const c=["tox-form__group",...t.stretched?["tox-form__group--stretched"]:[]],l=oo("htmlpanel",[mr(d=>{t.onInit(d.element.dom)})]);return t.presets==="presentation"?rf.sketch({dom:{tag:"div",classes:c,innerHtml:t.html},containerBehaviours:vt([ec.config({...s.tooltips.getConfig({tooltipText:"",onShow:d=>{gr(d.element,"[data-mce-tooltip]:hover").orThunk(()=>bl(d.element)).each(g=>{Hn(g,"data-mce-tooltip").each(h=>{ec.setComponents(d,s.tooltips.getComponents({tooltipText:h}))})})}}),mode:"children-normal",anchor:d=>({type:"node",node:gr(d.element,"[data-mce-tooltip]:hover").orThunk(()=>bl(d.element).filter(g=>Hn(g,"data-mce-tooltip").isSome())),root:d.element,layouts:{onLtr:W([Ec,ys,Hc,Pa,Vc,zc]),onRtl:W([Ec,ys,Hc,Pa,Vc,zc])},bubble:Fu(0,-2,{})})}),l])}):rf.sketch({dom:{tag:"div",classes:c,innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:vt([hr.config({}),Vn.config({}),l])})},pa=t=>(s,c,l,d,g)=>pt(c,"name").fold(()=>t(c,d,A.none(),g),h=>s.field(h,t(c,d,pt(l,h),g))),Dz=t=>(s,c,l,d,g)=>{const h=Hs(c,{source:"dynamic"});return pa(t)(s,h,l,d,g)},Rz={bar:pa((t,s)=>pH(t,s.shared)),collection:pa((t,s,c)=>wH(t,s.shared.providers,c)),alertbanner:pa((t,s)=>M5(t,s.shared.providers)),input:pa((t,s,c)=>r5(t,s.shared.providers,c)),textarea:pa((t,s,c)=>c5(t,s.shared.providers,c)),label:pa((t,s,c,l)=>y3(t,s.shared,l)),iframe:Dz((t,s,c)=>kV(t,s.shared.providers,c)),button:pa((t,s)=>F3(t,s.shared.providers)),checkbox:pa((t,s,c)=>Az(t,s.shared.providers,c)),colorinput:pa((t,s,c)=>TH(t,s.shared,s.colorinput,c)),colorpicker:pa((t,s,c)=>pV(t,s.shared.providers,c)),dropzone:pa((t,s,c)=>$$(t,s.shared.providers,c)),grid:pa((t,s)=>vV(t,s.shared)),listbox:pa((t,s,c)=>BV(t,s,c)),selectbox:pa((t,s,c)=>IV(t,s.shared.providers,c)),sizeinput:pa((t,s)=>UV(t,s.shared.providers)),slider:pa((t,s,c)=>WV(t,s.shared.providers,c)),urlinput:pa((t,s,c)=>_z(t,s,s.urlinput,c)),customeditor:pa(LE),htmlpanel:pa((t,s)=>Oz(t,s.shared.providers)),imagepreview:pa((t,s,c)=>AV(t,c)),table:pa((t,s)=>ZV(t,s.shared.providers)),tree:pa((t,s)=>lz(t,s)),panel:pa((t,s)=>Q$(t,s))},N5={field:(t,s)=>s,record:W([])},Z3=(t,s,c,l,d)=>{const g=Hs(l,{shared:{interpreter:h=>P5(t,h,c,g,d)}});return P5(t,s,c,g,d)},P5=(t,s,c,l,d)=>pt(Rz,s.type).fold(()=>(console.error(`Unknown factory type "${s.type}", defaulting to container: `,s),s),g=>g(t,s,c,l,d)),Mz=(t,s,c,l)=>P5(N5,t,s,c,l),Ac="layout-inset",x2=t=>t.x,B5=(t,s)=>t.x+t.width/2-s.width/2,cy=(t,s)=>t.x+t.width-s.width,j3=t=>t.y,G3=(t,s)=>t.y+t.height-s.height,$5=(t,s)=>t.y+t.height/2-s.height/2,JE=(t,s,c)=>za(cy(t,s),G3(t,s),c.insetSouthwest(),Wv(),"southwest",Ua(t,{right:0,bottom:3}),Ac),QE=(t,s,c)=>za(x2(t),G3(t,s),c.insetSoutheast(),fC(),"southeast",Ua(t,{left:1,bottom:3}),Ac),T2=(t,s,c)=>za(cy(t,s),j3(t),c.insetNorthwest(),mC(),"northwest",Ua(t,{right:0,top:2}),Ac),E2=(t,s,c)=>za(x2(t),j3(t),c.insetNortheast(),Uv(),"northeast",Ua(t,{left:1,top:2}),Ac),Tm=(t,s,c)=>za(B5(t,s),j3(t),c.insetNorth(),en(),"north",Ua(t,{top:2}),Ac),ay=(t,s,c)=>za(B5(t,s),G3(t,s),c.insetSouth(),G1(),"south",Ua(t,{bottom:3}),Ac),k2=(t,s,c)=>za(cy(t,s),$5(t,s),c.insetEast(),FS(),"east",Ua(t,{right:0}),Ac),q3=(t,s,c)=>za(x2(t),$5(t,s),c.insetWest(),gC(),"west",Ua(t,{left:1}),Ac),I5=t=>{switch(t){case"north":return Tm;case"northeast":return E2;case"northwest":return T2;case"south":return ay;case"southeast":return QE;case"southwest":return JE;case"east":return k2;case"west":return q3}},L5=(t,s,c,l,d)=>SC(l).map(I5).getOr(Tm)(t,s,c,l,d),F5=t=>{switch(t){case"north":return ay;case"northeast":return QE;case"northwest":return JE;case"south":return Tm;case"southeast":return E2;case"southwest":return T2;case"east":return q3;case"west":return k2}},Nz=(t,s,c,l,d)=>SC(l).map(F5).getOr(Tm)(t,s,c,l,d),_2={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},H5=(t,s,c)=>{const d={maxHeightFunction:jf()},g=()=>({type:"node",root:sa(Dr(t())),node:A.from(t()),bubble:Fu(12,12,_2),layouts:{onRtl:()=>[E2],onLtr:()=>[T2]},overrides:d}),h=()=>({type:"hotspot",hotspot:s(),bubble:Fu(-12,12,_2),layouts:{onRtl:()=>[Hc,Vc,Ec],onLtr:()=>[Vc,Hc,Ec]},overrides:d});return()=>c()?g():h()},MG=(t,s,c,l)=>{const g={maxHeightFunction:jf()},h=()=>({type:"node",root:sa(Dr(s())),node:A.from(s()),bubble:Fu(12,12,_2),layouts:{onRtl:()=>[Tm],onLtr:()=>[Tm]},overrides:g}),y=()=>t?{type:"node",root:sa(Dr(s())),node:A.from(s()),bubble:Fu(0,-_l(s()),_2),layouts:{onRtl:()=>[ys],onLtr:()=>[ys]},overrides:g}:{type:"hotspot",hotspot:c(),bubble:Fu(0,0,_2),layouts:{onRtl:()=>[ys],onLtr:()=>[ys]},overrides:g};return()=>l()?h():y()},NG=(t,s,c)=>{const l=()=>({type:"node",root:sa(Dr(t())),node:A.from(t()),layouts:{onRtl:()=>[Tm],onLtr:()=>[Tm]}}),d=()=>({type:"hotspot",hotspot:s(),layouts:{onRtl:()=>[Ec],onLtr:()=>[Ec]}});return()=>c()?l():d()},Pz=(t,s)=>()=>({type:"selection",root:s(),getSelection:()=>{const c=t.selection.getRng(),l=t.model.table.getSelectedCells();if(l.length>1){const d=l[0],g=l[l.length-1],h={firstCell:ge.fromDom(d),lastCell:ge.fromDom(g)};return A.some(h)}return A.some(kp.range(ge.fromDom(c.startContainer),c.startOffset,ge.fromDom(c.endContainer),c.endOffset))}}),Bz=t=>s=>({type:"node",root:t(),node:s}),$z=(t,s,c,l)=>{const d=fm(t),g=()=>ge.fromDom(t.getBody()),h=()=>ge.fromDom(t.getContentAreaContainer()),y=()=>d||!l();return{inlineDialog:H5(h,s,y),inlineBottomDialog:MG(t.inline,h,c,y),banner:NG(h,s,y),cursor:Pz(t,g),node:Bz(g)}},V5=t=>(s,c)=>{aB(t)(s,c)},K3=t=>()=>tB(t),Iz=t=>s=>lE(t,s),Lz=t=>s=>eB(t,s),z5=t=>({colorPicker:V5(t),hasCustomColors:K3(t),getColors:Iz(t),getColorCols:Lz(t)}),Fz=t=>()=>yT(t),Hz=t=>({isDraggableModal:Fz(t)}),Vz=t=>{const s=hn(S4(t)?"bottom":"top");return{isPositionedAtTop:()=>s.get()==="top",getDockingMode:s.get,setDockingMode:s.set}},U5=t=>Vr(t,"items"),ek=t=>Vr(t,"format"),Y3=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],zz=t=>yo(t,"items"),Uz=t=>yo(t,"block"),Wz=t=>yo(t,"inline"),Zz=t=>yo(t,"selector"),X3=t=>Go(t,(s,c)=>{if(zz(c)){const l=X3(c.items);return{customFormats:s.customFormats.concat(l.customFormats),formats:s.formats.concat([{title:c.title,items:l.formats}])}}else if(Wz(c)||Uz(c)||Zz(c)){const d=`custom-${Dt(c.name)?c.name:c.title.toLowerCase()}`;return{customFormats:s.customFormats.concat([{name:d,format:c}]),formats:s.formats.concat([{title:c.title,format:d,icon:c.icon}])}}else return{...s,formats:s.formats.concat(c)}},{customFormats:[],formats:[]}),jz=(t,s)=>{const c=X3(s),l=d=>{gt(d,g=>{t.formatter.has(g.name)||t.formatter.register(g.name,g.format)})};return t.formatter?l(c.customFormats):t.on("init",()=>{l(c.customFormats)}),c.formats},A2=t=>d4(t).map(s=>{const c=jz(t,s);return fN(t)?Y3.concat(c):c}).getOr(Y3),Gz=t=>{const s=mn(t);return s.length===1&&vo(s,"title")},O2=(t,s,c)=>({...t,type:"formatter",isSelected:s(t.format),getStylePreview:c(t.format)}),W5=(t,s,c,l)=>{const d=S=>O2(S,c,l),g=S=>{const k=y(S.items);return{...S,type:"submenu",getStyleItems:W(k)}},h=S=>{const k=Dt(S.name)?S.name:Qt(S.title),O=`custom-${k}`,N={...S,type:"formatter",format:O,isSelected:c(O),getStylePreview:l(O)};return t.formatter.register(k,N),N},y=S=>je(S,k=>U5(k)?g(k):ek(k)?d(k):Gz(k)?{...k,type:"separator"}:h(k));return y(s)},J3=t=>{const s=y=>()=>t.formatter.match(y),c=y=>()=>{const S=t.formatter.get(y);return S!==void 0?A.some({tag:S.length>0&&(S[0].inline||S[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(y))}):A.none()},l=hn([]),d=hn([]),g=hn(!1);return t.on("PreInit",y=>{const S=A2(t),k=W5(t,S,s,c);l.set(k)}),t.on("addStyleModifications",y=>{const S=W5(t,y.items,s,c);d.set(S),g.set(y.replace)}),{getData:()=>{const y=g.get()?[]:l.get(),S=d.get();return y.concat(S)}}},D2=t=>{let l=0;const d=()=>l>0,g=y=>[{dom:{tag:"div",classes:["tox-tooltip__body"]},components:[Nr(y.tooltipText)]}];return{getConfig:y=>({delayForShow:()=>d()?60:300,delayForHide:W(300),exclusive:!0,lazySink:t,tooltipDom:{tag:"div",classes:["tox-tooltip","tox-tooltip--up"]},tooltipComponents:g(y),onShow:(S,k)=>{l++,y.onShow&&y.onShow(S,k)},onHide:(S,k)=>{l--,y.onHide&&y.onHide(S,k)},onSetup:y.onSetup}),getComponents:g}},Z5=t=>et(t)&&t.nodeType===1,qz=Dh.trim,Q3=t=>s=>!!(Z5(s)&&(s.contentEditable===t||s.getAttribute("data-mce-contenteditable")===t)),j5=Q3("true"),G5=Q3("false"),q5=(t,s,c,l,d)=>({type:t,title:s,url:c,level:l,attach:d}),eD=t=>{let s=t;for(;s=s.parentNode;){const c=s.contentEditable;if(c&&c!=="inherit")return j5(s)}return!1},tk=(t,s)=>je(Ba(ge.fromDom(s),t),c=>c.dom),K5=t=>t.innerText||t.textContent,Kz=t=>t.id?t.id:Qt("h"),ly=t=>t&&t.nodeName==="A"&&(t.id||t.name)!==void 0,Y5=t=>ly(t)&&nD(t),tD=t=>t&&/^(H[1-6])$/.test(t.nodeName),nD=t=>eD(t)&&!G5(t),oD=t=>tD(t)&&nD(t),sD=t=>tD(t)?parseInt(t.nodeName.substr(1),10):0,Yz=t=>{var s;const c=Kz(t),l=()=>{t.id=c};return q5("header",(s=K5(t))!==null&&s!==void 0?s:"","#"+c,sD(t),l)},Xz=t=>{const s=t.id||t.name,c=K5(t);return q5("anchor",c||"#"+s,"#"+s,0,ee)},Jz=t=>je(uo(t,oD),Yz),rD=t=>je(uo(t,Y5),Xz),Qz=t=>tk("h1,h2,h3,h4,h5,h6,a:not([href])",t),e9=t=>qz(t.title).length>0,t9={find:t=>{const s=Qz(t);return uo(Jz(s).concat(rD(s)),e9)}},nk="tinymce-url-history",X5=5,J5=t=>Dt(t)&&/^https?/.test(t),Q5=t=>xn(t)&&t.length<=X5&&zn(t,J5),eI=t=>Yt(t)&&Vt(t,s=>!Q5(s)).isNone(),iy=()=>{const t=Ub.getItem(nk);if(t===null)return{};let s;try{s=JSON.parse(t)}catch(c){if(c instanceof SyntaxError)return console.log("Local storage "+nk+" was not valid JSON",c),{};throw c}return eI(s)?s:(console.log("Local storage "+nk+" was not valid format",s),{})},n9=t=>{if(!eI(t))throw new Error(`Bad format for history:
`+JSON.stringify(t));Ub.setItem(nk,JSON.stringify(t))},o9=t=>{const s=iy();return pt(s,t).getOr([])},cD=(t,s)=>{if(!J5(t))return;const c=iy(),l=pt(c,s).getOr([]),d=uo(l,g=>g!==t);c[s]=[t].concat(d).slice(0,X5),n9(c)},aD=t=>!!t,s9=t=>jn(Dh.makeMap(t,/[, ]/),aD),lD=t=>A.from(h4(t)),r9=t=>{const s=A.from(vT(t)).filter(aD).map(s9);return lD(t).fold(no,c=>s.fold(Mt,l=>mn(l).length>0?l:!1))},c9=(t,s)=>{const c=r9(t);return Mn(c)?c?lD(t):A.none():c[s]?lD(t):A.none()},a9=(t,s)=>c9(t,s).map(c=>l=>Cl.nu(d=>{const g=(y,S)=>{if(!Dt(y))throw new Error("Expected value to be string");if(S!==void 0&&!Yt(S))throw new Error("Expected meta to be a object");d({value:y,meta:S})},h={filetype:s,fieldname:l.fieldname,...A.from(l.meta).getOr({})};c.call(t,g,l.value,h)})),tI=t=>A.from(t).filter(Dt).getOrUndefined(),l9=t=>p4(t)?A.some({targets:t9.find(t.getBody()),anchorTop:tI(b4(t)),anchorBottom:tI(wN(t))}):A.none(),i9=t=>A.from(yN(t)),u9=t=>({getHistory:o9,addToHistory:cD,getLinkInformation:()=>l9(t),getValidationHandler:()=>i9(t),getUrlPicker:s=>a9(t,s)}),BG=(t,s,c,l)=>{const d=hn(!1),g=Vz(s),h={icons:()=>s.ui.registry.getAll().icons,menuItems:()=>s.ui.registry.getAll().menuItems,translate:Od.translate,isDisabled:()=>!s.ui.isEnabled(),getOption:s.options.get,tooltips:D2(t.dialog),checkUiComponentContext:ae=>{const[ve,ye=""]=ae.split(":"),$e=s.ui.registry.getAll().contexts,Le=pt($e,ve).fold(()=>pt($e,"mode").map(kt=>kt("design")).getOr(!1),kt=>ye.charAt(0)==="!"?!kt(ye.slice(1)):kt(ye));return{contextType:ve,shouldDisable:!Le}}},y=u9(s),S=J3(s),k=z5(s),O=Hz(s),N=()=>d.get(),V=ae=>d.set(ae),z={shared:{providers:h,anchors:$z(s,c,l,g.isPositionedAtTop),header:g},urlinput:y,styles:S,colorinput:k,dialog:O,isContextMenuOpen:N,setContextMenuState:V},X=ae=>A.none(),ne={...z,shared:{...z.shared,interpreter:ae=>Mz(ae,{},ne,X),getSink:t.popup}},Ce={...z,shared:{...z.shared,interpreter:ae=>Mz(ae,{},Ce,X),getSink:t.dialog}};return{popup:ne,dialog:Ce}},d9=(t,s,c)=>{const l=(Ze,Jt)=>{gt([s,...c],Bt=>{Bt.broadcastEvent(Ze,Jt)})},d=(Ze,Jt)=>{gt([s,...c],Bt=>{Bt.broadcastOn([Ze],Jt)})},g=Ze=>d(Jm(),{target:Ze.target}),h=ri(),y=Pl(h,"touchstart",g),S=Pl(h,"touchmove",Ze=>l(c_(),Ze)),k=Pl(h,"touchend",Ze=>l(Y2(),Ze)),O=Pl(h,"mousedown",g),N=Pl(h,"mouseup",Ze=>{Ze.raw.button===0&&d(h0(),{target:Ze.target})}),V=Ze=>d(Jm(),{target:ge.fromDom(Ze.target)}),z=Ze=>{Ze.button===0&&d(h0(),{target:ge.fromDom(Ze.target)})},X=()=>{gt(t.editorManager.get(),Ze=>{t!==Ze&&Ze.dispatch("DismissPopups",{relatedTarget:t})})},ne=Ze=>l(Rf(),QS(Ze)),Ce=Ze=>{d(eg(),{}),l($g(),QS(Ze))},ae=Dr(ge.fromDom(t.getElement())),ve=xC(ae,"scroll",Ze=>{requestAnimationFrame(()=>{const Jt=t.getContainer();if(Jt!=null){const sn=Gp(t,s.element).map(Do=>[Do.element,...Do.others]).getOr([]);Ms(sn,Do=>Ko(Do,Ze.target))&&(t.dispatch("ElementScroll",{target:Ze.target.dom}),l(Ny(),Ze))}})}),ye=()=>d(eg(),{}),$e=Ze=>{Ze.state&&d(Jm(),{target:ge.fromDom(t.getContainer())})},Le=Ze=>{d(Jm(),{target:ge.fromDom(Ze.relatedTarget.getContainer())})},kt=Ze=>t.dispatch("focusin",Ze),Kt=Ze=>t.dispatch("focusout",Ze);t.on("PostRender",()=>{t.on("click",V),t.on("tap",V),t.on("mouseup",z),t.on("mousedown",X),t.on("ScrollWindow",ne),t.on("ResizeWindow",Ce),t.on("ResizeEditor",ye),t.on("AfterProgressState",$e),t.on("DismissPopups",Le),gt([s,...c],Ze=>{Ze.element.dom.addEventListener("focusin",kt),Ze.element.dom.addEventListener("focusout",Kt)})}),t.on("remove",()=>{t.off("click",V),t.off("tap",V),t.off("mouseup",z),t.off("mousedown",X),t.off("ScrollWindow",ne),t.off("ResizeWindow",Ce),t.off("ResizeEditor",ye),t.off("AfterProgressState",$e),t.off("DismissPopups",Le),gt([s,...c],Ze=>{Ze.element.dom.removeEventListener("focusin",kt),Ze.element.dom.removeEventListener("focusout",Kt)}),O.unbind(),y.unbind(),S.unbind(),k.unbind(),N.unbind(),ve.unbind()}),t.on("detach",()=>{gt([s,...c],ih),gt([s,...c],Ze=>Ze.destroy())})},ba=aw,lf=jx,ok=W([Te("shell",!1),Ke("makeItem"),Te("setupItem",ee),au.field("listBehaviours",[eo])]),f9=Pi({name:"items",overrides:()=>({behaviours:vt([eo.config({})])})}),g9=W([f9]),h9=W("CustomList"),p9=(t,s,c,l)=>{const d=(y,S)=>{h(y).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},k=>{const O=eo.contents(k),N=S.length,V=N-O.length,z=V>0?ho(V,()=>t.makeItem()):[],X=O.slice(N);gt(X,Ce=>eo.remove(k,Ce)),gt(z,Ce=>eo.append(k,Ce));const ne=eo.contents(k);gt(ne,(Ce,ae)=>{t.setupItem(y,Ce,S[ae],ae)})})},g=t.shell?{behaviours:[eo.config({})],components:[]}:{behaviours:[],components:s},h=y=>t.shell?A.some(y):Vs(y,t,"items");return{uid:t.uid,dom:t.dom,components:g.components,behaviours:ga(t.listBehaviours,g.behaviours),apis:{setItems:d}}},nI=ja({name:h9(),configFields:ok(),partFields:g9(),factory:p9,apis:{setItems:(t,s,c)=>{t.setItems(s,c)}}}),uy=W([Ke("dom"),Te("shell",!0),fa("toolbarBehaviours",[eo])]),oI=W([Pi({name:"groups",overrides:()=>({behaviours:vt([eo.config({})])})})]),sI=(t,s,c,l)=>{const d=(y,S)=>{g(y).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},k=>{eo.set(k,S)})},g=y=>t.shell?A.some(y):Vs(y,t,"groups"),h=t.shell?{behaviours:[eo.config({})],components:[]}:{behaviours:[],components:s};return{uid:t.uid,dom:t.dom,components:h.components,behaviours:ga(t.toolbarBehaviours,h.behaviours),apis:{setGroups:d,refresh:ee},domModification:{attributes:{role:"group"}}}},uf=ja({name:"Toolbar",configFields:uy(),partFields:oI(),factory:sI,apis:{setGroups:(t,s,c)=>{t.setGroups(s,c)}}}),rI=ee,b9=no,cI=W([]);var v9=Object.freeze({__proto__:null,setup:rI,isDocked:b9,getBehaviours:cI});const Mh=W(Qt("toolbar-height-change")),df={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},dy="tox-tinymce--toolbar-sticky-on",R2="tox-tinymce--toolbar-sticky-off",aI=(t,s)=>{const c=oc(s),d=Rc(s).dom.innerHeight,g=Oa(c),h=ge.fromDom(t.elm),y=xu(h),S=vs(h),k=y.y,O=k+S,N=Ws(s),V=vs(s),z=N.top,X=z+V,ne=Math.abs(z-g.top)<2,Ce=Math.abs(X-(g.top+d))<2;if(ne&&k<X)ld(g.left,k-V,c);else if(Ce&&O>z){const ae=k-d+S+V;ld(g.left,ae,c)}},M2=(t,s)=>vo(er.getModes(t),s),sk=t=>{const s=l=>_l(l)+(parseInt(fs(l,"margin-top"),10)||0)+(parseInt(fs(l,"margin-bottom"),10)||0),c=t.element;na(c).each(l=>{const d="padding-"+er.getModes(t)[0];if(er.isDocked(t)){const g=G(l);qe(c,"width",g+"px"),qe(l,d,s(c)+"px")}else Gn(c,"width"),Gn(l,d)})},y9=(t,s)=>{s?(Ts(t,df.fadeOutClass),op(t,[df.transitionClass,df.fadeInClass])):(Ts(t,df.fadeInClass),op(t,[df.fadeOutClass,df.transitionClass]))},lI=(t,s)=>{const c=ge.fromDom(t.getContainer());s?(hc(c,dy),Ts(c,R2)):(hc(c,R2),Ts(c,dy))},C9=(t,s)=>{const c=oc(s);im(c).filter(l=>!Ko(s,l)).filter(l=>Ko(l,ge.fromDom(c.dom.body))||nc(t,l)).each(()=>su(s))},w9=(t,s)=>bl(t).orThunk(()=>s().toOptional().bind(c=>bl(c.element))),S9=(t,s,c)=>{t.inline||(s.header.isPositionedAtTop()||t.on("ResizeEditor",()=>{c().each(er.reset)}),t.on("ResizeWindow ResizeEditor",()=>{c().each(sk)}),t.on("SkinLoaded",()=>{c().each(l=>{er.isDocked(l)?er.reset(l):er.refresh(l)})}),t.on("FullscreenStateChanged",()=>{c().each(er.reset)})),t.on("AfterScrollIntoView",l=>{c().each(d=>{er.refresh(d);const g=d.element;FA(g)&&aI(l,g)})}),t.on("PostRender",()=>{lI(t,!1)})},x9=t=>t().map(er.isDocked).getOr(!1),my=()=>[mi.config({channels:{[Mh()]:{onReceive:sk}}})],fy=(t,s)=>{const c=Yo(),l=s.getSink,d=y=>{l().each(S=>y(S.element))},g=y=>{t.inline||sk(y),lI(t,er.isDocked(y)),y.getSystem().broadcastOn([eg()],{}),l().each(S=>S.getSystem().broadcastOn([eg()],{}))},h=t.inline?[]:my();return[Vn.config({}),er.config({contextual:{lazyContext:y=>{const S=_l(y.element),k=t.inline?t.getContentAreaContainer():t.getContainer();return A.from(k).map(O=>{const N=ir(ge.fromDom(O));return Gp(t,y.element).fold(()=>{const z=N.height-S,X=N.y+(M2(y,"top")?0:S);return lr(N.x,X,N.width,z)},z=>{const X=jl(N,qp(z)),ne=M2(y,"top")?X.y:X.y+S;return lr(X.x,ne,X.width,X.height-S)})})},onShow:()=>{d(y=>y9(y,!0))},onShown:y=>{d(S=>vd(S,[df.transitionClass,df.fadeInClass])),c.get().each(S=>{C9(y.element,S),c.clear()})},onHide:y=>{w9(y.element,l).fold(c.clear,c.set),d(S=>y9(S,!1))},onHidden:()=>{d(y=>vd(y,[df.transitionClass]))},...df},lazyViewport:y=>Gp(t,y.element).fold(()=>{const k=cc(),O=bN(t),N=k.y+(M2(y,"top")?O:0),V=k.height-(M2(y,"bottom")?O:0);return{bounds:lr(k.x,N,k.width,V),optScrollEnv:A.none()}},k=>({bounds:qp(k),optScrollEnv:A.some({currentScrollTop:k.element.dom.scrollTop,scrollElmTop:Ws(k.element).top})})),modes:[s.header.getDockingMode()],onDocked:g,onUndocked:g}),...h]};var iD=Object.freeze({__proto__:null,setup:S9,isDocked:x9,getBehaviours:fy});const T9=t=>{const s=t.editor,c=t.sticky?fy:cI;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:vt(c(s,t.sharedBackstage))}},E9=An([_c,as("items",T1([E1([K4,Yl("items",$t)]),$t]))].concat($b)),uD=t=>xr("GroupToolbarButton",E9,t),k9=[xc("text"),xc("tooltip"),xc("icon"),Rs("search",!1,T1([Ei,An([xc("placeholder")])],t=>Mn(t)?t?A.some({placeholder:A.none()}):A.none():A.some(t))),li("fetch"),Js("onSetup",()=>ee),Qr("context","mode:design")],gy=An([_c,...k9]),dD=t=>xr("menubutton",gy,t),_9=An([_c,Lw,Uu,Eh,yP,pP,Bb,qc("presets","normal",["normal","color","listpreview"]),CP(1),j0,bP,Qr("context","mode:design")]),A9=t=>xr("SplitButton",_9,t);var mD=pi({factory:(t,s)=>{const c=(d,g)=>{const h=je(g,y=>{const S={type:"menubutton",text:y.text,fetch:O=>{O(y.getItems())},context:"any"},k=dD(S).mapError(O=>Fm(O)).getOrDie();return ry(k,"tox-mbtn",s.backstage,A.some("menuitem"))});eo.set(d,h)},l={focus:En.focusIn,setMenus:c};return{uid:t.uid,dom:t.dom,components:[],behaviours:vt([eo.config({}),oo("menubar-events",[mr(d=>{t.onSetup(d)}),Ye(Dl(),(d,g)=>{gr(d.element,".tox-mbtn--active").each(h=>{am(g.event.target,".tox-mbtn").each(y=>{Ko(h,y)||d.getSystem().getByDom(h).each(S=>{d.getSystem().getByDom(y).each(k=>{hu.expand(k),hu.close(S),Vn.focus(k)})})})})}),Ye(R1(),(d,g)=>{g.event.prevFocus.bind(h=>d.getSystem().getByDom(h).toOptional()).each(h=>{g.event.newFocus.bind(y=>d.getSystem().getByDom(y).toOptional()).each(y=>{hu.isOpen(h)&&(hu.expand(y),hu.close(h))})})})]),En.config({mode:"flow",selector:".tox-mbtn",onEscape:d=>(t.onEscape(d),A.some(!0))}),hr.config({})]),apis:l,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[Ke("dom"),Ke("uid"),Ke("onEscape"),Ke("backstage"),Te("onSetup",ee)],apis:{focus:(t,s)=>{t.focus(s)},setMenus:(t,s,c)=>{t.setMenus(s,c)}}});const O9="⚡️Upgrade",D9="https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_campaign=self_hosted_upgrade_promo&utm_source=tiny&utm_medium=referral",iI=t=>({uid:t.uid,dom:t.dom,components:[{dom:{tag:"a",attributes:{href:D9,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:O9}}]}),fD="container",gD=[fa("slotBehaviours",[])],uI=t=>"<alloy.field."+t+">",rk=t=>{const s=(()=>{const g=[];return{slot:(y,S)=>(g.push(y),k0(fD,uI(y),S)),record:W(g)}})(),c=t(s),l=s.record(),d=je(l,g=>ol({name:g,pname:uI(g)}));return yb(fD,gD,d,ck,c)},ck=(t,s)=>{const c=ne=>cw(t),l=(ne,Ce)=>Vs(ne,t,Ce),d=(ne,Ce)=>(ae,ve)=>Vs(ae,t,ve).map(ye=>ne(ye,ve)).getOr(Ce),g=ne=>(Ce,ae)=>{gt(ae,ve=>ne(Ce,ve))},h=(ne,Ce)=>nn(ne.element,"aria-hidden")!=="true",y=(ne,Ce)=>{if(!h(ne)){const ae=ne.element;Gn(ae,"display"),B(ae,"aria-hidden"),ln(ne,Xh(),{name:Ce,visible:!0})}},S=(ne,Ce)=>{if(h(ne)){const ae=ne.element;qe(ae,"display","none"),Ve(ae,"aria-hidden","true"),ln(ne,Xh(),{name:Ce,visible:!1})}},k=d(h,!1),O=d(S),N=g(O),V=ne=>N(ne,c()),z=d(y),X={getSlotNames:c,getSlot:l,isShowing:k,hideSlot:O,hideAllSlots:V,showSlot:z};return{uid:t.uid,dom:t.dom,components:s,behaviours:y0(t.slotBehaviours),apis:X}},Ll={...jn({getSlotNames:(t,s)=>t.getSlotNames(s),getSlot:(t,s,c)=>t.getSlot(s,c),isShowing:(t,s,c)=>t.isShowing(s,c),hideSlot:(t,s,c)=>t.hideSlot(s,c),hideAllSlots:(t,s)=>t.hideAllSlots(s),showSlot:(t,s,c)=>t.showSlot(s,c)},t=>Lv(t)),sketch:rk},M9=An([Uu,Lw,Js("onShow",ee),Js("onHide",ee),Bb]),N9=t=>xr("sidebar",M9,t),P9=t=>{const{sidebars:s}=t.ui.registry.getAll();gt(mn(s),c=>{const l=s[c],d=()=>br(A.from(t.queryCommandValue("ToggleSidebar")),c);t.ui.registry.addToggleButton(c,{icon:l.icon,tooltip:l.tooltip,onAction:g=>{t.execCommand("ToggleSidebar",!1,c),g.setActive(d())},onSetup:g=>{g.setActive(d());const h=()=>g.setActive(d());return t.on("ToggleSidebar",h),()=>{t.off("ToggleSidebar",h)}},context:"any"})})},hD=t=>({element:()=>t.element.dom}),B9=(t,s)=>{const c=je(mn(s),l=>{const d=s[l],g=dt(N9(d));return{name:l,getApi:hD,onSetup:g.onSetup,onShow:g.onShow,onHide:g.onHide}});return je(c,l=>{const d=hn(ee);return t.slot(l.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:q0.unnamedEvents([Qp(l,d),e1(l,d),Ye(Xh(),(g,h)=>{const y=h.event;Cn(c,k=>k.name===y.name).each(k=>{(y.visible?k.onShow:k.onHide)(k.getApi(g))})})])})})},pD=t=>Ll.sketch(s=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:B9(s,t),slotBehaviours:q0.unnamedEvents([mr(c=>Ll.hideAllSlots(c))])})),$9=(t,s,c)=>{$o.getCurrent(t).each(d=>{eo.set(d,[pD(s)]);const g=c==null?void 0:c.toLowerCase();Dt(g)&&yo(s,g)&&$o.getCurrent(d).each(h=>{Ll.showSlot(h,g),Ii.immediateGrow(d),Gn(d.element,"width"),hy(t.element,"region")})})},hy=(t,s)=>{Ve(t,"role",s)},I9=(t,s)=>{$o.getCurrent(t).each(l=>{$o.getCurrent(l).each(g=>{Ii.hasGrown(l)?Ll.isShowing(g,s)?(Ii.shrink(l),hy(t.element,"presentation")):(Ll.hideAllSlots(g),Ll.showSlot(g,s),hy(t.element,"region")):(Ll.hideAllSlots(g),Ll.showSlot(g,s),Ii.grow(l),hy(t.element,"region"))})})},L9=t=>$o.getCurrent(t).bind(c=>Ii.isGrowing(c)||Ii.hasGrown(c)?$o.getCurrent(c).bind(g=>Cn(Ll.getSlotNames(g),h=>Ll.isShowing(g,h))):A.none()),bD=Qt("FixSizeEvent"),vD=Qt("AutoSizeEvent"),F9=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:vt([hr.config({}),Vn.config({}),Ii.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:s=>{$o.getCurrent(s).each(Ll.hideAllSlots),Eo(s,vD)},onGrown:s=>{Eo(s,vD)},onStartGrow:s=>{ln(s,bD,{width:bs(s.element,"width").getOr("")})},onStartShrink:s=>{ln(s,bD,{width:G(s.element)+"px"})}}),eo.config({}),$o.config({find:s=>{const c=eo.contents(s);return qs(c)}})])}],behaviours:vt([Pd.childAt(0),oo("sidebar-sliding-events",[Ye(bD,(s,c)=>{qe(s.element,"width",c.event.width)}),Ye(vD,(s,c)=>{Gn(s.element,"width")})])])});var V9=Object.freeze({__proto__:null,block:(t,s,c,l)=>{Ve(t.element,"aria-busy",!0);const d=s.getRoot(t).getOr(t),g=vt([En.config({mode:"special",onTab:()=>A.some(!0),onShiftTab:()=>A.some(!0)}),Vn.config({})]),h=l(d,g),y=d.getSystem().build(h);eo.append(d,Oi(y)),y.hasConfigured(En)&&s.focus&&En.focusIn(y),c.isBlocked()||s.onBlock(t),c.blockWith(()=>eo.remove(d,y))},unblock:(t,s,c)=>{B(t.element,"aria-busy"),c.isBlocked()&&s.onUnblock(t),c.clear()},isBlocked:(t,s,c)=>c.isBlocked()}),dI=[Js("getRoot",A.none),Tc("focus",!0),Lo("onBlock"),Lo("onUnblock")],z9=Object.freeze({__proto__:null,init:()=>{const t=Sg(),s=c=>{t.set({destroy:c})};return hl({readState:t.isSet,blockWith:s,clear:t.clear,isBlocked:t.isSet})}});const mf=da({fields:dI,name:"blocking",apis:V9,state:z9}),U9=t=>(s,c)=>({dom:{tag:"div",attributes:{"aria-label":t.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:ef('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),mI=t=>$o.getCurrent(t).each(s=>su(s.element,!0)),fI=(t,s)=>{const c="tabindex",l=`data-mce-${c}`;A.from(t.iframeElement).map(ge.fromDom).each(d=>{s?(Hn(d,c).each(g=>Ve(d,l,g)),Ve(d,c,-1)):(B(d,c),Hn(d,l).each(g=>{Ve(d,c,g),B(d,l)}))})},W9=(t,s,c,l)=>{const d=s.element;if(fI(t,c),c)mf.block(s,U9(l)),Gn(d,"display"),B(d,"aria-hidden"),t.hasFocus()&&mI(s);else{const g=$o.getCurrent(s).exists(h=>Cp(h.element));mf.unblock(s),qe(d,"display","none"),Ve(d,"aria-hidden","true"),g&&t.focus()}},Z9=t=>({uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:vt([eo.config({}),mf.config({focus:!1}),$o.config({find:s=>qs(s.components())})]),components:[]}),j9=t=>t.type==="focusin",FG=t=>j9(t)?(t.composed?qs(t.composedPath()):A.from(t.target)).map(ge.fromDom).filter(xo).exists(c=>Nl(c,"mce-pastebin")):!1,HG=(t,s,c)=>{const l=hn(!1),d=Yo(),g=y=>{l.get()&&!FG(y)&&(y.preventDefault(),mI(s()),t.editorManager.setActive(t))};t.inline||t.on("PreInit",()=>{t.dom.bind(t.getWin(),"focusin",g),t.on("BeforeExecCommand",y=>{y.command.toLowerCase()==="mcefocus"&&y.value!==!0&&g(y)})});const h=y=>{y!==l.get()&&(l.set(y),W9(t,s(),y,c.providers),sE(t,y))};t.on("ProgressState",y=>{if(d.on(clearTimeout),Qn(y.time)){const S=_b.setEditorTimeout(t,()=>h(y.state),y.time);d.set(S)}else h(y.state),d.clear()})},gI=(t,s)=>Go(t,(d,g)=>s(g,d.len).fold(W(d),y=>({len:y.finish,list:d.list.concat([y])})),{len:0,list:[]}).list,ak=(t,s,c)=>({within:t,extra:s,withinWidth:c}),hI=(t,s,c)=>{const l=gI(t,(y,S)=>{const k=c(y);return A.some({element:y,start:S,finish:S+k,width:k})}),d=uo(l,y=>y.finish<=s),g=ds(d,(y,S)=>y+S.width,0),h=l.slice(d.length);return{within:d,extra:h,withinWidth:g}},lk=t=>je(t,s=>s.element),qu=(t,s,c)=>{const l=lk(t.concat(s));return ak(l,[],c)},G9=(t,s,c,l)=>{const d=lk(t).concat([c]);return ak(d,lk(s),l)},pI=(t,s,c)=>ak(lk(t),[],c),bI=(t,s,c)=>{const l=hI(s,t,c);return l.extra.length===0?A.some(l):A.none()},q9=(t,s,c,l)=>{const d=bI(t,s,c).getOrThunk(()=>hI(s,t-c(l),c)),g=d.within,h=d.extra,y=d.withinWidth;return h.length===1&&h[0].width<=c(l)?qu(g,h,y):h.length>=1?G9(g,h,l,y):pI(g,h,y)},py=(t,s)=>{const c=je(s,l=>Oi(l));uf.setGroups(t,c)},K9=t=>tn(t,s=>bl(s.element).bind(c=>s.getSystem().getByDom(c).toOptional())),N2=(t,s,c)=>{const l=s.builtGroups.get();if(l.length===0)return;const d=Wt(t,s,"primary"),g=lc.getCoupled(t,"overflowGroup");qe(d.element,"visibility","hidden");const h=l.concat([g]),y=K9(h);c([]),py(d,h);const S=G(d.element),k=q9(S,s.builtGroups.get(),O=>Math.ceil(O.element.dom.getBoundingClientRect().width),g);k.extra.length===0?(eo.remove(d,g),c([])):(py(d,k.within),c(k.extra)),Gn(d.element,"visibility"),ka(d.element),y.each(Vn.focus)},vI=W([fa("splitToolbarBehaviours",[lc]),cs("builtGroups",()=>hn([]))]),ik=W([Zm(["overflowToggledClass"]),Xi("getOverflowBounds"),Ke("lazySink"),cs("overflowGroups",()=>hn([])),Lo("onOpened"),Lo("onClosed")].concat(vI())),Y9=W([ol({factory:uf,schema:uy(),name:"primary"}),lu({schema:uy(),name:"overflow"}),lu({name:"overflow-button"}),lu({name:"overflow-group"})]),yD=W((t,s)=>{ke(t,Math.floor(s))}),Bd=W([Zm(["toggledClass"]),Ke("lazySink"),li("fetch"),Xi("getBounds"),Lc("fireDismissalEventInstead",[Te("event",Ai())]),Gf(),Lo("onToggled")]),X9=W([lu({name:"button",overrides:t=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:vt([bo.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:t.onToggled})])})}),lu({factory:uf,schema:uy(),name:"toolbar",overrides:t=>({toolbarBehaviours:vt([En.config({mode:"cyclic",onEscape:s=>(Vs(s,t,"button").each(Vn.focus),A.none())})])})})]),tv=Yo(),yI=(t,s)=>{tv.set(!0),uk(t,s),tv.clear()},uk=(t,s)=>{const c=lc.getCoupled(t,"toolbarSandbox");Uo.isOpen(c)?Uo.close(c):Uo.open(c,s.toolbar())},CD=(t,s,c,l)=>{const d=c.getBounds.map(h=>h()),g=c.lazySink(t).getOrDie();Ia.positionWithinBounds(g,s,{anchor:{type:"hotspot",hotspot:t,layouts:l,overrides:{maxWidthFunction:yD()}}},d)},wD=(t,s,c,l,d)=>{uf.setGroups(s,d),CD(t,s,c,l),bo.on(t)},J9=(t,s,c)=>{const l=j1(),d=(h,y)=>{const S=tv.get().getOr(!1);c.fetch().get(k=>{wD(t,y,c,s.layouts,k),l.link(t.element),S||En.focusIn(y)})},g=()=>{bo.off(t),tv.get().getOr(!1)||Vn.focus(t),l.unlink(t.element)};return{dom:{tag:"div",attributes:{id:l.id}},behaviours:vt([En.config({mode:"special",onEscape:h=>(Uo.close(h),A.some(!0))}),Uo.config({onOpen:d,onClose:g,isPartOf:(h,y,S)=>zf(y,S)||zf(t,S),getAttachPoint:()=>c.lazySink(t).getOrDie()}),mi.config({channels:{...fb({isExtraPart:no,...c.fireDismissalEventInstead.map(h=>({fireEventInstead:{event:h.event}})).getOr({})}),...gb({doReposition:()=>{Uo.getState(lc.getCoupled(t,"toolbarSandbox")).each(h=>{CD(t,h,c,s.layouts)})}})}})])}},i1=ja({name:"FloatingToolbarButton",factory:(t,s,c,l)=>({...Xc.sketch({...l.button(),action:d=>{uk(d,l)},buttonBehaviours:au.augment({dump:l.button().buttonBehaviours},[lc.config({others:{toolbarSandbox:d=>J9(d,c,t)}})])}),apis:{setGroups:(d,g)=>{Uo.getState(lc.getCoupled(d,"toolbarSandbox")).each(h=>{wD(d,h,t,c.layouts,g)})},reposition:d=>{Uo.getState(lc.getCoupled(d,"toolbarSandbox")).each(g=>{CD(d,g,t,c.layouts)})},toggle:d=>{uk(d,l)},toggleWithoutFocusing:d=>{yI(d,l)},getToolbar:d=>Uo.getState(lc.getCoupled(d,"toolbarSandbox")),isOpen:d=>Uo.isOpen(lc.getCoupled(d,"toolbarSandbox"))}}),configFields:Bd(),partFields:X9(),apis:{setGroups:(t,s,c)=>{t.setGroups(s,c)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggleWithoutFocusing(s)},getToolbar:(t,s)=>t.getToolbar(s),isOpen:(t,s)=>t.isOpen(s)}}),Q9=W([Ke("items"),Zm(["itemSelector"]),fa("tgroupBehaviours",[En])]),eU=W([bb({name:"items",unit:"item"})]),tU=(t,s,c,l)=>({uid:t.uid,dom:t.dom,components:s,behaviours:ga(t.tgroupBehaviours,[En.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),dk=ja({name:"ToolbarGroup",configFields:Q9(),partFields:eU(),factory:tU}),SD=t=>je(t,s=>Oi(s)),xD=(t,s,c)=>{N2(t,c,l=>{c.overflowGroups.set(l),s.getOpt(t).each(d=>{i1.setGroups(d,SD(l))})})},CI=(t,s,c,l)=>{const d=us(i1.sketch({fetch:()=>Cl.nu(g=>{g(SD(t.overflowGroups.get()))}),layouts:{onLtr:()=>[Vc,Hc],onRtl:()=>[Hc,Vc],onBottomLtr:()=>[zc,Pa],onBottomRtl:()=>[Pa,zc]},getBounds:c.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:l["overflow-button"](),toolbar:l.overflow()},onToggled:(g,h)=>t[h?"onOpened":"onClosed"](g)}));return{uid:t.uid,dom:t.dom,components:s,behaviours:ga(t.splitToolbarBehaviours,[lc.config({others:{overflowGroup:()=>dk.sketch({...l["overflow-group"](),items:[d.asSpec()]})}})]),apis:{setGroups:(g,h)=>{t.builtGroups.set(je(h,g.getSystem().build)),xD(g,d,t)},refresh:g=>xD(g,d,t),toggle:g=>{d.getOpt(g).each(h=>{i1.toggle(h)})},toggleWithoutFocusing:g=>{d.getOpt(g).each(i1.toggleWithoutFocusing)},isOpen:g=>d.getOpt(g).map(i1.isOpen).getOr(!1),reposition:g=>{d.getOpt(g).each(h=>{i1.reposition(h)})},getOverflow:g=>d.getOpt(g).bind(i1.getToolbar)},domModification:{attributes:{role:"group"}}}},wI=ja({name:"SplitFloatingToolbar",configFields:ik(),partFields:Y9(),factory:CI,apis:{setGroups:(t,s,c)=>{t.setGroups(s,c)},refresh:(t,s)=>{t.refresh(s)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s),getOverflow:(t,s)=>t.getOverflow(s)}}),nU=W([Zm(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),Lo("onOpened"),Lo("onClosed")].concat(vI())),SI=W([ol({factory:uf,schema:uy(),name:"primary"}),ol({factory:uf,schema:uy(),name:"overflow",overrides:t=>({toolbarBehaviours:vt([Ii.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:s=>{Vs(s,t,"overflow-button").each(c=>{bo.off(c)}),t.onClosed(s)},onGrown:s=>{t.onOpened(s)},onStartGrow:s=>{Vs(s,t,"overflow-button").each(bo.on)}}),En.config({mode:"acyclic",onEscape:s=>(Vs(s,t,"overflow-button").each(Vn.focus),A.some(!0))})])})}),lu({name:"overflow-button",overrides:t=>({buttonBehaviours:vt([bo.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])})}),lu({name:"overflow-group"})]),xI=(t,s)=>Vs(t,s,"overflow").map(Ii.hasGrown).getOr(!1),mk=(t,s,c)=>{Vs(t,s,"overflow-button").each(l=>{Vs(t,s,"overflow").each(d=>{if(TD(t,s),Ii.hasShrunk(d)){const g=s.onOpened;s.onOpened=h=>{c||En.focusIn(d),g(h),s.onOpened=g}}else{const g=s.onClosed;s.onClosed=h=>{c||Vn.focus(l),g(h),s.onClosed=g}}Ii.toggleGrow(d)})})},TD=(t,s)=>{Vs(t,s,"overflow").each(c=>{N2(t,s,l=>{const d=je(l,g=>Oi(g));uf.setGroups(c,d)}),Vs(t,s,"overflow-button").each(l=>{Ii.hasGrown(c)&&bo.on(l)}),Ii.refresh(c)})},oU=(t,s,c,l)=>{const d="alloy.toolbar.toggle",g=(h,y)=>{const S=je(y,h.getSystem().build);t.builtGroups.set(S)};return{uid:t.uid,dom:t.dom,components:s,behaviours:ga(t.splitToolbarBehaviours,[lc.config({others:{overflowGroup:h=>dk.sketch({...l["overflow-group"](),items:[Xc.sketch({...l["overflow-button"](),action:y=>{Eo(h,d)}})]})}}),oo("toolbar-toggle-events",[Ye(d,h=>{mk(h,t,!1)})])]),apis:{setGroups:(h,y)=>{g(h,y),TD(h,t)},refresh:h=>TD(h,t),toggle:h=>{mk(h,t,!1)},toggleWithoutFocusing:h=>{mk(h,t,!0)},isOpen:h=>xI(h,t)},domModification:{attributes:{role:"group"}}}},ED=ja({name:"SplitSlidingToolbar",configFields:nU(),partFields:SI(),factory:oU,apis:{setGroups:(t,s,c)=>{t.setGroups(s,c)},refresh:(t,s)=>{t.refresh(s)},toggle:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s)}}),kD=t=>{const s=t.title.fold(()=>({}),c=>({attributes:{title:c}}));return{dom:{tag:"div",classes:["tox-toolbar__group"],...s},components:[dk.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:vt([hr.config({}),Vn.config({})])}},fk=t=>dk.sketch(kD(t)),TI=(t,s)=>{const c=mr(l=>{const d=je(t.initGroups,fk);uf.setGroups(l,d)});return vt([Wu.toolbarButton(()=>t.providers.checkUiComponentContext("any").shouldDisable),pc(()=>t.providers.checkUiComponentContext("any")),En.config({mode:s,onEscape:t.onEscape,selector:".tox-toolbar__group"}),oo("toolbar-events",[c])])},EI=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":kD({title:A.none(),items:[]}),"overflow-button":Cz({context:"any",name:"more",icon:A.some("more-drawer"),enabled:!0,tooltip:A.some("Reveal or hide additional toolbar items"),primary:!1,buttonType:A.none(),borderless:!1},A.none(),t.providers,[],"overflow-button")},splitToolbarBehaviours:TI(t,s)}},sU=t=>{const s=EI(t),c=4,l=wI.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return wI.sketch({...s,lazySink:t.getSink,getOverflowBounds:()=>{const d=t.moreDrawerData.lazyHeader().element,g=xu(d),h=Ul(d),y=xu(h),S=Math.max(h.dom.scrollHeight,y.height);return lr(g.x+c,y.y,g.width-c*2,S)},parts:{...s.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}},components:[l],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>t.onToggled(d,!0),onClosed:d=>t.onToggled(d,!1)})},rU=t=>{const s=ED.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),c=ED.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),l=EI(t);return ED.sketch({...l,components:[s,c],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>{d.getSystem().broadcastOn([Mh()],{type:"opened"}),t.onToggled(d,!0)},onClosed:d=>{d.getSystem().broadcastOn([Mh()],{type:"closed"}),t.onToggled(d,!1)}})},gk=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return uf.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===Vu.scrolling?["tox-toolbar--scrolling"]:[])},components:[uf.parts.groups({})],toolbarBehaviours:TI(t,s)})},kI=[Eh,Uu,xc("tooltip"),qc("buttonType","secondary",["primary","secondary"]),Tc("borderless",!1),li("onAction"),Qr("context","mode:design")],cU=[...kI,Th,Ra("type",["button"])],aU=[...kI,Tc("active",!1),Ra("type",["togglebutton"])],_I={button:cU,togglebutton:aU},AI=[Ra("type",["group"]),Jd("buttons",[],Zr("type",_I))],lU=Zr("type",{..._I,group:AI}),iU=An([Jd("buttons",[],lU),li("onShow"),li("onHide")]),_D=t=>xr("view",iU,t),uU=(t,s)=>{var c,l;const d=t.type==="togglebutton",g=t.icon.map(ye=>c1(ye,s.icons)).map(us),y=ye=>{const $e=Ze=>{g.map(Jt=>Jt.getOpt(ye).each(Bt=>{eo.set(Bt,[c1(Ze,s.icons)])}))},Le=Ze=>{const Jt=ye.element;Ze?(hc(Jt,"tox-button--enabled"),Ve(Jt,"aria-pressed",!0)):(Ts(Jt,"tox-button--enabled"),B(Jt,"aria-pressed"))},kt=()=>Nl(ye.element,"tox-button--enabled"),Kt=()=>su(ye.element);if(d)return t.onAction({setIcon:$e,setActive:Le,isActive:kt,focus:Kt});if(t.type==="button")return t.onAction({setIcon:$e})},S={...t,name:d?t.text.getOr(t.icon.getOr("")):(c=t.text)!==null&&c!==void 0?c:t.icon.getOr(""),primary:t.buttonType==="primary",buttonType:A.from(t.buttonType),tooltip:t.tooltip,icon:t.icon,enabled:!0,borderless:t.borderless},k=qE((l=t.buttonType)!==null&&l!==void 0?l:"secondary"),O=d?t.text.map(s.translate):A.some(s.translate(t.text)),N=O.map(Nr),V=S.tooltip.or(O).map(ye=>({"aria-label":s.translate(ye)})).getOr({}),z=g.map(ye=>ye.asSpec()),X=t1([z,N]),ne=t.icon.isSome()&&N.isSome(),Ce={tag:"button",classes:k.concat(...t.icon.isSome()&&!ne?["tox-button--icon"]:[]).concat(...ne?["tox-button--icon-and-text"]:[]).concat(...t.borderless?["tox-button--naked"]:[]).concat(...t.type==="togglebutton"&&t.active?["tox-button--enabled"]:[]),attributes:V},ae=[],ve=S2(S,A.some(y),ae,Ce,X,t.tooltip,s);return Xc.sketch(ve)},P2=(t,s)=>uU(t,s),dU=(t,s)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:je(t.buttons,c=>P2(c,s))}),AD=po().deviceType,mU=AD.isPhone(),fU=AD.isTablet(),zG=t=>{let s=!1;const c=je(t.buttons,l=>l.type==="group"?(s=!0,dU(l,t.providers)):P2(l,t.providers));return{uid:t.uid,dom:{tag:"div",classes:[s?"tox-view__toolbar":"tox-view__header",...mU||fU?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:vt([Vn.config({}),En.config({mode:"flow",selector:"button, .tox-button",focusInside:sg.OnEnterOrSpaceMode})]),components:s?c:[rf.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),rf.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:c})]}},gU=t=>({uid:t.uid,behaviours:vt([Vn.config({}),hr.config({})]),dom:{tag:"div",classes:["tox-view__pane"]}}),hU=(t,s,c,l)=>{const d={getPane:g=>ba.getPart(g,t,"pane"),getOnShow:g=>t.viewConfig.onShow,getOnHide:g=>t.viewConfig.onHide};return{uid:t.uid,dom:t.dom,components:s,behaviours:vt([Vn.config({}),En.config({mode:"cyclic",focusInside:sg.OnEnterOrSpaceMode})]),apis:d}};var u1=ja({name:"silver.View",configFields:[Ke("viewConfig")],partFields:[Pi({factory:{sketch:zG},schema:[Ke("buttons"),Ke("providers")],name:"header"}),Pi({factory:{sketch:gU},schema:[],name:"pane"})],factory:hU,apis:{getPane:(t,s)=>t.getPane(s),getOnShow:(t,s)=>t.getOnShow(s),getOnHide:(t,s)=>t.getOnHide(s)}});const pU=(t,s,c)=>ea(s,(l,d)=>{const g=dt(_D(l));return t.slot(d,u1.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:g,components:[...g.buttons.length>0?[u1.parts.header({buttons:g.buttons,providers:c})]:[],u1.parts.pane({})]}))}),hk=(t,s)=>Ll.sketch(c=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:pU(c,t,s),slotBehaviours:q0.unnamedEvents([mr(l=>Ll.hideAllSlots(l))])})),OD=t=>Cn(Ll.getSlotNames(t),s=>Ll.isShowing(t,s)),OI=t=>{const s=t.element;qe(s,"display","none"),Ve(s,"aria-hidden","true")},DD=t=>{const s=t.element;Gn(s,"display"),B(s,"aria-hidden")},bU=t=>({getContainer:W(t)}),RD=(t,s,c)=>{Ll.getSlot(t,s).each(l=>{u1.getPane(l).each(d=>{c(l)(bU(d.element.dom))})})},by=(t,s)=>RD(t,s,u1.getOnShow),DI=(t,s)=>RD(t,s,u1.getOnHide);var pk=pi({factory:(t,s)=>{const g={setViews:(h,y)=>{eo.set(h,[hk(y,s.backstage.shared.providers)])},whichView:h=>$o.getCurrent(h).bind(OD),toggleView:(h,y,S,k)=>$o.getCurrent(h).exists(O=>{const N=OD(O),V=N.exists(X=>k===X),z=Ll.getSlot(O,k).isSome();return z&&(Ll.hideAllSlots(O),V?(OI(h),y()):(S(),DD(h),Ll.showSlot(O,k),by(O,k)),N.each(X=>DI(O,X))),z})};return{uid:t.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:vt([eo.config({}),$o.config({find:h=>{const y=eo.contents(h);return qs(y)}})]),apis:g}},name:"silver.ViewWrapper",configFields:[Ke("backstage")],apis:{setViews:(t,s,c)=>t.setViews(s,c),toggleView:(t,s,c,l,d)=>t.toggleView(s,c,l,d),whichView:(t,s)=>t.whichView(s)}});const vU=(t,s,c)=>{let l=!1;const d=h=>{R_(h,".tox-statusbar").each(y=>{fs(y,"display")==="none"&&nn(y,"aria-hidden")==="true"?(Gn(y,"display"),B(y,"aria-hidden")):(qe(y,"display","none"),Ve(y,"aria-hidden","true"))})},g={getSocket:h=>ba.getPart(h,t,"socket"),setSidebar:(h,y,S)=>{ba.getPart(h,t,"sidebar").each(k=>$9(k,y,S))},toggleSidebar:(h,y)=>{ba.getPart(h,t,"sidebar").each(S=>I9(S,y))},whichSidebar:h=>ba.getPart(h,t,"sidebar").bind(L9).getOrNull(),getHeader:h=>ba.getPart(h,t,"header"),getToolbar:h=>ba.getPart(h,t,"toolbar"),setToolbar:(h,y)=>{ba.getPart(h,t,"toolbar").each(S=>{const k=je(y,fk);S.getApis().setGroups(S,k)})},setToolbars:(h,y)=>{ba.getPart(h,t,"multiple-toolbar").each(S=>{const k=je(y,O=>je(O,fk));nI.setItems(S,k)})},refreshToolbar:h=>{ba.getPart(h,t,"toolbar").each(S=>S.getApis().refresh(S))},toggleToolbarDrawer:h=>{ba.getPart(h,t,"toolbar").each(y=>{Xo(y.getApis().toggle,S=>S(y))})},toggleToolbarDrawerWithoutFocusing:h=>{ba.getPart(h,t,"toolbar").each(y=>{Xo(y.getApis().toggleWithoutFocusing,S=>S(y))})},isToolbarDrawerToggled:h=>ba.getPart(h,t,"toolbar").bind(y=>A.from(y.getApis().isOpen).map(S=>S(y))).getOr(!1),getThrobber:h=>ba.getPart(h,t,"throbber"),focusToolbar:h=>{ba.getPart(h,t,"toolbar").orThunk(()=>ba.getPart(h,t,"multiple-toolbar")).each(S=>{En.focusIn(S)})},setMenubar:(h,y)=>{ba.getPart(h,t,"menubar").each(S=>{mD.setMenus(S,y)})},focusMenubar:h=>{ba.getPart(h,t,"menubar").each(y=>{mD.focus(y)})},setViews:(h,y)=>{ba.getPart(h,t,"viewWrapper").each(S=>{pk.setViews(S,y)})},toggleView:(h,y)=>ba.getPart(h,t,"viewWrapper").exists(S=>pk.toggleView(S,()=>g.showMainView(h),()=>g.hideMainView(h),y)),whichView:h=>ba.getPart(h,t,"viewWrapper").bind(pk.whichView).getOrNull(),hideMainView:h=>{l=g.isToolbarDrawerToggled(h),l&&g.toggleToolbarDrawer(h),ba.getPart(h,t,"editorContainer").each(y=>{const S=y.element;d(S),qe(S,"display","none"),Ve(S,"aria-hidden","true")})},showMainView:h=>{l&&g.toggleToolbarDrawer(h),ba.getPart(h,t,"editorContainer").each(y=>{const S=y.element;d(S),Gn(S,"display"),B(S,"aria-hidden")})}};return{uid:t.uid,dom:t.dom,components:s,apis:g,behaviours:t.behaviours}},MD=lf.optional({factory:mD,name:"menubar",schema:[Ke("backstage")]}),yU=t=>t.type===Vu.sliding?rU:t.type===Vu.floating?sU:gk,CU=lf.optional({factory:{sketch:t=>nI.sketch({uid:t.uid,dom:t.dom,listBehaviours:vt([En.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>gk({type:t.type,uid:Qt("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:()=>(t.onEscape(),A.some(!0))}),setupItem:(s,c,l,d)=>{uf.setGroups(c,l)},shell:!0})},name:"multiple-toolbar",schema:[Ke("dom"),Ke("onEscape")]}),RI=lf.optional({factory:{sketch:t=>{const s=yU(t),c={type:t.type,uid:t.uid,onEscape:()=>(t.onEscape(),A.some(!0)),onToggled:(l,d)=>t.onToolbarToggled(d),cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes};return s(c)}},name:"toolbar",schema:[Ke("dom"),Ke("onEscape"),Ke("getSink")]}),MI=lf.optional({factory:{sketch:T9},name:"header",schema:[Ke("dom")]}),bk=lf.optional({factory:{sketch:iI},name:"promotion",schema:[Ke("dom")]}),ND=lf.optional({name:"socket",schema:[Ke("dom")]}),wU=lf.optional({factory:{sketch:F9},name:"sidebar",schema:[Ke("dom")]}),SU=lf.optional({factory:{sketch:Z9},name:"throbber",schema:[Ke("dom")]}),NI=lf.optional({factory:pk,name:"viewWrapper",schema:[Ke("backstage")]}),xU=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:t.components}),TU=lf.optional({factory:{sketch:xU},name:"editorContainer",schema:[]});var sr=ja({name:"OuterContainer",factory:vU,configFields:[Ke("dom"),Ke("behaviours")],partFields:[MI,MD,RI,CU,ND,wU,bk,SU,NI,TU],apis:{getSocket:(t,s)=>t.getSocket(s),setSidebar:(t,s,c,l)=>{t.setSidebar(s,c,l)},toggleSidebar:(t,s,c)=>{t.toggleSidebar(s,c)},whichSidebar:(t,s)=>t.whichSidebar(s),getHeader:(t,s)=>t.getHeader(s),getToolbar:(t,s)=>t.getToolbar(s),setToolbar:(t,s,c)=>{t.setToolbar(s,c)},setToolbars:(t,s,c)=>{t.setToolbars(s,c)},refreshToolbar:(t,s)=>t.refreshToolbar(s),toggleToolbarDrawer:(t,s)=>{t.toggleToolbarDrawer(s)},toggleToolbarDrawerWithoutFocusing:(t,s)=>{t.toggleToolbarDrawerWithoutFocusing(s)},isToolbarDrawerToggled:(t,s)=>t.isToolbarDrawerToggled(s),getThrobber:(t,s)=>t.getThrobber(s),setMenubar:(t,s,c)=>{t.setMenubar(s,c)},focusMenubar:(t,s)=>{t.focusMenubar(s)},focusToolbar:(t,s)=>{t.focusToolbar(s)},setViews:(t,s,c)=>{t.setViews(s,c)},toggleView:(t,s,c)=>t.toggleView(s,c),whichView:(t,s)=>t.whichView(s)}});const PI="file edit view insert format tools table help",BI={file:{title:"File",items:"newdocument restoredraft | preview | importword exportpdf exportword | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code revisionhistory | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed inserttemplate codesample inserttable accordion math | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},EU=(t,s,c)=>{const l=pN(c).split(/[ ,]/);return{text:t.title,getItems:()=>xe(t.items,d=>{const g=d.toLowerCase();return g.trim().length===0?[]:Ms(l,h=>h===g)?[]:g==="separator"||g==="|"?[{type:"separator"}]:s.menuItems[g]?[s.menuItems[g]]:[]})}},B2=t=>t.split(" "),$I=(t,s)=>{const c={...BI,...s.menus},l=mn(s.menus).length>0,d=s.menubar===void 0||s.menubar===!0?B2(PI):B2(s.menubar===!1?"":s.menubar),g=uo(d,y=>{const S=yo(BI,y);return l?S||pt(s.menus,y).exists(k=>yo(k,"items")):S}),h=je(g,y=>{const S=c[y];return EU({title:S.title,items:B2(S.items)},s,t)});return uo(h,y=>{const S=k=>Dt(k)||k.type!=="separator";return y.getItems().length>0&&Ms(y.getItems(),S)})},kU=t=>{const s=()=>{t._skinLoaded=!0,zP(t)};return()=>{t.initialized?s():t.on("init",s)}},II=(t,s)=>()=>n7(t,{message:s}),LI=(t,s,c)=>(t.on("remove",()=>c.unload(s)),c.load(s)),vk=(t,s,c,l)=>(t.on("remove",()=>l.unloadRawCss(s)),l.loadRawCss(s,c)),_U=async(t,s)=>{const l="ui/"+ST(t).getOr("default")+"/skin.css",d=tinymce.Resource.get(l);if(Dt(d))vk(t,l,d,t.ui.styleSheetLoader);else{const g=t.editorManager.suffix,h=s+`/skin${g}.css`;return LI(t,h,t.ui.styleSheetLoader)}},FI=async(t,s)=>{if(sc(ge.fromDom(t.getElement()))){const d="ui/"+ST(t).getOr("default")+"/skin.shadowdom.css",g=tinymce.Resource.get(d);if(Dt(g))vk(t,d,g,Wp.DOM.styleSheetLoader);else{const h=t.editorManager.suffix,y=s+`/skin.shadowdom${h}.css`;return LI(t,y,Wp.DOM.styleSheetLoader)}}},AU=async(t,s)=>{const c=()=>{const d=w4(s),g=s.editorManager.suffix;d&&s.contentCSS.push(d+(t?"/content.inline":"/content")+`${g}.css`)};ST(s).fold(c,d=>{const g="ui/"+d+(t?"/content.inline":"/content")+".css",h=tinymce.Resource.get(g);Dt(h)?vk(s,g,h,s.ui.styleSheetLoader):c()});const l=w4(s);if(!C4(s)&&Dt(l))return Promise.all([_U(s,l),FI(s,l)]).then()},HI=(t,s)=>AU(t,s).then(kU(s),II(s,"Skin could not be loaded")),OU=dn(HI,!1),VI=dn(HI,!0),vy=(t,s,c)=>re(c)?t.translate(s):t.translate([s,t.translate(c)]),DU=(t,s)=>{const c=(h,y,S,k)=>{const O=t.shared.providers.translate(h.title);if(h.type==="separator")return A.some({type:"separator",text:O});if(h.type==="submenu"){const N=xe(h.getStyleItems(),V=>l(V,y,k));return y===0&&N.length<=0?A.none():A.some({type:"nestedmenuitem",text:O,enabled:N.length>0,getSubmenuItems:()=>xe(h.getStyleItems(),V=>l(V,y,k))})}else return A.some({type:"togglemenuitem",text:O,icon:h.icon,active:h.isSelected(k),enabled:!S,onAction:s.onAction(h),...h.getStylePreview().fold(()=>({}),N=>({meta:{style:N}}))})},l=(h,y,S)=>{const k=h.type==="formatter"&&s.isInvalid(h);return y===0?k?[]:c(h,y,!1,S).toArray():c(h,y,k,S).toArray()},d=h=>{const y=s.getCurrentValue(),S=s.shouldHide?0:1;return xe(h,k=>l(k,S,y))};return{validateItems:d,getFetch:(h,y)=>(S,k)=>{const O=y(),N=d(O),V=a1(N,hm.CLOSE_ON_EXECUTE,h,{isHorizontalMenu:!1,search:A.none()});k(V)}}},yy=(t,s)=>{const c=s.dataset,l=c.type==="basic"?()=>je(c.data,d=>O2(d,s.isSelectedFor,s.getPreviewFor)):c.getData;return{items:DU(t,s),getStyleItems:l}},nv=(t,s,c,l,d,g)=>{const{items:h,getStyleItems:y}=yy(s,c),S=hn(c.tooltip),k=N=>({getComponent:W(N),setTooltip:V=>{const z=s.shared.providers.translate(V);Ve(N.element,"aria-label",z),S.set(V)}}),O=N=>{const V=z=>N.setTooltip(vy(t,l(z.value),z.value));return t.on(d,V),rE(zb(t,"NodeChange",z=>{const X=z.getComponent();c.updateText(X),$n.set(z.getComponent(),!t.selection.isEditable())})(N),()=>t.off(d,V))};return zE({context:"mode:design",text:c.icon.isSome()?A.none():c.text,icon:c.icon,ariaLabel:A.some(c.tooltip),tooltip:A.none(),role:A.none(),fetch:h.getFetch(s,y),onSetup:O,getApi:k,columns:1,presets:"normal",classes:c.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[ec.config({...s.shared.providers.tooltips.getConfig({tooltipText:s.shared.providers.translate(c.tooltip),onShow:N=>{if(c.tooltip!==S.get()){const V=s.shared.providers.translate(S.get());ec.setComponents(N,s.shared.providers.tooltips.getComponents({tooltipText:V}))}}})})]},"tox-tbtn",s.shared,g)},PD=t=>je(t,s=>{let c=s,l=s;const d=s.split("=");return d.length>1&&(c=d[0],l=d[1]),{title:c,format:l}}),RU=t=>({type:"basic",data:t});var Cy;(function(t){t[t.SemiColon=0]="SemiColon",t[t.Space=1]="Space"})(Cy||(Cy={}));const MU=(t,s)=>s===Cy.SemiColon?t.replace(/;$/,"").split(";"):t.split(" "),BD=(t,s,c)=>{const l=t.options.get(s);return{type:"basic",data:PD(MU(l,c))}},NU="Align",zI=W("Alignment {0}"),UI="left",$D=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],WI=t=>{const s=()=>Cn($D,y=>t.formatter.match(y.format)),c=y=>()=>t.formatter.match(y),l=y=>A.none,d=y=>{const k=s().fold(W(UI),O=>O.title.toLowerCase());ln(y,Qb,{icon:`align-${k}`}),a7(t,{value:k})},g=RU($D),h=y=>()=>Cn($D,S=>S.format===y.format).each(S=>t.execCommand(S.command));return{tooltip:vy(t,zI(),UI),text:A.none(),icon:A.some("align-left"),isSelectedFor:c,getCurrentValue:A.none,getPreviewFor:l,onAction:h,updateText:d,dataset:g,shouldHide:!1,isInvalid:y=>!t.formatter.canApply(y.format)}},ZI=(t,s)=>nv(t,s,WI(t),zI,"AlignTextUpdate","align"),yk=(t,s)=>{const c=yy(s,WI(t));t.ui.registry.addNestedMenuItem("align",{text:s.shared.providers.translate(NU),onSetup:Il(t),getSubmenuItems:()=>c.items.validateItems(c.getStyleItems())})},Ck=(t,s)=>{const c=s(),l=je(c,d=>d.format);return A.from(t.formatter.closest(l)).bind(d=>Cn(c,g=>g.format===d))},jI="Blocks",Nh=W("Block {0}"),wk="Paragraph",GI=t=>{const s=g=>()=>t.formatter.match(g),c=g=>()=>{const h=t.formatter.get(g);return h?A.some({tag:h.length>0&&(h[0].inline||h[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(g))}):A.none()},l=g=>{const y=Ck(t,()=>d.data).fold(W(wk),S=>S.title);ln(g,ju,{text:y}),u7(t,{value:y})},d=BD(t,"block_formats",Cy.SemiColon);return{tooltip:vy(t,Nh(),wk),text:A.some(wk),icon:A.none(),isSelectedFor:s,getCurrentValue:A.none,getPreviewFor:c,onAction:GP(t),updateText:l,dataset:d,shouldHide:!1,isInvalid:g=>!t.formatter.canApply(g.format)}},PU=(t,s)=>nv(t,s,GI(t),Nh,"BlocksTextUpdate","blocks"),BU=(t,s)=>{const c=yy(s,GI(t));t.ui.registry.addNestedMenuItem("blocks",{text:jI,onSetup:Il(t),getSubmenuItems:()=>c.items.validateItems(c.getStyleItems())})},$U="Fonts",qI=W("Font {0}"),ID="System Font",IU=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],LD=t=>{const s=t.split(/\s*,\s*/);return je(s,c=>c.replace(/^['"]+|['"]+$/g,""))},KI=(t,s)=>s.length>0&&zn(s,c=>t.indexOf(c.toLowerCase())>-1),LU=(t,s)=>{if(t.indexOf("-apple-system")===0||s.length>0){const c=LD(t.toLowerCase());return KI(c,IU)||KI(c,s)}else return!1},Sk=t=>{const s=()=>{const S=X=>X?LD(X)[0]:"",k=t.queryCommandValue("FontName"),O=y.data,N=k?k.toLowerCase():"",V=ww(t);return{matchOpt:Cn(O,X=>{const ne=X.format;return ne.toLowerCase()===N||S(ne).toLowerCase()===S(N).toLowerCase()}).orThunk(()=>yn(LU(N,V),{title:ID,format:N})),font:k}},c=S=>k=>k.exists(O=>O.format===S),l=()=>{const{matchOpt:S}=s();return S},d=S=>()=>A.some({tag:"div",styles:S.indexOf("dings")===-1?{"font-family":S}:{}}),g=S=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontName",!1,S.format)})},h=S=>{const{matchOpt:k,font:O}=s(),N=k.fold(W(O),V=>V.title);ln(S,ju,{text:N}),SO(t,{value:N})},y=BD(t,"font_family_formats",Cy.SemiColon);return{tooltip:vy(t,qI(),ID),text:A.some(ID),icon:A.none(),isSelectedFor:c,getCurrentValue:l,getPreviewFor:d,onAction:g,updateText:h,dataset:y,shouldHide:!1,isInvalid:no}},FU=(t,s)=>nv(t,s,Sk(t),qI,"FontFamilyTextUpdate","fontfamily"),HU=(t,s)=>{const c=yy(s,Sk(t));t.ui.registry.addNestedMenuItem("fontfamily",{text:s.shared.providers.translate($U),onSetup:Il(t),getSubmenuItems:()=>c.items.validateItems(c.getStyleItems())})},VU={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},zU=(()=>{const t="[0-9]+",c="[eE]"+("[+-]?"+t),l="\\.",d=y=>`(?:${y})?`,h=`[+-]?(?:${["Infinity",t+l+d(t)+d(c),l+t+d(c),t+d(c)].join("|")})`;return new RegExp(`^(${h})(.*)$`)})(),UU=(t,s)=>Ms(s,c=>Ms(VU[c],l=>t===l)),xk=(t,s)=>A.from(zU.exec(t)).bind(l=>{const d=Number(l[1]),g=l[2];return UU(g,s)?A.some({value:d,unit:g}):A.none()}),YI=(t,s)=>xk(t,s).map(({value:c,unit:l})=>c+l),FD={tab:W(9),escape:W(27),enter:W(13),backspace:W(8),delete:W(46),left:W(37),up:W(38),right:W(39),down:W(40),space:W(32),home:W(36),end:W(35),pageUp:W(33),pageDown:W(34)},XI=(t,s,c,l)=>{let d=A.none();const g=ye=>ye.map($e=>Ut.getValue($e)).getOr(""),h=zb(t,"NodeChange SwitchMode",ye=>{const $e=ye.getComponent();d=A.some($e),c.updateInputValue($e),$n.set($e,!t.selection.isEditable())}),y=ye=>({getComponent:W(ye)}),S=hn(ee),k=Qt("custom-number-input-events"),O=(ye,$e,Le)=>{const kt=g(d),Kt=c.getNewValue(kt,ye),Ze=kt.length-`${Kt}`.length,Jt=d.map(sn=>sn.element.dom.selectionStart-Ze),Bt=d.map(sn=>sn.element.dom.selectionEnd-Ze);c.onAction(Kt,Le),d.each(sn=>{Ut.setValue(sn,Kt),$e&&(Jt.each(Do=>sn.element.dom.selectionStart=Do),Bt.each(Do=>sn.element.dom.selectionEnd=Do))})},N=(ye,$e)=>O((Le,kt)=>Le-kt,ye,$e),V=(ye,$e)=>O((Le,kt)=>Le+kt,ye,$e),z=ye=>na(ye.element).fold(A.none,$e=>(su($e),A.some(!0))),X=ye=>Cp(ye.element)?(Wl(ye.element).each($e=>su($e)),A.some(!0)):A.none(),ne=(ye,$e,Le,kt)=>{const Kt=hn(ee),Ze=s.shared.providers.translate(Le),Jt=Qt("altExecuting"),Bt=zb(t,"NodeChange SwitchMode",Do=>{$n.set(Do.getComponent(),!t.selection.isEditable())}),sn=Do=>{$n.isDisabled(Do)||ye(!0)};return Xc.sketch({dom:{tag:"button",attributes:{"aria-label":Ze,"data-mce-name":$e},classes:kt.concat($e)},components:[VE($e,s.shared.providers.icons)],buttonBehaviours:vt([$n.config({}),ec.config(s.shared.providers.tooltips.getConfig({tooltipText:Ze})),oo(Jt,[Qp({onSetup:Bt,getApi:y},Kt),e1({getApi:y},Kt),Ye(Qi(),(Do,rr)=>{(rr.event.raw.keyCode===FD.space()||rr.event.raw.keyCode===FD.enter())&&($n.isDisabled(Do)||ye(!1))}),Ye(Pg(),sn),Ye(zo(),sn)])]),eventOrder:{[Qi()]:[Jt,"keying"],[Pg()]:[Jt,"alloy.base.behaviour"],[zo()]:[Jt,"alloy.base.behaviour"],[Xl()]:["alloy.base.behaviour",Jt,"tooltipping"],[_i()]:[Jt,"tooltipping"]}})},Ce=us(ne(ye=>N(!1,ye),"minus","Decrease font size",[])),ae=us(ne(ye=>V(!1,ye),"plus","Increase font size",[])),ve=us({dom:{tag:"div",classes:["tox-input-wrapper"]},components:[of.sketch({inputBehaviours:vt([$n.config({}),oo(k,[Qp({onSetup:h,getApi:y},S),e1({getApi:y},S)]),oo("input-update-display-text",[Ye(ju,(ye,$e)=>{Ut.setValue(ye,$e.event.text)}),Ye(K2(),ye=>{c.onAction(Ut.getValue(ye))}),Ye(tm(),ye=>{c.onAction(Ut.getValue(ye))})]),En.config({mode:"special",onEnter:ye=>(O(xt,!0,!0),A.some(!0)),onEscape:z,onUp:ye=>(V(!0,!1),A.some(!0)),onDown:ye=>(N(!0,!1),A.some(!0)),onLeft:(ye,$e)=>($e.cut(),A.none()),onRight:(ye,$e)=>($e.cut(),A.none())})])})],behaviours:vt([Vn.config({}),En.config({mode:"special",onEnter:X,onSpace:X,onEscape:z}),oo("input-wrapper-events",[Ye(Dl(),ye=>{gt([Ce,ae],$e=>{const Le=ge.fromDom($e.get(ye).element.dom);Cp(Le)&&yp(Le)})})])])});return{dom:{tag:"div",classes:["tox-number-input"],attributes:{...et(l)?{"data-mce-name":l}:{}}},components:[Ce.asSpec(),ve.asSpec(),ae.asSpec()],behaviours:vt([Vn.config({}),En.config({mode:"flow",focusInside:sg.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:ye=>Cp(ye.element)?A.none():(su(ye.element),A.some(!0))})])}},WU="Font sizes",HD=W("Font size {0}"),JI="12pt",ZU={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},jU={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},QI=(t,s)=>{const c=Math.pow(10,s);return Math.round(t*c)/c},GU=(t,s)=>/[0-9.]+px$/.test(t)?QI(parseInt(t,10)*72/96,s||0)+"pt":pt(jU,t).getOr(t),eL=t=>pt(ZU,t).getOr(""),tL=t=>{const s=()=>{let S=A.none();const k=y.data,O=t.queryCommandValue("FontSize");if(O)for(let N=3;S.isNone()&&N>=0;N--){const V=GU(O,N),z=eL(V);S=Cn(k,X=>X.format===O||X.format===V||X.format===z)}return{matchOpt:S,size:O}},c=S=>k=>k.exists(O=>O.format===S),l=()=>{const{matchOpt:S}=s();return S},d=W(A.none),g=S=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontSize",!1,S.format)})},h=S=>{const{matchOpt:k,size:O}=s(),N=k.fold(W(O),V=>V.title);ln(S,ju,{text:N}),l7(t,{value:N})},y=BD(t,"font_size_formats",Cy.Space);return{tooltip:vy(t,HD(),JI),text:A.some(JI),icon:A.none(),isSelectedFor:c,getPreviewFor:d,getCurrentValue:l,onAction:g,updateText:h,dataset:y,shouldHide:!1,isInvalid:no}},qU=(t,s)=>nv(t,s,tL(t),HD,"FontSizeTextUpdate","fontsize"),KU=t=>{var s;const c={step:1};return(s={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[t])!==null&&s!==void 0?s:c},YU=16,XU=t=>t>=0,JU=t=>{const s=()=>t.queryCommandValue("FontSize");return{updateInputValue:l=>ln(l,ju,{text:s()}),onAction:(l,d)=>t.execCommand("FontSize",!1,l,{skip_focus:!d}),getNewValue:(l,d)=>{xk(l,["unsupportedLength","empty"]);const g=s(),h=xk(l,["unsupportedLength","empty"]).or(xk(g,["unsupportedLength","empty"])),y=h.map(V=>V.value).getOr(YU),S=CN(t),k=h.map(V=>V.unit).filter(V=>V!=="").getOr(S),O=d(y,KU(k).step),N=`${XU(O)?O:y}${k}`;return N!==g&&i7(t,{value:N}),N}}},QU=(t,s)=>XI(t,s,JU(t),"fontsizeinput"),nL=(t,s)=>{const c=yy(s,tL(t));t.ui.registry.addNestedMenuItem("fontsize",{text:WU,onSetup:Il(t),getSubmenuItems:()=>c.items.validateItems(c.getStyleItems())})},eW="Formats",oL=t=>re(t)?"Formats":"Format {0}",sL=(t,s)=>{const c="Formats",l=h=>()=>t.formatter.match(h),d=h=>()=>{const y=t.formatter.get(h);return y!==void 0?A.some({tag:y.length>0&&(y[0].inline||y[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(h))}):A.none()},g=h=>{const y=N=>U5(N)?xe(N.items,y):ek(N)?[{title:N.title,format:N.format}]:[],S=xe(A2(t),y),O=Ck(t,W(S)).fold(W({title:c,tooltipLabel:""}),N=>({title:N.title,tooltipLabel:N.title}));ln(h,ju,{text:O.title}),c7(t,{value:O.tooltipLabel})};return{tooltip:vy(t,oL(""),""),text:A.some(c),icon:A.none(),isSelectedFor:l,getCurrentValue:A.none,getPreviewFor:d,onAction:GP(t),updateText:g,shouldHide:gN(t),isInvalid:h=>!t.formatter.canApply(h.format),dataset:s}},tW=(t,s)=>{const c={type:"advanced",...s.styles};return nv(t,s,sL(t,c),oL,"StylesTextUpdate","styles")},nW=(t,s)=>{const c={type:"advanced",...s.styles},l=yy(s,sL(t,c));t.ui.registry.addNestedMenuItem("styles",{text:eW,onSetup:Il(t),getSubmenuItems:()=>l.items.validateItems(l.getStyleItems())})},oW=W([Ke("toggleClass"),Ke("fetch"),Gg("onExecute"),Te("getHotspot",A.some),Te("getAnchorOverrides",W({})),Gf(),Gg("onItemExecute"),Qo("lazySink"),Ke("dom"),Lo("onOpen"),fa("splitDropdownBehaviours",[lc,En,Vn]),Te("matchWidth",!1),Te("useMinWidth",!1),Te("eventOrder",{}),Qo("role"),Qo("listRole")].concat(mE())),sW=ol({factory:Xc,schema:[Ke("dom")],name:"arrow",defaults:()=>({buttonBehaviours:vt([Vn.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(Mf)},buttonBehaviours:vt([bo.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])})}),rL=ol({factory:Xc,schema:[Ke("dom")],name:"button",defaults:()=>({buttonBehaviours:vt([Vn.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(c=>{t.onExecute(c,s)})}})}),rW=W([sW,rL,Pi({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[Ke("text")],name:"aria-descriptor"}),lu({schema:[cm()],name:"menu",defaults:t=>({onExecute:(s,c)=>{s.getSystem().getByUid(t.uid).each(l=>{t.onItemExecute(l,s,c)})}})}),bB()]),cW=(t,s,c,l)=>{const d=O=>{$o.getCurrent(O).each(N=>{_t.highlightFirst(N),En.focusIn(N)})},g=O=>{RO(t,xt,O,l,d,vi.HighlightMenuAndItem).get(ee)},h=O=>(g(O),A.some(!0)),y=O=>{const N=Wt(O,t,"button");return Mf(N),A.some(!0)},S={...xs([mr((O,N)=>{Vs(O,t,"aria-descriptor").each(z=>{const X=Qt("aria");Ve(z.element,"id",X),Ve(O.element,"aria-describedby",X)})})]),...vw(A.some(g))},k={repositionMenus:O=>{bo.isOn(O)&&wB(O)}};return{uid:t.uid,dom:t.dom,components:s,apis:k,eventOrder:{...t.eventOrder,[Na()]:["disabling","toggling","alloy.base.behaviour"]},events:S,behaviours:ga(t.splitDropdownBehaviours,[lc.config({others:{sandbox:O=>{const N=Wt(O,t,"arrow");return MO(t,O,{onOpen:()=>{bo.on(N),bo.on(O)},onClose:()=>{bo.off(N),bo.off(O)}})}}}),En.config({mode:"special",onSpace:y,onEnter:y,onDown:h}),Vn.config({}),bo.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},$2=ja({name:"SplitDropdown",configFields:oW(),partFields:rW(),factory:cW,apis:{repositionMenus:(t,s)=>t.repositionMenus(s)}}),cL=t=>({isEnabled:()=>!$n.isDisabled(t),setEnabled:s=>$n.set(t,!s),setText:s=>ln(t,ju,{text:s}),setIcon:s=>ln(t,Qb,{icon:s})}),aL=t=>({setActive:s=>{bo.set(t,s)},isActive:()=>bo.isOn(t),isEnabled:()=>!$n.isDisabled(t),setEnabled:s=>$n.set(t,!s),setText:s=>ln(t,ju,{text:s}),setIcon:s=>ln(t,Qb,{icon:s})}),VD=(t,s)=>t.map(c=>({"aria-label":s.translate(c)})).getOr({}),lL=Qt("focus-button"),zD=(t,s,c,l,d,g,h)=>{const y=s.map(k=>us(x3(k,"tox-tbtn",d))),S=t.map(k=>us(c1(k,d.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(s.isSome()?["tox-tbtn--select"]:[]),attributes:{...VD(c,d),...et(h)?{"data-mce-name":h}:{}}},components:t1([S.map(k=>k.asSpec()),y.map(k=>k.asSpec())]),eventOrder:{[Mr()]:["focusing","alloy.base.behaviour",r1],[Xl()]:[r1,"toolbar-group-button-events"]},buttonBehaviours:vt([Wu.toolbarButton(()=>d.checkUiComponentContext(g).shouldDisable),pc(()=>d.checkUiComponentContext(g)),oo(r1,[mr((k,O)=>w3(k)),Ye(ju,(k,O)=>{y.bind(N=>N.getOpt(k)).each(N=>{eo.set(N,[Nr(d.translate(O.event.text))])})}),Ye(Qb,(k,O)=>{S.bind(N=>N.getOpt(k)).each(N=>{eo.set(N,[c1(O.event.icon,d.icons)])})}),Ye(Mr(),(k,O)=>{O.event.prevent(),Eo(k,lL)})])].concat(l.getOr([])))}},aW=(t,s,c,l,d)=>{const g=s.shared,h=hn(ee),y={toolbarButtonBehaviours:[],getApi:cL,onSetup:t.onSetup},S=[oo("toolbar-group-button-events",[Qp(y,h),e1(y,h)])];return i1.sketch({lazySink:g.getSink,fetch:()=>Cl.nu(k=>{k(je(c(t.items),fk))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:zD(t.icon,t.text,t.tooltip,A.some(S),g.providers,t.context,d),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:l}}}})},ov=(t,s,c,l)=>{var d;const g=hn(ee),h=zD(t.icon,t.text,t.tooltip,A.none(),c,t.context,l);return Xc.sketch({dom:h.dom,components:h.components,eventOrder:q$,buttonBehaviours:{...vt([oo("toolbar-button-events",[C3({onAction:t.onAction,getApi:s.getApi}),Qp(s,g),e1(s,g)]),...t.tooltip.map(y=>ec.config(c.tooltips.getConfig({tooltipText:c.translate(y)+t.shortcut.map(S=>` (${iO(S)})`).getOr("")}))).toArray(),Wu.toolbarButton(()=>!t.enabled||c.checkUiComponentContext(t.context).shouldDisable),pc(()=>c.checkUiComponentContext(t.context))].concat(s.toolbarButtonBehaviours)),[r1]:(d=h.buttonBehaviours)===null||d===void 0?void 0:d[r1]}})},lW=(t,s,c)=>iL(t,s,[],c),iL=(t,s,c,l)=>ov(t,{toolbarButtonBehaviours:c.length>0?[oo("toolbarButtonWith",c)]:[],getApi:cL,onSetup:t.onSetup},s,l),iW=(t,s,c)=>uL(t,s,[],c),uL=(t,s,c,l)=>ov(t,{toolbarButtonBehaviours:[eo.config({}),bo.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(c.length>0?[oo("toolbarToggleButtonWith",c)]:[]),getApi:aL,onSetup:t.onSetup},s,l),uW=(t,s,c)=>l=>Cl.nu(d=>s.fetch(d)).map(d=>A.from(EB(Hs(OO(Qt("menu-value"),d,g=>{s.onItemAction(t(l),g)},s.columns,s.presets,hm.CLOSE_ON_EXECUTE,s.select.getOr(no),c),{movement:iE(s.columns,s.presets),menuBehaviours:q0.unnamedEvents(s.columns!=="auto"?[]:[mr((g,h)=>{aO(g,4,tP(s.presets)).each(({numRows:y,numColumns:S})=>{En.setGridSize(g,y,S)})})])})))),dW=(t,s,c)=>{const l=hn(t.tooltip.getOr("")),d=y=>({isEnabled:()=>!$n.isDisabled(y),setEnabled:S=>$n.set(y,!S),setIconFill:(S,k)=>{gr(y.element,`svg path[class="${S}"], rect[class="${S}"]`).each(O=>{Ve(O,"fill",k)})},setActive:S=>{Ve(y.element,"aria-pressed",S),gr(y.element,"span").each(k=>{y.getSystem().getByDom(k).each(O=>bo.set(O,S))})},isActive:()=>gr(y.element,"span").exists(S=>y.getSystem().getByDom(S).exists(bo.isOn)),setText:S=>gr(y.element,"span").each(k=>y.getSystem().getByDom(k).each(O=>ln(O,ju,{text:S}))),setIcon:S=>gr(y.element,"span").each(k=>y.getSystem().getByDom(k).each(O=>ln(O,Qb,{icon:S}))),setTooltip:S=>{const k=s.providers.translate(S);Ve(y.element,"aria-label",k),l.set(S)}}),g=hn(ee),h={getApi:d,onSetup:t.onSetup};return $2.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:{"aria-pressed":!1,...VD(t.tooltip,s.providers),...et(c)?{"data-mce-name":c}:{}}},onExecute:y=>{const S=d(y);S.isEnabled()&&t.onAction(S)},onItemExecute:(y,S,k)=>{},splitDropdownBehaviours:vt([oo("split-dropdown-events",[mr((y,S)=>w3(y)),Ye(lL,Vn.focus),Qp(h,g),e1(h,g)]),Wu.splitButton(()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(t.context).shouldDisable),pc(()=>s.providers.checkUiComponentContext(t.context)),J0.config({}),...t.tooltip.map(y=>ec.config({...s.providers.tooltips.getConfig({tooltipText:s.providers.translate(y),onShow:S=>{if(l.get()!==y){const k=s.providers.translate(l.get());ec.setComponents(S,s.providers.tooltips.getComponents({tooltipText:k}))}}})})).toArray()]),eventOrder:{[Xl()]:["alloy.base.behaviour","split-dropdown-events","tooltipping"],[_i()]:["split-dropdown-events","tooltipping"]},toggleClass:"tox-tbtn--enabled",lazySink:s.getSink,fetch:uW(d,t,s.providers),parts:{menu:$w(!1,t.columns,t.presets)},components:[$2.parts.button(zD(t.icon,t.text,A.none(),A.some([bo.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1}),Wu.toolbarButton(no),pc(W({contextType:"any",shouldDisable:!1}))]),s.providers,t.context)),$2.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:L4("chevron-down",s.providers.icons)},buttonBehaviours:vt([Wu.splitButton(no),pc(W({contextType:"any",shouldDisable:!1}))])}),$2.parts["aria-descriptor"]({text:s.providers.translate("To open the popup, press Shift+Enter")})]})},mW=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],I2=(t,s)=>(c,l,d,g)=>{const h=t(c).mapError(y=>Fm(y)).getOrDie();return s(h,l,d,g)},UD={button:I2(Fw,(t,s,c,l)=>lW(t,s.shared.providers,l)),togglebutton:I2(Vw,(t,s,c,l)=>iW(t,s.shared.providers,l)),menubutton:I2(dD,(t,s,c,l)=>ry(t,"tox-tbtn",s,A.none(),!1,l)),splitbutton:I2(A9,(t,s,c,l)=>dW(t,s.shared,l)),grouptoolbarbutton:I2(uD,(t,s,c,l)=>{const d=c.ui.registry.getAll().buttons,g=y=>Tk(c,{buttons:d,toolbar:y,allowToolbarGroups:!1},s,A.none()),h={[lx]:s.shared.header.isPositionedAtTop()?kc.TopToBottom:kc.BottomToTop};switch(Zp(c)){case Vu.floating:return aW(t,s,g,h,l);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})},fW=(t,s,c,l)=>pt(UD,t.type).fold(()=>(console.error("skipping button defined by",t),A.none()),d=>A.some(d(t,s,c,l))),dL={styles:tW,fontsize:qU,fontsizeinput:QU,fontfamily:FU,blocks:PU,align:ZI},mL=t=>{const s=je(mW,c=>{const l=uo(c.items,d=>yo(t,d)||yo(dL,d));return{name:c.name,items:l}});return uo(s,c=>c.items.length>0)},fL=t=>{const s=t.split("|");return je(s,c=>({items:c.trim().split(" ")}))},gW=t=>Re(t,s=>yo(s,"name")&&yo(s,"items")),hW=t=>{const s=t.toolbar,c=t.buttons;return s===!1?[]:s===void 0||s===!0?mL(c):Dt(s)?fL(s):gW(s)?s:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},pW=(t,s,c,l,d,g)=>pt(s,c.toLowerCase()).orThunk(()=>g.bind(h=>tn(h,y=>pt(s,y+c.toLowerCase())))).fold(()=>pt(dL,c.toLowerCase()).map(h=>h(t,d)),h=>h.type==="grouptoolbarbutton"&&!l?(console.warn(`Ignoring the '${c}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),A.none()):fW(h,d,t,c.toLowerCase())),Tk=(t,s,c,l)=>{const d=hW(s),g=je(d,h=>{const y=xe(h.items,S=>S.trim().length===0?[]:pW(t,s.buttons,S,s.allowToolbarGroups,c,l).toArray());return{title:A.from(t.translate(h.name)),items:y}});return uo(g,h=>h.items.length>0)},gL=(t,s,c,l)=>{const d=s.mainUi.outerContainer,g=c.toolbar,h=c.buttons;if(Re(g,Dt)){const y=g.map(S=>{const k={toolbar:S,buttons:h,allowToolbarGroups:c.allowToolbarGroups};return Tk(t,k,l,A.none())});sr.setToolbars(d,y)}else sr.setToolbar(d,Tk(t,c,l,A.none()))},hL=po(),pL=hL.os.isiOS()&&hL.os.version.major<=12,bW=(t,s)=>{const{uiMotherships:c}=s,l=t.dom;let d=t.getWin();const g=t.getDoc().documentElement,h=hn(Ys(d.innerWidth,d.innerHeight)),y=hn(Ys(g.offsetWidth,g.offsetHeight)),S=()=>{const V=h.get();(V.left!==d.innerWidth||V.top!==d.innerHeight)&&(h.set(Ys(d.innerWidth,d.innerHeight)),wO(t))},k=()=>{const V=t.getDoc().documentElement,z=y.get();(z.left!==V.offsetWidth||z.top!==V.offsetHeight)&&(y.set(Ys(V.offsetWidth,V.offsetHeight)),wO(t))},O=V=>{s7(t,V)};l.bind(d,"resize",S),l.bind(d,"scroll",O);const N=xC(ge.fromDom(t.getBody()),"load",k);t.on("hide",()=>{gt(c,V=>{qe(V.element,"display","none")})}),t.on("show",()=>{gt(c,V=>{Gn(V.element,"display")})}),t.on("NodeChange",k),t.on("remove",()=>{N.unbind(),l.unbind(d,"resize",S),l.unbind(d,"scroll",O),d=null})},vW=(t,s,c)=>{xh(t)&&XC(c.mainUi.mothership.element,c.popupUi.mothership),hi(s,c.dialogUi.mothership)};var yW=Object.freeze({__proto__:null,render:(t,s,c,l,d)=>{const{mainUi:g,uiMotherships:h}=s,y=hn(0),S=g.outerContainer;OU(t);const k=ge.fromDom(d.targetNode),O=sa(Dr(k));XC(k,g.mothership),vW(t,O,s),t.on("PostRender",()=>{sr.setSidebar(S,c.sidebar,y4(t))}),t.on("SkinLoaded",()=>{gL(t,s,c,l),y.set(t.getWin().innerWidth),sr.setMenubar(S,$I(t,c)),sr.setViews(S,c.views),bW(t,s)});const N=sr.getSocket(S).getOrDie("Could not find expected socket element");if(pL){co(N.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const ne=m3(()=>{t.dispatch("ScrollContent")},20),Ce=Pl(N.element,"scroll",ne.throttle);t.on("remove",Ce.unbind)}OP(t,s),t.addCommand("ToggleSidebar",(ne,Ce)=>{sr.toggleSidebar(S,Ce),ZP(t)}),t.addQueryValueHandler("ToggleSidebar",()=>{var ne;return(ne=sr.whichSidebar(S))!==null&&ne!==void 0?ne:""}),t.addCommand("ToggleView",(ne,Ce)=>{if(sr.toggleView(S,Ce)){const ae=S.element;g.mothership.broadcastOn([Jm()],{target:ae}),gt(h,ve=>{ve.broadcastOn([Jm()],{target:ae})}),Xt(sr.whichView(S))&&(t.focus(),t.nodeChanged(),sr.refreshToolbar(S)),jP(t)}}),t.addQueryValueHandler("ToggleView",()=>{var ne;return(ne=sr.whichView(S))!==null&&ne!==void 0?ne:""});const V=Zp(t),z=()=>{sr.refreshToolbar(s.mainUi.outerContainer)};(V===Vu.sliding||V===Vu.floating)&&t.on("ResizeWindow ResizeEditor ResizeContent",()=>{const ne=t.getWin().innerWidth;ne!==y.get()&&(z(),y.set(ne))});const X={setEnabled:ne=>{jw(s,ne?"setEnabled":"setDisabled")},isEnabled:()=>!$n.isDisabled(S)};return{iframeContainer:N.element.dom,editorContainer:S.element.dom,api:X}}});const L2=t=>/^[0-9\.]+(|px)$/i.test(""+t)?A.some(parseInt(""+t,10)):A.none(),WD=t=>Qn(t)?t+"px":t,sv=(t,s,c)=>{const l=s.filter(g=>t<g),d=c.filter(g=>t>g);return l.or(d).getOr(t)},Ek=t=>{const s=i4(t),c=Ob(t),l=hT(t);return L2(s).map(d=>sv(d,c,l))},bL=t=>Ek(t).getOr(i4(t)),vL=t=>{const s=Cw(t),c=u4(t),l=Db(t);return L2(s).map(d=>sv(d,c,l))},CW=t=>vL(t).getOr(Cw(t)),{ToolbarLocation:ZD,ToolbarMode:yL}=W6,wW=40,kk=(t,s,c,l,d)=>{const{mainUi:g,uiMotherships:h}=c,y=Wp.DOM,S=fm(t),k=jp(t),O=Db(t).or(vL(t)),N=l.shared.header,V=N.isPositionedAtTop,z=150,X=Zp(t),ne=X===yL.sliding||X===yL.floating,Ce=hn(!1),ae=()=>Ce.get()&&!t.removed,ve=an=>ne?an.fold(W(0),ut=>ut.components().length>1?vs(ut.components()[1].element):0):0,ye=an=>{switch(pT(t)){case ZD.auto:const ut=sr.getToolbar(g.outerContainer),Nt=ve(ut),Wn=vs(an.element)-Nt,go=ir(s);if(go.y>Wn)return"top";{const to=Ul(s),Is=Math.max(to.dom.scrollHeight,vs(to));return go.bottom<Is-Wn||cc().bottom<go.bottom-Wn?"bottom":"top"}case ZD.bottom:return"bottom";case ZD.top:default:return"top"}},$e=an=>{d.on(ut=>{er.setModes(ut,[an]),N.setDockingMode(an);const Nt=V()?kc.TopToBottom:kc.BottomToTop;Ve(ut.element,lx,Nt)})},Le=()=>{d.on(an=>{const ut=O.getOrThunk(()=>Zd().width-ul(s).left-10);qe(an.element,"max-width",ut+"px")})},kt=(an,ut)=>{d.on(Nt=>{const Wn=sr.getToolbar(g.outerContainer),go=ve(Wn),Tn=ir(s),to=Kt(t,g.outerContainer.element),Is=()=>to.fold(()=>Tn.x,xl=>{const Xu=ir(xl);return Ko(xl,be())?Tn.x:Tn.x-Xu.x}),ks=()=>to.fold(()=>V()?Math.max(Tn.y-vs(Nt.element)+go,0):Tn.bottom,xl=>{var Xu;const Ju=ir(xl),_m=(Xu=xl.dom.scrollTop)!==null&&Xu!==void 0?Xu:0,hg=Ko(xl,be())?Math.max(Tn.y-vs(Nt.element)+go,0):Tn.y-Ju.y+_m-vs(Nt.element)+go;return V()?hg:Tn.bottom}),Vi=Is(),Hr=yn(an,Math.ceil(g.outerContainer.element.dom.getBoundingClientRect().width)).filter(xl=>xl>z).map(xl=>{const Xu=ut.getOr(Oa()),Ju=window.innerWidth-(Vi-Xu.left),_m=Math.max(Math.min(xl,Ju),z);return Ju<xl&&qe(g.outerContainer.element,"width",_m+"px"),{width:_m+"px"}}).getOr({width:"max-content"}),Yu={position:"absolute",left:Math.round(Vi)+"px",top:ks()+"px"};co(g.outerContainer.element,{...Yu,...Hr})})},Kt=(an,ut)=>xh(an)?sp(ut):A.none(),Ze=()=>{gt(h,an=>{an.broadcastOn([eg()],{})})},Jt=()=>!S&&(Ws(g.outerContainer.element).left+Q(g.outerContainer.element)>=window.innerWidth-wW||bs(g.outerContainer.element,"width").isSome())?(qe(g.outerContainer.element,"position","absolute"),qe(g.outerContainer.element,"left","0px"),Gn(g.outerContainer.element,"width"),!0):!1,Bt=an=>{if(!ae())return;S||Le();const ut=Oa(),Nt=S?!1:Jt();if(ne&&sr.refreshToolbar(g.outerContainer),!S){const Wn=Oa(),go=yn(ut.left!==Wn.left,ut);kt(Nt,go),go.each(Tn=>{ld(Tn.left,Wn.top)})}k&&d.on(an),Ze()},sn=()=>S||!k||!ae()?!1:d.get().exists(an=>{const ut=N.getDockingMode(),Nt=ye(an);return Nt!==ut?($e(Nt),!0):!1});return{isVisible:ae,isPositionedAtTop:V,show:()=>{Ce.set(!0),qe(g.outerContainer.element,"display","flex"),y.addClass(t.getBody(),"mce-edit-focus"),gt(h,an=>{Gn(an.element,"display")}),sn(),xh(t)?Bt(an=>er.isDocked(an)?er.reset(an):er.refresh(an)):Bt(er.refresh)},hide:()=>{Ce.set(!1),qe(g.outerContainer.element,"display","none"),y.removeClass(t.getBody(),"mce-edit-focus"),gt(h,an=>{qe(an.element,"display","none")})},update:Bt,updateMode:()=>{sn()&&Bt(er.reset)},repositionPopups:Ze}},jD=(t,s)=>{const c=ir(t);return{pos:s?c.y:c.bottom,bounds:c}},CL=(t,s,c,l)=>{const d=hn(jD(s,c.isPositionedAtTop())),g=k=>{const{pos:O,bounds:N}=jD(s,c.isPositionedAtTop()),{pos:V,bounds:z}=d.get(),X=N.height!==z.height||N.width!==z.width;d.set({pos:O,bounds:N}),X&&wO(t,k),c.isVisible()&&(V!==O?c.update(er.reset):X&&(c.updateMode(),c.repositionPopups()))};l||(t.on("activate",c.show),t.on("deactivate",c.hide)),t.on("SkinLoaded ResizeWindow",()=>c.update(er.reset)),t.on("NodeChange keydown",k=>{requestAnimationFrame(()=>g(k))});let h=0;const y=f3(()=>c.update(er.refresh),33);t.on("ScrollWindow",()=>{const k=Oa().left;k!==h&&(h=k,y.throttle()),c.updateMode()}),xh(t)&&t.on("ElementScroll",k=>{c.update(er.refresh)});const S=Al();S.set(xC(ge.fromDom(t.getBody()),"load",k=>g(k.raw))),t.on("remove",()=>{S.clear()})};var wL=Object.freeze({__proto__:null,render:(t,s,c,l,d)=>{const{mainUi:g}=s,h=Yo(),y=ge.fromDom(d.targetNode),S=kk(t,y,s,l,h),k=g4(t);VI(t);const O=()=>{if(h.isSet()){S.show();return}h.set(sr.getHeader(g.outerContainer).getOrDie());const V=x4(t);xh(t)?(XC(y,g.mothership),XC(y,s.popupUi.mothership)):hi(V,g.mothership),hi(V,s.dialogUi.mothership);const z=()=>{gL(t,s,c,l),sr.setMenubar(g.outerContainer,$I(t,c)),S.show(),CL(t,y,S,k),t.nodeChanged()};k?t.once("SkinLoaded",z):z()};t.on("show",O),t.on("hide",S.hide),k||(t.on("focus",O),t.on("blur",S.hide)),t.on("init",()=>{(t.hasFocus()||k)&&O()}),OP(t,s);const N={show:O,hide:S.hide,setEnabled:V=>{jw(s,V?"setEnabled":"setDisabled")},isEnabled:()=>!$n.isDisabled(g.outerContainer)};return{editorContainer:g.outerContainer.element.dom,api:N}}});const xW=()=>{const t=Yo(),s=Yo(),c=Yo();return{dialogUi:t,popupUi:s,mainUi:c,getUiMotherships:()=>{const g=t.get().map(y=>y.mothership),h=s.get().map(y=>y.mothership);return g.fold(()=>h.toArray(),y=>h.fold(()=>[y],S=>Ko(y.element,S.element)?[y]:[y,S]))},lazyGetInOuterOrDie:(g,h)=>()=>c.get().bind(y=>h(y.outerContainer)).getOrDie(`Could not find ${g} element in OuterContainer`)}},SL="contexttoolbar-show",xL="contexttoolbar-hide",TW=t=>({hide:()=>Eo(t,ua()),getValue:()=>Ut.getValue(t)}),TL=(t,s)=>Ye(G$,(c,l)=>{const d=t.get(c),g=TW(d);s.onAction(g,l.event.buttonApi)}),EW=(t,s,c)=>{const{primary:l,...d}=s.original,g=dt(Fw({...d,type:"button",onAction:ee}));return iL(g,c,[TL(t,s)])},kW=(t,s,c)=>{const{primary:l,...d}=s.original,g=dt(Vw({...d,type:"togglebutton",onAction:ee}));return uL(g,c,[TL(t,s)])},F2=t=>t.type==="contextformtogglebutton",_W=(t,s,c)=>F2(s)?kW(t,s,c):EW(t,s,c),AW=(t,s,c)=>{const l=je(s,h=>us(_W(t,h,c)));return{asSpecs:()=>je(l,h=>h.asSpec()),findPrimary:h=>tn(s,(y,S)=>y.primary?A.from(l[S]).bind(k=>k.getOpt(h)).filter(Oe($n.isDisabled)):A.none())}},EL=(t,s)=>{const c=t.label.fold(()=>({}),g=>({"aria-label":g})),l=us(of.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:t.initValue(),inputAttributes:c,selectOnFocus:!0,inputBehaviours:vt([$n.config({disabled:()=>s.checkUiComponentContext("mode:design").shouldDisable}),pc(()=>s.checkUiComponentContext("mode:design")),En.config({mode:"special",onEnter:g=>d.findPrimary(g).map(h=>(Mf(h),!0)),onLeft:(g,h)=>(h.cut(),A.none()),onRight:(g,h)=>(h.cut(),A.none())})])})),d=AW(l,t.commands,s);return[{title:A.none(),items:[l.asSpec()]},{title:A.none(),items:d.asSpecs()}]},DW={renderContextForm:(t,s,c)=>gk({type:t,uid:Qt("context-toolbar"),initGroups:EL(s,c),onEscape:A.none,cyclicKeying:!0,providers:c}),buildInitGroups:EL},GD=(t,s,c)=>s.bottom-t.y>=c&&t.bottom-s.y>=c,RW=t=>{const s=t.getBoundingClientRect();if(s.height<=0&&s.width<=0){const c=Ci(ge.fromDom(t.startContainer),t.startOffset).element;return(Kr(c)?yc(c):A.some(c)).filter(xo).map(d=>d.dom.getBoundingClientRect()).getOr(s)}else return s},qD=t=>{const s=t.selection.getRng(),c=RW(s);if(t.inline){const l=Oa();return lr(l.left+c.left,l.top+c.top,c.width,c.height)}else{const l=xu(ge.fromDom(t.getBody()));return lr(l.x+c.left,l.y+c.top,c.width,c.height)}},MW=(t,s)=>s.filter(c=>se(c)&&xa(c)).map(xu).getOrThunk(()=>qD(t)),NW=(t,s,c)=>{const l=Math.max(t.x+c,s.x),d=Math.min(t.right-c,s.right);return{x:l,width:d-l}},PW=(t,s,c,l,d,g)=>{const h=ge.fromDom(t.getContainer()),y=gr(h,".tox-editor-header").getOr(h),S=ir(y),k=S.y>=s.bottom,O=l&&!k;if(t.inline&&O)return{y:Math.max(S.bottom+g,c.y),bottom:c.bottom};if(t.inline&&!O)return{y:c.y,bottom:Math.min(S.y-g,c.bottom)};const N=d==="line"?ir(h):s;return O?{y:Math.max(S.bottom+g,c.y),bottom:Math.min(N.bottom-g,c.bottom)}:{y:Math.max(N.y+g,c.y),bottom:Math.min(S.y-g,c.bottom)}},wy=(t,s,c,l=0)=>{const d=Zd(window),g=ir(ge.fromDom(t.getContentAreaContainer())),h=wT(t)||xT(t)||Sw(t),{x:y,width:S}=NW(g,d,l);if(t.inline&&!h)return lr(y,d.y,S,d.height);{const k=s.header.isPositionedAtTop(),{y:O,bottom:N}=PW(t,g,d,k,c,l);return lr(y,O,S,N-O)}},H2=12,kL={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},_L={maxHeightFunction:jf(),maxWidthFunction:yD()},AL=(t,s)=>{const c=t.selection.getRng(),l=Ci(ge.fromDom(c.startContainer),c.startOffset);return c.startContainer===c.endContainer&&c.startOffset===c.endOffset-1&&Ko(l.element,s)},KD=(t,s,c)=>{const l=bs(t,"position");qe(t,"position",s);const d=c(t);return l.each(g=>qe(t,"position",g)),d},YD=t=>t==="node",OL=(t,s,c,l,d)=>{const g=qD(t),h=l.lastElement().exists(y=>Ko(c,y));if(AL(t,c))return h?L5:Tm;if(h)return KD(s,l.getMode(),()=>GD(g,ir(s),-20)&&!l.isReposition()?Nz:L5);{const y=l.getMode()==="fixed"?d.y+Oa().top:d.y,S=vs(s)+H2;return y+S<=g.y?Tm:ay}},BW=(t,s,c,l)=>{const d=S=>(k,O,N,V,z)=>{const X=OL(t,V,S,c,z),ne={...k,y:z.y,height:z.height};return{...X(ne,O,N,V,z),alwaysFit:!0}},g=S=>YD(l)?[d(S)]:[];return s?{onLtr:S=>[Ec,Hc,Vc,Pa,zc,ys].concat(g(S)),onRtl:S=>[Ec,Vc,Hc,zc,Pa,ys].concat(g(S))}:{onLtr:S=>[ys,Ec,Pa,Hc,zc,Vc].concat(g(S)),onRtl:S=>[ys,Ec,zc,Vc,Pa,Hc].concat(g(S))}},Sy=(t,s,c,l)=>s==="line"?{bubble:Fu(H2,0,kL),layouts:{onLtr:()=>[Zv],onRtl:()=>[bC]},overrides:_L}:{bubble:Fu(0,H2,kL,1/H2),layouts:BW(t,c,l,s),overrides:_L},xy=(t,s)=>{const c=uo(s,g=>g.predicate(t.dom)),{pass:l,fail:d}=dc(c,g=>g.type==="contexttoolbar");return{contextToolbars:l,contextForms:d}},_k=t=>{if(t.length<=1)return t;{const s=g=>Ms(t,h=>h.position===g),c=g=>uo(t,h=>h.position===g),l=s("selection"),d=s("node");if(l||d)if(d&&l){const g=c("node"),h=je(c("selection"),y=>({...y,position:"node"}));return g.concat(h)}else return c(l?"selection":"node");else return c("line")}},XD=t=>{if(t.length<=1)return t;{const s=l=>Cn(t,d=>d.position===l);return s("selection").orThunk(()=>s("node")).orThunk(()=>s("line")).map(l=>l.position).fold(()=>[],l=>uo(t,d=>d.position===l))}},JD=(t,s,c)=>{const l=xy(t,s);if(l.contextForms.length>0)return A.some({elem:t,toolbars:[l.contextForms[0]]});{const d=xy(t,c);if(d.contextForms.length>0)return A.some({elem:t,toolbars:[d.contextForms[0]]});if(l.contextToolbars.length>0||d.contextToolbars.length>0){const g=_k(l.contextToolbars.concat(d.contextToolbars));return A.some({elem:t,toolbars:g})}else return A.none()}},DL=(t,s,c)=>t(s)?A.none():ii(s,l=>{if(xo(l)){const{contextToolbars:d,contextForms:g}=xy(l,c.inNodeScope),h=g.length>0?g:XD(d);return h.length>0?A.some({elem:l,toolbars:h}):A.none()}else return A.none()},t),Ak=(t,s)=>{const c=ge.fromDom(s.getBody()),l=h=>Ko(h,c),d=h=>!l(h)&&!nc(c,h),g=ge.fromDom(s.selection.getNode());return d(g)?A.none():JD(g,t.inNodeScope,t.inEditorScope).orThunk(()=>DL(l,g,t))},RL=(t,s)=>{const c={},l=[],d=[],g={},h={},y=(O,N)=>{const V=dt(Uw(N));c[O]=V,V.launch.map(z=>{g["form:"+O]={...N.launch,type:z.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{s(V)}}}),V.scope==="editor"?d.push(V):l.push(V),h[O]=V},S=(O,N)=>{M8(N).each(V=>{N.scope==="editor"?d.push(V):l.push(V),h[O]=V})},k=mn(t);return gt(k,O=>{const N=t[O];N.type==="contextform"?y(O,N):N.type==="contexttoolbar"&&S(O,N)}),{forms:c,inNodeScope:l,inEditorScope:d,lookupTable:h,formNavigators:g}},QD=Qt("forward-slide"),Ok=Qt("backward-slide"),eR=Qt("change-slide-event"),Dk="tox-pop--resizing",$W=t=>{const s=hn([]);return Fr.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:c=>{s.set([]),Fr.getContent(c).each(l=>{Gn(l.element,"visibility")}),Ts(c.element,Dk),Gn(c.element,"width")},inlineBehaviours:vt([oo("context-toolbar-events",[Nf(A1(),(c,l)=>{l.event.raw.propertyName==="width"&&(Ts(c.element,Dk),Gn(c.element,"width"))}),Ye(eR,(c,l)=>{const d=c.element;Gn(d,"width");const g=G(d);Fr.setContent(c,l.event.contents),hc(d,Dk);const h=G(d);qe(d,"width",g+"px"),Fr.getContent(c).each(y=>{l.event.focus.bind(S=>(su(S),bl(d))).orThunk(()=>(En.focusIn(y),im(Dr(d))))}),setTimeout(()=>{qe(c.element,"width",h+"px")},0)}),Ye(QD,(c,l)=>{Fr.getContent(c).each(d=>{s.set(s.get().concat([{bar:d,focus:im(Dr(c.element))}]))}),ln(c,eR,{contents:l.event.forwardContents,focus:A.none()})}),Ye(Ok,(c,l)=>{st(s.get()).each(d=>{s.set(s.get().slice(0,s.get().length-1)),ln(c,eR,{contents:Oi(d.bar),focus:d.focus})})})]),En.config({mode:"special",onEscape:c=>st(s.get()).fold(()=>t.onEscape(),l=>(Eo(c,Ok),A.some(!0)))})]),lazySink:()=>ao.value(t.sink)})},tR="tox-pop--transition",Rk=(t,s,c,l)=>{const d=l.backstage,g=d.shared,h=po().deviceType.isTouch,y=Yo(),S=Yo(),k=Yo(),O=Yc($W({sink:c,onEscape:()=>(t.focus(),A.some(!0))})),N=()=>{const Bt=k.get().getOr("node"),sn=YD(Bt)?1:0;return wy(t,g,Bt,sn)},V=()=>!t.removed&&!(h()&&d.isContextMenuOpen()),z=Bt=>br(ta(Bt,y.get(),Ko),!0),X=()=>{if(V()){const Bt=N(),sn=br(k.get(),"node")?MW(t,y.get()):qD(t);return Bt.height<=0||!GD(sn,Bt,.01)}else return!0},ne=()=>{y.clear(),S.clear(),k.clear(),Fr.hide(O)},Ce=()=>{if(Fr.isOpen(O)){const Bt=O.element;Gn(Bt,"display"),X()?qe(Bt,"display","none"):(S.set(0),Fr.reposition(O))}},ae=Bt=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[Bt],behaviours:vt([En.config({mode:"acyclic"}),oo("pop-dialog-wrap-events",[mr(sn=>{t.shortcuts.add("ctrl+F9","focus statusbar",()=>En.focusIn(sn))}),nm(sn=>{t.shortcuts.remove("ctrl+F9")})])])}),ve=Ue(()=>RL(s,Bt=>{const sn=Le([Bt]);ln(O,QD,{forwardContents:ae(sn)})})),ye=(Bt,sn)=>Tk(t,{buttons:Bt,toolbar:sn.items,allowToolbarGroups:!1},l.backstage,A.some(["form:"])),$e=(Bt,sn)=>DW.buildInitGroups(Bt,sn),Le=Bt=>{const{buttons:sn}=t.ui.registry.getAll(),Do=ve(),rr={...sn,...Do.formNavigators},is=Zp(t)===Vu.scrolling?Vu.scrolling:Vu.default,an=Rn(je(Bt,ut=>ut.type==="contexttoolbar"?ye(rr,ut):$e(ut,g.providers)));return gk({type:is,uid:Qt("context-toolbar"),initGroups:an,onEscape:A.none,cyclicKeying:!0,providers:g.providers})},kt=(Bt,sn)=>{const Do=Bt==="node"?g.anchors.node(sn):g.anchors.cursor(),rr=Sy(t,Bt,h(),{lastElement:y.get,isReposition:()=>br(S.get(),0),getMode:()=>Ia.getMode(c)});return Hs(Do,rr)},Kt=(Bt,sn)=>{if(Jt.cancel(),!V())return;const Do=Le(Bt),rr=Bt[0].position,is=kt(rr,sn);k.set(rr),S.set(1);const an=O.element;Gn(an,"display"),z(sn)||(Ts(an,tR),Ia.reset(c,O)),Fr.showWithinBounds(O,ae(Do),{anchor:is,transition:{classes:[tR],mode:"placement"}},()=>A.some(N())),sn.fold(y.clear,y.set),X()&&qe(an,"display","none")};let Ze=!1;const Jt=f3(()=>{if(!(!t.hasFocus()||t.removed||Ze))if(Nl(O.element,tR))Jt.throttle();else{const Bt=ve();Ak(Bt,t).fold(ne,sn=>{Kt(sn.toolbars,A.some(sn.elem))})}},17);t.on("init",()=>{t.on("remove",ne),t.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",Ce),t.on("click keyup focus SetContent",Jt.throttle),t.on(xL,ne),t.on(SL,Bt=>{const sn=ve();pt(sn.lookupTable,Bt.toolbarKey).each(Do=>{Kt([Do],yn(Bt.target!==t,Bt.target)),Fr.getContent(O).each(En.focusIn)})}),t.on("focusout",Bt=>{_b.setEditorTimeout(t,()=>{bl(c.element).isNone()&&bl(O.element).isNone()&&ne()},0)}),t.on("SwitchMode",()=>{t.mode.isReadOnly()&&ne()}),t.on("ExecCommand",({command:Bt})=>{Bt.toLowerCase()==="toggleview"&&ne()}),t.on("AfterProgressState",Bt=>{Bt.state?ne():t.hasFocus()&&Jt.throttle()}),t.on("dragstart",()=>{Ze=!0}),t.on("dragend drop",()=>{Ze=!1}),t.on("NodeChange",Bt=>{bl(O.element).fold(Jt.throttle,ee)})})},ML=t=>{gt([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],c=>{t.ui.registry.addToggleButton(c.name,{tooltip:c.text,icon:c.icon,onAction:gu(t,c.cmd),onSetup:cE(t,c.name)})}),t.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:Il(t),onAction:gu(t,"JustifyNone")})},NL=(t,s)=>{const c=()=>{const l=s.getOptions(t),d=s.getCurrent(t).map(s.hash),g=Yo();return je(l,h=>({type:"togglemenuitem",text:s.display(h),onSetup:y=>{const S=O=>{O&&(g.on(N=>N.setActive(!1)),g.set(y)),y.setActive(O)};S(br(d,s.hash(h)));const k=s.watcher(t,h,S);return()=>{g.clear(),k()}},onAction:()=>s.setCurrent(t,h)}))};t.ui.registry.addMenuButton(s.name,{tooltip:s.text,icon:s.icon,fetch:l=>l(c()),onSetup:s.onToolbarSetup}),t.ui.registry.addNestedMenuItem(s.name,{type:"nestedmenuitem",text:s.text,getSubmenuItems:c,onSetup:s.onMenuSetup})},IW=t=>({name:"lineheight",text:"Line height",icon:"line-height",getOptions:_N,hash:s=>YI(s,["fixed","relative","empty"]).getOr(s),display:xt,watcher:(s,c,l)=>s.formatter.formatChanged("lineheight",l,!1,{value:c}).unbind,getCurrent:s=>A.from(s.queryCommandValue("LineHeight")),setCurrent:(s,c)=>s.execCommand("LineHeight",!1,c),onToolbarSetup:Il(t),onMenuSetup:Il(t)}),LW=t=>A.from(hN(t)).map(c=>({name:"language",text:"Language",icon:"language",getOptions:W(c),hash:l=>zt(l.customCode)?l.code:`${l.code}/${l.customCode}`,display:l=>l.title,watcher:(l,d,g)=>{var h;return l.formatter.formatChanged("lang",g,!1,{value:d.code,customValue:(h=d.customCode)!==null&&h!==void 0?h:null}).unbind},getCurrent:l=>{const d=ge.fromDom(l.selection.getNode());return ia(d,g=>A.some(g).filter(xo).bind(h=>Hn(h,"lang").map(S=>{const k=Hn(h,"data-mce-lang").getOrUndefined();return{code:S,customCode:k,title:""}})))},setCurrent:(l,d)=>l.execCommand("Lang",!1,d),onToolbarSetup:l=>{const d=Al();return l.setActive(t.formatter.match("lang",{},void 0,!0)),d.set(t.formatter.formatChanged("lang",l.setActive,!0)),rE(d.clear,Il(t)(l))},onMenuSetup:Il(t)})),FW=t=>{NL(t,IW(t)),LW(t).each(s=>NL(t,s))},HW=(t,s)=>{yk(t,s),HU(t,s),nW(t,s),BU(t,s),nL(t,s)},PL=t=>{t.ui.registry.addContext("editable",()=>t.selection.isEditable()),t.ui.registry.addContext("mode",s=>t.mode.get()===s),t.ui.registry.addContext("any",Mt),t.ui.registry.addContext("formatting",s=>t.formatter.canApply(s)),t.ui.registry.addContext("insert",s=>t.schema.isValidChild(t.selection.getNode().tagName,s))},BL=t=>zb(t,"NodeChange",s=>{s.setEnabled(t.queryCommandState("outdent")&&t.selection.isEditable())}),$L=t=>{t.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:BL(t),onAction:gu(t,"outdent")}),t.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:Il(t),onAction:gu(t,"indent")})},IL=t=>{$L(t)},LL=(t,s)=>c=>{c.setActive(s.get());const l=d=>{s.set(d.state),c.setActive(d.state)};return t.on("PastePlainTextToggle",l),rE(()=>t.off("PastePlainTextToggle",l),Il(t)(c))},FL=t=>{const s=hn(EN(t)),c=()=>t.execCommand("mceTogglePlainTextPaste");t.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:c,onSetup:LL(t,s)}),t.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:c,onSetup:LL(t,s)})},Mk=(t,s)=>()=>{t.execCommand("mceToggleFormat",!1,s)},VW=t=>{Dh.each([{name:"bold",text:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(s,c)=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:cE(t,s.name),onAction:Mk(t,s.name),shortcut:s.shortcut})});for(let s=1;s<=6;s++){const c="h"+s,l=`Access+${s}`;t.ui.registry.addToggleButton(c,{text:c.toUpperCase(),tooltip:"Heading "+s,onSetup:cE(t,c),onAction:Mk(t,c),shortcut:l})}},ZG=t=>{Dh.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy",context:"any"},{name:"help",text:"Help",action:"mceHelp",icon:"help",shortcut:"Alt+0",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onAction:gu(t,s.action),shortcut:s.shortcut,context:s.context})}),Dh.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:Il(t),onAction:gu(t,s.action)})})},zW=t=>{Dh.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],s=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onAction:gu(t,s.action),onSetup:cE(t,s.name)})})},UW=t=>{VW(t),ZG(t),zW(t)},WW=t=>{Dh.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onAction:gu(t,s.action),context:s.context})}),Dh.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onSetup:Il(t),onAction:gu(t,s.action)})}),t.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:Il(t),onAction:Mk(t,"code")})},ZW=t=>{UW(t),WW(t)},Nk=(t,s)=>zb(t,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",c=>{c.setEnabled(!t.mode.isReadOnly()&&t.undoManager[s]())}),jW=t=>{t.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:Nk(t,"hasUndo"),onAction:gu(t,"undo")}),t.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:Nk(t,"hasRedo"),onAction:gu(t,"redo")})},GW=t=>{t.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:Nk(t,"hasUndo"),onAction:gu(t,"undo"),shortcut:"Meta+Z"}),t.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:Nk(t,"hasRedo"),onAction:gu(t,"redo"),shortcut:"Meta+Y"})},qW=t=>{jW(t),GW(t)},KW=t=>zb(t,"VisualAid",s=>{s.setActive(t.hasVisual)}),YW=t=>{t.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:KW(t),onAction:gu(t,"mceToggleVisualAid"),context:"any"})},XW=t=>{t.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:gu(t,"mceToggleVisualAid"),context:"any"})},JW=t=>{XW(t),YW(t)},QW=(t,s)=>{ML(t),ZW(t),HW(t,s),qW(t),x7(t),JW(t),IL(t),FW(t),FL(t),PL(t)},HL=t=>Dt(t)?t.split(/[ ,]/):t,VL=t=>s=>s.options.get(t),eZ=t=>{const s=t.options.register;s("contextmenu_avoid_overlap",{processor:"string",default:""}),s("contextmenu_never_use_native",{processor:"boolean",default:!1}),s("contextmenu",{processor:c=>c===!1?{value:[],valid:!0}:Dt(c)||Re(c,Dt)?{value:HL(c),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},zL=VL("contextmenu_never_use_native"),tZ=VL("contextmenu_avoid_overlap"),nZ=t=>UL(t).length===0,UL=t=>{const s=t.ui.registry.getAll().contextMenus,c=t.options.get("contextmenu");return t.options.isSet("contextmenu")?c:uo(c,l=>yo(s,l))},V2=(t,s)=>({type:"makeshift",x:t,y:s}),oZ=(t,s,c)=>V2(t.x+s,t.y+c),WL=t=>t.type==="longpress"||t.type.indexOf("touch")===0,nR=t=>{if(WL(t)){const s=t.touches[0];return V2(s.pageX,s.pageY)}else return V2(t.pageX,t.pageY)},sZ=t=>{if(WL(t)){const s=t.touches[0];return V2(s.clientX,s.clientY)}else return V2(t.clientX,t.clientY)},rZ=(t,s)=>{const c=Wp.DOM.getPos(t);return oZ(s,c.x,c.y)},oR=(t,s)=>s.type==="contextmenu"||s.type==="longpress"?t.inline?nR(s):rZ(t.getContentAreaContainer(),sZ(s)):sR(t),sR=t=>({type:"selection",root:ge.fromDom(t.selection.getNode())}),ZL=t=>({type:"node",node:A.some(ge.fromDom(t.selection.getNode())),root:ge.fromDom(t.getBody())}),jL=(t,s,c)=>{switch(c){case"node":return ZL(t);case"point":return oR(t,s);case"selection":return sR(t)}},cZ=(t,s,c,l,d,g)=>{const h=c(),y=jL(t,s,g);a1(h,hm.CLOSE_ON_EXECUTE,l,{isHorizontalMenu:!1,search:A.none()}).map(S=>{s.preventDefault(),Fr.showMenuAt(d,{anchor:y},{menu:{markers:Yp("normal")},data:S})})},aZ={onLtr:()=>[Ec,Hc,Vc,Pa,zc,ys,Tm,ay,E2,QE,T2,JE],onRtl:()=>[Ec,Vc,Hc,zc,Pa,ys,Tm,ay,T2,JE,E2,QE]},lZ=12,iZ={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},rR=(t,s)=>{const c=t.selection;if(c.isCollapsed()||s.touches.length<1)return!1;{const l=s.touches[0],d=c.getRng();return ab(t.getWin(),kp.domRange(d)).exists(h=>h.left<=l.clientX&&h.right>=l.clientX&&h.top<=l.clientY&&h.bottom>=l.clientY)}},uZ=t=>{const s=t.selection.getRng(),c=()=>{_b.setEditorTimeout(t,()=>{t.selection.setRng(s)},10),g()};t.once("touchend",c);const l=h=>{h.preventDefault(),h.stopImmediatePropagation()};t.on("mousedown",l,!0);const d=()=>g();t.once("longpresscancel",d);const g=()=>{t.off("touchend",c),t.off("longpresscancel",d),t.off("mousedown",l)}},GL=(t,s,c)=>{const l=jL(t,s,c);return{bubble:Fu(0,c==="point"?lZ:0,iZ),layouts:aZ,overrides:{maxWidthFunction:yD(),maxHeightFunction:jf()},...l}},dZ=(t,s,c,l,d,g,h)=>{const y=GL(t,s,g);a1(c,hm.CLOSE_ON_EXECUTE,l,{isHorizontalMenu:!0,search:A.none()}).map(S=>{s.preventDefault();const k=h?vi.HighlightMenuAndItem:vi.HighlightNone;Fr.showMenuWithinBounds(d,{anchor:y},{menu:{markers:Yp("normal"),highlightOnOpen:k},data:S,type:"horizontal"},()=>A.some(wy(t,l.shared,g==="node"?"node":"selection"))),t.dispatch(xL)})},mZ=(t,s,c,l,d,g)=>{const h=po(),y=h.os.isiOS(),S=h.os.isMacOS(),k=h.os.isAndroid(),O=h.deviceType.isTouch(),N=()=>!(k||y||S&&O),V=()=>{const z=c();dZ(t,s,z,l,d,g,N())};if((S||y)&&g!=="node"){const z=()=>{uZ(t),V()};rR(t,s)?z():(t.once("selectionchange",z),t.once("touchend",()=>t.off("selectionchange",z)))}else V()},Pk=t=>Dt(t)?t==="|":t.type==="separator",cR={type:"separator"},aR=t=>{const s=c=>({text:c.text,icon:c.icon,enabled:c.enabled,shortcut:c.shortcut});if(Dt(t))return t;switch(t.type){case"separator":return cR;case"submenu":return{type:"nestedmenuitem",...s(t),getSubmenuItems:()=>{const l=t.getSubmenuItems();return Dt(l)?l:je(l,aR)}};default:const c=t;return{type:"menuitem",...s(c),onAction:Xe(c.onAction)}}},qL=(t,s)=>{if(s.length===0)return t;const l=st(t).filter(d=>!Pk(d)).fold(()=>[],d=>[cR]);return t.concat(l).concat(s).concat([cR])},fZ=(t,s,c)=>{const l=Go(s,(d,g)=>pt(t,g.toLowerCase()).map(h=>{const y=h.update(c);if(Dt(y)&&le(_r(y)))return qL(d,y.split(" "));if(xn(y)&&y.length>0){const S=je(y,aR);return qL(d,S)}else return d}).getOrThunk(()=>d.concat([g])),[]);return l.length>0&&Pk(l[l.length-1])&&l.pop(),l},lR=(t,s)=>s.ctrlKey&&!zL(t),gZ=t=>t.type==="longpress"||yo(t,"touches"),KL=(t,s)=>!gZ(s)&&(s.button!==2||s.target===t.getBody()&&s.pointerType===""),YL=(t,s)=>KL(t,s)?t.selection.getStart(!0):s.target,hZ=(t,s)=>{const c=tZ(t),l=KL(t,s)?"selection":"point";if(le(c)){const d=YL(t,s);return e2(ge.fromDom(d),c)?"node":l}else return l},pZ=(t,s,c)=>{const d=po().deviceType.isTouch,g=Yc(Fr.sketch({dom:{tag:"div"},lazySink:s,onEscape:()=>t.focus(),onShow:()=>c.setContextMenuState(!0),onHide:()=>c.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:vt([oo("dismissContextMenu",[Ye(Ai(),(S,k)=>{Uo.close(S),t.focus()})])])})),h=()=>Fr.hide(g),y=S=>{if(zL(t)&&S.preventDefault(),lR(t,S)||nZ(t))return;const k=hZ(t,S),O=()=>{const V=YL(t,S),z=t.ui.registry.getAll(),X=UL(t);return fZ(z.contextMenus,X,V)};(d()?mZ:cZ)(t,S,O,c,g,k)};t.on("init",()=>{const S="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(d()?"":" ResizeWindow");t.on(S,h),t.on("longpress contextmenu",y)})},Bk=L.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),$k=t=>s=>s.translate(-t.left,-t.top),Ik=t=>s=>s.translate(t.left,t.top),Ph=t=>(s,c)=>Go(t,(l,d)=>d(l),Ys(s,c)),Lk=(t,s,c)=>t.fold(Ph([Ik(c),$k(s)]),Ph([$k(s)]),Ph([])),Ty=(t,s,c)=>t.fold(Ph([Ik(c)]),Ph([]),Ph([Ik(s)])),XL=(t,s,c)=>t.fold(Ph([]),Ph([$k(c)]),Ph([Ik(s),$k(c)])),bZ=(t,s,c,l,d,g)=>{const h=Ty(t,d,g),y=Ty(s,d,g);return Math.abs(h.left-y.left)<=c&&Math.abs(h.top-y.top)<=l},vZ=(t,s,c,l,d,g)=>{const h=Ty(t,d,g),y=Ty(s,d,g),S=Math.abs(h.left-y.left),k=Math.abs(h.top-y.top);return Ys(S,k)},iR=(t,s,c)=>{const l=t.fold((d,g)=>({position:A.some("absolute"),left:A.some(d+"px"),top:A.some(g+"px")}),(d,g)=>({position:A.some("absolute"),left:A.some(d-c.left+"px"),top:A.some(g-c.top+"px")}),(d,g)=>({position:A.some("fixed"),left:A.some(d+"px"),top:A.some(g+"px")}));return{right:A.none(),bottom:A.none(),...l}},yZ=(t,s,c)=>t.fold((l,d)=>Hk(l+s,d+c),(l,d)=>d1(l+s,d+c),(l,d)=>rv(l+s,d+c)),Fk=(t,s,c,l)=>{const d=(g,h)=>(y,S)=>{const k=g(s,c,l);return h(y.getOr(k.left),S.getOr(k.top))};return t.fold(d(XL,Hk),d(Ty,d1),d(Lk,rv))},Hk=Bk.offset,d1=Bk.absolute,rv=Bk.fixed,m1=(t,s)=>{const c=nn(t,s);return zt(c)?NaN:parseInt(c,10)},JL=(t,s)=>{const c=t.element,l=m1(c,s.leftAttr),d=m1(c,s.topAttr);return isNaN(l)||isNaN(d)?A.none():A.some(Ys(l,d))},CZ=(t,s,c)=>{const l=t.element;Ve(l,s.leftAttr,c.left+"px"),Ve(l,s.topAttr,c.top+"px")},wZ=(t,s)=>{const c=t.element;B(c,s.leftAttr),B(c,s.topAttr)},SZ=(t,s,c,l)=>JL(t,s).fold(()=>c,d=>rv(d.left+l.left,d.top+l.top)),xZ=(t,s,c,l,d,g)=>{const h=SZ(t,s,c,l),y=s.mustSnap?TZ(t,s,h,d,g):EZ(t,s,h,d,g),S=Lk(h,d,g);return CZ(t,s,S),y.fold(()=>({coord:rv(S.left,S.top),extra:A.none()}),k=>({coord:k.output,extra:k.extra}))},QL=(t,s)=>{wZ(t,s)},eF=(t,s,c,l)=>tn(t,d=>{const g=d.sensor;return bZ(s,g,d.range.left,d.range.top,c,l)?A.some({output:Fk(d.output,s,c,l),extra:d.extra}):A.none()}),TZ=(t,s,c,l,d)=>{const g=s.getSnapPoints(t);return eF(g,c,l,d).orThunk(()=>Go(g,(S,k)=>{const O=k.sensor,N=vZ(c,O,k.range.left,k.range.top,l,d);return S.deltas.fold(()=>({deltas:A.some(N),snap:A.some(k)}),V=>{const z=(N.left+N.top)/2,X=(V.left+V.top)/2;return z<=X?{deltas:A.some(N),snap:A.some(k)}:S})},{deltas:A.none(),snap:A.none()}).snap.map(S=>({output:Fk(S.output,c,l,d),extra:S.extra})))},EZ=(t,s,c,l,d)=>{const g=s.getSnapPoints(t);return eF(g,c,l,d)},kZ=(t,s,c)=>({coord:Fk(t.output,t.output,s,c),extra:t.extra});var _Z=Object.freeze({__proto__:null,snapTo:(t,s,c,l)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=oc(t.element),h=Oa(g),y=_v(d),S=kZ(l,h,y),k=iR(S.coord,h,y);Jo(d,k)}}});const uR="data-initial-z-index",AZ=t=>{yc(t.element).filter(xo).each(s=>{Hn(s,uR).fold(()=>Gn(s,"z-index"),c=>qe(s,"z-index",c)),B(s,uR)})},OZ=t=>{yc(t.element).filter(xo).each(s=>{bs(s,"z-index").each(c=>{Ve(s,uR,c)}),qe(s,"z-index",fs(t.element,"z-index"))})},tF=(t,s)=>{t.getSystem().addToGui(s),OZ(s)},nF=t=>{AZ(t),t.getSystem().removeFromGui(t)},dR=(t,s,c)=>t.getSystem().build(rf.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[s]},events:c}));var DZ=Lc("snaps",[Ke("getSnapPoints"),Lo("onSensor"),Ke("leftAttr"),Ke("topAttr"),Te("lazyViewport",cc),Te("mustSnap",!1)]);const cv=[Te("useFixed",no),Ke("blockerClass"),Te("getTarget",xt),Te("onDrag",ee),Te("repositionTarget",!0),Te("onDrop",ee),Js("getBounds",cc),DZ],RZ=t=>Sa(bs(t,"left"),bs(t,"top"),bs(t,"position"),(s,c,l)=>(l==="fixed"?rv:Hk)(parseInt(s,10),parseInt(c,10))).getOrThunk(()=>{const s=Ws(t);return d1(s.left,s.top)}),MZ=(t,s,c,l,d)=>{const g=d.bounds,h=Ty(s,c,l),y=$u(h.left,g.x,g.x+g.width-d.width),S=$u(h.top,g.y,g.y+g.height-d.height),k=d1(y,S);return s.fold(()=>{const O=XL(k,c,l);return Hk(O.left,O.top)},W(k),()=>{const O=Lk(k,c,l);return rv(O.left,O.top)})},mR=(t,s,c,l,d,g,h)=>{const y=s.fold(()=>{const S=yZ(c,g.left,g.top),k=Lk(S,l,d);return rv(k.left,k.top)},S=>{const k=xZ(t,S,c,g,l,d);return k.extra.each(O=>{S.onSensor(t,O)}),k.coord});return MZ(t,y,l,d,h)},NZ=(t,s,c,l)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=oc(t.element),h=Oa(g),y=_v(d),S=RZ(d),k=mR(t,s.snaps,S,h,y,l,c),O=iR(k,h,y);Jo(d,O)}s.onDrag(t,d,l)},oF=(t,s)=>({bounds:t.getBounds(),height:_l(s.element),width:Q(s.element)}),fR=(t,s,c,l,d)=>{const g=c.update(l,d),h=c.getStartData().getOrThunk(()=>oF(s,t));g.each(y=>{NZ(t,s,h,y)})},sF=(t,s,c,l)=>{s.each(nF),c.snaps.each(g=>{QL(t,g)});const d=c.getTarget(t.element);l.reset(),c.onDrop(t,d)},gR=t=>(s,c)=>{const l=d=>{c.setStartData(oF(s,d))};return xs([Ye(Rf(),d=>{c.getStartData().each(()=>l(d))}),...t(s,c,l)])},PZ=t=>xs([Ye(Mr(),t.forceDrop),Ye(Yh(),t.drop),Ye(el(),(s,c)=>{t.move(c.event)}),Ye(Kh(),t.delayDrop)]);var BZ=Object.freeze({__proto__:null,getData:t=>A.from(Ys(t.x,t.y)),getDelta:(t,s)=>Ys(s.left-t.left,s.top-t.top)});const rF=(t,s,c)=>[Ye(Mr(),(l,d)=>{if(d.event.raw.button!==0)return;d.stop();const h=()=>sF(l,A.some(k),t,s),y=_B(h,200),S={drop:h,delayDrop:y.schedule,forceDrop:h,move:N=>{y.cancel(),fR(l,t,s,BZ,N)}},k=dR(l,t.blockerClass,PZ(S));(()=>{c(l),tF(l,k)})()})],$Z=[...cv,Qs("dragger",{handlers:gR(rF)})],IZ=t=>xs([Ye(Ji(),t.forceDrop),Ye(zo(),t.drop),Ye(fr(),t.drop),Ye(em(),(s,c)=>{t.move(c.event)})]),LZ=t=>{const s=t[0];return A.some(Ys(s.clientX,s.clientY))};var cF=Object.freeze({__proto__:null,getData:t=>{const c=t.raw.touches;return c.length===1?LZ(c):A.none()},getDelta:(t,s)=>Ys(s.left-t.left,s.top-t.top)});const aF=(t,s,c)=>{const l=Yo(),d=g=>{sF(g,l.get(),t,s),l.clear()};return[Ye(Ji(),(g,h)=>{h.stop();const y=()=>d(g),S={drop:y,delayDrop:ee,forceDrop:y,move:N=>{fR(g,t,s,cF,N)}},k=dR(g,t.blockerClass,IZ(S));l.set(k),(()=>{c(g),tF(g,k)})()}),Ye(em(),(g,h)=>{h.stop(),fR(g,t,s,cF,h.event)}),Ye(zo(),(g,h)=>{h.stop(),d(g)}),Ye(fr(),d)]},Vk=[...cv,Qs("dragger",{handlers:gR(aF)})],FZ=(t,s,c)=>[...rF(t,s,c),...aF(t,s,c)],HZ=[...cv,Qs("dragger",{handlers:gR(FZ)})];var VZ=Object.freeze({__proto__:null,mouse:$Z,touch:Vk,mouseOrTouch:HZ}),UZ=Object.freeze({__proto__:null,init:()=>{let t=A.none(),s=A.none();const c=()=>{t=A.none(),s=A.none()},l=(S,k)=>{const O=t.map(N=>S.getDelta(N,k));return t=A.some(k),O},d=(S,k)=>S.getData(k).bind(O=>l(S,O)),g=S=>{s=A.some(S)},h=()=>s,y=W({});return hl({readState:y,reset:c,update:d,getStartData:h,setStartData:g})}});const av=zy({branchKey:"mode",branches:VZ,name:"dragging",active:{events:(t,s)=>t.dragger.handlers(t,s)},extra:{snap:t=>({sensor:t.sensor,range:t.range,output:t.output,extra:A.from(t.extra)})},state:UZ,apis:_Z}),hR=40,zk=hR/2,lF=(t,s,c,l,d,g)=>t.fold(()=>av.snap({sensor:d1(c-zk,l-zk),range:Ys(d,g),output:d1(A.some(c),A.some(l)),extra:{td:s}}),h=>{const y=c-zk,S=l-zk,k=hR,O=hR,N=h.element.dom.getBoundingClientRect();return av.snap({sensor:d1(y,S),range:Ys(k,O),output:d1(A.some(c-N.width/2),A.some(l-N.height/2)),extra:{td:s}})}),Uk=(t,s,c)=>{const l=(d,g)=>d.exists(h=>Ko(h,g));return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(d,g)=>{const h=g.td;l(s.get(),h)||(s.set(h),c(h))},mustSnap:!0}},pR=t=>us(Xc.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:vt([av.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),J0.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),WZ=(t,s)=>{const c=hn([]),l=hn([]),d=hn(!1),g=Yo(),h=Yo(),y=Kt=>{const Ze=xu(Kt);return lF(z.getOpt(s),Kt,Ze.x,Ze.y,Ze.width,Ze.height)},S=()=>je(c.get(),Kt=>y(Kt)),k=Kt=>{const Ze=xu(Kt);return lF(X.getOpt(s),Kt,Ze.right,Ze.bottom,Ze.width,Ze.height)},O=()=>je(l.get(),Kt=>k(Kt)),N=Uk(S,g,Kt=>{h.get().each(Ze=>{t.dispatch("TableSelectorChange",{start:Kt,finish:Ze})})}),V=Uk(O,h,Kt=>{g.get().each(Ze=>{t.dispatch("TableSelectorChange",{start:Ze,finish:Kt})})}),z=pR(N),X=pR(V),ne=Yc(z.asSpec()),Ce=Yc(X.asSpec()),ae=(Kt,Ze,Jt,Bt)=>{const sn=Ze.dom.getBoundingClientRect();Gn(Kt.element,"display");const Do=Rc(ge.fromDom(t.getBody())).dom.innerHeight,rr=Jt(sn),is=Bt(sn,Do);(rr||is)&&qe(Kt.element,"display","none")},ve=(Kt,Ze,Jt,Bt)=>{const sn=Jt(Ze);av.snapTo(Kt,sn),ae(Kt,Ze,is=>is[Bt]<0,(is,an)=>is[Bt]>an)},ye=Kt=>ve(ne,Kt,y,"top"),$e=()=>g.get().each(ye),Le=Kt=>ve(Ce,Kt,k,"bottom"),kt=()=>h.get().each(Le);if(po().deviceType.isTouch()){const Kt=Ze=>je(Ze,ge.fromDom);t.on("TableSelectionChange",Ze=>{d.get()||(Ym(s,ne),Ym(s,Ce),d.set(!0));const Jt=ge.fromDom(Ze.start),Bt=ge.fromDom(Ze.finish);g.set(Jt),h.set(Bt),A.from(Ze.otherCells).each(sn=>{c.set(Kt(sn.upOrLeftCells)),l.set(Kt(sn.downOrRightCells)),ye(Jt),Le(Bt)})}),t.on("ResizeEditor ResizeWindow ScrollContent",()=>{$e(),kt()}),t.on("TableSelectionClear",()=>{d.get()&&(Xm(ne),Xm(Ce),d.set(!1)),g.clear(),h.clear()})}};var ZZ=`<svg height="16" viewBox="0 0 80 16" width="80" xmlns="http://www.w3.org/2000/svg"><g opacity=".8"><path d="m80 3.537v-2.202h-7.976v11.585h7.976v-2.25h-5.474v-2.621h4.812v-2.069h-4.812v-2.443zm-10.647 6.929c-.493.217-1.13.337-1.864.337s-1.276-.156-1.805-.47a3.732 3.732 0 0 1 -1.3-1.298c-.324-.554-.48-1.191-.48-1.877s.156-1.335.48-1.877a3.635 3.635 0 0 1 1.3-1.299 3.466 3.466 0 0 1 1.805-.481c.65 0 .914.06 1.263.18.36.12.698.277.986.47.289.192.578.384.842.6l.12.085v-2.586l-.023-.024c-.385-.35-.855-.614-1.384-.818-.53-.205-1.155-.313-1.877-.313-.721 0-1.6.144-2.333.445a5.773 5.773 0 0 0 -1.937 1.251 5.929 5.929 0 0 0 -1.324 1.9c-.324.735-.48 1.565-.48 2.455s.156 1.72.48 2.454c.325.734.758 1.383 1.324 1.913.553.53 1.215.938 1.937 1.25a6.286 6.286 0 0 0 2.333.434c.819 0 1.384-.108 1.961-.313.59-.216 1.083-.505 1.468-.866l.024-.024v-2.49l-.12.096c-.41.337-.878.626-1.396.866zm-14.869-4.15-4.8-5.04-.024-.025h-.902v11.67h2.502v-6.847l2.827 3.08.385.409.397-.41 2.791-3.067v6.845h2.502v-11.679h-.902l-4.788 5.052z"/><path clip-rule="evenodd" d="m15.543 5.137c0-3.032-2.466-5.113-4.957-5.137-.36 0-.745.024-1.094.096-.157.024-3.85.758-3.85.758-3.032.602-4.62 2.466-4.704 4.788-.024.89-.024 4.27-.024 4.27.036 3.165 2.406 5.138 5.017 5.126.337 0 1.119-.109 1.287-.145.144-.024.385-.084.746-.144.661-.12 1.684-.325 3.067-.602 2.37-.409 4.103-2.009 4.44-4.33.156-1.023.084-4.692.084-4.692zm-3.213 3.308-2.346.457v2.31l-5.859 1.143v-5.75l2.346-.458v3.441l3.513-.686v-3.44l-3.513.685v-2.297l5.859-1.143v5.75zm20.09-3.296-.083-1.023h-2.13v8.794h2.346v-4.884c0-1.107.95-1.985 2.057-1.997 1.095 0 1.901.89 1.901 1.997v4.884h2.346v-5.245c-.012-2.105-1.588-3.777-3.67-3.765a3.764 3.764 0 0 0 -2.778 1.25l.012-.011zm-6.014-4.102 2.346-.458v2.298l-2.346.457z" fill-rule="evenodd"/><path d="m28.752 4.126h-2.346v8.794h2.346z"/><path clip-rule="evenodd" d="m43.777 15.483 4.043-11.357h-2.418l-1.54 4.355-.445 1.324-.36-1.324-1.54-4.355h-2.418l3.151 8.794-1.083 3.08zm-21.028-5.51c0 .722.541 1.034.878 1.034s.638-.048.95-.144l.518 1.708c-.217.145-.879.518-2.13.518a2.565 2.565 0 0 1 -2.562-2.587c-.024-1.082-.024-2.49 0-4.21h-1.54v-2.142h1.54v-1.912l2.346-.458v2.37h2.201v2.142h-2.2v3.693-.012z" fill-rule="evenodd"/></g></svg>
`;const jZ=(t,s)=>{const c=A.from(nn(t,"id")).getOrThunk(()=>{const l=Qt("aria");return Ve(s,"id",l),l});Ve(t,"aria-describedby",c)},GZ=t=>{B(t,"aria-describedby")},qZ=t=>t.nodeName==="BR"||!!t.getAttribute("data-mce-bogus")||t.getAttribute("data-mce-type")==="bookmark",KZ=(t,s,c)=>{var l;const d=(l=s.delimiter)!==null&&l!==void 0?l:"›",g=(k,O,N)=>Xc.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":N}},components:[Nr(k)],action:V=>{t.focus(),t.selection.select(O),t.nodeChanged()},buttonBehaviours:vt([ec.config({...c.tooltips.getConfig({tooltipText:c.translate(["Select the {0} element",O.nodeName.toLowerCase()]),onShow:(V,z)=>{jZ(V.element,z.element)},onHide:V=>{GZ(V.element)}})}),Wu.button(c.isDisabled),pc(()=>c.checkUiComponentContext("any"))])}),h=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[Nr(` ${d} `)]}),y=k=>Go(k,(O,N,V)=>{const z=g(N.name,N.element,V);return V===0?O.concat([z]):O.concat([h(),z])},[]),S=k=>{const O=[];let N=k.length;for(;N-- >0;){const V=k[N];if(V.nodeType===1&&!qZ(V)){const z=WP(t,V);if(z.isDefaultPrevented()||O.push({name:z.name,element:V}),z.isPropagationStopped())break}}return O};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:vt([En.config({mode:"flow",selector:"div[role=button]"}),$n.config({disabled:c.isDisabled}),pc(()=>c.checkUiComponentContext("any")),hr.config({}),eo.config({}),oo("elementPathEvents",[mr((k,O)=>{t.shortcuts.add("alt+F11","focus statusbar elementpath",()=>En.focusIn(k)),t.on("NodeChange",N=>{const V=S(N.parents),z=V.length>0?y(V):[];eo.set(k,z)})})])]),components:[]}};var f1;(function(t){t[t.None=0]="None",t[t.Both=1]="Both",t[t.Vertical=2]="Vertical"})(f1||(f1={}));const YZ=(t,s,c,l,d)=>{const g={height:sv(l+s.top,Ob(t),hT(t))};return c===f1.Both&&(g.width=sv(d+s.left,u4(t),Db(t))),g},iF=(t,s,c)=>{const l=ge.fromDom(t.getContainer()),d=YZ(t,s,c,vs(l),G(l));Ao(d,(g,h)=>{Qn(g)&&qe(l,h,WD(g))}),o7(t)},XZ=t=>{const s=TN(t);return s===!1?f1.None:s==="both"?f1.Both:f1.Vertical},Wk=(t,s,c,l)=>{const g=Ys(c*20,l*20);return iF(t,g,s),A.some(!0)},JZ=(t,s)=>{const c=XZ(t);if(c===f1.None)return A.none();const l=c===f1.Both?"Press the arrow keys to resize the editor.":"Press the Up and Down arrow keys to resize the editor.";return A.some(zu("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{"aria-label":s.translate(l),"data-mce-name":"resize-handle"},behaviours:[av.config({mode:"mouse",repositionTarget:!1,onDrag:(d,g,h)=>iF(t,h,c),blockerClass:"tox-blocker"}),En.config({mode:"special",onLeft:()=>Wk(t,c,-1,0),onRight:()=>Wk(t,c,1,0),onUp:()=>Wk(t,c,0,-1),onDown:()=>Wk(t,c,0,1)}),hr.config({}),Vn.config({}),ec.config(s.tooltips.getConfig({tooltipText:s.translate("Resize")}))]},s.icons))},QZ=(t,s)=>{const c=(l,d,g)=>eo.set(l,[Nr(s.translate(["{0} "+g,d[g]]))]);return Xc.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:vt([Wu.button(s.isDisabled),pc(()=>s.checkUiComponentContext("any")),hr.config({}),eo.config({}),Ut.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),oo("wordcount-events",[Vm(l=>{const d=Ut.getValue(l),g=d.mode==="words"?"characters":"words";Ut.setValue(l,{mode:g,count:d.count}),c(l,d.count,g)}),mr(l=>{t.on("wordCountUpdate",d=>{const{mode:g}=Ut.getValue(l);Ut.setValue(l,{mode:g,count:d.wordCount}),c(l,d.wordCount,g)})})])]),eventOrder:{[Na()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},ej=(t,s)=>{const c=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=poweredby&utm_source=tiny&utm_medium=referral&utm_content=v7",rel:"noopener",target:"_blank","aria-label":t.translate(["Build with {0}","TinyMCE"])},innerHtml:t.translate(["Build with {0}",ZZ.trim()])},behaviours:vt([Vn.config({})])}]}),l=()=>{const y=iO("Alt+0");return{dom:{tag:"div",classes:["tox-statusbar__help-text"]},components:[Nr(Od.translate(["Press {0} for help",y]))]}},d=()=>{const y=[];return t.hasPlugin("wordcount")&&y.push(QZ(t,s)),v4(t)&&y.push(c()),{dom:{tag:"div",classes:["tox-statusbar__right-container"]},components:y}},g=()=>{const y=[],S=kN(t),k=xN(t),O=v4(t)||t.hasPlugin("wordcount"),N=()=>{const V="tox-statusbar__text-container--flex-start",z="tox-statusbar__text-container--flex-end",X="tox-statusbar__text-container--space-around";if(S){const ne="tox-statusbar__text-container-3-cols";return!O&&!k?[ne,X]:O&&!k?[ne,z]:[ne,V]}return[O&&!k?z:V]};return k&&y.push(KZ(t,{},s)),S&&y.push(l()),O&&y.push(d()),y.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container",...N()]},components:y}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const y=g(),S=JZ(t,s);return y.concat(S.toArray())})()}},bR=(t,s)=>s.get().getOrDie(`UI for ${t} has not been rendered`),tj=(t,s)=>{const c=t.inline,l=c?wL:yW,d=jp(t)?iD:v9,g=xW(),h=Yo(),y=Yo(),S=Yo(),V=po().deviceType.isTouch()?["tox-platform-touch"]:[],z=S4(t),X=Zp(t),ne=us({dom:{tag:"div",classes:["tox-anchorbar"]}}),Ce=us({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),ae=()=>g.mainUi.get().map(Tn=>Tn.outerContainer).bind(sr.getHeader),ve=()=>ao.fromOption(g.dialogUi.get().map(Tn=>Tn.sink),"UI has not been rendered"),ye=()=>ao.fromOption(g.popupUi.get().map(Tn=>Tn.sink),"(popup) UI has not been rendered"),$e=g.lazyGetInOuterOrDie("anchor bar",ne.getOpt),Le=g.lazyGetInOuterOrDie("bottom anchor bar",Ce.getOpt),kt=g.lazyGetInOuterOrDie("toolbar",sr.getToolbar),Kt=g.lazyGetInOuterOrDie("throbber",sr.getThrobber),Ze=BG({popup:ye,dialog:ve},t,$e,Le),Jt=()=>{const Tn={attributes:{[lx]:z?kc.BottomToTop:kc.TopToBottom}},to=sr.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:Ze.popup,onEscape:()=>{t.focus()}}),Is=sr.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:Ze.popup.shared.getSink,providers:Ze.popup.shared.providers,onEscape:()=>{t.focus()},onToolbarToggled:hg=>{r7(t,hg)},type:X,lazyToolbar:kt,lazyHeader:()=>ae().getOrDie("Could not find header element"),...Tn}),ks=sr.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:Ze.popup.shared.providers,onEscape:()=>{t.focus()},type:X}),Vi=Sw(t),Hr=xT(t),Yu=wT(t),xl=CT(t),Xu=Bt(),Ju=Vi||Hr||Yu,_m=()=>Vi?[ks]:Hr?[Is]:[],j2=xl?[Xu,to]:[to];return sr.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(Ju?[]:["tox-editor-header--empty"]),...Tn},components:Rn([Yu?j2:[],_m(),fm(t)?[]:[ne.asSpec()]]),sticky:jp(t),editor:t,sharedBackstage:Ze.popup.shared})},Bt=()=>sr.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]}}),sn=()=>{const Tn=sr.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),to=sr.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[Tn,to]}},Do=()=>{const Tn=x4(t),to=Ko(be(),Tn)&&fs(Tn,"display")==="grid",Is={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(V),attributes:{...Od.isRtl()?{dir:"rtl"}:{}}},behaviours:vt([Ia.config({useFixed:()=>d.isDocked(ae)})])},ks={dom:{styles:{width:document.body.clientWidth+"px"}},events:xs([Ye($g(),Yu=>{qe(Yu.element,"width",document.body.clientWidth+"px")})])},Vi=Yc(Hs(Is,to?ks:{})),Hr=NO(Vi);return y.set(Hr),{sink:Vi,mothership:Hr}},rr=()=>{const Tn={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(V),attributes:{...Od.isRtl()?{dir:"rtl"}:{}}},behaviours:vt([Ia.config({useFixed:()=>d.isDocked(ae),getBounds:()=>s.getPopupSinkBounds()})])},to=Yc(Tn),Is=NO(to);return S.set(Is),{sink:to,mothership:Is}},is=()=>{const Tn=Jt(),to=sn(),Is=sr.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:Ze.popup}),ks=sr.parts.viewWrapper({backstage:Ze.popup}),Vi=SN(t)&&!c?A.some(ej(t,Ze.popup.shared.providers)):A.none(),Hr=Rn([z?[]:[Tn],c?[]:[to],z?[Tn]:[]]),Yu=sr.parts.editorContainer({components:Rn([Hr,c?[]:[Ce.asSpec()]])}),xl=T4(t),Xu={role:"application",...Od.isRtl()?{dir:"rtl"}:{},...xl?{"aria-hidden":"true"}:{}},Ju=Yc(sr.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(c?["tox-tinymce-inline"]:[]).concat(z?["tox-tinymce--toolbar-bottom"]:[]).concat(V),styles:{visibility:"hidden",...xl?{opacity:"0",border:"0"}:{}},attributes:Xu},components:[Yu,...c?[]:[ks,...Vi.toArray()],Is],behaviours:vt([pc(()=>Ze.popup.shared.providers.checkUiComponentContext("any")),$n.config({disableClass:"tox-tinymce--disabled"}),En.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),_m=NO(Ju);return h.set(_m),{mothership:_m,outerContainer:Ju}},an=Tn=>{const to=WD(bL(t)),Is=WD(CW(t));return t.inline||(kl("div","width",Is)&&qe(Tn.element,"width",Is),kl("div","height",to)?qe(Tn.element,"height",to):qe(Tn.element,"height","400px")),to},ut=Tn=>{t.addShortcut("alt+F9","focus menubar",()=>{sr.focusMenubar(Tn)}),t.addShortcut("alt+F10","focus toolbar",()=>{sr.focusToolbar(Tn)}),t.addCommand("ToggleToolbarDrawer",(to,Is)=>{Is!=null&&Is.skipFocus?sr.toggleToolbarDrawerWithoutFocusing(Tn):sr.toggleToolbarDrawer(Tn)}),t.addQueryStateHandler("ToggleToolbarDrawer",()=>sr.isToolbarDrawerToggled(Tn))},Nt=Tn=>{const{mainUi:to,popupUi:Is,uiMotherships:ks}=Tn;jn(m4(t),(dv,$R)=>{t.ui.registry.addGroupToolbarButton($R,dv)});const{buttons:Vi,menuItems:Hr,contextToolbars:Yu,sidebars:xl,views:Xu}=t.ui.registry.getAll(),Ju=TT(t),_m={menuItems:Hr,menus:AN(t),menubar:vN(t),toolbar:Ju.getOrThunk(()=>bT(t)),allowToolbarGroups:X===Vu.floating,buttons:Vi,sidebar:xl,views:Xu};ut(to.outerContainer),d9(t,to.mothership,ks),d.setup(t,Ze.popup.shared,ae),QW(t,Ze.popup),pZ(t,Ze.popup.shared.getSink,Ze.popup),P9(t),HG(t,Kt,Ze.popup.shared),Rk(t,Yu,Is.sink,{backstage:Ze.popup}),WZ(t,Is.sink);const j2=t.getElement(),hg=an(to.outerContainer),BR={targetNode:j2,height:hg};return l.render(t,Tn,_m,Ze.popup,BR)},Wn=Tn=>(S.set(Tn.mothership),Tn),go=()=>{const Tn=is(),to=Do(),Is=xh(t)?rr():Wn(to);g.dialogUi.set(to),g.popupUi.set(Is),g.mainUi.set(Tn);const ks={popupUi:Is,dialogUi:to,mainUi:Tn,uiMotherships:g.getUiMotherships()};return Nt(ks)};return{popups:{backstage:Ze.popup,getMothership:()=>bR("popups",S)},dialogs:{backstage:Ze.dialog,getMothership:()=>bR("dialogs",y)},renderUI:go}},nj=t=>t.dom.textContent,oj=(t,s)=>{const c=Hn(t,"id").fold(()=>{const l=Qt("dialog-label");return Ve(s,"id",l),l},xt);Ve(t,"aria-labelledby",c)},sj=W([Ke("lazySink"),Qo("dragBlockClass"),Js("getBounds",cc),Te("useTabstopAt",Mt),Te("firstTabstop",0),Te("eventOrder",{}),fa("modalBehaviours",[En]),tl("onExecute"),mp("onEscape")]),vR={sketch:xt},rj=W([Pi({name:"draghandle",overrides:(t,s)=>({behaviours:vt([av.config({mode:"mouse",getTarget:c=>Fc(c,'[role="dialog"]').getOr(c),blockerClass:t.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(s,null,2)).message),getBounds:t.getDragBounds})])})}),ol({schema:[Ke("dom")],name:"title"}),ol({factory:vR,schema:[Ke("dom")],name:"close"}),ol({factory:vR,schema:[Ke("dom")],name:"body"}),Pi({factory:vR,schema:[Ke("dom")],name:"footer"}),lu({factory:{sketch:(t,s)=>({...t,dom:s.dom,components:s.components})},schema:[Te("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),Te("components",[])],name:"blocker"})]),cj=(t,s,c,l)=>{const d=Yo(),g=X=>{d.set(X);const ne=t.lazySink(X).getOrDie(),Ce=l.blocker(),ae=ne.getSystem().build({...Ce,components:Ce.components.concat([Oi(X)]),behaviours:vt([Vn.config({}),oo("dialog-blocker-events",[Nf(Rl(),()=>{mf.isBlocked(X)?ee():En.focusIn(X)})])])});Ym(ne,ae),En.focusIn(X)},h=X=>{d.clear(),yc(X.element).each(ne=>{X.getSystem().getByDom(ne).each(Ce=>{Xm(Ce)})})},y=X=>Wt(X,t,"body"),S=X=>Vs(X,t,"footer"),k=(X,ne)=>{mf.block(X,ne)},O=X=>{mf.unblock(X)},N=Qt("modal-events"),V={...t.eventOrder,[Xl()]:[N].concat(t.eventOrder["alloy.system.attached"]||[])},z=po();return{uid:t.uid,dom:t.dom,components:s,apis:{show:g,hide:h,getBody:y,getFooter:S,setIdle:O,setBusy:k},eventOrder:V,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:ga(t.modalBehaviours,[eo.config({}),En.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt,firstTabstop:t.firstTabstop}),mf.config({getRoot:d.get}),oo(N,[mr(X=>{const ne=Wt(X,t,"title").element,Ce=nj(ne);z.os.isMacOS()&&et(Ce)?Ve(X.element,"aria-label",Ce):oj(X.element,ne)})])])}},va=ja({name:"ModalDialog",configFields:sj(),partFields:rj(),factory:cj,apis:{show:(t,s)=>{t.show(s)},hide:(t,s)=>{t.hide(s)},getBody:(t,s)=>t.getBody(s),getFooter:(t,s)=>t.getFooter(s),setBusy:(t,s,c)=>{t.setBusy(s,c)},setIdle:(t,s)=>{t.setIdle(s)}}}),uF=An([_c,K4].concat(Jp)),dF=Ei,yR=[qT("button"),Uu,qc("align","end",["start","end"]),GT,pm,Zh("buttonType",["primary","secondary"]),Qr("context","mode:design")],Zk=[...yR,Th],jk=[Ra("type",["submit","cancel","custom"]),...Zk],aj=[Ra("type",["menu"]),Eh,Lw,Uu,Yl("items",uF),...yR],lj=[...yR,Ra("type",["togglebutton"]),Lw,Uu,Eh,Tc("active",!1)],ij=Zr("type",{submit:jk,cancel:jk,custom:jk,menu:aj,togglebutton:lj}),uj=[_c,Th,Ra("level",["info","warn","error","success"]),hP,Te("url","")],dj=An(uj),mj=t=>[_c,t],Ey=[_c,Th,pm,qT("button"),Uu,_8,Zh("buttonType",["primary","secondary","toolbar"]),GT,Qr("context","mode:design")],fj=An(Ey),ky=[_c,K4],ff=ky.concat([X4]),gj=ky.concat([Y4,pm,Qr("context","mode:design")]),hj=An(gj),pj=Ei,bj=ff.concat([CP("auto"),Qr("context","mode:design")]),CR=An(bj),z2=E1([Pb,Th,hP]),wR=ff.concat([Qr("storageKey","default"),Qr("context","mode:design")]),Gk=An(wR),lv=$t,vj=An(ff),mF=$t,fF=ky.concat([Qr("tag","textarea"),Sc("scriptId"),Sc("scriptUrl"),Xi("onFocus"),Gh("settings",void 0)]),gF=ky.concat([Qr("tag","textarea"),li("init")]),yj=_g(t=>xr("customeditor.old",ql(gF),t).orThunk(()=>xr("customeditor.new",ql(fF),t))),Cj=$t,wj=ff.concat([Qr("context","mode:design")]),hF=An(wj),pF=dd(),xR=t=>[_c,Og("columns"),t],Sj=[_c,Sc("html"),qc("presets","presentation",["presentation","document"]),Js("onInit",ee),Tc("stretched",!1)],xj=An(Sj),Tj=ff.concat([Tc("border",!1),Tc("sandboxed",!0),Tc("streamContent",!1),Tc("transparent",!0)]),bF=An(Tj),Ej=$t,kj=An(ky.concat([xc("height")])),_j=An([Sc("url"),Dg("zoom"),Dg("cachedWidth"),Dg("cachedHeight")]),TR=ff.concat([xc("inputMode"),xc("placeholder"),Tc("maximized",!1),pm,Qr("context","mode:design")]),ER=An(TR),Aj=$t,vF=t=>[_c,Y4,t,qc("align","start",["start","center","end"]),xc("for")],Oj=[Th,Pb],Dj=[Th,Yl("items",kf("items",()=>kR))],kR=T1([An(Oj),An(Dj)]),Rj=ff.concat([Yl("items",kR),pm,Qr("context","mode:design")]),Mj=An(Rj),iv=$t,yF=ff.concat([_1("items",[Th,Pb]),jh("size",1),pm,Qr("context","mode:design")]),Nj=An(yF),qk=$t,_y=ff.concat([Tc("constrain",!0),pm,Qr("context","mode:design")]),Kk=An(_y),_R=An([Sc("width"),Sc("height")]),Yk=ky.concat([Y4,jh("min",0),jh("max",0)]),Li=An(Yk),Xk=Im,CF=[_c,Yl("header",$t),Yl("cells",Kl($t))],wF=An(CF),Pj=ff.concat([xc("placeholder"),Tc("maximized",!1),pm,Qr("context","mode:design")]),Bj=An(Pj),g1=$t,$j=[Ra("type",["directory","leaf"]),gP,Sc("id"),Ru("menu",gy),xc("customStateIcon"),xc("customStateIconTooltip")],AR=An($j),Ay=$j.concat([Yl("children",kf("children",()=>Lm("type",{directory:U2,leaf:AR})))]),U2=An(Ay),SF=Lm("type",{directory:U2,leaf:AR}),Ij=[_c,Yl("items",SF),Xi("onLeafAction"),Xi("onToggleExpand"),Jd("defaultExpandedIds",[],$t),xc("defaultSelectedId")],Lj=An(Ij),Fj=ff.concat([qc("filetype","file",["image","media","file"]),pm,xc("picker_text"),Qr("context","mode:design")]),Hj=An(Fj),Oy=An([Pb,Q4]),xF=t=>Ic("items","items",Xa(),Kl(_g(s=>xr(`Checking item of ${t}`,OR,s).fold(c=>ao.error(Fm(c)),c=>ao.value(c))))),OR=$c(()=>Lm("type",{alertbanner:dj,bar:An(mj(xF("bar"))),button:fj,checkbox:hj,colorinput:Gk,colorpicker:vj,dropzone:hF,grid:An(xR(xF("grid"))),iframe:bF,input:ER,listbox:Mj,selectbox:Nj,sizeinput:Kk,slider:Li,textarea:Bj,urlinput:Hj,customeditor:yj,htmlpanel:xj,imagepreview:kj,collection:CR,label:An(vF(xF("label"))),table:wF,tree:Lj,panel:zj})),Vj=[_c,Te("classes",[]),Yl("items",OR)],zj=An(Vj),Uj=[qT("tab"),gP,Yl("items",OR)],Wj=[_c,_1("tabs",Uj)],W2=An(Wj),Zj=Zk,jj=ij,TF=An([Sc("title"),as("body",Lm("type",{panel:zj,tabpanel:W2})),Qr("size","normal"),Jd("buttons",[],jj),Te("initialData",{}),Js("onAction",ee),Js("onChange",ee),Js("onSubmit",ee),Js("onClose",ee),Js("onCancel",ee),Js("onTabChange",ee)]),Gj=t=>xr("dialog",TF,t),tq=An([Ra("type",["cancel","custom"]),...Zj]),e=An([Sc("title"),Sc("url"),Dg("height"),Dg("width"),Rg("buttons",tq),Js("onAction",ee),Js("onCancel",ee),Js("onClose",ee),Js("onMessage",ee)]),n=t=>xr("dialog",e,t),o=t=>Yt(t)?[t].concat(xe(cl(t),o)):xn(t)?xe(t,o):[],r=t=>Dt(t.type)&&Dt(t.name),a={checkbox:pj,colorinput:lv,colorpicker:mF,dropzone:pF,input:Aj,iframe:Ej,imagepreview:_j,selectbox:qk,sizeinput:_R,slider:Xk,listbox:iv,size:_R,textarea:g1,urlinput:Oy,customeditor:Cj,collection:z2,togglemenuitem:dF},u=t=>A.from(a[t.type]),f=t=>uo(o(t),r),b=t=>{const s=f(t),c=xe(s,l=>u(l).fold(()=>[],d=>[as(l.name,d)]));return An(c)},C=t=>{var s;const c=dt(Gj(t)),l=b(t),d=(s=t.initialData)!==null&&s!==void 0?s:{};return{internalDialog:c,dataValidator:l,initialData:d}},T={open:(t,s)=>{const c=C(s);return t(c.internalDialog,c.initialData,c.dataValidator)},openUrl:(t,s)=>{const c=dt(n(s));return t(c)},redial:t=>C(t)};var P=Object.freeze({__proto__:null,events:(t,s)=>{const c=(l,d)=>{t.updateState.each(g=>{const h=g(l,d);s.set(h)}),t.renderComponents.each(g=>{const h=g(d,s.get());(t.reuseDom?H0:zM)(l,h)})};return xs([Ye(pd(),(l,d)=>{const g=d;if(!g.universal){const h=t.channel;vo(g.channels,h)&&c(l,g.data)}}),mr((l,d)=>{t.initialData.each(g=>{c(l,g)})})])}}),j=Object.freeze({__proto__:null,getState:(t,s,c)=>c}),J=[Ke("channel"),Qo("renderComponents"),Qo("updateState"),Qo("initialData"),Tc("reuseDom",!0)],oe=Object.freeze({__proto__:null,init:()=>{const t=hn(A.none()),s=()=>t.set(A.none());return{readState:()=>t.get().getOr("none"),get:t.get,set:t.set,clear:s}}});const me=da({fields:J,name:"reflecting",active:P,apis:j,state:oe}),we=t=>{const s=[],c={};return Ao(t,(l,d)=>{l.fold(()=>{s.push(d)},g=>{c[d]=g})}),s.length>0?ao.error(s):ao.value(c)},Se=(t,s,c,l)=>{const d=us(oy.sketch(g=>({dom:{tag:"div",classes:["tox-form"].concat(t.classes)},components:je(t.items,h=>Z3(g,h,s,c,l))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[d.asSpec()]}],behaviours:vt([En.config({mode:"acyclic",useTabstopAt:Oe(p2)}),Pd.memento(d),gV(d,{postprocess:g=>we(g).fold(h=>(console.error(h),{}),xt)}),oo("dialog-body-panel",[Ye(Rl(),(g,h)=>{g.getSystem().broadcastOn([b2],{newFocus:A.some(h.event.target)})})])])}},_e=(t,s)=>({uid:t.uid,dom:t.dom,components:t.components,events:vw(t.action),behaviours:ga(t.tabButtonBehaviours,[Vn.config({}),En.config({mode:"execution",useSpace:!0,useEnter:!0}),Ut.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}),nt=pi({name:"TabButton",configFields:[Te("uid",void 0),Ke("value"),Ic("dom","dom",Tf(()=>({attributes:{role:"tab",id:Qt("aria"),"aria-selected":"false"}})),Ti()),Qo("action"),Te("domModification",{}),fa("tabButtonBehaviours",[Vn,En,Ut]),Ke("view")],factory:_e}),wt=W([Ke("tabs"),Ke("dom"),Te("clickToDismiss",!1),fa("tabbarBehaviours",[_t,En]),Zm(["tabClass","selectedClass"])]),Zt=bb({factory:nt,name:"tabs",unit:"tab",overrides:t=>{const s=(l,d)=>{_t.dehighlight(l,d),ln(l,J2(),{tabbar:l,button:d})},c=(l,d)=>{_t.highlight(l,d),ln(l,X2(),{tabbar:l,button:d})};return{action:l=>{const d=l.getSystem().getByUid(t.uid).getOrDie(),g=_t.isHighlighted(d,l);(g&&t.clickToDismiss?s:g?ee:c)(d,l)},domModification:{classes:[t.markers.tabClass]}}}}),We=W([Zt]),Pe=(t,s,c,l)=>({uid:t.uid,dom:t.dom,components:s,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:ga(t.tabbarBehaviours,[_t.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:(d,g)=>{Ve(g.element,"aria-selected","true")},onDehighlight:(d,g)=>{Ve(g.element,"aria-selected","false")}}),En.config({mode:"flow",getInitial:d=>_t.getHighlighted(d).map(g=>g.element),selector:"."+t.markers.tabClass,executeOnMove:!0})])}),rt=ja({name:"Tabbar",configFields:wt(),partFields:We(),factory:Pe}),qt=(t,s)=>({uid:t.uid,dom:t.dom,behaviours:ga(t.tabviewBehaviours,[eo.config({})]),domModification:{attributes:{role:"tabpanel"}}}),Sn=pi({name:"Tabview",configFields:[fa("tabviewBehaviours",[eo])],factory:qt}),ko=W([Te("selectFirst",!0),Lo("onChangeTab"),Lo("onDismissTab"),Te("tabs",[]),fa("tabSectionBehaviours",[])]),_o=ol({factory:rt,schema:[Ke("dom"),Xd("markers",[Ke("tabClass"),Ke("selectedClass")])],name:"tabbar",defaults:t=>({tabs:t.tabs})}),ps=ol({factory:Sn,name:"tabview"}),_s=W([_o,ps]),ic=(t,s,c,l)=>{const d=h=>{const y=Ut.getValue(h);Vs(h,t,"tabview").each(S=>{Cn(t.tabs,O=>O.value===y).each(O=>{const N=O.view();Hn(h.element,"id").each(V=>{Ve(S.element,"aria-labelledby",V)}),eo.set(S,N),t.onChangeTab(S,h,N)})})},g=(h,y)=>{Vs(h,t,"tabbar").each(S=>{y(S).each(Mf)})};return{uid:t.uid,dom:t.dom,components:s,behaviours:y0(t.tabSectionBehaviours),events:xs(Rn([t.selectFirst?[mr((h,y)=>{g(h,_t.getFirst)})]:[],[Ye(X2(),(h,y)=>{const S=y.event.button;d(S)}),Ye(J2(),(h,y)=>{const S=y.event.button;t.onDismissTab(h,S)})]])),apis:{getViewItems:h=>Vs(h,t,"tabview").map(y=>eo.contents(y)).getOr([]),showTab:(h,y)=>{g(h,k=>{const O=_t.getCandidates(k);return Cn(O,V=>Ut.getValue(V)===y).filter(V=>!_t.isHighlighted(k,V))})}}}},Wc=ja({name:"TabSection",configFields:ko(),partFields:_s(),factory:ic,apis:{getViewItems:(t,s)=>t.getViewItems(s),showTab:(t,s,c)=>{t.showTab(s,c)}}}),La=(t,s,c)=>je(t,(l,d)=>{eo.set(c,t[d].view());const g=s.dom.getBoundingClientRect();return eo.set(c,[]),g.height}),Ot=t=>qs(pr(t,(s,c)=>s>c?-1:s<c?1:0)),vn=(t,s,c)=>{const l=Ul(t).dom,d=Fc(t,".tox-dialog-wrap").getOr(t),g=fs(d,"position")==="fixed";let h;g?h=Math.max(l.clientHeight,window.innerHeight):h=Math.max(l.offsetHeight,l.scrollHeight);const y=vs(s),k=s.dom.offsetLeft>=c.dom.offsetLeft+G(c)?Math.max(vs(c),y):y,O=parseInt(fs(t,"margin-top"),10)||0,N=parseInt(fs(t,"margin-bottom"),10)||0,z=vs(t)+O+N-k;return h-z},ls=(t,s)=>{qs(t).each(c=>Wc.showTab(s,c.value))},Ft=(t,s)=>{qe(t,"height",s+"px"),qe(t,"flex-basis",s+"px")},Nn=(t,s,c)=>{Fc(t,'[role="dialog"]').each(l=>{gr(l,'[role="tablist"]').each(d=>{c.get().map(g=>(qe(s,"height","0"),qe(s,"flex-basis","0"),Math.min(g,vn(l,s,d)))).each(g=>{Ft(s,g)})})})},In=t=>gr(t,'[role="tabpanel"]'),It=t=>{const s=Yo();return{extraEvents:[mr(d=>{const g=d.element;In(g).each(h=>{qe(h,"visibility","hidden"),d.getSystem().getByDom(h).toOptional().each(y=>{const S=La(t,h,y);Ot(S).fold(s.clear,s.set)}),Nn(g,h,s),Gn(h,"visibility"),ls(t,d),requestAnimationFrame(()=>{Nn(g,h,s)})})}),Ye($g(),d=>{const g=d.element;In(g).each(h=>{Nn(g,h,s)})}),Ye(FB,(d,g)=>{const h=d.element;In(h).each(y=>{const S=im(Dr(y));qe(y,"visibility","hidden");const k=bs(y,"height").map(V=>parseInt(V,10));Gn(y,"height"),Gn(y,"flex-basis");const O=y.dom.getBoundingClientRect().height;k.forall(V=>O>V)?(s.set(O),Nn(h,y,s)):k.each(V=>{Ft(y,V)}),Gn(y,"visibility"),S.each(su)})})],selectFirst:!1}},wo="send-data-to-section",No="send-data-to-view",Jc=(t,s,c,l)=>{const d=hn({}),g=O=>{const N=Ut.getValue(O),V=we(N).getOr({}),z=d.get(),X=Hs(z,V);d.set(X)},h=O=>{const N=d.get();Ut.setValue(O,N)},y=hn(null),S=je(t.tabs,O=>({value:O.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[Nr(c.shared.providers.translate(O.title))],view:()=>[oy.sketch(N=>({dom:{tag:"div",classes:["tox-form"]},components:je(O.items,V=>Z3(N,V,s,c,l)),formBehaviours:vt([En.config({mode:"acyclic",useTabstopAt:Oe(p2)}),oo("TabView.form.events",[mr(h),nm(g)]),mi.config({channels:lo([{key:wo,value:{onReceive:g}},{key:No,value:{onReceive:h}}])})])}))]})),k=It(S);return Wc.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(O,N,V)=>{const z=Ut.getValue(N);ln(O,LB,{name:z,oldName:y.get()}),y.set(z)},tabs:S,components:[Wc.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[rt.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:vt([hr.config({})])}),Wc.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:k.selectFirst,tabSectionBehaviours:vt([oo("tabpanel",k.extraEvents),En.config({mode:"acyclic"}),$o.config({find:O=>qs(Wc.getViewItems(O))}),Jb(A.none(),O=>(O.getSystem().broadcastOn([wo],{}),d.get()),(O,N)=>{d.set(N),O.getSystem().broadcastOn([No],{})})])})},$s=(t,s,c,l,d,g)=>{const h=k=>{const O=k.body;switch(O.type){case"tabpanel":return[Jc(O,k.initialData,l,g)];default:return[Se(O,k.initialData,l,g)]}},y=(k,O)=>A.some({isTabPanel:()=>O.body.type==="tabpanel"}),S={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...c.map(k=>({id:k})).getOr({}),...d?S:{}}},components:[],behaviours:vt([Pd.childAt(0),me.config({channel:`${V$}-${s}`,updateState:y,renderComponents:h,initialData:t})])}},wl=(t,s,c,l,d,g)=>$s(t,s,A.some(c),l,d,g),Fi=(t,s,c,l)=>{const d=$s(t,s,A.none(),c,!1,l);return va.parts.body(d)},gf=t=>{const s={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[L$(A.none(),{dom:{tag:"iframe",attributes:{src:t.url}},behaviours:vt([hr.config({}),Vn.config({})])})]}],behaviours:vt([En.config({mode:"acyclic",useTabstopAt:Oe(p2)})])};return va.parts.body(s)},Fl=Ab.deviceType.isTouch(),pu=(t,s)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,s]}),$d=(t,s)=>va.parts.close(Xc.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":s.translate("Close")}},action:t,buttonBehaviours:vt([hr.config({})])})),Sl=()=>va.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),Hi=(t,s)=>va.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:ef(`<p>${VN(s.translate(t))}</p>`)}]}]}),bn=t=>va.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t}),jo=(t,s)=>[rf.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),rf.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:s})],jr=t=>{const s="tox-dialog",c=s+"-wrap",l=c+"__backdrop",d=s+"__disable-scroll";return va.sketch({lazySink:t.lazySink,onEscape:g=>(t.onEscape(g),A.some(!0)),useTabstopAt:g=>!p2(g),firstTabstop:t.firstTabstop,dom:{tag:"div",classes:[s].concat(t.extraClasses),styles:{position:"relative",...t.extraStyles}},components:[t.header,t.body,...t.footer.toArray()],parts:{blocker:{dom:ef(`<div class="${c}"></div>`),components:[{dom:{tag:"div",classes:Fl?[l,l+"--opaque"]:[l]}}]}},dragBlockClass:c,modalBehaviours:vt([Vn.config({}),oo("dialog-events",t.dialogEvents.concat([Nf(Rl(),(g,h)=>{mf.isBlocked(g)?ee():En.focusIn(g)}),Ye(R1(),(g,h)=>{g.getSystem().broadcastOn([b2],{newFocus:h.event.newFocus})})])),oo("scroll-lock",[mr(()=>{hc(be(),d)}),nm(()=>{Ts(be(),d)})]),...t.extraBehaviours]),eventOrder:{[Na()]:["dialog-events"],[Xl()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[_i()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...t.eventOrder}})},Qc=t=>Xc.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),"data-mce-name":"close"}},buttonBehaviours:vt([hr.config({}),ec.config(t.tooltips.getConfig({tooltipText:t.translate("Close")}))]),components:[zu("close",{tag:"span",classes:["tox-icon"]},t.icons)],action:s=>{Eo(s,o1)}}),ya=(t,s,c,l)=>{const d=g=>[Nr(l.translate(g.title))];return{dom:{tag:"h1",classes:["tox-dialog__title"],attributes:{...c.map(g=>({id:g})).getOr({})}},components:[],behaviours:vt([me.config({channel:`${H$}-${s}`,initialData:t,renderComponents:d})])}},Zc=()=>({dom:ef('<div class="tox-dialog__draghandle"></div>')}),Gr=(t,s,c,l)=>rf.sketch({dom:ef('<div class="tox-dialog__header"></div>'),components:[ya(t,s,A.some(c),l),Zc(),Qc(l)],containerBehaviours:vt([av.config({mode:"mouse",blockerClass:"blocker",getTarget:d=>am(d,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}),qr=(t,s,c)=>{const l=va.parts.title(ya(t,s,A.none(),c)),d=va.parts.draghandle(Zc()),g=va.parts.close(Qc(c)),h=[l].concat(t.draggable?[d]:[]).concat([g]);return rf.sketch({dom:ef('<div class="tox-dialog__header"></div>'),components:h})},Ql=(t,s,c)=>qr({title:c.shared.providers.translate(t),draggable:c.dialog.isDraggableModal()},s,c.shared.providers),Id=(t,s,c,l)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":c.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:`${l.getOr(0)}px`,position:"absolute"}},behaviours:s,components:[{dom:ef('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),hf=(t,s,c)=>({onClose:()=>c.closeWindow(),onBlock:l=>{const d=gr(t().element,".tox-dialog__header").map(g=>vs(g));va.setBusy(t(),(g,h)=>Id(l.message,h,s,d))},onUnblock:()=>{va.setIdle(t())}}),Em="tox-dialog--fullscreen",h1="tox-dialog--width-lg",p1="tox-dialog--width-md",gg=t=>{switch(t){case"large":return A.some(h1);case"medium":return A.some(p1);default:return A.none()}},Ld=(t,s)=>{const c=ge.fromDom(s.element.dom);Nl(c,Em)||(vd(c,[h1,p1]),gg(t).each(l=>hc(c,l)))},Bh=(t,s)=>{const c=ge.fromDom(t.element.dom),l=sS(c),d=Cn(l,g=>g===h1||g===p1).or(gg(s));WR(c,[Em,...d.toArray()])},Dy=(t,s,c)=>Yc(jr({...t,firstTabstop:1,lazySink:c.shared.getSink,extraBehaviours:[IE({}),...t.extraBehaviours],onEscape:l=>{Eo(l,o1)},dialogEvents:s,eventOrder:{[pd()]:[me.name(),mi.name()],[Xl()]:["scroll-lock",me.name(),"messages","dialog-events","alloy.base.behaviour"],[_i()]:["alloy.base.behaviour","dialog-events","messages",me.name(),"scroll-lock"]}})),b1=(t,s={})=>{const c=l=>{const d=je(l.items,g=>{const h=pt(s,g.name).getOr(hn(!1));return{...g,storage:h}});return{...l,items:d}};return je(t,l=>l.type==="menu"?c(l):l)},DR=t=>Go(t,(s,c)=>c.type==="menu"?Go(c.items,(d,g)=>(d[g.name]=g.storage,d),s):s,{}),uv=(t,s)=>[xv(Rl(),F$),t(s2,(c,l,d,g)=>{im(Dr(g.element)).fold(ee,yp),s.onClose(),l.onClose()}),t(o1,(c,l,d,g)=>{l.onCancel(c),Eo(g,s2)}),Ye(CE,(c,l)=>s.onUnblock()),Ye(yE,(c,l)=>s.onBlock(l.event))],EF=(t,s)=>{const c=(d,g)=>Ye(d,(h,y)=>{l(h,(S,k)=>{g(t(),S,y.event,h)})}),l=(d,g)=>{me.getState(d).get().each(h=>{g(h,d)})};return[...uv(c,s),c(dg,(d,g,h)=>{g.onAction(d,{name:h.name})})]},RR=(t,s,c)=>{const l=(g,h)=>Ye(g,(y,S)=>{d(y,(k,O)=>{h(t(),k,S.event,y)})}),d=(g,h)=>{me.getState(g).get().each(y=>{h(y.internalDialog,g)})};return[...uv(l,s),l(r2,(g,h)=>h.onSubmit(g)),l($i,(g,h,y)=>{h.onChange(g,{name:y.name})}),l(dg,(g,h,y,S)=>{const k=()=>S.getSystem().isConnected()?En.focusIn(S):void 0,O=z=>Fs(z,"disabled")||Hn(z,"aria-disabled").exists(X=>X==="true"),N=Dr(S.element),V=im(N);h.onAction(g,{name:y.name,value:y.value}),im(N).fold(k,z=>{O(z)||V.exists(X=>nc(z,X)&&O(X))?k():c().toOptional().filter(X=>!nc(X.element,z)).each(k)})}),l(LB,(g,h,y)=>{h.onTabChange(g,{newTabName:y.name,oldTabName:y.oldName})}),nm(g=>{const h=t();Ut.setValue(g,h.getData())})]},Hl=(t,s)=>XE(t,t.type,s),Fd=(t,s,c)=>Cn(s,l=>l.name===c).bind(l=>l.memento.getOpt(t)),Jk=(t,s)=>{const c=s.map(y=>y.footerButtons).getOr([]),l=dc(c,y=>y.align==="start"),d=(y,S)=>rf.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${y}`]},components:je(S,k=>k.memento.asSpec())}),g=d("start",l.pass),h=d("end",l.fail);return[g,h]},Me=(t,s,c)=>{const l=(d,g)=>{const h=je(g.buttons,S=>{const k=us(Hl(S,c));return{name:S.name,align:S.align,memento:k}}),y=S=>Fd(d,h,S);return A.some({lookupByName:y,footerButtons:h})};return{dom:ef('<div class="tox-dialog__footer"></div>'),components:[],behaviours:vt([me.config({channel:`${p3}-${s}`,initialData:t,updateState:l,renderComponents:Jk})])}},Ne=(t,s,c)=>Me(t,s,c),At=(t,s,c)=>va.parts.footer(Me(t,s,c)),yt=(t,s)=>{if(t.getRoot().getSystem().isConnected()){const l=$o.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return oy.getField(l,s).orThunk(()=>t.getFooter().bind(h=>me.getState(h).get()).bind(h=>h.lookupByName(s)))}else return A.none()},Ln=(t,s)=>{const c=t.getRoot();return me.getState(c).get().map(l=>dt(xr("data",l.dataValidator,s))).getOr(s)},es=(t,s,c)=>{const l=X=>{const ne=t.getRoot();ne.getSystem().isConnected()&&X(ne)},z={getData:()=>{const X=t.getRoot(),ne=X.getSystem().isConnected()?t.getFormWrapper():X,Ce=Ut.getValue(ne),ae=jn(c,ve=>ve.get());return{...Ce,...ae}},setData:X=>{l(ne=>{const Ce=z.getData(),ae=Hs(Ce,X),ve=Ln(t,ae),ye=t.getFormWrapper();Ut.setValue(ye,ve),Ao(c,($e,Le)=>{yo(ae,Le)&&$e.set(ae[Le])})})},setEnabled:(X,ne)=>{yt(t,X).each(ne?$n.enable:$n.disable)},focus:X=>{yt(t,X).each(Vn.focus)},block:X=>{if(!Dt(X))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");l(ne=>{ln(ne,yE,{message:X})})},unblock:()=>{l(X=>{Eo(X,CE)})},showTab:X=>{l(ne=>{const Ce=t.getBody();me.getState(Ce).get().exists(ve=>ve.isTabPanel())&&$o.getCurrent(Ce).each(ve=>{Wc.showTab(ve,X)})})},redial:X=>{l(ne=>{const Ce=t.getId(),ae=s(X),ve=b1(ae.internalDialog.buttons,c);ne.getSystem().broadcastOn([`${HE}-${Ce}`],ae),ne.getSystem().broadcastOn([`${H$}-${Ce}`],ae.internalDialog),ne.getSystem().broadcastOn([`${V$}-${Ce}`],ae.internalDialog),ne.getSystem().broadcastOn([`${p3}-${Ce}`],{...ae.internalDialog,buttons:ve}),z.setData(ae.initialData)})},close:()=>{l(X=>{Eo(X,s2)})},toggleFullscreen:t.toggleFullscreen};return z},uc=(t,s,c)=>{const l=Qt("dialog"),d=t.internalDialog,g=Ql(d.title,l,c),h=hn(d.size),y=ye=>yt(ae,ye),S=gg(h.get()).toArray(),k=(ye,$e)=>(h.set($e.internalDialog.size),Ld($e.internalDialog.size,ye),A.some($e)),O=Fi({body:d.body,initialData:d.initialData},l,c,y),N=b1(d.buttons),V=DR(N),z=yn(N.length!==0,At({buttons:N},l,c)),X=RR(()=>ve,hf(()=>Ce,c.shared.providers,s),c.shared.getSink),ne={id:l,header:g,body:O,footer:z,extraClasses:S,extraBehaviours:[me.config({channel:`${HE}-${l}`,updateState:k,initialData:t})],extraStyles:{}},Ce=Dy(ne,X,c),ae=(()=>{const ye=()=>{const Le=va.getBody(Ce);return $o.getCurrent(Le).getOr(Le)},$e=()=>{Bh(Ce,h.get())};return{getId:W(l),getRoot:W(Ce),getBody:()=>va.getBody(Ce),getFooter:()=>va.getFooter(Ce),getFormWrapper:ye,toggleFullscreen:$e}})(),ve=es(ae,s.redial,V);return{dialog:Ce,instanceApi:ve}},km=(t,s,c,l=!1,d)=>{const g=Qt("dialog"),h=Qt("dialog-label"),y=Qt("dialog-content"),S=t.internalDialog,k=Jt=>yt(Kt,Jt),O=hn(S.size),N=gg(O.get()).toArray(),V=(Jt,Bt)=>(O.set(Bt.internalDialog.size),Ld(Bt.internalDialog.size,Jt),d(),A.some(Bt)),z=us(Gr({title:S.title,draggable:!0},g,h,c.shared.providers)),X=us(wl({body:S.body,initialData:S.initialData},g,y,c,l,k)),ne=b1(S.buttons),Ce=DR(ne),ae=yn(ne.length!==0,us(Ne({buttons:ne},g,c))),ve=RR(()=>Ze,{onBlock:Jt=>{mf.block(Le,(Bt,sn)=>{const Do=z.getOpt(Le).map(rr=>vs(rr.element));return Id(Jt.message,sn,c.shared.providers,Do)})},onUnblock:()=>{mf.unblock(Le)},onClose:()=>s.closeWindow()},c.shared.getSink),ye="tox-dialog-inline",$e=po().os,Le=Yc({dom:{tag:"div",classes:["tox-dialog",ye,...N],attributes:{role:"dialog",...$e.isMacOS()?{"aria-label":S.title}:{"aria-labelledby":h}}},eventOrder:{[pd()]:[me.name(),mi.name()],[Na()]:["execute-on-form"],[Xl()]:["reflecting","execute-on-form"]},behaviours:vt([En.config({mode:"cyclic",onEscape:Jt=>(Eo(Jt,s2),A.some(!0)),useTabstopAt:Jt=>!p2(Jt)&&(Ur(Jt)!=="button"||nn(Jt,"disabled")!=="disabled"),firstTabstop:1}),me.config({channel:`${HE}-${g}`,updateState:V,initialData:t}),Vn.config({}),oo("execute-on-form",ve.concat([Nf(Rl(),(Jt,Bt)=>{En.focusIn(Jt)}),Ye(R1(),(Jt,Bt)=>{Jt.getSystem().broadcastOn([b2],{newFocus:Bt.event.newFocus})})])),mf.config({getRoot:()=>A.some(Le)}),eo.config({}),IE({})]),components:[z.asSpec(),X.asSpec(),...ae.map(Jt=>Jt.asSpec()).toArray()]}),kt=()=>{Bh(Le,O.get())},Kt={getId:W(g),getRoot:W(Le),getFooter:()=>ae.map(Jt=>Jt.get(Le)),getBody:()=>X.get(Le),getFormWrapper:()=>{const Jt=X.get(Le);return $o.getCurrent(Jt).getOr(Jt)},toggleFullscreen:kt},Ze=es(Kt,s.redial,Ce);return{dialog:Le,instanceApi:Ze}};var Ku=tinymce.util.Tools.resolve("tinymce.util.URI");const Z2=t=>{const s=h=>{t.getSystem().isConnected()&&h(t)};return{block:h=>{if(!Dt(h))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");s(y=>{ln(y,yE,{message:h})})},unblock:()=>{s(h=>{Eo(h,CE)})},close:()=>{s(h=>{Eo(h,s2)})},sendMessage:h=>{s(y=>{y.getSystem().broadcastOn([z$],h)})}}},kF=["insertContent","setContent","execCommand","close","block","unblock"],MR=t=>Yt(t)&&kF.indexOf(t.mceAction)!==-1,_F=t=>!MR(t)&&Yt(t)&&yo(t,"mceAction"),AF=(t,s,c)=>{switch(c.mceAction){case"insertContent":t.insertContent(c.content);break;case"setContent":t.setContent(c.content);break;case"execCommand":const l=Mn(c.ui)?c.ui:!1;t.execCommand(c.cmd,l,c.value);break;case"close":s.close();break;case"block":s.block(c.message);break;case"unblock":s.unblock();break}},$h=(t,s,c,l)=>{const d=Qt("dialog"),g=Ql(t.title,d,l),h=gf(t),y=t.buttons.bind(ye=>ye.length===0?A.none():A.some(At({buttons:ye},d,l))),S=EF(()=>ve,hf(()=>ae,l.shared.providers,s)),k={...t.height.fold(()=>({}),ye=>({height:ye+"px","max-height":ye+"px"})),...t.width.fold(()=>({}),ye=>({width:ye+"px","max-width":ye+"px"}))},O=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],N=new Ku(t.url,{base_uri:new Ku(window.location.href)}),V=`${N.protocol}://${N.host}${N.port?":"+N.port:""}`,z=Al(),X=(ye,$e)=>A.some($e),ne=[me.config({channel:`${HE}-${d}`,updateState:X,initialData:t}),oo("messages",[mr(()=>{const ye=Pl(ge.fromDom(window),"message",$e=>{if(N.isSameOrigin(new Ku($e.raw.origin))){const Le=$e.raw.data;MR(Le)?AF(c,ve,Le):_F(Le)&&t.onMessage(ve,Le)}});z.set(ye)}),nm(z.clear)]),mi.config({channels:{[z$]:{onReceive:(ye,$e)=>{gr(ye.element,"iframe").each(Le=>{const kt=Le.dom.contentWindow;et(kt)&&kt.postMessage($e,V)})}}}})],ae=Dy({id:d,header:g,body:h,footer:y,extraClasses:O,extraBehaviours:ne,extraStyles:k},S,l),ve=Z2(ae);return{dialog:ae,instanceApi:ve}},OF=t=>{const s=t.shared;return{open:(l,d)=>{const g=()=>{va.hide(k),d()},h=us(XE({context:"any",name:"close-alert",text:"OK",primary:!0,buttonType:A.some("primary"),align:"end",enabled:!0,icon:A.none()},"cancel",t)),y=Sl(),S=$d(g,s.providers),k=Yc(jr({lazySink:()=>s.getSink(),header:pu(y,S),body:Hi(l,s.providers),footer:A.some(bn(jo([],[h.asSpec()]))),onEscape:g,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Ye(o1,g)],eventOrder:{}}));va.show(k);const O=h.get(k);Vn.focus(O)}}},DF=t=>{const s=t.shared;return{open:(l,d)=>{const g=V=>{va.hide(O),d(V)},h=us(XE({context:"any",name:"yes",text:"Yes",primary:!0,buttonType:A.some("primary"),align:"end",enabled:!0,icon:A.none()},"submit",t)),y=XE({context:"any",name:"no",text:"No",primary:!1,buttonType:A.some("secondary"),align:"end",enabled:!0,icon:A.none()},"cancel",t),S=Sl(),k=$d(()=>g(!1),s.providers),O=Yc(jr({lazySink:()=>s.getSink(),header:pu(S,k),body:Hi(l,s.providers),footer:A.some(bn(jo([],[y,h.asSpec()]))),onEscape:()=>g(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Ye(o1,()=>g(!1)),Ye(r2,()=>g(!0))],eventOrder:{}}));va.show(O);const N=h.get(O);Vn.focus(N)}}},NR=(t,s)=>dt(xr("data",s,t)),PR=t=>e2(t,".tox-alert-dialog")||e2(t,".tox-confirm-dialog"),qj=(t,s,c)=>s&&c?[]:[er.config({contextual:{lazyContext:()=>A.some(ir(ge.fromDom(t.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"],lazyViewport:l=>Gp(t,l.element).map(g=>({bounds:qp(g),optScrollEnv:A.some({currentScrollTop:g.element.dom.scrollTop,scrollElmTop:Ws(g.element).top})})).getOrThunk(()=>({bounds:cc(),optScrollEnv:A.none()}))})],Po=t=>{const s=t.editor,c=jp(s),l=OF(t.backstages.dialog),d=DF(t.backstages.dialog),g=(X,ne,Ce)=>{if(!zt(ne)){if(ne.inline==="toolbar")return k(X,t.backstages.popup.shared.anchors.inlineDialog(),Ce,ne);if(ne.inline==="bottom")return O(X,t.backstages.popup.shared.anchors.inlineBottomDialog(),Ce,ne);if(ne.inline==="cursor")return k(X,t.backstages.popup.shared.anchors.cursor(),Ce,ne)}return S(X,Ce)},h=(X,ne)=>y(X,ne),y=(X,ne)=>{const Ce=ae=>{const ve=$h(ae,{closeWindow:()=>{va.hide(ve.dialog),ne(ve.instanceApi)}},s,t.backstages.dialog);return va.show(ve.dialog),ve.instanceApi};return T.openUrl(Ce,X)},S=(X,ne)=>{const Ce=(ae,ve,ye)=>{const $e=ve,kt=uc({dataValidator:ye,initialData:$e,internalDialog:ae},{redial:T.redial,closeWindow:()=>{va.hide(kt.dialog),ne(kt.instanceApi)}},t.backstages.dialog);return va.show(kt.dialog),kt.instanceApi.setData($e),kt.instanceApi};return T.open(Ce,X)},k=(X,ne,Ce,ae)=>{const ve=(ye,$e,Le)=>{const kt=NR($e,Le),Kt=Yo(),Ze=t.backstages.popup.shared.header.isPositionedAtTop(),Jt={dataValidator:Le,initialData:kt,internalDialog:ye},Bt=()=>Kt.on(is=>{Fr.reposition(is),(!c||!Ze)&&er.refresh(is)}),sn=km(Jt,{redial:T.redial,closeWindow:()=>{Kt.on(Fr.hide),s.off("ResizeEditor",Bt),Kt.clear(),Ce(sn.instanceApi)}},t.backstages.popup,ae.ariaAttrs,Bt),Do=Yc(Fr.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:ae.persistent?{event:"doNotDismissYet"}:{},...Ze?{}:{fireRepositionEventInstead:{}},inlineBehaviours:vt([oo("window-manager-inline-events",[Ye(Ai(),(is,an)=>{Eo(sn.dialog,o1)})]),...qj(s,c,Ze)]),isExtraPart:(is,an)=>PR(an)}));Kt.set(Do);const rr=()=>{const is=s.inline?be():ge.fromDom(s.getContainer()),an=ir(is);return A.some(an)};return Fr.showWithinBounds(Do,Oi(sn.dialog),{anchor:ne},rr),(!c||!Ze)&&(er.refresh(Do),s.on("ResizeEditor",Bt)),sn.instanceApi.setData(kt),En.focusIn(sn.dialog),sn.instanceApi};return T.open(ve,X)},O=(X,ne,Ce,ae)=>{const ve=(ye,$e,Le)=>{const kt=NR($e,Le),Kt=Yo(),Ze=t.backstages.popup.shared.header.isPositionedAtTop(),Jt={dataValidator:Le,initialData:kt,internalDialog:ye},Bt=()=>Kt.on(is=>{Fr.reposition(is),er.refresh(is)}),sn=km(Jt,{redial:T.redial,closeWindow:()=>{Kt.on(Fr.hide),s.off("ResizeEditor ScrollWindow ElementScroll",Bt),Kt.clear(),Ce(sn.instanceApi)}},t.backstages.popup,ae.ariaAttrs,Bt),Do=Yc(Fr.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:ae.persistent?{event:"doNotDismissYet"}:{},...Ze?{}:{fireRepositionEventInstead:{}},inlineBehaviours:vt([oo("window-manager-inline-events",[Ye(Ai(),(is,an)=>{Eo(sn.dialog,o1)})]),er.config({contextual:{lazyContext:()=>A.some(ir(ge.fromDom(s.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:is=>Gp(s,is.element).map(ut=>({bounds:qp(ut),optScrollEnv:A.some({currentScrollTop:ut.element.dom.scrollTop,scrollElmTop:Ws(ut.element).top})})).getOrThunk(()=>({bounds:cc(),optScrollEnv:A.none()}))})]),isExtraPart:(is,an)=>PR(an)}));Kt.set(Do);const rr=()=>t.backstages.popup.shared.getSink().toOptional().bind(is=>{const an=Gp(s,is.element),ut=15,Nt=an.map(Tn=>qp(Tn)).getOr(cc()),Wn=ir(ge.fromDom(s.getContentAreaContainer())),go=jl(Wn,Nt);return A.some(lr(go.x,go.y,go.width,go.height-ut))});return Fr.showWithinBounds(Do,Oi(sn.dialog),{anchor:ne},rr),er.refresh(Do),s.on("ResizeEditor ScrollWindow ElementScroll ResizeWindow",Bt),sn.instanceApi.setData(kt),En.focusIn(sn.dialog),sn.instanceApi};return T.open(ve,X)};return{open:g,openUrl:h,alert:(X,ne)=>{l.open(X,ne)},close:X=>{X.close()},confirm:(X,ne)=>{d.open(X,ne)}}},Be=t=>{dN(t),h7(t),eZ(t)};var kn=()=>{Tu.add("silver",t=>{Be(t);let s=()=>cc();const{dialogs:c,popups:l,renderUI:d}=tj(t,{getPopupSinkBounds:()=>s()}),g=()=>{const k=d();return Gp(t,l.getMothership().element).each(N=>{s=()=>qp(N)}),k};kB.register(t,l.backstage.shared);const h=Po({editor:t,backstages:{popup:l.backstage,dialog:c.backstage}}),y=Yo(),S=()=>GN(t,{backstage:l.backstage},l.getMothership(),y);return{renderUI:g,getWindowManagerImpl:W(h),getNotificationManagerImpl:S}})};kn()})();const kK=["id"],_K={class:"grid"},AK={class:"field"},OK={class:"type-label"},DK={class:"field"},RK={class:"type-label"},MK={class:"field half"},NK={class:"type-label"},PK={class:"field half-right"},BK={class:"type-label"},$K={class:"content"},IK={class:"content"},LK=["src"],FK={class:"grid"},HK={class:"field half"},VK={class:"type-label"},zK={class:"field half-right"},UK={class:"type-label"},WK={class:"field half"},ZK={class:"type-label"},jK={class:"field half-right"},GK={class:"type-label"},qK={class:"field half"},KK={class:"type-label"},YK={key:1,class:"field half"},XK={class:"type-label"},JK={class:"content"},QK={key:0,class:"media-preview",controls:"true"},eY=["src"],tY=["src"],nY={class:"grid"},oY={class:"field"},sY={class:"type-label"},rY={class:"field half"},cY={class:"type-label"},aY={class:"field half-right"},lY={class:"type-label"},iY={class:"grid"},uY={class:"field"},dY={class:"type-label"},mY=Rq({__name:"input-rich-text-html",props:{value:{},field:{},toolbar:{default:()=>["bold","italic","underline","h1","h2","h3","numlist","bullist","removeformat","blockquote","customLink","customImage","customMedia","code","fullscreen"]},font:{default:"sans-serif"},customFormats:{default:()=>[]},tinymceOverrides:{},disabled:{type:Boolean},imageToken:{},folder:{},softLength:{},direction:{}},emits:["input"],setup(ht,{emit:_n}){var xe;const jt=ht,un=_n,{t:Ct}=nK(),Gt=Tl(null),Jn=Tl(null),Dt=Tl(0),{imageToken:Yt}=Mq(jt),io=qq(),xn=Tl("all"),Xt=Tl([]);(xe=io.settings)!=null&&xe.storage_asset_transform&&(xn.value=io.settings.storage_asset_transform,Xt.value=io.settings.storage_asset_presets??[]);const Mn=Tl(0),{imageDrawerOpen:zt,imageSelection:ft,closeImageDrawer:et,onImageSelect:ct,saveImage:Qn,imageButton:Re}=wK(Gt,Yt,{storageAssetTransform:xn,storageAssetPresets:Xt}),{mediaDrawerOpen:ee,mediaSelection:Xe,closeMediaDrawer:Zn,openMediaTab:Qe,onMediaSelect:W,embed:xt,saveMedia:gn,mediaHeight:dn,mediaWidth:Oe,mediaSource:ue,mediaButton:ts}=xK(Gt,Yt),{linkButton:no,linkDrawerOpen:Mt,closeLinkDrawer:A,saveLink:Bo,linkSelection:tt,linkNode:Wo}=SK(Gt),{codeDrawerOpen:cn,code:Je,closeCodeDrawer:vo,saveCode:Ms,sourceCodeButton:ho}=TK(Gt),Us=q2({get(){return jt.value||""},set(zn){jt.value!==zn&&wa()}}),je=Tl(!1),gt=q2(()=>je.value?jt.disabled:!1);My(()=>[jt.direction,Gt],()=>{var zn,Ht,Lt,Zo,Ho,pr;Gt.value&&(jt.direction==="rtl"?(Lt=(Ht=(zn=Gt.value.editorCommands)==null?void 0:zn.commands)==null?void 0:Ht.exec)==null||Lt.mcedirectionrtl():(pr=(Ho=(Zo=Gt.value.editorCommands)==null?void 0:Zo.commands)==null?void 0:Ho.exec)==null||pr.mcedirectionltr())}),My(()=>[jt.toolbar,jt.font,jt.customFormats,jt.tinymceOverrides],(zn,Ht)=>{tG.isEqual(zn,Ht)||(Gt.value.remove(),je.value=!1,Dt.value++)});const F=q2(()=>{const zn=Array.isArray(jt.customFormats)&&jt.customFormats.length>0?tG.cloneDeep(jt.customFormats):null;let Ht=(jt.toolbar??[]).map(Lt=>Lt.replace(/^link$/g,"customLink").replace(/^media$/g,"customMedia").replace(/^code$/g,"customCode").replace(/^image$/g,"customImage")).join(" ");return zn&&(Ht+=" styles"),{skin:!1,content_css:!1,content_style:CK(jt.font),plugins:["media","table","lists","image","link","pagebreak","code","insertdatetime","autoresize","preview","fullscreen","directionality"],license_key:"gpl",branding:!1,max_height:1e3,elementpath:!1,statusbar:!1,menubar:!1,highlight_on_focus:!1,convert_urls:!1,image_dimensions:!1,extended_valid_elements:"audio[loop|controls],source[src|type]",toolbar:Ht||!1,style_formats:zn,file_picker_types:"customImage customMedia image media",link_default_protocol:"https",browser_spellcheck:!0,directionality:jt.direction,paste_data_images:!1,setup:So,...jt.tinymceOverrides&&tG.cloneDeep(jt.tinymceOverrides)}}),dc=q2(()=>Kq(Mn.value,jt.softLength)??100);let uo,ds;function Go(){var Ht,Lt,Zo;const zn=(Ht=Gt.value)==null?void 0:Ht.contentWindow.document.getElementById("tinymce");Mn.value=((Zo=(Lt=zn==null?void 0:zn.textContent)==null?void 0:Lt.replace(`
`,""))==null?void 0:Zo.length)??0}function wa(){if(Go(),!uo)return;const zn=Gt.value.getContent()?Gt.value.getContent():null;zn!==ds&&(ds=zn,un("input",zn))}function Cn(){if(uo)return;const zn=Gt.value.contentWindow.document.getElementById("tinymce");uo=new MutationObserver(Lt=>{wa()});const Ht={characterData:!0,childList:!0,subtree:!0};uo.observe(zn,Ht)}function So(zn){Gt.value=zn;const Ht="meta+k";zn.ui.registry.addToggleButton("customImage",Re),zn.ui.registry.addToggleButton("customMedia",ts),zn.ui.registry.addToggleButton("customLink",{...no,shortcut:Ht}),zn.ui.registry.addButton("customCode",ho),zn.on("init",function(){zn.shortcuts.remove(Ht),zn.addShortcut(Ht,"Insert Link",()=>{zn.ui.registry.getAll().buttons.customlink.onAction()}),Go(),je.value=!0}),zn.on("OpenWindow",function(Lt){var Zo,Ho;if((Zo=Lt.dialog)!=null&&Zo.getData){const pr=(Ho=Lt.dialog)==null?void 0:Ho.getData();pr&&(pr.url&&(Lt.dialog.close(),zn.ui.registry.getAll().buttons.customlink.onAction()),pr.src&&(Lt.dialog.close(),zn.ui.registry.getAll().buttons.customimage.onAction(!0)))}})}function Rn(zn){var Lt;if(Jn.value==null)return;const Ht=(Lt=Jn.value.$el.parentElement)==null?void 0:Lt.querySelector(".tox-tinymce");Ht!=null&&(zn?Ht.classList.add("focus"):Ht.classList.remove("focus"))}return(zn,Ht)=>{const Lt=Wi("v-card-title"),Zo=Wi("v-input"),Ho=Wi("v-checkbox"),pr=Wi("v-card-text"),qo=Wi("v-button"),qs=Wi("v-card-actions"),st=Wi("v-card"),lt=Wi("v-dialog"),tn=Wi("interface-input-code"),mn=Wi("v-icon"),Mo=Wi("v-drawer"),Ao=Wi("v-select"),jn=Wi("v-upload"),jc=Wi("v-tab"),ro=Wi("v-tabs"),ns=Wi("v-tab-item"),cr=Wi("v-textarea"),Br=Wi("v-tabs-items"),ea=tK("tooltip");return pf(),Ry("div",{id:zn.field,class:kq(["wysiwyg",{disabled:zn.disabled}])},[(pf(),VR(Bn(bK),{key:Dt.value,ref_key:"editorElement",ref:Jn,modelValue:Us.value,"onUpdate:modelValue":Ht[0]||(Ht[0]=Vt=>Us.value=Vt),init:F.value,disabled:gt.value,"model-events":"change keydown blur focus paste ExecCommand SetContent",onFocusin:Ht[1]||(Ht[1]=Vt=>Rn(!0)),onFocusout:Ht[2]||(Ht[2]=Vt=>Rn(!1)),onFocus:Cn,onSetContent:wa},null,8,["modelValue","init","disabled"])),zn.softLength?(pf(),Ry("span",{key:0,class:kq(["remaining",{warning:dc.value<10,danger:dc.value<5}])},ei(zn.softLength-Mn.value),3)):zR("",!0),Pr(lt,{modelValue:Bn(Mt),"onUpdate:modelValue":Ht[7]||(Ht[7]=Vt=>C1(Mt)?Mt.value=Vt:null)},{default:rl(()=>[Pr(st,null,{default:rl(()=>[Pr(Lt,null,{default:rl(()=>[UR(ei(Bn(Ct)("wysiwyg_options.link")),1)]),_:1}),Pr(pr,null,{default:rl(()=>[Er("div",_K,[Er("div",AK,[Er("div",OK,ei(Bn(Ct)("url")),1),Pr(Zo,{modelValue:Bn(tt).url,"onUpdate:modelValue":Ht[3]||(Ht[3]=Vt=>Bn(tt).url=Vt),placeholder:Bn(Ct)("url_placeholder"),autofocus:""},null,8,["modelValue","placeholder"])]),Er("div",DK,[Er("div",RK,ei(Bn(Ct)("display_text")),1),Pr(Zo,{modelValue:Bn(tt).displayText,"onUpdate:modelValue":Ht[4]||(Ht[4]=Vt=>Bn(tt).displayText=Vt),placeholder:Bn(Ct)("display_text_placeholder")},null,8,["modelValue","placeholder"])]),Er("div",MK,[Er("div",NK,ei(Bn(Ct)("tooltip")),1),Pr(Zo,{modelValue:Bn(tt).title,"onUpdate:modelValue":Ht[5]||(Ht[5]=Vt=>Bn(tt).title=Vt),placeholder:Bn(Ct)("tooltip_placeholder")},null,8,["modelValue","placeholder"])]),Er("div",PK,[Er("div",BK,ei(Bn(Ct)("open_link_in")),1),Pr(Ho,{modelValue:Bn(tt).newTab,"onUpdate:modelValue":Ht[6]||(Ht[6]=Vt=>Bn(tt).newTab=Vt),block:"",label:Bn(Ct)("new_tab")},null,8,["modelValue","label"])])])]),_:1}),Pr(qs,null,{default:rl(()=>[Pr(qo,{secondary:"",onClick:Bn(A)},{default:rl(()=>[UR(ei(Bn(Ct)("cancel")),1)]),_:1},8,["onClick"]),Pr(qo,{disabled:Bn(tt).url===null&&!Bn(Wo),onClick:Bn(Bo)},{default:rl(()=>[UR(ei(Bn(Ct)("save")),1)]),_:1},8,["disabled","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),Pr(Mo,{modelValue:Bn(cn),"onUpdate:modelValue":Ht[9]||(Ht[9]=Vt=>C1(cn)?cn.value=Vt:null),title:Bn(Ct)("wysiwyg_options.source_code"),icon:"code",onCancel:Bn(vo)},{actions:rl(()=>[Pr(qo,{icon:"",rounded:"",onClick:Bn(Ms)},{default:rl(()=>[Pr(mn,{name:"check"})]),_:1},8,["onClick"])]),default:rl(()=>[Er("div",$K,[Pr(tn,{value:Bn(Je),language:"htmlmixed","line-wrapping":"",onInput:Ht[8]||(Ht[8]=Vt=>Je.value=Vt)},null,8,["value"])])]),_:1},8,["modelValue","title","onCancel"]),Pr(Mo,{modelValue:Bn(zt),"onUpdate:modelValue":Ht[16]||(Ht[16]=Vt=>C1(zt)?zt.value=Vt:null),title:Bn(Ct)("wysiwyg_options.image"),icon:"image",onCancel:Bn(et)},{actions:rl(()=>[_q((pf(),VR(qo,{icon:"",rounded:"",onClick:Bn(Qn)},{default:rl(()=>[Pr(mn,{name:"check"})]),_:1},8,["onClick"])),[[ea,Bn(Ct)("save_image"),void 0,{bottom:!0}]])]),default:rl(()=>[Er("div",IK,[Bn(ft)?(pf(),Ry(nG,{key:0},[Er("img",{class:"image-preview",src:Bn(ft).previewUrl},null,8,LK),Er("div",FK,[Er("div",HK,[Er("div",VK,ei(Bn(Ct)("image_url")),1),Pr(Zo,{modelValue:Bn(ft).imageUrl,"onUpdate:modelValue":Ht[10]||(Ht[10]=Vt=>Bn(ft).imageUrl=Vt)},null,8,["modelValue"])]),Er("div",zK,[Er("div",UK,ei(Bn(Ct)("alt_text")),1),Pr(Zo,{modelValue:Bn(ft).alt,"onUpdate:modelValue":Ht[11]||(Ht[11]=Vt=>Bn(ft).alt=Vt),nullable:!1},null,8,["modelValue"])]),xn.value==="all"?(pf(),Ry(nG,{key:0},[Er("div",WK,[Er("div",ZK,ei(Bn(Ct)("width")),1),Pr(Zo,{modelValue:Bn(ft).width,"onUpdate:modelValue":Ht[12]||(Ht[12]=Vt=>Bn(ft).width=Vt),disabled:!!Bn(ft).transformationKey},null,8,["modelValue","disabled"])]),Er("div",jK,[Er("div",GK,ei(Bn(Ct)("height")),1),Pr(Zo,{modelValue:Bn(ft).height,"onUpdate:modelValue":Ht[13]||(Ht[13]=Vt=>Bn(ft).height=Vt),disabled:!!Bn(ft).transformationKey},null,8,["modelValue","disabled"])])],64)):zR("",!0),Er("div",qK,[Er("div",KK,ei(Bn(Ct)("wysiwyg_options.lazy_loading")),1),Pr(Ho,{modelValue:Bn(ft).lazy,"onUpdate:modelValue":Ht[14]||(Ht[14]=Vt=>Bn(ft).lazy=Vt),block:"",label:Bn(Ct)("wysiwyg_options.lazy_loading_label")},null,8,["modelValue","label"])]),xn.value!=="none"&&Xt.value.length>0?(pf(),Ry("div",YK,[Er("div",XK,ei(Bn(Ct)("transformation_preset_key")),1),Pr(Ao,{modelValue:Bn(ft).transformationKey,"onUpdate:modelValue":Ht[15]||(Ht[15]=Vt=>Bn(ft).transformationKey=Vt),items:Xt.value.map(Vt=>({text:Vt.key,value:Vt.key})),"show-deselect":""},null,8,["modelValue","items"])])):zR("",!0)])],64)):(pf(),VR(jn,{key:1,multiple:!1,"from-library":"","from-url":"",folder:zn.folder,onInput:Bn(ct)},null,8,["folder","onInput"]))])]),_:1},8,["modelValue","title","onCancel"]),Pr(Mo,{modelValue:Bn(ee),"onUpdate:modelValue":Ht[23]||(Ht[23]=Vt=>C1(ee)?ee.value=Vt:null),title:Bn(Ct)("wysiwyg_options.media"),icon:"slideshow",onCancel:Bn(Zn)},{sidebar:rl(()=>[Pr(ro,{modelValue:Bn(Qe),"onUpdate:modelValue":Ht[17]||(Ht[17]=Vt=>C1(Qe)?Qe.value=Vt:null),vertical:""},{default:rl(()=>[Pr(jc,{value:"video"},{default:rl(()=>[UR(ei(Bn(Ct)("media")),1)]),_:1}),Pr(jc,{value:"embed"},{default:rl(()=>[UR(ei(Bn(Ct)("embed")),1)]),_:1})]),_:1},8,["modelValue"])]),actions:rl(()=>[_q((pf(),VR(qo,{icon:"",rounded:"",onClick:Bn(gn)},{default:rl(()=>[Pr(mn,{name:"check"})]),_:1},8,["onClick"])),[[ea,Bn(Ct)("save_media"),void 0,{bottom:!0}]])]),default:rl(()=>[Er("div",JK,[Pr(Br,{modelValue:Bn(Qe),"onUpdate:modelValue":Ht[22]||(Ht[22]=Vt=>C1(Qe)?Qe.value=Vt:null)},{default:rl(()=>[Pr(ns,{value:"video"},{default:rl(()=>[Bn(Xe)?(pf(),Ry(nG,{key:0},[Bn(Xe).tag!=="iframe"?(pf(),Ry("video",QK,[Er("source",{src:Bn(Xe).previewUrl},null,8,eY)])):zR("",!0),Bn(Xe).tag==="iframe"?(pf(),Ry("iframe",{key:1,class:"media-preview",src:Bn(Xe).previewUrl},null,8,tY)):zR("",!0),Er("div",nY,[Er("div",oY,[Er("div",sY,ei(Bn(Ct)("source")),1),Pr(Zo,{modelValue:Bn(ue),"onUpdate:modelValue":Ht[18]||(Ht[18]=Vt=>C1(ue)?ue.value=Vt:null)},null,8,["modelValue"])]),Er("div",rY,[Er("div",cY,ei(Bn(Ct)("width")),1),Pr(Zo,{modelValue:Bn(Oe),"onUpdate:modelValue":Ht[19]||(Ht[19]=Vt=>C1(Oe)?Oe.value=Vt:null)},null,8,["modelValue"])]),Er("div",aY,[Er("div",lY,ei(Bn(Ct)("height")),1),Pr(Zo,{modelValue:Bn(dn),"onUpdate:modelValue":Ht[20]||(Ht[20]=Vt=>C1(dn)?dn.value=Vt:null)},null,8,["modelValue"])])])],64)):(pf(),VR(jn,{key:1,multiple:!1,"from-library":"","from-url":"",folder:zn.folder,onInput:Bn(W)},null,8,["folder","onInput"]))]),_:1}),Pr(ns,{value:"embed"},{default:rl(()=>[Er("div",iY,[Er("div",uY,[Er("div",dY,ei(Bn(Ct)("embed")),1),Pr(cr,{modelValue:Bn(xt),"onUpdate:modelValue":Ht[21]||(Ht[21]=Vt=>C1(xt)?xt.value=Vt:null),nullable:!1},null,8,["modelValue"])])])]),_:1})]),_:1},8,["modelValue"])])]),_:1},8,["modelValue","title","onCancel"])],10,kK)}}}),CY=Yq(mY,[["__scopeId","data-v-9e496b2f"]]);export{CY as default};
