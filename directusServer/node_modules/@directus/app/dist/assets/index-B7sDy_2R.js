import{T as Se,w as xe,a as De,v as Pe}from"./vue.runtime.esm-bundler-CQgeFuBy.js";import{y as ze,v as Ce,z as Ue,_ as F,A as he,B as re,C as be,M as He,w as _e,D as Ge,E as Ze,F as Je,G as Ke,H as Qe,I as Xe,J as Ye,S as et,K as tt,L as We,N as nt,O as ot,P as st,Q as at,R as lt,T as it,V as Be,U as rt}from"./index.CkaPYycP.entry.js";import{r as ut,u as ct,m as dt,a as vt,b as _t,d as mt}from"./index-DQ2f5FNW.js";import{storeToRefs as ie}from"./pinia.U-iWqNCJ.entry.js";import{useI18n as ae}from"./vue-i18n.CbdUlhRS.entry.js";import{useRoute as pt,useRouter as Te}from"./vue-router.C8ykGufy.entry.js";import{e as j,c as S,f as x,bs as Ne,w as oe,be as p,bf as Q,bJ as A,b5 as s,ah as h,bH as a,aj as N,J as K,y as i,ai as I,ak as U,aW as R,bg as Ee,u as c,ao as L,bo as D,bc as se,aO as Oe,bd as J,aV as ft,n as gt,p as ht,am as bt,aX as yt,aC as wt}from"./runtime-core.esm-bundler-BIDPbtkS.js";const kt=["src"],$t=j({__name:"module-bar-logo",setup(r){const{t:e}=ae(),o=ze(),d=Ce(),t=S(()=>{var u;return d.settings===null||!((u=d.settings)!=null&&u.project_logo)?null:Ue(`${d.settings.project_logo}`)}),n=x(!1),{queueHasItems:_}=Ne(o);oe(()=>_.value,u=>{u&&(n.value=!0)});const f=S(()=>{var u;return(u=d.settings)==null?void 0:u.project_url}),w=S(()=>{var u;return(u=d.settings)!=null&&u.project_url?e("view_project"):!1});function v(){_.value===!1&&(n.value=!1)}return(u,b)=>{const k=p("v-progress-linear"),y=Q("tooltip");return A((s(),h(Ee(f.value?"a":"div"),{href:f.value,target:f.value?"_blank":void 0,rel:f.value?"noopener noreferrer":void 0,class:R(["module-bar-logo",{loading:n.value}])},{default:a(()=>[t.value?(s(),N(K,{key:0},[i(Se,{name:"fade"},{default:a(()=>[n.value?(s(),h(k,{key:0,indeterminate:"",rounded:"",onAnimationiteration:v})):I("",!0)]),_:1}),U("img",{class:"custom-logo",src:t.value,alt:"Project Logo"},null,8,kt)],64)):(s(),N("div",{key:1,class:R(["logo",{running:n.value}]),onAnimationiteration:v},null,34))]),_:1},8,["href","target","rel","class"])),[[y,w.value,void 0,{right:!0}]])}}}),St=F($t,[["__scopeId","data-v-d86ce83c"]]),Ct={class:"module-bar-avatar"},Nt=["src","alt"],Mt=j({__name:"module-bar-avatar",setup(r){const{t:e}=ae(),o=he(),d=re(),{notificationsDrawerOpen:t}=ie(o),{unread:n}=ie(d),_=be(),f=x(!1),w=S(()=>{var y;return!_.currentUser||!("avatar"in _.currentUser)||!((y=_.currentUser)!=null&&y.avatar)?null:Ue(`${_.currentUser.avatar.id}?key=system-medium-cover`)}),v=x(null),u=S(()=>`/users/${_.currentUser.id}`),b=S(()=>"/logout"),k=_.fullName??void 0;return(y,m)=>{const W=p("v-icon"),O=p("v-button"),B=p("v-badge"),M=p("v-card-title"),G=p("v-card-actions"),X=p("v-card"),H=p("v-dialog"),Y=p("v-avatar"),ee=p("router-link"),le=p("v-hover"),te=Q("tooltip");return s(),N("div",Ct,[i(B,{value:c(n),disabled:c(n)==0,class:"notifications-badge"},{default:a(()=>[A((s(),h(O,{tile:"",icon:"","x-large":"",class:"notifications",onClick:m[0]||(m[0]=z=>t.value=!0)},{default:a(()=>[i(W,{name:"notifications"})]),_:1})),[[te,c(e)("notifications"),void 0,{right:!0}]])]),_:1},8,["value","disabled"]),i(le,null,{default:a(({hover:z})=>[i(H,{modelValue:f.value,"onUpdate:modelValue":m[2]||(m[2]=T=>f.value=T),onEsc:m[3]||(m[3]=T=>f.value=!1)},{activator:a(({on:T})=>[i(Se,{name:"sign-out"},{default:a(()=>[z?A((s(),h(O,{key:0,tile:"",icon:"","x-large":"",class:"sign-out",onClick:T},{default:a(()=>[i(W,{name:"logout"})]),_:2},1032,["onClick"])),[[te,c(e)("sign_out"),void 0,{right:!0}]]):I("",!0)]),_:2},1024)]),default:a(()=>[i(X,null,{default:a(()=>[i(M,null,{default:a(()=>[L(D(c(e)("sign_out_confirm")),1)]),_:1}),i(G,null,{default:a(()=>[i(O,{secondary:"",onClick:m[1]||(m[1]=T=>f.value=!f.value)},{default:a(()=>[L(D(c(e)("cancel")),1)]),_:1}),i(O,{to:b.value},{default:a(()=>[L(D(c(e)("sign_out")),1)]),_:1},8,["to"])]),_:1})]),_:1})]),_:2},1032,["modelValue"]),i(ee,{to:u.value},{default:a(()=>[A((s(),h(Y,{tile:"",large:"",class:R({"no-avatar":!w.value})},{default:a(()=>[w.value&&!v.value?(s(),N("img",{key:0,src:w.value,alt:c(k),class:"avatar-image",onError:m[4]||(m[4]=T=>v.value=T)},null,40,Nt)):(s(),h(W,{key:1,name:"account_circle"}))]),_:1},8,["class"])),[[te,c(k),void 0,{right:!0}]])]),_:1},8,["to"])]),_:1})])}}}),Vt=F(Mt,[["__scopeId","data-v-f9f544dc"]]),xt={class:"module-bar"},Wt={class:"modules"},Bt=j({__name:"module-bar",setup(r){const e=Ce(),{modules:o}=Ze(),d=S(()=>o.value.map(n=>n.id)),t=S(()=>e.settings?(e.settings.module_bar??He).filter(n=>n.type==="link"?!0:n.enabled&&d.value.includes(n.id)).map(n=>{if(n.type==="link"){const f=_e.omit(n,["url"]);return n.url.startsWith("/")?f.to=n.url:f.href=n.url,Ge(f)}const _=o.value.find(f=>f.id===n.id);return{...n,...o.value.find(f=>f.id===n.id),to:`/${_.id}`}}):[]);return(n,_)=>{const f=p("v-icon"),w=p("v-button"),v=Q("tooltip");return s(),N("div",xt,[i(St),U("div",Wt,[(s(!0),N(K,null,se(t.value,u=>A((s(),h(w,{key:u.id,icon:"","x-large":"",to:u.to,href:u.href,tile:""},{default:a(()=>[i(f,{name:u.icon},null,8,["name"])]),_:2},1032,["to","href"])),[[v,u.name,void 0,{right:!0}]])),128))]),i(Vt)])}}}),It=F(Bt,[["__scopeId","data-v-572954c3"]]),Dt={class:"notification-dialogs"},Ut=["href"],Tt=j({__name:"notification-dialogs",setup(r){const{t:e}=ae(),o=re(),{isAdmin:d,currentUser:t}=be(),{settings:n}=ie(Ce()),_=S(()=>o.dialogs);function f(v){var k,y,m;if(!((k=n.value)!=null&&k.report_error_url))return Je;const u=pt(),b={error:{name:v==null?void 0:v.name,message:v==null?void 0:v.message},route:{fullPath:u.fullPath,hash:u.hash,name:u.name,path:u.path,query:u.query},navigator:{language:navigator.language,userAgent:navigator.userAgent},user:{},role:{}};return t!==null&&"id"in t&&(b.user={id:t.id,first_name:t.first_name,last_name:t.last_name,title:t.title,description:t.description,location:t.location,status:t.status},b.role={id:(y=t.role)==null?void 0:y.id,name:(m=t.role)==null?void 0:m.name}),ut(n.value.report_error_url,b)}const w=async v=>{v.dismissAction&&await v.dismissAction(),o.remove(v.id)};return(v,u)=>{const b=p("v-card-title"),k=p("v-error"),y=p("v-card-text"),m=p("v-button"),W=p("v-card-actions"),O=p("v-card"),B=p("v-dialog");return s(),N("div",Dt,[(s(!0),N(K,null,se(_.value,M=>(s(),h(B,{key:M.id,"model-value":"",persist:""},{default:a(()=>[i(O,{class:R([M.type])},{default:a(()=>[i(b,null,{default:a(()=>[L(D(M.title),1)]),_:2},1024),M.text||M.error?(s(),h(y,{key:0},{default:a(()=>[L(D(M.text)+" ",1),M.error?(s(),h(k,{key:0,error:M.error},null,8,["error"])):I("",!0)]),_:2},1024)):I("",!0),i(W,null,{default:a(()=>[M.type==="error"&&c(d)&&M.code==="UNKNOWN"?(s(),h(m,{key:0,secondary:""},{default:a(()=>[U("a",{target:"_blank",href:f(M.error)},D(c(e)("report_error")),9,Ut)]),_:2},1024)):I("",!0),i(m,{onClick:G=>w(M)},{default:a(()=>[L(D(M.dismissText??c(e)("dismiss")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["class"])]),_:2},1024))),128))])}}}),Et=F(Tt,[["__scopeId","data-v-8f4b67f7"]]),Ot={key:0,class:"item-count"},Lt={key:1,class:"content"},At=["onClick"],Rt={key:0,class:"message"},Ft=j({__name:"notifications-drawer",setup(r){const{t:e,n:o}=ae(),d=he(),t=be(),n=Ke(),_=re(),f=Te(),w=x(null),v=x([]),u=x(["inbox"]),b=x([]),k=x(1),y=x(25),m=x(null),W=x(null),O=x(null),{notificationsDrawerOpen:B}=ie(d);oe(u,(C,V)=>{C[0]!==V[0]&&(v.value=[])}),oe(B,C=>{w.value=C?"directus_notifications":null});const M=S(()=>({_and:[{recipient:{_eq:t.currentUser.id}},{status:{_eq:u.value[0]}}]})),{items:G,loading:X,totalPages:H,totalCount:Y,itemCount:ee,getItems:le,getItemCount:te,getTotalCount:z}=ct(w,{filter:S(()=>dt(W.value,M.value)),filterSystem:M,fields:x(["id","subject","message","collection","item","timestamp"]),sort:x(["-timestamp"]),search:m,limit:y,page:k}),T=S(()=>G.value.map(C=>{var l;let V;if(C.collection){const g=n.getCollection(C.collection);(l=g==null?void 0:g.meta)!=null&&l.singleton||!C.item?V=Qe(C.collection):V=Xe(C.collection,C.item)}else String(C.item).startsWith("/")&&(V=String(C.item));return{...C,to:V}})),me=S(()=>{if(!(!Y.value||!ee.value))return Ye({currentItems:ee.value,currentPage:k.value,perPage:y.value,isFiltered:!!W.value,totalItems:Y.value,i18n:{t:e,n:o}})});async function pe(){await le(),await z(),await te()}async function ue(){await We.patch("/notifications",{query:{filter:{_and:[{recipient:{_eq:t.currentUser.id}},{status:{_eq:"inbox"}}]}},data:{status:"archived"}}),await pe(),_.setUnreadCount(0)}function P(C){v.value.includes(C)?v.value.splice(v.value.indexOf(C),1):v.value.push(C)}function ce(C){b.value.includes(C)?b.value.splice(b.value.indexOf(C),1):b.value.push(C)}async function ye(){await We.patch("/notifications",{keys:v.value,data:{status:u.value[0]==="inbox"?"archived":"inbox"}}),await pe(),await _.refreshUnreadCount(),v.value=[]}function we(C){f.push(C),B.value=!1}function fe(){W.value=null,m.value=null}return(C,V)=>{const l=p("v-icon"),g=p("v-button"),q=p("v-list-item-icon"),ne=p("v-list-item-content"),de=p("v-tab"),E=p("v-tabs"),ve=p("v-info"),ke=p("v-skeleton-loader"),Me=p("v-list"),Ae=p("v-checkbox"),Ve=p("v-text-overflow"),Re=p("v-list-item"),Fe=p("v-pagination"),je=p("v-drawer"),$e=Q("tooltip"),qe=Q("md");return s(),h(je,{modelValue:c(B),"onUpdate:modelValue":V[5]||(V[5]=$=>Oe(B)?B.value=$:null),icon:"notifications",title:c(e)("notifications"),"sidebar-label":c(e)("folders"),onCancel:V[6]||(V[6]=$=>B.value=!1)},{"actions:prepend":a(()=>[i(Se,{name:"fade"},{default:a(()=>[me.value?(s(),N("span",Ot,D(me.value),1)):I("",!0)]),_:1})]),actions:a(()=>[i(et,{modelValue:m.value,"onUpdate:modelValue":V[0]||(V[0]=$=>m.value=$),filter:W.value,"onUpdate:filter":V[1]||(V[1]=$=>W.value=$),collection:"directus_notifications"},null,8,["modelValue","filter"]),A((s(),h(g,{icon:"",rounded:"",disabled:v.value.length===0,secondary:"",onClick:ye},{default:a(()=>[i(l,{name:u.value[0]==="inbox"?"archive":"move_to_inbox"},null,8,["name"])]),_:1},8,["disabled"])),[[$e,u.value[0]==="inbox"?c(e)("archive"):c(e)("unarchive"),void 0,{bottom:!0}]]),u.value[0]==="inbox"?A((s(),h(g,{key:0,icon:"",rounded:"",disabled:T.value.length===0,onClick:ue},{default:a(()=>[i(l,{name:"done_all"})]),_:1},8,["disabled"])),[[$e,c(e)("archive_all"),void 0,{bottom:!0}]]):I("",!0)]),sidebar:a(()=>[i(E,{modelValue:u.value,"onUpdate:modelValue":V[2]||(V[2]=$=>u.value=$),vertical:""},{default:a(()=>[i(de,{value:"inbox"},{default:a(()=>[i(q,null,{default:a(()=>[i(l,{name:"inbox"})]),_:1}),i(ne,null,{default:a(()=>[L(D(c(e)("inbox")),1)]),_:1})]),_:1}),i(de,{value:"archived"},{default:a(()=>[i(q,null,{default:a(()=>[i(l,{name:"archive"})]),_:1}),i(ne,null,{default:a(()=>[L(D(c(e)("archive")),1)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),default:a(()=>[!c(X)&&!c(ee)?(s(),N(K,{key:0},[W.value||m.value?(s(),h(ve,{key:0,title:c(e)("no_results"),icon:"search",center:""},{append:a(()=>[i(g,{onClick:fe},{default:a(()=>[L(D(c(e)("clear_filters")),1)]),_:1})]),default:a(()=>[L(D(c(e)("no_results_copy"))+" ",1)]),_:1},8,["title"])):(s(),h(ve,{key:1,icon:"notifications",title:c(e)("no_notifications"),center:""},{default:a(()=>[L(D(c(e)("no_notifications_copy")),1)]),_:1},8,["title"]))],64)):(s(),N("div",Lt,[c(X)?(s(),h(Me,{key:0,class:"notifications"},{default:a(()=>[(s(),N(K,null,se(10,$=>i(ke,{key:$,class:R({dense:c(H)>1})},null,8,["class"])),64))]),_:1})):(s(),h(Me,{key:1,class:"notifications"},{default:a(()=>[(s(!0),N(K,null,se(T.value,$=>(s(),h(Re,{key:$.id,block:"",dense:c(H)>1,clickable:!!$.message,onMousedown:V[3]||(V[3]=xe(({target:Z})=>O.value=Z,["left","self"])),onMouseup:xe(({target:Z})=>{Z===O.value&&ce($.id),O.value=null},["left","self"])},{default:a(()=>[U("div",{class:"header",onClick:Z=>ce($.id)},[i(Ae,{"model-value":v.value.includes($.id),"onUpdate:modelValue":Z=>P($.id)},null,8,["model-value","onUpdate:modelValue"]),i(Ve,{class:"title",highlight:m.value,text:$.subject},null,8,["highlight","text"]),i(tt,{value:$.timestamp,type:"timestamp",relative:""},{default:a(({datetime:Z})=>[i(Ve,{class:"datetime",text:Z},null,8,["text"])]),_:2},1032,["value"]),$.to?A((s(),h(l,{key:0,clickable:"",name:"open_in_new",onClick:Z=>we($.to)},null,8,["onClick"])),[[$e,c(e)("goto_collection_content")]]):I("",!0),$.message?(s(),h(l,{key:1,clickable:"",name:b.value.includes($.id)?"expand_less":"expand_more"},null,8,["name"])):I("",!0)],8,At),b.value.includes($.id)&&$.message?A((s(),N("div",Rt,null,512)),[[qe,$.message]]):I("",!0)]),_:2},1032,["dense","clickable","onMouseup"]))),128))]),_:1})),c(H)>1?(s(),h(Fe,{key:2,modelValue:k.value,"onUpdate:modelValue":V[4]||(V[4]=$=>k.value=$),"total-visible":5,length:c(H)},null,8,["modelValue","length"])):I("",!0)]))]),_:1},8,["modelValue","title","sidebar-label"])}}}),jt=F(Ft,[["__scopeId","data-v-3a98573c"]]),qt={key:0,class:"icon"},Pt={class:"content"},zt={class:"title selectable"},Ht={key:0,class:"text selectable"},Gt=j({__name:"notification-item",props:{id:{},title:{},text:{},icon:{},type:{default:"info"},tail:{type:Boolean},dense:{type:Boolean},showClose:{type:Boolean},loading:{type:Boolean},progress:{},alwaysShowText:{type:Boolean},dismissText:{},dismissIcon:{},dismissAction:{}},setup(r){const e=r,o=re(),d=async()=>{e.showClose===!0&&(e.dismissAction&&await e.dismissAction(),o.remove(e.id))};return(t,n)=>{const _=p("v-progress-circular"),f=p("v-icon"),w=Q("tooltip");return s(),N("div",{class:R(["notification-item",[t.type,{tail:t.tail,dense:t.dense,"show-text":t.alwaysShowText}]]),onClick:d},[t.loading||t.progress||t.icon?(s(),N("div",qt,[t.loading?(s(),h(_,{key:0,indeterminate:"",small:""})):t.progress?(s(),h(_,{key:1,small:"",value:t.progress},null,8,["value"])):(s(),h(f,{key:2,name:t.icon},null,8,["name"]))])):I("",!0),U("div",Pt,[U("p",zt,D(t.title),1),t.text?(s(),N("p",Ht,D(t.text),1)):I("",!0)]),t.showClose?A((s(),h(f,{key:1,name:t.dismissIcon??"close",clickable:"",class:"close",onClick:d},null,8,["name"])),[[w,t.dismissText]]):I("",!0)],2)}}}),Le=F(Gt,[["__scopeId","data-v-efae6d48"]]),Zt=j({__name:"notifications-group",props:{sidebarOpen:{type:Boolean}},setup(r){const e=re(),o=Ne(e).queue;return(d,t)=>(s(),h(De,{class:R(["notifications-group",{"sidebar-open":d.sidebarOpen}]),name:"slide-fade",tag:"div"},{default:a(()=>[J(d.$slots,"default",{},void 0,!0),(s(!0),N(K,null,se(c(o),(n,_)=>(s(),h(Le,{id:n.id,key:n.id,title:n.title,text:n.text,icon:n.icon,type:n.type,loading:n.loading,progress:n.progress,tail:_===c(o).length-1,dense:d.sidebarOpen===!1,"show-close":n.persist===!0&&n.closeable!==!1,"always-show-text":n.alwaysShowText,"dismiss-icon":n.dismissIcon,"dismiss-text":n.dismissText,"dismiss-action":n.dismissAction},null,8,["id","title","text","icon","type","loading","progress","tail","dense","show-close","always-show-text","dismiss-icon","dismiss-text","dismiss-action"]))),128))]),_:3},8,["class"]))}}),Jt=F(Zt,[["__scopeId","data-v-f0dfbda2"]]),Kt={class:"icon"},Qt={key:0,class:"title"},Xt=j({__name:"sidebar-button",props:{to:{},icon:{default:"box"},active:{type:Boolean}},emits:["click"],setup(r){const e=he(),{sidebarOpen:o}=Ne(e);return(d,t)=>{const n=p("v-icon");return s(),h(Ee(d.to?"router-link":"button"),{class:R(["sidebar-button",{active:d.active}]),onClick:t[0]||(t[0]=_=>d.$emit("click",_))},{default:a(()=>[U("div",Kt,[i(n,{name:d.icon},null,8,["name"])]),c(o)?(s(),N("div",Qt,[J(d.$slots,"default",{},void 0,!0)])):I("",!0)]),_:3},8,["class"])}}}),Yt=F(Xt,[["__scopeId","data-v-3acfa986"]]),en={class:"notifications-preview"},tn={key:0,class:"inline"},nn={class:"padding-box"},on=j({__name:"notifications-preview",props:{sidebarOpen:{type:Boolean},modelValue:{type:Boolean}},emits:["update:modelValue"],setup(r){const{t:e}=ae(),o=re(),{lastFour:d}=ie(o);return(t,n)=>{const _=p("router-link"),f=p("transition-expand"),w=Q("tooltip");return s(),N("div",en,[i(f,{tag:"div"},{default:a(()=>[t.modelValue?(s(),N("div",tn,[U("div",nn,[i(_,{class:R(["link",{"has-items":c(d).length>0}]),to:"/activity"},{default:a(()=>[L(D(c(e)("show_all_activity")),1)]),_:1},8,["class"]),i(De,{tag:"div",name:"notification",class:"transition"},{default:a(()=>[(s(!0),N(K,null,se(c(d),v=>(s(),h(Le,ft({key:v.id,ref_for:!0},v),null,16))),128))]),_:1})])])):I("",!0)]),_:1}),A((s(),h(Yt,{active:t.modelValue,class:"toggle",icon:"pending_actions",onClick:n[0]||(n[0]=v=>t.$emit("update:modelValue",!t.modelValue))},{default:a(()=>[L(D(c(e)("activity_log")),1)]),_:1},8,["active"])),[[w,!t.sidebarOpen&&c(e)("activity_log"),void 0,{left:!0}]])])}}}),sn=F(on,[["__scopeId","data-v-63e60302"]]),Ie=r=>Number.isFinite(r)?r:0;function an(r){return{days:Math.trunc(r/864e5),hours:Math.trunc(r/36e5%24),minutes:Math.trunc(r/6e4%60),seconds:Math.trunc(r/1e3%60),milliseconds:Math.trunc(r%1e3),microseconds:Math.trunc(Ie(r*1e3)%1e3),nanoseconds:Math.trunc(Ie(r*1e6)%1e3)}}function ln(r){return{days:r/86400000n,hours:r/3600000n%24n,minutes:r/60000n%60n,seconds:r/1000n%60n,milliseconds:r%1000n,microseconds:0n,nanoseconds:0n}}function rn(r){switch(typeof r){case"number":{if(Number.isFinite(r))return an(r);break}case"bigint":return ln(r)}throw new TypeError("Expected a finite number or bigint")}const un=r=>r===0||r===0n,cn=(r,e)=>e===1||e===1n?r:`${r}s`,dn=1e-7,vn=24n*60n*60n*1000n;function ge(r,e){const o=typeof r=="bigint";if(!o&&!Number.isFinite(r))throw new TypeError("Expected a finite number or bigint");e={...e};const d=r<0?"-":"";r=r<0?-r:r,e.colonNotation&&(e.compact=!1,e.formatSubMilliseconds=!1,e.separateMilliseconds=!1,e.verbose=!1),e.compact&&(e.unitCount=1,e.secondsDecimalDigits=0,e.millisecondsDecimalDigits=0);let t=[];const n=(u,b)=>{const k=Math.floor(u*10**b+dn);return(Math.round(k)/10**b).toFixed(b)},_=(u,b,k,y)=>{if(!((t.length===0||!e.colonNotation)&&un(u)&&!(e.colonNotation&&k==="m"))){if(y??(y=String(u)),e.colonNotation){const m=y.includes(".")?y.split(".")[0].length:y.length,W=t.length>0?2:1;y="0".repeat(Math.max(0,W-m))+y}else y+=e.verbose?" "+cn(b,u):k;t.push(y)}},f=rn(r),w=BigInt(f.days);if(_(w/365n,"year","y"),_(w%365n,"day","d"),_(Number(f.hours),"hour","h"),_(Number(f.minutes),"minute","m"),e.separateMilliseconds||e.formatSubMilliseconds||!e.colonNotation&&r<1e3){const u=Number(f.seconds),b=Number(f.milliseconds),k=Number(f.microseconds),y=Number(f.nanoseconds);if(_(u,"second","s"),e.formatSubMilliseconds)_(b,"millisecond","ms"),_(k,"microsecond","µs"),_(y,"nanosecond","ns");else{const m=b+k/1e3+y/1e6,W=typeof e.millisecondsDecimalDigits=="number"?e.millisecondsDecimalDigits:0,O=m>=1?Math.round(m):Math.ceil(m),B=W?m.toFixed(W):O;_(Number.parseFloat(B),"millisecond","ms",B)}}else{const u=(o?Number(r%vn):r)/1e3%60,b=typeof e.secondsDecimalDigits=="number"?e.secondsDecimalDigits:1,k=n(u,b),y=e.keepDecimalsOnWholeSeconds?k:k.replace(/\.0+$/,"");_(Number.parseFloat(y),"second","s",y)}if(t.length===0)return d+"0"+(e.verbose?" milliseconds":"ms");const v=e.colonNotation?":":" ";return typeof e.unitCount=="number"&&(t=t.slice(0,Math.max(e.unitCount,1))),d+t.join(v)}const _n={class:"latency-indicator"},mn=j({__name:"latency-indicator",setup(r){const{t:e}=ae(),o=nt(),d=S(()=>{const w=_e.sortBy(o.latency,["timestamp"]);return w[w.length-1]}),t=S(()=>{if(!o.latency||o.latency.length===0)return 0;const w=_e.sortBy(o.latency,["timestamp"]),v=w.slice(Math.max(w.length-5,0));let u=0;for(const{latency:b}of v)u+=b;return Math.round(u/v.length)}),n=S(()=>t.value<=250?4:t.value>250&&t.value<=500?3:t.value>500&&t.value<=750?2:1),_=S(()=>{switch(n.value){case 4:return`${e("connection_excellent")}
(${ge(t.value)} ${e("latency")})`;case 3:return`${e("connection_good")}
(${ge(t.value)} ${e("latency")})`;case 2:return`${e("connection_fair")}
(${ge(t.value)} ${e("latency")})`;case 1:return`${e("connection_poor")}
(${ge(t.value)} ${e("latency")})`;default:return null}}),f=S(()=>{switch(n.value){case 4:return"signal_wifi_4_bar";case 3:return"signal_wifi_3_bar";case 2:return"signal_wifi_2_bar";case 1:return"signal_wifi_1_bar";default:return null}});return(w,v)=>{const u=p("v-progress-circular"),b=p("v-icon"),k=Q("tooltip");return A((s(),N("div",_n,[d.value?(s(),h(b,{key:1,name:f.value},null,8,["name"])):(s(),h(u,{key:0,indeterminate:""}))])),[[k,_.value,void 0,{bottom:!0,end:!0}]])}}}),pn=F(mn,[["__scopeId","data-v-93933dfa"]]),fn={class:"project-info"},gn={class:"name-container"},hn=j({__name:"project-info",setup(r){const e=ot(),o=S(()=>{var t,n;return(n=(t=e.info)==null?void 0:t.project)==null?void 0:n.project_name}),d=S(()=>{var t,n;return(n=(t=e.info)==null?void 0:t.project)==null?void 0:n.project_descriptor});return(t,n)=>{const _=p("v-text-overflow");return s(),N("div",fn,[i(pn),U("div",gn,[i(_,{class:"name",text:o.value,placement:"bottom"},null,8,["text"]),d.value?(s(),h(_,{key:0,class:"descriptor",text:d.value,placement:"bottom"},null,8,["text"])):I("",!0)])])}}}),bn=F(hn,[["__scopeId","data-v-7234130c"]]),yn=j({__name:"sidebar-detail-group",props:{sidebarOpen:{type:Boolean}},setup(r){const e=r,o=st("sidebar-open-detail",[]),d=x(!1);return oe(()=>e.sidebarOpen,async t=>{t===!1?o.value=[]:(d.value=!0,await gt(),d.value=!1)}),(t,n)=>{const _=p("v-item-group");return s(),h(_,{modelValue:c(o),"onUpdate:modelValue":n[0]||(n[0]=f=>Oe(o)?o.value=f:null),class:"sidebar-detail-group",scope:"sidebar-detail",mandatory:d.value},{default:a(()=>[J(t.$slots,"default",{},void 0,!0)]),_:3},8,["modelValue","mandatory"])}}}),wn=F(yn,[["__scopeId","data-v-abc8855b"]]),kn={class:"module-nav alt-colors"},$n={class:"module-nav-content"},Sn={class:"content-wrapper"},Cn={class:"flex-container"},Nn=j({__name:"private-view",props:{title:{},smallHeader:{type:Boolean},headerShadow:{type:Boolean,default:!0},splitView:{type:Boolean},splitViewMinWidth:{default:0},sidebarShadow:{type:Boolean}},emits:["update:splitView"],setup(r,{emit:e}){var C,V;const o={moduleBarWidth:60,minModuleNavWidth:220,minContentWidth:590,collapsedSidebarWidth:60,overlaySpace:60},d=r,t=e,{t:n}=ae(),_=Te(),f=S(()=>d.title??null),w=vt(d,"splitView",t),v=x(),u=x(),b=x();let k;const y=()=>{var l;clearTimeout(k),(l=v.value)==null||l.classList.remove("hide-overflow-x")};oe(w,()=>{if(!v.value||!u.value)return;v.value.classList.add("hide-overflow-x","hide-overflow-y"),k=setTimeout(y,1500);let l,g;const q=()=>{var ne;clearTimeout(l),g==null||g(),(ne=v.value)==null||ne.classList.remove("hide-overflow-y")};l=setTimeout(q,1500),g=at(u.value,"transitionend",q)});const{width:m}=lt(),{width:W}=_t(b),O=S(()=>{if(!w.value)return!0;let l;return m.value>=1260?l=m.value-o.moduleBarWidth-o.minModuleNavWidth-o.minContentWidth-W.value:m.value>=960?l=m.value-o.moduleBarWidth-o.minModuleNavWidth-o.minContentWidth-o.collapsedSidebarWidth:l=m.value-o.minContentWidth,l>=d.splitViewMinWidth}),{data:B}=it("module-width",{}),M=x(fe((C=B.value)==null?void 0:C.nav,o.minModuleNavWidth));oe(M,_e.debounce(l=>{B.value={...B.value??{},nav:l}},300));const G=x(fe((V=B.value)==null?void 0:V.main,o.minContentWidth));oe(G,_e.debounce(l=>{B.value={...B.value??{},main:l}},300));const X=x(!1),H=S(()=>{const l=w.value?d.splitViewMinWidth:0,g=O.value?o.minContentWidth+l:o.minContentWidth;let q;return m.value>=1260?q=m.value-o.moduleBarWidth-g-W.value:m.value>=960?q=m.value-o.moduleBarWidth-g-o.collapsedSidebarWidth:q=m.value-o.moduleBarWidth+o.overlaySpace,Math.max(q,o.minModuleNavWidth)}),Y=S(()=>{const l=w.value?d.splitViewMinWidth:0;let g;return m.value>=1260?g=m.value-o.moduleBarWidth-M.value-l-W.value:m.value>=960?g=m.value-o.moduleBarWidth-M.value-l-o.collapsedSidebarWidth:g=m.value-l,Math.max(g,o.minContentWidth)}),ee=S(()=>({snapZones:[{width:40,snapPos:o.minModuleNavWidth,direction:"left"},{width:40,snapPos:H.value,direction:"right"}]})),le=x(!1),te=S(()=>({snapZones:[{width:40,snapPos:o.minContentWidth,direction:"left"},{width:40,snapPos:Y.value,direction:"right"}],alwaysShowHandle:!0,disableTransition:X.value})),z=x(!1),T=be(),me=he(),pe=S(()=>{var l;return T.currentUser?((l=T.currentUser)==null?void 0:l.app_access)||!1:!0}),ue=x(!1),{sidebarOpen:P,fullScreen:ce}=ie(me),ye=S(()=>T.currentUser&&"appearance"in T.currentUser?T.currentUser.appearance:"auto");ht("main-element",v),_.afterEach(()=>{var l;(l=v.value)==null||l.scrollTo({top:0}),ce.value=!1}),mt({title:f});function we(l){l.target&&l.target.classList.contains("close")===!1&&(P.value=!0)}function fe(l,g){return l&&!Number.isNaN(l)?Number(l):g}return(l,g)=>{const q=p("v-button"),ne=p("v-info"),de=p("v-overlay");return pe.value===!1?(s(),h(ne,{key:0,center:"",title:c(n)("no_app_access"),type:"danger",icon:"block"},{append:a(()=>[i(q,{to:"/logout"},{default:a(()=>[L(D(c(n)("switch_user")),1)]),_:1})]),default:a(()=>[L(D(c(n)("no_app_access_copy"))+" ",1)]),_:1},8,["title"])):(s(),N("div",{key:1,class:R(["private-view",{appearance:ye.value,"full-screen":c(ce),splitView:l.splitView}])},[U("aside",{id:"navigation",role:"navigation","aria-label":"Module Navigation",class:R({"is-open":z.value,"has-shadow":l.sidebarShadow})},[i(It),i(Be,{width:M.value,"onUpdate:width":g[0]||(g[0]=E=>M.value=E),"min-width":o.minModuleNavWidth,"max-width":H.value,options:ee.value,onDragging:g[1]||(g[1]=E=>X.value=E),onTransitionEnd:y},{default:a(()=>[U("div",kn,[i(bn),U("div",$n,[J(l.$slots,"navigation",{},void 0,!0)])])]),_:3},8,["width","min-width","max-width","options"])],2),U("div",{id:"main-content",ref_key:"contentEl",ref:v,class:"content"},[i(rt,{ref_key:"headerBarEl",ref:u,small:l.smallHeader||l.splitView,shadow:l.headerShadow||l.splitView,"show-sidebar-toggle":"",title:l.title,"onToggle:sidebar":g[2]||(g[2]=E=>P.value=!c(P)),onPrimary:g[3]||(g[3]=E=>z.value=!z.value)},bt({_:2},[se(l.$slots,(E,ve)=>({name:ve,fn:a(ke=>[J(l.$slots,ve,yt(wt(ke)),void 0,!0)])}))]),1032,["small","shadow","title"]),U("div",Sn,[i(Be,{width:G.value,"onUpdate:width":g[4]||(g[4]=E=>G.value=E),"min-width":o.minContentWidth,"max-width":Y.value,disabled:!c(w),options:te.value,onDragging:g[5]||(g[5]=E=>le.value=E)},{default:a(()=>[A(U("main",null,[J(l.$slots,"default",{},void 0,!0)],512),[[Pe,O.value]])]),_:3},8,["width","min-width","max-width","disabled","options"]),l.splitView?(s(),N("div",{key:0,id:"split-content",class:R({"is-dragging":le.value})},[J(l.$slots,"splitView",{},void 0,!0)],2)):I("",!0)])],512),U("aside",{id:"sidebar",ref_key:"sidebarEl",ref:b,role:"contentinfo",class:R(["alt-colors",{"is-open":c(P),"has-shadow":l.sidebarShadow}]),"aria-label":"Module Sidebar",onClick:we},[U("div",Cn,[i(wn,{"sidebar-open":c(P)},{default:a(()=>[J(l.$slots,"sidebar",{},void 0,!0)]),_:3},8,["sidebar-open"]),g[9]||(g[9]=U("div",{class:"spacer"},null,-1)),i(sn,{modelValue:ue.value,"onUpdate:modelValue":g[6]||(g[6]=E=>ue.value=E),"sidebar-open":c(P)},null,8,["modelValue","sidebar-open"])])],2),i(de,{class:"nav-overlay",active:z.value,onClick:g[7]||(g[7]=E=>z.value=!1)},null,8,["active"]),i(de,{class:"sidebar-overlay",active:c(P),onClick:g[8]||(g[8]=E=>P.value=!1)},null,8,["active"]),i(jt),ue.value===!1?(s(),h(Jt,{key:0,"sidebar-open":c(P)},null,8,["sidebar-open"])):I("",!0),i(Et)],2))}}}),Un=F(Nn,[["__scopeId","data-v-678d6a4d"]]);export{Un as PrivateView,Un as default};
